require("include")

function m080_040()
  Fade_Out(0, 0)
  EVENT_BEGIN()
  Talk.Load("m080")
  SetEventCutNo(2)
  if Debug.IsEventView() then
    SetTimeZone("Noon")
    SetTimeAxis("A2020_dbef_80")
    LoadMap("t0303")
  end
  LoadModel("HERO_01", "Player")
  LoadModel("HEROINE_01", "char_HEROINE")
  LoadModel("AEGIOMON_B_01", "char_AEGIOMON_PLAIN_CLOTHES")
  Vista.LoadAnimationFace("HERO_01", "e01", "m01")
  Vista.LoadAnimationFace("HERO_01", "e02", "m02")
  Vista.LoadAnimationFace("HERO_01", "e03", "m03")
  Vista.LoadAnimationFace("HERO_01", "e04", "m04")
  Vista.LoadAnimationFace("HERO_01", "e05", "m05")
  Vista.LoadAnimationFace("HERO_01", "e06", "m06")
  Vista.LoadAnimationFace("HERO_01", "e07", "m07")
  Vista.LoadAnimationFace("HERO_01", "e08", "m08")
  Vista.LoadAnimationFace("HERO_01", "e09", "m09")
  Vista.LoadAnimationFace("HERO_01", "e10", "m10")
  Vista.LoadAnimationFace("HERO_01", "e11", "m11")
  Vista.LoadAnimationFace("HERO_01", "e12", "m12")
  Vista.LoadAnimationFace("HERO_01", "e13", "m13")
  Vista.LoadAnimationFace("HERO_01", "e14", "m14")
  Vista.LoadAnimationFace("HERO_01", "e15", "m15")
  Vista.LoadAnimationFace("HERO_01", "e16", "m16")
  Vista.LoadAnimationFace("HEROINE_01", "e01", "m01")
  Vista.LoadAnimationFace("HEROINE_01", "e02", "m02")
  Vista.LoadAnimationFace("HEROINE_01", "e03", "m03")
  Vista.LoadAnimationFace("HEROINE_01", "e04", "m04")
  Vista.LoadAnimationFace("HEROINE_01", "e05", "m05")
  Vista.LoadAnimationFace("HEROINE_01", "e06", "m06")
  Vista.LoadAnimationFace("HEROINE_01", "e07", "m07")
  Vista.LoadAnimationFace("HEROINE_01", "e08", "m08")
  Vista.LoadAnimationFace("HEROINE_01", "e09", "m09")
  Vista.LoadAnimationFace("HEROINE_01", "e10", "m10")
  Vista.LoadAnimationFace("HEROINE_01", "e11", "m11")
  Vista.LoadAnimationFace("HEROINE_01", "e12", "m12")
  Vista.LoadAnimationFace("HEROINE_01", "e13", "m13")
  Vista.LoadAnimationFace("HEROINE_01", "e14", "m14")
  Vista.LoadAnimationFace("HEROINE_01", "e15", "m15")
  Vista.LoadAnimationFace("HEROINE_01", "e16", "m16")
  Vista.LoadAnimationFace("AEGIOMON_B_01", "e01", "m01")
  Vista.LoadAnimationFace("AEGIOMON_B_01", "e02", "m02")
  Vista.LoadAnimationFace("AEGIOMON_B_01", "e03", "m03")
  Vista.LoadAnimationFace("AEGIOMON_B_01", "e04", "m04")
  Vista.LoadAnimationFace("AEGIOMON_B_01", "e05", "m05")
  Vista.LoadAnimationFace("AEGIOMON_B_01", "e06", "m06")
  Vista.LoadAnimationFace("AEGIOMON_B_01", "e07", "m07")
  Vista.LoadAnimationFace("AEGIOMON_B_01", "e08", "m08")
  Vista.LoadAnimationFace("AEGIOMON_B_01", "e09", "m09")
  Vista.LoadAnimationFace("AEGIOMON_B_01", "e10", "m10")
  Vista.LoadAnimationFace("AEGIOMON_B_01", "e11", "m11")
  Vista.LoadAnimationFace("AEGIOMON_B_01", "e12", "m12")
  Vista.LoadAnimationFace("AEGIOMON_B_01", "e13", "m13")
  Vista.LoadAnimationFace("AEGIOMON_B_01", "e14", "m14")
  Vista.LoadAnimationFace("AEGIOMON_B_01", "e15", "m15")
  Vista.LoadAnimationFace("AEGIOMON_B_01", "e16", "m16")
  LoadSceneViewerResource("c1.0", "m080_040_c1.0")
  LoadSceneViewerResource("c2.0", "m080_040_c2.0")
  LoadEnvironmentFile("c1.0", "es_m080_040_c1.0")
  LoadEnvironmentFile("c2.0", "es_m080_040_c2.0")
  WaitVistaLoad()
  SetPosition("HERO_01", 0.577, 0.227, -2.779, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 243.5, 0, "LINEAR", 0, 0)
  SetPosition("HEROINE_01", -0.57, -0.025, -1.753, "LINEAR", 0, 0)
  SetRotation("HEROINE_01", 0, 179, 0, "LINEAR", 0, 0)
  SetPosition("AEGIOMON_B_01", 0.288, 0.013, -2.236, "LINEAR", 0, 0)
  SetRotation("AEGIOMON_B_01", 0, 167, 0, "LINEAR", 0, 0)
  PlayMotion("HERO_01", "fn01_01", 0, true, 0)
  SetFace("HERO_01", "E16_M01", 0, 1, 0, 0)
  PlayMotion("HEROINE_01", "fn01_01", 0, true, 0)
  SetFace("HEROINE_01", "F16", 0, 1, 0, 0)
  PlayMotion("AEGIOMON_B_01", "fn01_01", 0, true, 0)
  SetFace("AEGIOMON_B_01", "E16_M07", 0, 1, 0, 0)
  BlendEye("HERO_01", 35, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", 62, 59, 0, true, "SCURVE", 0, 0)
  BlendEye("HERO_01", 16, 0, "SCURVE", 10, 0)
  BlendFace("HERO_01", 33, -8, 0, true, "SCURVE", 30, 0)
  BlendEye("HEROINE_01", 37, 0, "SCURVE", 0, 0)
  BlendFace("HEROINE_01", 25, -57, 0, true, "SCURVE", 0, 0)
  BlendEye("HEROINE_01", 0, 0, "SCURVE", 10, 0)
  BlendFace("HEROINE_01", 12, -16, 0, true, "SCURVE", 30, 0)
  BlendEye("AEGIOMON_B_01", 22, 0, "SCURVE", 0, 0)
  BlendFace("AEGIOMON_B_01", 50, 1, 0, true, "SCURVE", 0, 0)
  MovePosition("AEGIOMON_B_01", -0.174, 0.383, -3.237, true, 1, 0)
  MoveRotation("AEGIOMON_B_01", 0, 196, 0, "LINEAR", 1, true, 0)
  MovePosition("HEROINE_01", -0.55, -0.025, -2.953, true, 1, 30)
  MoveRotation("HEROINE_01", 0, 179, 0, "LINEAR", 1, true, 30)
  BlendEye("HEROINE_01", 37, 0, "SCURVE", 30, 45)
  BlendFace("HEROINE_01", 40, -45, 0, true, "SCURVE", 30, 45)
  SetCamera(-1.071, 0.656, -4.764, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(0.152, 1.84, -2.464, "LINEAR", 0, false, 0)
  SetEnv_All("c1.0", 0)
  FIELD_SET()
  EVENT_START()
  if Debug.IsEventView() then
    ObjectInvisible(FOR_ALL)
  end
  CUT("1.0")
  Fade_In(0, FADE_TIME)
  WaitFrame(FADE_TIME)
  WaitFrame(30)
  BlendEye("AEGIOMON_B_01", -15, 0, "SCURVE", 15, 30)
  BlendFace("AEGIOMON_B_01", 13, -1, 0, true, "SCURVE", 30, 30)
  MessageTalk("m080_040_010")
  MessageClose()
  MOVE_WAIT("HEROINE_01")
  BlendEye("HERO_01", 0, 0, "SCURVE", 15, 0)
  BlendFace("HERO_01", -6, -42, 0, true, "SCURVE", 30, 0)
  BlendEye("HEROINE_01", 11, 0, "SCURVE", 10, 0)
  BlendFace("HEROINE_01", 7, -8, 0, true, "SCURVE", 30, 0)
  WaitFrame(50)
  BlendEye("HEROINE_01", 20, -27, "SCURVE", 15, 0)
  BlendFace("HEROINE_01", -10, -100, 18, true, "SCURVE", 30, 0)
  BlendEye("HERO_01", 10, 0, "SCURVE", 15, 10)
  BlendFace("HERO_01", 6, 27, 0, true, "SCURVE", 30, 20)
  MessageTalk("m080_040_020")
  MessageClose()
  WaitFrame(10)
  MessageTalkSel(3, "m080_040_030")
  result = Talk.GetResultSelectedNum()
  if result == RESULT_TALK00 then
    PlayMotionBlend("HERO_01", "blend01", 3, false, 0)
    SetFace("HERO_01", "F01", 0, 1, FACE_BLENDTIME, 0)
    SetMouth("HERO_01", 0, 0, 0)
    SetMouth("HERO_01", 1, 0, 30)
    WaitFrame(32)
  elseif result == RESULT_TALK01 then
    PlayMotion("HERO_01", "e002_01", 3, false, 0)
    SetFace("HERO_01", "F01", 0, 1, FACE_BLENDTIME, 0)
    SetMouth("HERO_01", 0, 0, 0)
    SetMouth("HERO_01", 1, 0, 30)
    WaitFrame(60)
  elseif result == RESULT_TALK02 then
    PlayMotion("HERO_01", "e002", 3, true, 0)
    SetFace("HERO_01", "F15", 0, 1, FACE_BLENDTIME, 0)
    SetMouth("HERO_01", 0, 0, 0)
    SetMouth("HERO_01", 1, 0, 30)
    WaitFrame(60)
  end
  BlendEye("HEROINE_01", 11, 0, "SCURVE", 10, 0)
  BlendFace("HEROINE_01", 7, -8, 0, true, "SCURVE", 30, 0)
  PlayMotion("HEROINE_01", "e007", 7, true, 0)
  SetFace("HEROINE_01", "F16", 0, 1, FACE_BLENDTIME, 0)
  WaitFrame(30)
  PlayMotion("AEGIOMON_B_01", "e002", 3, true, 0)
  SetFace("AEGIOMON_B_01", "E04_M01", 0, 1, FACE_BLENDTIME, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 15, 0)
  BlendFace("HERO_01", -6, -42, 0, true, "SCURVE", 30, 0)
  BlendEye("AEGIOMON_B_01", -5, 42, "SCURVE", 10, 0)
  BlendFace("AEGIOMON_B_01", -51, 100, -52, true, "SCURVE", 25, 0)
  MessageTalk("m080_040_040")
  MessageClose()
  WaitFrame(10)
  CUT("2.0")
  SetEnv_All("c2.0", 0)
  SetCamera(-1.448, 1.601, -3.548, 0, 35, "LINEAR", 0, false, 0)
  SetCameraTarget(-0.205, 1.565, -3.01, "LINEAR", 0, false, 0)
  EndMotion("HEROINE_01", 0)
  BlendEye("HEROINE_01", 30, -10, "SCURVE", 20, 0)
  BlendFace("HEROINE_01", 59, 2, 0, true, "SCURVE", 30, 0)
  BlendEye("HEROINE_01", 14, -20, "SCURVE", 30, 50)
  BlendFace("HEROINE_01", 11, -100, 23, true, "SCURVE", 30, 50)
  PlayMotionBlend("HEROINE_01", "blend01", 3, false, 0)
  SetFace("HEROINE_01", "F15", 0, 1, FACE_BLENDTIME, 0)
  SetFace("AEGIOMON_B_01", "F15", 0, 1, FACE_BLENDTIME, 0)
  SetFace("HERO_01", "F15", 0, 1, FACE_BLENDTIME, 0)
  MessageTalk("m080_040_050")
  MessageClose()
  ENDMOTION_WAIT("HEROINE_01", 0)
  BlendEye("HERO_01", 8, 20, "SCURVE", 15, 0)
  BlendFace("HERO_01", -5, 12, 0, true, "SCURVE", 25, 0)
  WaitFrame(20)
  PlayMotionBlend("HERO_01", "blend01", 3, false, 0)
  WaitFrame(30)
  Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
  EVENT_END()
end

function CUT(cut_no)
  CUT_START(cut_no)
end

function main()
  m080_040()
end

S110_100 = {
  ID = 100,
  STEP_001 = 1,
  STEP_005 = 5,
  STEP_010 = 10,
  STEP_015 = 15,
  STEP_255 = 255,
  Flg01 = "FLAG_SUB_110_100_001",
  Flg02 = "FLAG_SUB_110_100_002",
  Flg03 = "FLAG_SUB_110_100_003",
  Flg04 = "FLAG_SUB_110_100_004",
  Flg05 = "FLAG_SUB_110_100_005",
  Flg06 = "FLAG_SUB_110_100_006",
  Flg07 = "FLAG_SUB_110_100_007",
  Flg08 = "FLAG_SUB_110_100_008",
  Flg09 = "FLAG_SUB_110_100_009",
  Flg15 = "FLAG_SUB_110_100_015"
}
local text_file = "s110_100"
local base = "s110_100_"

function S110_100:Event_010()
  local dorumon_index = GetIndex(NPC, "s110_100_002")
  local vmon_index = GetIndex(NPC, "s110_100_001")
  Field.ObjectLoadMotion(NPC, dorumon_index, "bn01")
  Field.ObjectLoadMotion(NPC, dorumon_index, "bn02")
  Field.ObjectLoadMotion(NPC, dorumon_index, "fe02")
  Field.ObjectLoadMotion(NPC, dorumon_index, "fe04")
  Field.ObjectLoadMotion(NPC, dorumon_index, "fq01")
  Field.ObjectLoadMotion(NPC, dorumon_index, "fq02")
  Field.ObjectLoadMotion(NPC, vmon_index, "bn01")
  Field.ObjectLoadMotion(NPC, vmon_index, "bn02")
  Field.ObjectLoadMotion(NPC, vmon_index, "br01")
  Field.ObjectLoadMotion(NPC, vmon_index, "fe02")
  Field.ObjectLoadMotion(NPC, vmon_index, "fe04")
  Field.ObjectLoadMotion(NPC, vmon_index, "fq01")
  Field.ObjectLoadMotion(NPC, vmon_index, "fq02")
  Field.ObjectLoadMotion(PLAYER, 1, "e002")
  Field.ObjectLoadMotion(PLAYER, 1, "e004")
  Field.ObjectLoadMotion(PLAYER, 1, "e004_01")
  Field.ObjectLoadMotion(PLAYER, 1, "e008")
  Field.ObjectLoadMotion(PLAYER, 1, "e010_01")
  Field.ObjectLoadMotion(PLAYER, 1, "e012")
  Field.ObjectLoadMotion(PLAYER, 1, "e013")
  Field.ObjectLoadMotion(PLAYER, 1, "e015")
  Field.ObjectLoadMotion(PLAYER, 1, "e018")
  Field.ObjectLoadMotion(PLAYER, 1, "e019")
  if Qst.Main:IsCompleted(M300.ID) and not Flg.Check(self.Flg01) then
    local tlk = Tlk:new(text_file, 1, true)
    Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
    tlk:StartTalkAndCancelDigimonRide()
    HideMinimap(true)
    HideGuide(true)
    Cam.Inst:Set(8.883, -2.756, 59.72, 1.485, -0.653, 66.17, default, 0)
    Obj:new(PLAYER, ""):SetPos(4.36, -2.7, 64.3, true)
    Obj:new(PLAYER, ""):SetRotationY(30, 0)
    WaitFrame(15)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    Field.ObjectLookAtTheObject(NPC, dorumon_index, PLAYER, 1, 30)
    tlk:Message(base .. "010")
    Field.ObjectResetAim(NPC, dorumon_index, 20)
    tlk:Message(base .. "020")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, vmon_index, "fq01", 10, 10)
    tlk:Message(base .. "030")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, dorumon_index, "fq02", 10, 10)
    tlk:Message(base .. "040")
    Field.ObjectLookAtTheObject(NPC, dorumon_index, PLAYER, 1, 30)
    tlk:Message(base .. "050")
    Field.ObjectResetAim(NPC, dorumon_index, 20)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, dorumon_index, "fq01", 10, 10)
    tlk:Message(base .. "060")
    Flg.Set(self.Flg04)
    Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
    FieldObjectSync(NPC, true)
    Obj:new(NPC, "s110_100_001"):SetRotationY(210, 0)
    WaitFrame(25)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    Cam.Inst:Set(2.284, -3.65, 57.192, 6, -1.092, 66.11, default, 30)
    WaitFrame(30)
    Field.ObjectPlayMotion(NPC, vmon_index, "bn01", 10, true)
    Field.ObjectLookAtTheObject(NPC, vmon_index, PLAYER, 1, 30)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, vmon_index, "fq02", 10, 10)
    tlk:Message(base .. "070")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, vmon_index, "fe02", 10, 10)
    tlk:Message(base .. "080")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, vmon_index, "fq01", 10, 10)
    tlk:Message(base .. "090")
    local result = tlk:Select(3, base .. "100")
    WaitFrame(15)
    if result == RESULT_TALK00 then
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, vmon_index, "fe02", 10, 10)
      tlk:Message(base .. "110")
    elseif result == RESULT_TALK01 then
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, vmon_index, "fe02", 10, 10)
      tlk:Message(base .. "120")
    elseif result == RESULT_TALK02 then
      Flg.Set(self.Flg01)
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, vmon_index, "fq02", 10, 10)
      tlk:Message(base .. "130")
      Field.ObjectResetAim(NPC, vmon_index, 20)
      Cam.Inst:Clear(30)
      WaitFrame(30)
      tlk:EndTalk()
      HideMinimap(false)
      HideGuide(false)
      goto lbl_652
    end
    tlk:Message(base .. "180")
    tlk:EndTalk(true)
    Flg.Set(self.Flg02)
    Qst.Sub:Set(self.ID, self.STEP_005)
    Qst.Sub:Start(self.ID, 1, false)
    TIME_AXIS = AXIS_ORIGINAL
    TIME_AXIS_SET = "A2020_dbef_119"
    TIME_ZONE = NOON
    WaitFrame(1)
    MapChange("t", 104, "start_20", true, FADE_BLACK, FADE_TIME)
  elseif Qst.Main:IsCompleted(M300.ID) and Flg.Check(self.Flg01) then
    local tlk = Tlk:new(text_file, 1, true)
    tlk:StartTalkActionAndZoom("s110_100_001")
    HideMinimap(true)
    HideGuide(true)
    tlk:Message(base .. "140")
    local result = tlk:Select(2, base .. "150")
    WaitFrame(15)
    if result == RESULT_TALK00 then
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, vmon_index, "fq01", 10, 10)
      tlk:Message(base .. "160")
    elseif result == RESULT_TALK01 then
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, vmon_index, "fq01", 10, 10)
      tlk:Message(base .. "170")
      tlk:EndTalkActionAndZoom()
      HideMinimap(false)
      HideGuide(false)
      goto lbl_652
    end
    Qst.Sub:Start(self.ID, 1, false)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, vmon_index, "fe02", 10, 10)
    tlk:Message(base .. "180")
    tlk:EndTalk(true)
    Flg.Set(self.Flg02)
    Qst.Sub:Set(self.ID, self.STEP_005)
    MapChange("t", 104, "start_20", true, FADE_BLACK, FADE_TIME)
  end
  ::lbl_652::
end

function S110_100:Event_020()
  if Qst.Sub:Check(self.ID, self.STEP_005, self.STEP_010) then
    local vmon_index = GetIndex(NPC, "s110_100_vmon_01")
    local magunamon_index = GetIndex(NPC, "s110_100_maguna_01")
    Field.SetMobTransparentFrontOfCamera(0, 10, 10, 10)
    Field.ObjectLoadMotion(NPC, magunamon_index, "fw01_01")
    Obj:new(PLAYER, ""):SetPos(-14.41, -0.0376, -17.278, true)
    Obj:new(PLAYER, ""):SetRotationY(90, 0)
    SetFollowerCameraOperateRotation(0, 90)
    Cam.Inst:Set(-8.97, 0.2, -16.47, -18.92, 1.12, -16.66, default, 0)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    local tlk = Tlk:new(text_file, 1, true)
    tlk:StartTalkAndCancelDigimonRide()
    PlayerLookAtObject(NPC, "s110_100_vmon_01")
    Field.ObjectLookAtTheObject(NPC, vmon_index, PLAYER, 1, 30)
    Field.ObjectLoadMotion(NPC, vmon_index, "bn01")
    Field.ObjectLoadMotion(NPC, vmon_index, "bn02")
    Field.ObjectLoadMotion(NPC, vmon_index, "br01")
    Field.ObjectLoadMotion(NPC, vmon_index, "fe02")
    Field.ObjectLoadMotion(NPC, vmon_index, "fe04")
    Field.ObjectLoadMotion(NPC, vmon_index, "fq01")
    Field.ObjectLoadMotion(NPC, vmon_index, "fq02")
    Field.ObjectLoadMotion(PLAYER, 1, "e002")
    Field.ObjectLoadMotion(PLAYER, 1, "e004")
    Field.ObjectLoadMotion(PLAYER, 1, "e004_01")
    Field.ObjectLoadMotion(PLAYER, 1, "e008")
    Field.ObjectLoadMotion(PLAYER, 1, "e010_01")
    Field.ObjectLoadMotion(PLAYER, 1, "e012")
    Field.ObjectLoadMotion(PLAYER, 1, "e013")
    Field.ObjectLoadMotion(PLAYER, 1, "e015")
    Field.ObjectLoadMotion(PLAYER, 1, "e018")
    Field.ObjectLoadMotion(PLAYER, 1, "e019")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, vmon_index, "fe02", 10, 10)
    tlk:Message(base .. "230")
    tlk:Message(base .. "240")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, vmon_index, "fq01", 10, 10)
    tlk:Message(base .. "250")
    while true do
      local result = tlk:Select(3, base .. "260")
      WaitFrame(15)
      if result == RESULT_TALK00 then
        Field.ObjectPlayMotionWithStartMoveMotion(NPC, vmon_index, "fq02", 10, 10)
        tlk:Message(base .. "270")
      elseif result == RESULT_TALK01 then
        tlk:Message(base .. "280")
        Field.ObjectPlayMotionWithStartMoveMotion(NPC, vmon_index, "fe02", 10, 10)
        tlk:Message(base .. "290")
        Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
        Flg.Set("FLAG_SUB_110_100_010")
        Field.ObjectResetAim(PLAYER, 1, 20)
        FieldObjectSync(NPC, false)
        break
      elseif result == RESULT_TALK02 then
        Field.ObjectPlayMotionWithStartMoveMotion(NPC, vmon_index, "fq01", 10, 10)
        tlk:Message(base .. "300")
      end
    end
    Cam.Inst:Set(-10.2723, 0.34, -8.318, -10.347, 1.54, -18.241, default, 0)
    Obj:new(PLAYER, ""):SetPos(-10.639, 0, -15.4504)
    Obj:new(PLAYER, ""):SetRotationY(180, 0)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    WaitFrame(15)
    Field.ObjectFrameMove2D(FLD_OBJ_PLAYER, 1, 180, 1, 30)
    Field.ObjectFrameMove2D(NPC, magunamon_index, 180, 1, 30)
    Flg.Set("FLAG_SUB_110_100_011")
    WaitFrame(15)
    Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
    WaitFrame(30)
    FieldObjectSync(NPC, false)
    Obj:new(PLAYER, ""):Invisible(0)
    Cam.Inst:Set(-10.017, -0.7485, -7.151, -10.2425, 2.88, -16.464, default, 0)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    tlk:Message(base .. "310")
    tlk:Message(base .. "320")
    tlk:Message(base .. "330")
    result = tlk:Select(3, base .. "340")
    WaitFrame(15)
    if result == RESULT_TALK00 then
      tlk:Message(base .. "370")
    elseif result == RESULT_TALK01 then
      tlk:Message(base .. "380")
    elseif result == RESULT_TALK02 then
      tlk:Message(base .. "390")
    end
    tlk:Message(base .. "400")
    tlk:Message(base .. "410")
    Flg.Set(self.Flg03)
    BackFadeOutWithWait(FADE_BLACK, 15)
    WaitFrame(30)
    tlk:Message(base .. "1030")
    Qst.Sub:Set(self.ID, self.STEP_010)
    tlk:EndTalk()
    Field.ClearMobTransparentFrontOfCamera(0)
    Flg.Set("FLAG_SKIP_AREACHANGE_MOVE")
    BackFadeInWithWait(FADE_BLACK, 0)
    Field.ClearMobTransparentFrontOfCamera(0)
    MapChange("d", 406, "start_01", true, FADE_BLACK, 0)
  end
end

function S110_100:Event_030()
  if Qst.Sub:Check(self.ID, self.STEP_010, self.STEP_015) then
    local vmon_index = GetIndex(NPC, "s110_100_vmon_01")
    local magunamon_index = GetIndex(NPC, "s110_100_maguna_01")
    Field.ObjectLoadMotion(NPC, vmon_index, "bn01")
    Field.ObjectLoadMotion(NPC, vmon_index, "bn02")
    Field.ObjectLoadMotion(NPC, vmon_index, "fe02")
    Field.ObjectLoadMotion(NPC, vmon_index, "fe04")
    Field.ObjectLoadMotion(NPC, vmon_index, "fq01")
    Field.ObjectLoadMotion(NPC, vmon_index, "fq02")
    Field.ObjectLoadMotion(NPC, magunamon_index, "bn01")
    Field.ObjectLoadMotion(NPC, magunamon_index, "bn02")
    Field.ObjectLoadMotion(NPC, magunamon_index, "fe02")
    Field.ObjectLoadMotion(NPC, magunamon_index, "fe04")
    Field.ObjectLoadMotion(NPC, magunamon_index, "fq01")
    Field.ObjectLoadMotion(NPC, magunamon_index, "fq02")
    Field.ObjectLoadMotion(PLAYER, 1, "e002")
    Field.ObjectLoadMotion(PLAYER, 1, "e004")
    Field.ObjectLoadMotion(PLAYER, 1, "e006")
    Field.ObjectLoadMotion(PLAYER, 1, "e004_01")
    Field.ObjectLoadMotion(PLAYER, 1, "e008")
    Field.ObjectLoadMotion(PLAYER, 1, "e010_01")
    Field.ObjectLoadMotion(PLAYER, 1, "e012")
    Field.ObjectLoadMotion(PLAYER, 1, "e013")
    Field.ObjectLoadMotion(PLAYER, 1, "e015")
    Field.ObjectLoadMotion(PLAYER, 1, "e018")
    Field.ObjectLoadMotion(PLAYER, 1, "e019")
    Cam.Inst:Set(3.022, -3.03, 55.8, 0.329, -1.263, 65.271, default, 0)
    Obj:new(PLAYER, ""):SetPos(0.68, -2.7, 61.88, true)
    Obj:new(PLAYER, ""):SetRotationY(30, 0)
    local tlk = Tlk:new(text_file, 1, true)
    tlk:StartTalkAndCancelDigimonRide()
    HideMinimap(true)
    HideGuide(true)
    PlayerLookAtObject(NPC, "s110_100_vmon_01")
    WaitFrame(15)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, vmon_index, "fq01", 10, 10)
    tlk:Message(base .. "420")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, vmon_index, "fe02", 10, 10)
    tlk:Message(base .. "430")
    PlaySE(404032, 100)
    Flg.Set(self.Flg06)
    Fade_OutNoLoadingWithWait(FADE_WHITE, FADE_TIME)
    Field.ObjectResetAim(PLAYER, 1, 20)
    Cam.Inst:Set(4.3635, -0.433, 57.12, -0.84, -1.38, 65.6, default, 0)
    FieldObjectSync(NPC, false)
    WaitFrame(90)
    PlayerLookAtObject(NPC, "s110_100_maguna_01")
    FadeAllInWithWait(FADE_WHITE, FADE_TIME)
    Field.ObjectPlayMotion(PLAYER, 1, "e013", 10, true)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, magunamon_index, "fe02", 10, 10)
    tlk:Message(base .. "440")
    tlk:Message(base .. "450")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, magunamon_index, "fq01", 10, 10)
    tlk:Message(base .. "460")
    Flg.Set(self.Flg05)
    Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
    FieldObjectSync(NPC, false)
    Field.ObjectPlayMotion(PLAYER, 1, "fn01_01", 10, true)
    Field.ObjectResetAim(PLAYER, 1, 20)
    WaitFrame(15)
    Cam.Inst:Clear(0)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    tlk:EndTalk()
    HideMinimap(false)
    HideGuide(false)
    Qst.Sub:Set(self.ID, self.STEP_015)
    Qst.Sub:End(self.ID, self.STEP_255)
  end
end

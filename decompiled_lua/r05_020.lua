require("include")

function r05_020(locator)
  EVENT_BEGIN()
  if Debug.IsEventView() then
    LoadMap("d0205")
    LoadLocater("d0205p")
  end
  Talk.Load("r05_020")
  SetEventCutNo(2)
  SetTimeZone("Noon")
  FldSetTimeAxis(PRESENT)
  SetMapStatus("Disable")
  LoadModel("HERO_01", "Player")
  LoadModel("chr142_01", "chr142")
  Vista.LoadAnimation("HERO_01", "r142_out01")
  Vista.LoadAnimation("chr142_01", "r142_out01")
  Vista.LoadAnimation("chr142_01", "e500")
  Vista.LoadAnimation("chr142_01", "e501")
  Vista.LoadAnimation("chr142_01", "fq01")
  Vista.LoadCameraAnimationID("cam_01", "Cam_r142_out01")
  Vista.LoadCameraAnimationID("cam_02", "Cam_r142_out02")
  LoadSceneViewerResource("c01", "r05_020_c01")
  LoadSceneViewerResource("c02", "r05_020_c02")
  LoadEnvironmentFile("c01", "es_r05_020_c01")
  LoadEnvironmentFile("c02", "es_r05_020_c02")
  WaitVistaLoad()
  SetCamera(44.535, 1.751, 90.044, 0, 50, "LINEAR", 0, false, 0)
  SetCameraTarget(44.222, 1.6, 88.224, "LINEAR", 0, false, 0)
  ResetEnvironmentSettings()
  SetSceneViewerResource("c01")
  SetEnvironmentFile("c01")
  FIELD_SET()
  Field_CancelInvisibleFollowerAllGuest(INVISIBLE_KEY_EVENT, 30, false, false)
  EVENT_START()
  CUT(1)
  if Debug.IsEventView() then
    AttachLocate("HERO_01", "ride_zip_0013")
    AttachLocate("chr142_01", "ride_zip_0013")
    PlayMotion("HERO_01", "r142_out01", 0, false, 0)
    PlayMotion("chr142_01", "r142_out01", 0, false, 0)
    PlayCamera("cam_01")
    LocateCamera("ride_zip_0013")
    WaitFrame(45)
  else
    AttachLocate("HERO_01", locator)
    AttachLocate("chr142_01", locator)
    PlayMotion("HERO_01", "r142_out01", 0, false, 0)
    PlayMotion("chr142_01", "r142_out01", 0, false, 0)
    PlayCamera("cam_01")
    LocateCamera(locator)
    WaitFrame(45)
  end
  CAM_WAIT(15)
  CUT(2)
  ResetEnvironmentSettings()
  SetSceneViewerResource("c02")
  SetEnvironmentFile("c02")
  PlayCamera("cam_02")
  SetPosition("chr142_01", 44.122, 0.011, 88.224, "LINEAR", 0, 0)
  SetRotation("chr142_01", 0, 30, 0, "LINEAR", 0, 0)
  SetScale("chr142_01", 1.3, 1.3, 1.3)
  PlayMotion("chr142_01", "e500", 0, false, 0)
  PlayMotion("chr142_01", "fq01", 4, true, 24)
  ChangeDigimonFace("chr142_01", EYE_EXPRESSION_NORMAL, 0)
  SetMouth("chr142_01", 1, 0, 0)
  BlendFaceDigi("chr142_01", 0, 0, 0, "LINEAR", 0, 0)
  WaitFrame(30)
  MessageTalk(10005020)
  MessageClose()
  WaitFrame(10)
  PlayMotion("chr142_01", "e501", 2, false, 0)
  WaitFrame(15)
  Field_CancelInvisiblePlayer(INVISIBLE_KEY_EVENT, 30, false, false)
  Field_CancelInvisibleFollowerAllGuest(INVISIBLE_KEY_EVENT, 30, false, false)
  Field_CancelInvisibleFollowerAllPartyMember(INVISIBLE_KEY_EVENT, 30, false, false)
  Field_CancelInvisibleNpc("", INVISIBLE_KEY_EVENT, 30, false, false)
  Field_CancelInvisibleAllSymbolEnemy(INVISIBLE_KEY_EVENT, 30, false, false)
  EVENT_END_SEAMLESS(30)
end

function CUT(cut_no)
  CUT_START()
end

function main()
  r05_020()
end

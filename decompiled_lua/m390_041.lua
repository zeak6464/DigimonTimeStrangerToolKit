require("include")

function m390_041()
  Fade_Out(1, 0)
  EVENT_BEGIN()
  Talk.Load("m390")
  SetEventCutNo("1.0")
  if Debug.IsEventView() then
    SetTimeZone("Night")
    SetTimeAxis("Z2028_daft_390")
    LoadMap("t3001")
  end
  LoadModel("HERO_01", "Player")
  LoadModel("MIREI_01", "char_MIREI_CHILD")
  LoadSceneViewerResource("c1.0", "t3001f_pn")
  LoadEnvironmentFile("c1.0", "es_m390_041_c1.0")
  WaitVistaLoad()
  SetPosition("HERO_01", 0.013, 0, -10.387, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 0, 0, "LINEAR", 0, 0)
  SetPosition("MIREI_01", -1.342, 0, -8.627, "LINEAR", 0, 0)
  SetRotation("MIREI_01", 0, 23, 0, "LINEAR", 0, 0)
  PlayMotion("HERO_01", "fn01_01", 0, true, 0)
  SetFace("HERO_01", "F15", 0, 1, FACE_BLENDTIME, 0)
  PlayMotion("MIREI_01", "fn01_01", 0, true, 0)
  SetFace("MIREI_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", 0, 0, 0, false, "SCURVE", 0, 0)
  BlendEye("MIREI_01", -30, 0, "SCURVE", 0, 0)
  BlendFace("MIREI_01", -19, 0, 0, false, "SCURVE", 0, 0)
  MovePosition("HERO_01", 0.013, 0, -8.6, false, 0.8, 0)
  MoveRotation("HERO_01", 0, 0, 0, "LINEAR", 0.8, true, 0)
  SetCamera(1.104, 1.726, -9.308, 0, 25, "LINEAR", 0, false, 0, false)
  SetCameraTarget(-0.92, 1.203, -11.215, "LINEAR", 0, false, 0, false)
  SetCamera(1.104, 1.726, -7.268, 0, 25, "LINEAR", 80, true, 5, false)
  SetCameraTarget(-0.92, 1.203, -9.175, "LINEAR", 80, true, 5, false)
  FIELD_SET()
  EVENT_START()
  CUT("1.0")
  SetEnv_All("c1.0", 0)
  Fade_In(1, 60)
  WaitFrame(60)
  SetFace("HERO_01", "F16", 0, 1, FACE_BLENDTIME, 10)
  BlendEye("HERO_01", 32, -43, "SCURVE", 15, 10)
  BlendFace("HERO_01", 33, -70, 0, false, "SCURVE", 30, 10)
  MessageTalk("m390_041_010")
  PlayMotion("MIREI_01", "e003", 3, false, 0)
  SetFace("MIREI_01", "F01", 2, 1, FACE_BLENDTIME, 0)
  SetFace("HERO_01", "F15", 0, 1, 6, 0)
  MessageTalk("m390_041_020")
  SetFace("MIREI_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  MessageTalk("m390_041_030")
  MessageClose()
  WaitFrame(10)
  SetFace("MIREI_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 20, 0)
  BlendFace("HERO_01", 0, 0, 0, false, "SCURVE", 40, 0)
  SetFace("HERO_01", "E03_M15", 2, 1, 3, 40)
  SetFace("HERO_01", "E03_M15", 1, 1, 6, 44)
  WaitFrame(60)
  MovePosition("HERO_01", 0.013, 0, -3.728, false, 0.8, 20)
  MoveRotation("HERO_01", 0, 0, 0, "LINEAR", 1, true, 20)
  WaitFrame(30)
  SetFace("HERO_01", "E03_M15", 0, 1, 0, 0)
  BlendEye("MIREI_01", 0, 0, "SCURVE", 30, 15)
  BlendFace("MIREI_01", -22, 23, -15, false, "SCURVE", 30, 15)
  Event_StopBGM(3, 0)
  Fade_OutNoLoadingWithWait(FADE_WHITE, 60)
  WaitFrame(60)
  Vista.SetKeepBGM()
  EVENT_END()
end

function CUT(cut_no)
  CUT_START(cut_no)
end

function main()
  m390_041()
end

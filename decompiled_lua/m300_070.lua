require("include")

function m300_070()
  Fade_Out(1, 0)
  EVENT_BEGIN()
  Talk.Load("m300")
  SetEventCutNo(8)
  if Debug.IsEventView() then
    SetTimeZone("Noon")
    SetTimeAxis("P2028_daft_300")
    LoadMap("d0404")
  end
  LoadModel("HERO_01", "Player")
  LoadModel("AEGIOMON_01", "char_AEGIOMON")
  LoadModel("HEROINE_01", "char_HEROINE")
  LoadModel("chr179_01", "char_BACCHUSMON")
  LoadModel("chr376_01", "char_TONOSAMAGEKOMON")
  LoadModel("chr399_01", "char_GEKOMON")
  LoadModel("chr042_01", "char_FUNBEEMON")
  LoadModel("chr399_02", "char_GEKOMON")
  LoadModel("chr582_01", "char_OTAMAMON")
  LoadSceneViewerResource("c1.0", "d0404f_ta")
  LoadSceneViewerResource("c2.0", "d0404f_ta")
  LoadSceneViewerResource("c3.0", "d0404f_ta")
  LoadSceneViewerResource("c4.0", "d0404f_ta")
  LoadSceneViewerResource("c5.0", "d0404f_ta")
  LoadSceneViewerResource("c6.0", "d0404f_ta")
  LoadSceneViewerResource("c7.0", "d0404f_ta")
  LoadSceneViewerResource("c8.0", "d0404f_ta")
  LoadEnvironmentFile("c1.0", "es_m300_070_c1.0")
  LoadEnvironmentFile("c2.0", "es_m300_070_c2.0")
  LoadEnvironmentFile("c3.0", "es_m300_070_c3.0")
  LoadEnvironmentFile("c4.0", "es_m300_070_c4.0")
  LoadEnvironmentFile("c5.0", "es_m300_070_c5.0")
  LoadEnvironmentFile("c6.0", "es_m300_070_c6.0")
  LoadEnvironmentFile("c7.0", "es_m300_070_c7.0")
  LoadEnvironmentFile("c8.0", "es_m300_070_c8.0")
  WaitVistaLoad()
  Event_StopBGM(0, 0)
  SetPosition("HERO_01", 5.95, -0.221, -5.75, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 190, 0, "LINEAR", 0, 0)
  SetPosition("AEGIOMON_01", 6.6, -0.22, -5.75, "LINEAR", 0, 0)
  SetRotation("AEGIOMON_01", 0, 195, 0, "LINEAR", 0, 0)
  SetPosition("HEROINE_01", 5.32, -0.228, -5.615, "LINEAR", 0, 0)
  SetRotation("HEROINE_01", 0, 190, 0, "LINEAR", 0, 0)
  SetPosition("chr179_01", 1.97, -0.033, -20.1, "LINEAR", 0, 0)
  SetRotation("chr179_01", 0, 0, 0, "LINEAR", 0, 0)
  SetScale("chr179_01", 2, 2, 2)
  SetPosition("chr376_01", 21.24, 0.316, -13.354, "LINEAR", 0, 0)
  SetRotation("chr376_01", -50, -38.648, 0, "LINEAR", 0, 0)
  SetScale("chr376_01", 1.5, 1.5, 1.5)
  SetPosition("chr399_01", 18.743, -0.047, -11.59, "LINEAR", 0, 0)
  SetRotation("chr399_01", 0, -9.35, 0, "LINEAR", 0, 0)
  SetScale("chr399_01", 1, 1, 1)
  SetPosition("chr042_01", 15.8, -0.169, -7.7, "LINEAR", 0, 0)
  SetRotation("chr042_01", 0, 37, 0, "LINEAR", 0, 0)
  SetScale("chr042_01", 0.48, 0.48, 0.48)
  SetPosition("chr399_02", 21.9, -0.315, -8.482, "LINEAR", 0, 0)
  SetRotation("chr399_02", 0, -65.4, 0, "LINEAR", 0, 0)
  SetScale("chr399_02", 1, 1, 1)
  SetPosition("chr582_01", 19.878, -0.173, -9.496, "LINEAR", 0, 0)
  SetRotation("chr582_01", 0, -73.442, 0, "LINEAR", 0, 0)
  SetScale("chr582_01", 1, 1, 1)
  PlayMotion("HERO_01", "fn01_01", 0, true, 0)
  SetFace("HERO_01", "F01", 0, 1, 0, 0)
  PlayMotion("AEGIOMON_01", "fn01_01", 0, true, 0)
  SetFace("AEGIOMON_01", "F01", 0, 1, 0, 0)
  PlayMotion("HEROINE_01", "fn01_01", 0, true, 0)
  SetFace("HEROINE_01", "F01", 0, 1, 0, 0)
  PlayMotion("chr179_01", "e100", 0, true, 0)
  SetFace("chr179_01", "F01", 0, 1, 0, 0)
  PlayMotion("chr376_01", "bn02", 0, true, 0)
  SetFace("chr376_01", "F01", 2, 1, 0, 0)
  SetFace("chr376_01", "F01", 0, 1, 0, 40)
  PlayMotion("chr399_01", "bn01", 0, true, 0)
  SetFace("chr399_01", "F01", 2, 1, 0, 0)
  SetFace("chr399_01", "F01", 0, 1, 0, 30)
  PlayMotion("chr042_01", "fe04", 0, false, 0)
  PlayMotion("chr042_01", "bn01", 6, true, 80)
  SetFace("chr042_01", "F01", 0, 1, 0, 0)
  PlayMotion("chr399_02", "fe04", 0, false, 0)
  SetStartFrame("chr399_02", "fe04", 14, 0)
  PlayMotion("chr399_02", "bn01", 6, true, 60)
  SetFace("chr399_02", "F01", 2, 1, 0, 0)
  SetFace("chr399_02", "F01", 0, 1, 0, 60)
  PlayMotion("chr582_01", "bn02", 0, true, 0)
  SetStartFrame("chr582_01", "bn02", 0, 0)
  SetFace("chr582_01", "F01", 2, 1, 0, 0)
  SetFace("chr582_01", "F01", 0, 1, 0, 80)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", -45, 0, 0, true, "SCURVE", 0, 0)
  BlendEye("AEGIOMON_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("AEGIOMON_01", 0, 0, 0, true, "SCURVE", 0, 0)
  BlendFace("AEGIOMON_01", -55, 0, 0, true, "SCURVE", 20, 0)
  BlendEye("HEROINE_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HEROINE_01", 0, 0, 0, true, "SCURVE", 0, 0)
  BlendFace("HEROINE_01", -45, 0, 0, true, "SCURVE", 20, 0)
  BlendFaceDigi("chr179_01", 0, 0, 0, "SCURVE", 0, 0)
  BlendFaceDigi("chr376_01", 0, 0, 0, "SCURVE", 0, 0)
  BlendFaceDigi("chr399_01", 0, 0, 0, "SCURVE", 0, 0)
  BlendFaceDigi("chr042_01", 0, 0, 0, "SCURVE", 0, 0)
  BlendFaceDigi("chr399_02", 0, 0, 0, "SCURVE", 0, 0)
  BlendFaceDigi("chr582_01", 0, 0, 0, "SCURVE", 0, 0)
  SetEnv_All("c1.0", 0)
  SetCamera(15.077, 1.184, -4.306, 0, 40, "LINEAR", 0, false, 0, false)
  SetCameraTarget(19.898, 1.613, -11.837, "LINEAR", 0, false, 0, false)
  FIELD_SET()
  NpcInvisible(FOR_ALL)
  Field_CancelInvisibleMob(FOR_ALL, INVISIBLE_KEY_EVENT, 0, true, false)
  EVENT_START()
  CUT("1.0")
  SetCamera(15.077, 0.754, -4.306, 0, 40, "LINEAR", 120, true, 0, false)
  SetCameraTarget(19.898, 1.183, -11.837, "LINEAR", 120, true, 0, false)
  Fade_In(1, 60)
  WaitFrame(120)
  CUT("2.0")
  SetEnv_All("c2.0", 0)
  SetCamera(5.746, 9.559, -13.222, 0, 40, "LINEAR", 0, false, 0)
  SetCameraTarget(2.303, 6.802, -19.959, "LINEAR", 0, false, 0)
  PlayMotion("chr179_01", "e071", 0, false, 0)
  PlayMotion("chr179_01", "e100", 8, true, 120)
  SetFace("chr179_01", "F01", 2, 1, 0, 0)
  SetFace("chr179_01", "F01_M01", 0, 1, FACE_BLENDTIME, 80)
  local slot_01 = Event_PlaySE(404065, 100, false, 0, 1.8)
  WaitFrame(90)
  if Common.IsVoiceJapanese() then
    SetMouth("chr179_01", 0, 5, 0)
    SetMouth("chr179_01", 1, 6, 30)
  else
    SetMouth("chr179_01", 0, 5, 0)
    SetMouth("chr179_01", 2, 6, 9)
    SetMouth("chr179_01", 0, 6, 24)
    SetMouth("chr179_01", 1, 6, 46)
  end
  MessageTalk("m300_070_010")
  MessageClose()
  WaitFrame(0)
  SetMouth("chr179_01", 1, 8, 0)
  WaitFrame(15)
  CUT("3.0")
  SetEnv_All("c3.0", 0)
  SetCamera(6.5, 1.627, -7.936, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(5.991, 1.047, -5.809, "LINEAR", 0, false, 0)
  local slot_02 = Event_PlaySE(400001, 30, false, 0, 1)
  PlayMotion("HERO_01", "e031", 0, true, 0)
  SetFace("HERO_01", "F02", 0, 1, 0, 0)
  SetFace("AEGIOMON_01", "F02", 0, 1, 0, 0)
  PlayMotion("HEROINE_01", "e022", 0, true, 0)
  SetFace("HEROINE_01", "F02", 0, 1, 0, 0)
  WaitFrame(60)
  Fade_OutNoLoading(FADE_BLACK, 30)
  WaitFrame(60)
  EndMotion("HERO_01", 0)
  CUT("4.0")
  SetEnv_All("c4.0", 0)
  SetCamera(13.099, 1.854, -0.059, 0, 40, "LINEAR", 0, false, 0, false)
  SetCameraTarget(3.02, 2.316, -12.027, "LINEAR", 0, false, 0, false)
  SetCamera(13.439, 1.838, 0.346, 0, 40, "LINEAR", 120, true, 0, false)
  SetCameraTarget(3.02, 2.316, -12.027, "LINEAR", 120, true, 0, false)
  Event_PlayBGM(406, 0, 0)
  Fade_In(FADE_BLACK, 30)
  WaitFrame(40)
  if Common.IsVoiceJapanese() then
    SetMouth("chr179_01", 0, 6, 0)
    SetMouth("chr179_01", 2, 6, 23)
    SetMouth("chr179_01", 0, 6, 45)
    SetMouth("chr179_01", 2, 6, 125)
  else
    SetMouth("chr179_01", 0, 6, 0)
    SetMouth("chr179_01", 2, 6, 12)
    SetMouth("chr179_01", 0, 6, 33)
    SetMouth("chr179_01", 2, 6, 95)
  end
  MessageTalk("m300_070_020")
  MessageClose()
  WaitFrame(0)
  SetMouth("chr179_01", 2, 8, 0)
  WaitFrame(10)
  if Common.IsVoiceJapanese() then
    SetMouth("chr179_01", 0, 6, 0)
    SetMouth("chr179_01", 2, 6, 90)
    SetMouth("chr179_01", 0, 6, 110)
    SetMouth("chr179_01", 1, 6, 185)
  else
    SetMouth("chr179_01", 0, 6, 0)
    SetMouth("chr179_01", 2, 6, 65)
    SetMouth("chr179_01", 0, 6, 75)
    SetMouth("chr179_01", 1, 6, 120)
  end
  MessageTalk("m300_070_030")
  MessageClose()
  WaitFrame(0)
  SetMouth("chr179_01", 1, 8, 0)
  WaitFrame(10)
  CUT("5.0")
  SetEnv_All("c5.0", 0)
  SetCamera(8.623, 5.587, -13.599, 0, 50, "LINEAR", 0, false, 0)
  SetCameraTarget(1.732, 6.5, -17.822, "LINEAR", 0, false, 0)
  CameraOffsetTurn(-5, "SCURVE", false, true, 500, 0)
  local slot_03 = Event_PlaySE(404067, 100, false, 0, 0)
  PlayMotion("chr179_01", "e116", 0, true, 0)
  if Common.IsVoiceJapanese() then
    SetMouth("chr179_01", 0, 6, 0)
    SetMouth("chr179_01", 2, 6, 63)
    SetMouth("chr179_01", 0, 6, 84)
    SetMouth("chr179_01", 1, 6, 135)
  else
    SetMouth("chr179_01", 0, 6, 0)
    SetMouth("chr179_01", 2, 6, 75)
    SetMouth("chr179_01", 0, 6, 90)
    SetMouth("chr179_01", 1, 6, 130)
  end
  MessageTalk("m300_070_040")
  MessageClose()
  WaitFrame(10)
  if Common.IsVoiceJapanese() then
    SetMouth("chr179_01", 0, 8, 0)
    SetMouth("chr179_01", 1, 8, 105)
  else
    SetMouth("chr179_01", 0, 8, 0)
    SetMouth("chr179_01", 1, 8, 64)
  end
  MessageTalk("m300_070_050")
  MessageClose()
  WaitFrame(10)
  if Common.IsVoiceJapanese() then
    SetMouth("chr179_01", 0, 6, 0)
    SetMouth("chr179_01", 1, 6, 63)
  else
    SetMouth("chr179_01", 0, 6, 0)
    SetMouth("chr179_01", 1, 6, 60)
  end
  MessageTalk("m300_070_060")
  MessageClose()
  WaitFrame(0)
  SetMouth("chr179_01", 1, 8, 0)
  WaitFrame(10)
  CUT("6.0")
  SetEnv_All("c6.0", 0)
  SetCamera(6.603, 0.963, -6.438, 0, 35, "LINEAR", 0, false, 0)
  SetCameraTarget(6.591, 0.815, -5.783, "LINEAR", 0, false, 0)
  ModelVisible("HERO_01", false, 0, 0)
  PlayMotion("AEGIOMON_01", "e002", 0, true, 0)
  SetFace("AEGIOMON_01", "F02", 0, 1, 0, 0)
  SetFace("AEGIOMON_01", "E04_M02", 0, 1, 6, 80)
  MessageTalk("m300_070_070")
  MessageClose()
  WaitFrame(10)
  CUT("7.0")
  SetEnv_All("c7.0", 0)
  SetCamera(5.873, 4.952, -9.447, 0, 40, "LINEAR", 0, false, 0)
  SetCameraTarget(1.983, 6.532, -17.049, "LINEAR", 0, false, 0)
  ModelVisible("HERO_01", true, 0, 0)
  if Common.IsVoiceJapanese() then
    SetMouth("chr179_01", 0, 3, 0)
    SetMouth("chr179_01", 2, 6, 60)
    SetMouth("chr179_01", 0, 6, 70)
    SetMouth("chr179_01", 2, 6, 105)
  else
    SetMouth("chr179_01", 0, 3, 0)
    SetMouth("chr179_01", 2, 4, 6)
    SetMouth("chr179_01", 0, 6, 16)
    SetMouth("chr179_01", 2, 6, 66)
    SetMouth("chr179_01", 0, 6, 81)
    SetMouth("chr179_01", 2, 6, 96)
    SetMouth("chr179_01", 0, 6, 102)
    SetMouth("chr179_01", 2, 6, 120)
  end
  MessageTalk("m300_070_080")
  MessageClose()
  WaitFrame(10)
  if Common.IsVoiceJapanese() then
    SetMouth("chr179_01", 0, 6, 0)
    SetMouth("chr179_01", 2, 6, 84)
    SetMouth("chr179_01", 0, 6, 105)
    SetMouth("chr179_01", 2, 6, 155)
  else
    SetMouth("chr179_01", 0, 6, 0)
    SetMouth("chr179_01", 2, 6, 70)
    SetMouth("chr179_01", 0, 6, 82)
    SetMouth("chr179_01", 2, 6, 123)
  end
  MessageTalk("m300_070_090")
  MessageClose()
  WaitFrame(10)
  if Common.IsVoiceJapanese() then
    SetMouth("chr179_01", 0, 6, 0)
    SetMouth("chr179_01", 1, 6, 35)
  else
    SetMouth("chr179_01", 0, 6, 0)
    SetMouth("chr179_01", 1, 6, 41)
  end
  MessageTalk("m300_070_100")
  MessageClose()
  WaitFrame(10)
  CUT("8.0")
  SetEnv_All("c8.0", 0)
  SetPosition("AEGIOMON_01", 6.6, -0.22, -5.75, "LINEAR", 0, 0)
  SetRotation("AEGIOMON_01", 0, 203, 0, "LINEAR", 0, 0)
  BlendFace("AEGIOMON_01", -70, 0, 0, true, "SCURVE", 0, 0)
  SetPosition("HEROINE_01", 5.32, -0.228, -5.615, "LINEAR", 0, 0)
  SetRotation("HEROINE_01", 0, 170, 0, "LINEAR", 0, 0)
  SetCamera(5.974, 1.72, -7.486, 0, 40, "LINEAR", 0, false, 0)
  SetCameraTarget(5.98, 1.007, -5.742, "LINEAR", 0, false, 0)
  SetFace("HERO_01", "F01", 0, 1, 0, 0)
  SetFace("AEGIOMON_01", "F15", 0, 1, 0, 0)
  SetFace("HEROINE_01", "F15", 0, 1, 0, 0)
  MessageTalkSel(1, "m300_070_110")
  result = Talk.GetResultSelectedNum()
  if result == RESULT_TALK00 then
    local slot_02 = Event_PlaySE(400001, 80, false, 0, 0)
    PlayMotion("HERO_01", "e004", 0, true, 0)
    SetFace("HERO_01", "F01", 0, 0, FACE_BLENDTIME, 0)
    SetFace("HERO_01", "E15_M02", 0, 1, 6, 40)
    WaitFrame(50)
  end
  PlayMotionBlend("AEGIOMON_01", "blend01", 2, false, 0)
  PlayMotionBlend("HEROINE_01", "blend01", 2, false, 10)
  SetFace("HEROINE_01", "F01", 0, 1, 0, 0)
  WaitFrame(70)
  Event_StopBGM(1, 0)
  Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
  EVENT_END()
end

function CUT(cut_no)
  CUT_START(cut_no)
end

function main()
  m300_070()
end

require("include")

function m120_120()
  Fade_Out(0, 0)
  EVENT_BEGIN()
  Talk.Load("m120")
  Vista.LoadVoices()
  Vista.LoadCRILipSyncs()
  SetEventCutNo(1)
  if Debug.IsEventView() then
    SetTimeZone("Noon")
    SetTimeAxis("A2020_dbef_120")
    LoadMap("d0202")
  end
  LoadModel("HERO_01", "Player")
  LoadModel("HAGURUMON_01", "char_HAGURUMON")
  LoadSceneViewerResource("c01", "d0202f_sa")
  LoadEnvironmentFile("c01", "es_m120_120_c01")
  WaitVistaLoad()
  Field_InvisibleNpc(311, 0, 0, false)
  Field_InvisibleNpc(315, 0, 0, false)
  SetPosition("HERO_01", -30.334, 2, 0.439, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, -8, 0, "LINEAR", 0, 0)
  SetPosition("HAGURUMON_01", -30.236, 2.55, 1.885, "LINEAR", 0, 0)
  SetRotation("HAGURUMON_01", 0, 0, 0, "LINEAR", 0, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", 40, 10, 0, false, "SCURVE", 0, 0)
  BlendFaceDigi("HAGURUMON_01", -90, 0, 0, "LINEAR", 0, 0)
  PlayMotion("HERO_01", "fn01_01", 0, true, 0)
  SetStartFrame("HERO_01", "e017", 93, 0)
  SetFace("HERO_01", "F01", 0, 1, 0, 0)
  PlayMotion("HAGURUMON_01", "bn01", 0, true, 0)
  ChangeDigimonFace("HAGURUMON_01", EYE_EXPRESSION_NORMAL, 0)
  SetCamera(-30.754, 3.777, -0, 0, 40, "LINEAR", 0, false, 0)
  SetCameraTarget(-30, 2.86, 2, "LINEAR", 0, false, 0)
  ResetEnvironmentSettings()
  SetSceneViewerResource("c01")
  SetEnvironmentFile("c01")
  FIELD_SET()
  EVENT_START()
  if Debug.IsEventView() then
    NpcInvisible(FOR_ALL)
  end
  CUT(1)
  Fade_In(0, FADE_TIME)
  WaitFrame(FADE_TIME)
  WaitFrame(50)
  PlayMotion("HAGURUMON_01", "fe01", 10, false, 0)
  PlayMotion("HAGURUMON_01", "bn01", 0, true, 50)
  MessageTalk("m120_120_010")
  MessageClose()
  WaitFrame(10)
  MoveRotation("HAGURUMON_01", 0, -180, 0, "LINEAR", 1, true, 0)
  WaitFrame(10)
  MoveRotation("HAGURUMON_01", -10, -180, 0, "LINEAR", 1, true, 0)
  WaitFrame(10)
  MessageTalk("m120_120_020")
  MessageClose()
  WaitFrame(10)
  PlayMotionBlend("HERO_01", "blend01", 0, false, 0)
  WaitFrame(30)
  MessageTalk("m120_120_030")
  MessageClose()
  WaitFrame(10)
  PlayMotion("HAGURUMON_01", "fe01", 10, false, 0)
  PlayMotion("HAGURUMON_01", "bn01", 0, true, 50)
  MessageTalk("m120_120_040")
  MessageTalk("m120_120_050")
  MessageClose()
  WaitFrame(10)
  MovePosition("HAGURUMON_01", -32.197, 2.002, 1.885, false, 1, 0)
  MoveRotation("HAGURUMON_01", 0, -90, 0, "LINEAR", 1, true, 0)
  WaitFrame(45)
  BlendFace("HERO_01", 0, 0, 0, false, "SCURVE", 25, 0)
  WaitFrame(30)
  if not Debug.IsEventView() then
    local hagr = Obj:new(NPC, "npc_0015")
    hagr:Invisible()
  end
  if Debug.IsEventView() then
    EVENT_END()
  else
    EVENT_END_SEAMLESS(60)
  end
end

function CUT(cut_no)
  CUT_START(cut_no)
end

function main()
  m120_120()
end

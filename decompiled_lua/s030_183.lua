S030_183 = {
  ID = 183,
  STEP_001 = 1,
  STEP_005 = 5,
  STEP_010 = 10,
  STEP_255 = 255,
  Flg01 = "FLAG_SUB_030_183_001",
  Flg02 = "FLAG_SUB_030_183_002",
  Flg03 = "FLAG_SUB_030_183_003",
  Flg04 = "FLAG_SUB_030_183_004"
}
local text_file = "s030_183"
local base = text_file .. "_"
local tlk = Tlk:new(text_file, 1, true)

function S030_183:Event_010()
  if Qst.Sub:Check(self.ID, self.STEP_001, self.STEP_005) then
    local fq01 = Motion.Object:new(NPC, "s030_183_001", "fq01")
    local fq02 = Motion.Object:new(NPC, "s030_183_001", "fq02")
    local bn01 = Motion.Object:new(NPC, "s030_183_001", "bn01")
    local e002 = Motion.Object:new(PLAYER, "", "e002")
    local e004 = Motion.Object:new(PLAYER, "", "e004")
    local e008 = Motion.Object:new(PLAYER, "", "e008")
    local e012 = Motion.Object:new(PLAYER, "", "e012")
    local fn01_01 = Motion.Object:new(PLAYER, "", "fn01_01")
    HideMinimap(true)
    HideGuide(true)
    tlk:StartTalkActionAndZoom("s030_183_001")
    fq02:PlayWithStartMoveMotion(10, 10)
    tlk:Message(base .. "010")
    local result = tlk:Select(3, base .. "020")
    WaitFrame(15)
    if result == RESULT_TALK00 then
      fq02:PlayWithStartMoveMotion(10, 10)
      tlk:Message(base .. "030")
    elseif result == RESULT_TALK01 then
      fq01:PlayWithStartMoveMotion(10, 10)
      tlk:Message(base .. "040")
    else
      fq02:PlayWithStartMoveMotion(10, 10)
      tlk:Message(base .. "050")
    end
    fq01:PlayWithStartMoveMotion(10, 10)
    tlk:Message(base .. "060")
    fq02:PlayWithStartMoveMotion(10, 10)
    tlk:Message(base .. "070")
    tlk:EndTalk(true)
    Flg.Set(self.Flg04)
    Qst.Sub:Start(self.ID, 1, false)
    Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
    Common.ProhibitSave()
    Flg.Set("FLAG_SKIP_AREACHANGE_MOVE")
    local prifix = "d"
    local number = 407
    local locator = "start_00"
    local time_axis = "A2020_dbef_180"
    local time_zone = MORNING
    Flg.Clear("FLAG_IS_USED_REGULAR_ROUTE_TO_THEATER")
    Flg.Set("FLAG_IS_USED_REGULAR_ROUTE_FROM_THEATER")
    Flg.Set("FLAG_IS_START_EVENT_BEFORE_MAPCHANGE")
    HideMinimap(false)
    HideGuide(false)
    Common.RequestMapChangeWithTimeTravel(prifix, number, locator, time_axis, time_zone)
  end
end

function S030_183:Event_020()
  if Qst.Sub:Check(self.ID, self.STEP_001, self.STEP_005) and Flg.Check(self.Flg04, self.Flg01) then
    local fq01 = Motion.Object:new(NPC, "npc_0001", "fq01")
    local fq02 = Motion.Object:new(NPC, "npc_0001", "fq02")
    local bn01 = Motion.Object:new(NPC, "npc_0001", "bn01")
    local e002 = Motion.Object:new(PLAYER, "", "e002")
    local e004 = Motion.Object:new(PLAYER, "", "e004")
    local e008 = Motion.Object:new(PLAYER, "", "e008")
    local e012 = Motion.Object:new(PLAYER, "", "e012")
    local fn01_01 = Motion.Object:new(PLAYER, "", "fn01_01")
    Flg.Set("FLAG_SKIP_AREACHANGE_MOVE")
    Obj:new(OGIM, "obj_barricade1"):CancelInvisible()
    Obj:new(OGIM, "obj_barricade2"):CancelInvisible()
    Obj:new(NPC, "npc_0001"):SetEnableCheckAndFieldAttack(true)
    local obj = Obj:new(NPC, "npc_0001")
    Field.ObjectOverwriteFieldAttackableRange(NPC, obj.index, 30, 5, 5)
    Obj:new(PLAYER, ""):SetPos(1.623, 0.032, 20.74)
    Cam.Inst:Set(-0.5692, 3.2, 13.67, 3.2754, 0.871, 22.5985, default, 0)
    tlk:StartTalkAndCancelDigimonRide()
    HideMinimap(true)
    HideGuide(true)
    WaitFrame(10)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    fq01:PlayWithStartMoveMotion(10, 10)
    tlk:Message(base .. "080")
    local _ = tlk:Select(1, base .. "090")
    fq02:PlayWithStartMoveMotion(10, 10)
    tlk:Message(base .. "100")
    local _ = tlk:Select(1, base .. "110")
    fq01:PlayWithStartMoveMotion(10, 10)
    tlk:Message(base .. "120")
    local _ = tlk:Select(1, base .. "125")
    fq02:PlayWithStartMoveMotion(10, 10)
    tlk:Message(base .. "130")
    tlk:Message(base .. "140")
    tlk:EndTalk(true)
    HideMinimap(false)
    HideGuide(false)
    Cam.Inst:Clear(30)
    Qst.Sub:Set(self.ID, self.STEP_005)
    WaitFrame(30)
    Field_CancelInvisibleFollowerAllGuest(0, 15, false, false)
    Field_CancelInvisibleFollowerAllPartyMember(0, 15, false, false)
  end
end

function S030_183:Event_023()
  if Qst.Sub:Check(self.ID, self.STEP_005, self.STEP_010) then
    tlk:StartTalkAndCancelDigimonRide()
    Cam.Inst:Set(0.317, 4.75, 10.593, 0.39, 3.19, 18.997, default, 30)
    tlk:Message(base .. "140")
    tlk:EndTalk()
    Cam.Inst:Clear(30)
  end
end

function S030_183:Event_025()
  if Qst.Sub:Check(self.ID, self.STEP_005, self.STEP_010) and not Flg.Check(self.Flg01) then
    local fe01 = Motion.Object:new(NPC, "npc_0001", "fe01")
    local bn01 = Motion.Object:new(NPC, "npc_0001", "bn01")
    Obj:new(NPC, "npc_0001"):SetEnableCheckAndFieldAttack(false)
    tlk:StartTalkAndCancelDigimonRide()
    fe01:PlayWithStartMoveMotion(10, 10)
    tlk:EndTalk(true)
    EncountFromField_PlaySound(20301830, BTL_MAP_BACCHUS_FOREST3, false)
  end
end

function S030_183:Event_030()
  if Qst.Sub:Check(self.ID, self.STEP_005, self.STEP_010) and Flg.Check(self.Flg01) then
    local s_fq01 = Motion.Object:new(NPC, "s030_183_001", "fq01")
    local s_fq02 = Motion.Object:new(NPC, "s030_183_001", "fq02")
    local s_br01 = Motion.Object:new(NPC, "s030_183_001", "br01")
    local s_e002 = Motion.Object:new(NPC, "s030_183_001", "e002")
    local s_e006 = Motion.Object:new(NPC, "s030_183_001", "e006")
    local s_e013 = Motion.Object:new(NPC, "s030_183_001", "e013")
    local s_bn01 = Motion.Object:new(NPC, "s030_183_001", "bn01")
    local j_fq01 = Motion.Object:new(NPC, "npc_0001", "fq01")
    local j_fq02 = Motion.Object:new(NPC, "npc_0001", "fq02")
    local j_bn01 = Motion.Object:new(NPC, "npc_0001", "bn01")
    local ft01_02 = Motion.Object:new(PLAYER, "", "ft01_02")
    local e002 = Motion.Object:new(PLAYER, "", "e002")
    local e004 = Motion.Object:new(PLAYER, "", "e004")
    local e008 = Motion.Object:new(PLAYER, "", "e008")
    local e012 = Motion.Object:new(PLAYER, "", "e012")
    local fn01_01 = Motion.Object:new(PLAYER, "", "fn01_01")
    local s_index = GetIndex(NPC, "s030_183_001")
    Cam.Inst:Set(-0.72, 2.6996, 12.2875, 3.131, 0.498, 21.25, default, 0)
    Obj:new(PLAYER, ""):SetPos(1.41, 0, 17.67)
    Obj:new(PLAYER, ""):SetRotationY(0, 0)
    FieldObjectSync(NPC, true)
    HideMinimap(true)
    HideGuide(true)
    tlk:StartTalkAndCancelDigimonRide()
    WaitFrame(30)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    s_e013:PlayWithStartMoveMotion(10, 10)
    tlk:Message(base .. "160")
    j_fq02:PlayWithStartMoveMotion(10, 10)
    tlk:Message(base .. "170")
    s_e002:PlayWithStartMoveMotion(10, 10)
    tlk:Message(base .. "180")
    j_fq01:PlayWithStartMoveMotion(10, 10)
    tlk:Message(base .. "190")
    WaitFrame(30)
    local slot_id = PlaySE(405002, 100)
    Quake_Start(0.1, 0.3, 20)
    WaitFrame(20)
    StopSE(slot_id, 30)
    Quake_Stop()
    tlk:Message(base .. "200")
    Cam.Inst:Set(-2.66, 0.9987, 11.9323, 2.2578, 0.9545, 20.64, default, 30)
    ObjectTurnToObject(PLAYER, "", NPC, "s030_183_001")
    WaitFrame(30)
    Field.ObjectLookAtTheObject(PLAYER, 1, NPC, s_index, 15)
    local result = tlk:Select(3, base .. "210")
    WaitFrame(15)
    Obj:new(NPC, "s030_183_001"):SetRotationY(110, 30)
    s_br01:Play(10, true)
    WaitFrame(30)
    s_bn01:Play(10, true)
    Field.ObjectLookAtTheObject(NPC, s_index, PLAYER, 1, 15)
    WaitFrame(10)
    if result == RESULT_TALK00 then
      s_fq01:PlayWithStartMoveMotion(10, 10)
      tlk:Message(base .. "220")
    elseif result == RESULT_TALK01 then
      s_fq02:PlayWithStartMoveMotion(10, 10)
      tlk:Message(base .. "230")
    else
      s_fq02:PlayWithStartMoveMotion(10, 10)
      tlk:Message(base .. "240")
    end
    s_e002:PlayWithStartMoveMotion(10, 10)
    tlk:Message(base .. "250")
    s_fq01:PlayWithStartMoveMotion(10, 10)
    tlk:Message(base .. "260")
    s_e002:PlayWithStartMoveMotion(10, 10)
    tlk:Message(base .. "270")
    Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
    tlk:EndTalk()
    Flg.Set("FLAG_SKIP_AREACHANGE_MOVE")
    local prifix = "d"
    local number = 406
    local locator = "start_00"
    local time_axis = "A2020_dbef_199"
    local time_zone = MORNING
    Flg.Clear("FLAG_IS_USED_REGULAR_ROUTE_TO_THEATER")
    Flg.Set("FLAG_IS_USED_REGULAR_ROUTE_FROM_THEATER")
    Flg.Set("FLAG_IS_START_EVENT_BEFORE_MAPCHANGE")
    Common.RequestMapChangeWithTimeTravel(prifix, number, locator, time_axis, time_zone)
  end
end

function S030_183:Event_040()
  if Qst.Sub:Check(self.ID, self.STEP_005, self.STEP_010) and Flg.Check(self.Flg04, self.Flg02) then
    local s_fq01 = Motion.Object:new(NPC, "s030_183_001", "fq01")
    local s_fq02 = Motion.Object:new(NPC, "s030_183_001", "fq02")
    local s_e002 = Motion.Object:new(NPC, "s030_183_001", "e002")
    local s_e006 = Motion.Object:new(NPC, "s030_183_001", "e006")
    local s_e013 = Motion.Object:new(NPC, "s030_183_001", "e013")
    local s_bn01 = Motion.Object:new(NPC, "s030_183_001", "bn01")
    local f_fq01 = Motion.Object:new(NPC, "s030_183_002", "fq01")
    local f_fq02 = Motion.Object:new(NPC, "s030_183_002", "fq02")
    local f_ba02 = Motion.Object:new(NPC, "s030_183_002", "ba02")
    local f_bn01 = Motion.Object:new(NPC, "s030_183_002", "bn01")
    local e002 = Motion.Object:new(PLAYER, "", "e002")
    local e004 = Motion.Object:new(PLAYER, "", "e004")
    local e008 = Motion.Object:new(PLAYER, "", "e008")
    local e012 = Motion.Object:new(PLAYER, "", "e012")
    local e018 = Motion.Object:new(PLAYER, "", "e018")
    local fn01_01 = Motion.Object:new(PLAYER, "", "fn01_01")
    local s_index = GetIndex(NPC, "s030_183_001")
    Flg.Set("FLAG_SKIP_AREACHANGE_MOVE")
    Obj:new(PLAYER, ""):SetPos(-0.316, -0.032, 28.519)
    Cam.Inst:Set(-2.567, 2.691, 24.434, 3.435, 0.2655, 32.06, default, 0)
    HideMinimap(true)
    HideGuide(true)
    tlk:StartTalkAndCancelDigimonRide()
    WaitFrame(10)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    s_fq01:PlayWithStartMoveMotion(10, 10)
    tlk:Message(base .. "280")
    f_fq02:PlayWithStartMoveMotion(10, 10)
    tlk:Message(base .. "290")
    s_e002:PlayWithStartMoveMotion(10, 10)
    tlk:Message(base .. "300")
    f_ba02:PlayWithStartMoveMotion(10, 10)
    tlk:Message(base .. "310")
    s_fq02:PlayWithStartMoveMotion(10, 10)
    tlk:Message(base .. "320")
    local result = tlk:Select(3, base .. "330")
    Field.ObjectLookAtTheObject(PLAYER, 1, NPC, s_index, 15)
    WaitFrame(15)
    if result == RESULT_TALK00 then
      s_fq01:PlayWithStartMoveMotion(10, 10)
      tlk:Message(base .. "340")
    elseif result == RESULT_TALK01 then
      s_fq02:PlayWithStartMoveMotion(10, 10)
      tlk:Message(base .. "350")
    else
      s_fq02:PlayWithStartMoveMotion(10, 10)
      tlk:Message(base .. "360")
    end
    s_bn01:PlayWithStartMoveMotion(10, 10)
    tlk:Message(base .. "370")
    s_fq01:PlayWithStartMoveMotion(10, 10)
    tlk:Message(base .. "380")
    tlk:EndTalk(true)
    Field.ObjectResetAim(FLD_OBJ_PLAYER, 1, 15)
    e018:Play(15, true)
    WaitFrame(45)
    Guest.Add(GST_SIREN)
    EncountFromField_PlaySound(20301831, BTL_MAP_BACCHUS_SANCTUARY, false)
  end
end

function S030_183:Event_050()
  if Qst.Sub:Check(self.ID, self.STEP_005, self.STEP_010) and Flg.Check(self.Flg02) then
    local s_fq01 = Motion.Object:new(NPC, "s030_183_001", "fq01")
    local s_fq02 = Motion.Object:new(NPC, "s030_183_001", "fq02")
    local s_e002 = Motion.Object:new(NPC, "s030_183_001", "e002")
    local s_e006 = Motion.Object:new(NPC, "s030_183_001", "e006")
    local s_e013 = Motion.Object:new(NPC, "s030_183_001", "e013")
    local s_e500 = Motion.Object:new(NPC, "s030_183_001", "e500")
    local s_bn01 = Motion.Object:new(NPC, "s030_183_001", "bn01")
    local f_fq01 = Motion.Object:new(NPC, "s030_183_002", "fq01")
    local f_fq02 = Motion.Object:new(NPC, "s030_183_002", "fq02")
    local f_ba02 = Motion.Object:new(NPC, "s030_183_002", "ba02")
    local f_bn01 = Motion.Object:new(NPC, "s030_183_002", "bn01")
    local e002 = Motion.Object:new(PLAYER, "", "e002")
    local e004 = Motion.Object:new(PLAYER, "", "e004")
    local e008 = Motion.Object:new(PLAYER, "", "e008")
    local e012 = Motion.Object:new(PLAYER, "", "e012")
    local e502 = Motion.Object:new(PLAYER, "", "e502")
    local fn01_01 = Motion.Object:new(PLAYER, "", "fn01_01")
    local s_index = GetIndex(NPC, "s030_183_001")
    Obj:new(PLAYER, ""):SetPos(-0.316, -0.032, 28.519)
    fn01_01:Play(0, true)
    Guest.Delete(GST_SIREN)
    Cam.Inst:Set(-2.567, 2.691, 24.434, 3.435, 0.2655, 32.06, default, 0)
    tlk:StartTalkAndCancelDigimonRide()
    HideMinimap(true)
    HideGuide(true)
    WaitFrame(10)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    f_fq02:PlayWithStartMoveMotion(10, 10)
    tlk:Message(base .. "390")
    s_fq01:PlayWithStartMoveMotion(10, 10)
    tlk:Message(base .. "400")
    local result = tlk:Select(3, base .. "410")
    Field.ObjectLookAtTheObject(PLAYER, 1, NPC, s_index, 15)
    WaitFrame(15)
    if result == RESULT_TALK00 then
      s_e002:PlayWithStartMoveMotion(10, 10)
      tlk:Message(base .. "420")
    elseif result == RESULT_TALK01 then
      s_fq02:PlayWithStartMoveMotion(10, 10)
      tlk:Message(base .. "430")
    else
      s_e002:PlayWithStartMoveMotion(10, 10)
      tlk:Message(base .. "440")
    end
    s_fq01:PlayWithStartMoveMotion(10, 10)
    tlk:Message(base .. "450")
    s_e002:PlayWithStartMoveMotion(10, 10)
    tlk:Message(base .. "460")
    Flg.Set(self.Flg03)
    tlk:MessageClose()
    Fade_OutNoLoadingWithWait(FADE_WHITE, FADE_TIME)
    PlaySE(404005, 100)
    Cam.Inst:Clear(0)
    s_bn01:PlayWithStartMoveMotion(10, 10)
    FieldObjectSync(NPC, true)
    Cam.Inst:Set(-5.62, -0.46, 25.115, 2.05, 1.35, 31.28, default, 0)
    Obj:new(PLAYER, ""):SetRotationY(270, 0)
    Obj:new(NPC, "s030_183_001"):SetRotationY(90, 0)
    WaitFrame(60)
    FadeAllInWithWait(FADE_WHITE, FADE_TIME)
    s_e002:PlayWithStartMoveMotion(10, 10)
    tlk:Message(base .. "470")
    Flg.Set("FLAG_IS_CLEAR_S030_183")
    tlk:MessageClose()
    Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
    Field.ObjectResetAim(FLD_OBJ_PLAYER, 1, 0)
    FieldObjectSync(NPC, true)
    Cam.Inst:Clear(0)
    Obj:new(PLAYER, ""):SetRotationY(0, 0)
    WaitFrame(30)
    tlk:EndTalk()
    Common.CancelProhibitSave()
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    HideMinimap(false)
    HideGuide(false)
    Qst.Sub:Set(self.ID, self.STEP_010)
    Qst.Sub:End(self.ID, self.STEP_255)
  end
end

function S030_183:Event_060()
  if Qst.Sub:Check(self.ID, self.STEP_010, self.STEP_255) then
  end
end

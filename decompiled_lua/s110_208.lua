S110_208 = {
  ID = 208,
  STEP_001 = 1,
  STEP_005 = 5,
  STEP_010 = 10,
  STEP_255 = 255
}
local text_file = "s110_208"
local base = "s110_208_"
local tlk = Tlk:new(text_file, 1, true)

function S110_208:Event_010()
  local kote_index = GetIndex(NPC, "s100_089_001")
  local musya_index = GetIndex(NPC, "s100_089_002")
  local zanba_index = GetIndex(NPC, "s100_089_003")
  local susa_index = GetIndex(NPC, "s100_089_004")
  Field.ObjectLoadMotion(NPC, kote_index, "bn01")
  Field.ObjectLoadMotion(NPC, kote_index, "bn02")
  Field.ObjectLoadMotion(NPC, kote_index, "fq01")
  Field.ObjectLoadMotion(NPC, kote_index, "fq02")
  Field.ObjectLoadMotion(NPC, kote_index, "fe02")
  Field.ObjectLoadMotion(NPC, kote_index, "fe04")
  Field.ObjectLoadMotion(NPC, musya_index, "bn01")
  Field.ObjectLoadMotion(NPC, musya_index, "bn02")
  Field.ObjectLoadMotion(NPC, musya_index, "fq01")
  Field.ObjectLoadMotion(NPC, musya_index, "fq02")
  Field.ObjectLoadMotion(NPC, musya_index, "fe02")
  Field.ObjectLoadMotion(NPC, musya_index, "fe04")
  Field.ObjectLoadMotion(NPC, zanba_index, "bn01")
  Field.ObjectLoadMotion(NPC, zanba_index, "bn02")
  Field.ObjectLoadMotion(NPC, zanba_index, "fq01")
  Field.ObjectLoadMotion(NPC, zanba_index, "fq02")
  Field.ObjectLoadMotion(NPC, zanba_index, "fe02")
  Field.ObjectLoadMotion(NPC, zanba_index, "fe04")
  Field.ObjectLoadMotion(NPC, susa_index, "bn01")
  Field.ObjectLoadMotion(NPC, susa_index, "bn02")
  Field.ObjectLoadMotion(NPC, susa_index, "fq01")
  Field.ObjectLoadMotion(NPC, susa_index, "fq02")
  Field.ObjectLoadMotion(NPC, susa_index, "fe02")
  Field.ObjectLoadMotion(NPC, susa_index, "fe04")
  Field.ObjectLoadMotion(PLAYER, 1, "fn01_01")
  Field.ObjectLoadMotion(PLAYER, 1, "e002")
  Field.ObjectLoadMotion(PLAYER, 1, "e004_01")
  Field.ObjectLoadMotion(PLAYER, 1, "e005")
  Field.ObjectLoadMotion(PLAYER, 1, "e005_01")
  Field.ObjectLoadMotion(PLAYER, 1, "e008")
  Field.ObjectLoadMotion(PLAYER, 1, "e010")
  Field.ObjectLoadMotion(PLAYER, 1, "e011_01")
  Field.ObjectLoadMotion(PLAYER, 1, "e012")
  Field.ObjectLoadMotion(PLAYER, 1, "e013")
  Field.ObjectLoadMotion(PLAYER, 1, "e015")
  Field.ObjectLoadMotion(PLAYER, 1, "e018")
  Field.ObjectLoadMotion(PLAYER, 1, "e019")
  Field.ObjectLoadMotion(PLAYER, 1, "e033")
  Field.ObjectLoadMotion(PLAYER, 1, "fg07_m01")
  if Qst.Sub:Check(self.ID, self.STEP_001, self.STEP_005) then
    Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
    Obj:new(MOB, "s110_208_deletemob"):Invisible()
    HideMinimap(true)
    HideGuide(true)
    tlk:StartTalkAndCancelDigimonRide()
    Cam.Inst:Set(15.99, 3.33, 81.49, 11.8, 0.126, 90, default, 0)
    Obj:new(PLAYER, ""):SetPos(12.3, 0, 85.58, true)
    Obj:new(PLAYER, ""):SetRotationY(30, 0)
    Field.ObjectLookAtTheObject(PLAYER, 1, NPC, susa_index, 15)
    WaitFrame(15)
    FadeInWithWaitNotFlgCheck(FADE_BLACK, FADE_TIME)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, susa_index, "fq01", 10, 10)
    tlk:Message(base .. "010")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, susa_index, "fe02", 10, 10)
    tlk:Message(base .. "020")
    local result = tlk:Select(3, base .. "030")
    WaitFrame(15)
    if result == RESULT_TALK00 then
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, susa_index, "fq01", 10, 10)
      tlk:Message(base .. "040")
    elseif result == RESULT_TALK01 then
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, susa_index, "fq01", 10, 10)
      tlk:Message(base .. "050")
    elseif result == RESULT_TALK02 then
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, susa_index, "fq02", 10, 10)
      tlk:Message(base .. "060")
    end
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, zanba_index, "fq01", 10, 10)
    tlk:Message(base .. "070")
    tlk:Message(base .. "080")
    tlk:Message(base .. "090")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, kote_index, "fe02", 10, 10)
    tlk:Message(base .. "100")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, musya_index, "fe02", 10, 10)
    tlk:Message(base .. "110")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, susa_index, "fe02", 10, 10)
    tlk:Message(base .. "120")
    tlk:Message(base .. "130")
    tlk:EndTalk(true)
    Qst.Sub:Start(self.ID, 1, false)
    HideMinimap(false)
    HideGuide(false)
    Qst.Sub:Set(self.ID, self.STEP_005)
    require("S100_088")
    Qst.Sub:Set(S100_088.ID, S100_088.STEP_020)
    Flg.Set("FLAG_FREEARENA_RELEASE_020")
    Field_CancelInvisibleFollowerAllGuest(0, 15, false, false)
    Field_CancelInvisibleFollowerAllPartyMember(0, 15, false, false)
    Obj:new(MOB, "s110_208_deletemob"):CancelInvisible()
    Cam.Inst:Clear(30)
    AddChallengerNotice(false)
  elseif Qst.Sub:Check(self.ID, self.STEP_005, self.STEP_010) then
    Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
    Obj:new(MOB, "s110_208_deletemob"):Invisible()
    HideMinimap(true)
    HideGuide(true)
    tlk:StartTalkAndCancelDigimonRide()
    Cam.Inst:Set(15.99, 3.33, 81.49, 11.8, 0.126, 90, default, 0)
    Obj:new(PLAYER, ""):SetPos(12.3, 0, 85.58, true)
    Obj:new(PLAYER, ""):SetRotationY(30, 0)
    Field.ObjectLookAtTheObject(PLAYER, 1, NPC, susa_index, 15)
    WaitFrame(15)
    FadeInWithWaitNotFlgCheck(FADE_BLACK, FADE_TIME)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, susa_index, "fe02", 10, 10)
    tlk:Message(base .. "120")
    tlk:Message(base .. "130")
    Cam.Inst:Clear(30)
    Field.ObjectResetAim(FLD_OBJ_PLAYER, 1, 30)
    tlk:EndTalk()
    Obj:new(MOB, "s110_208_deletemob"):CancelInvisible()
    HideMinimap(false)
    HideGuide(false)
  elseif Qst.Sub:Check(self.ID, self.STEP_010, self.STEP_255) then
    Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
    Obj:new(MOB, "s110_208_deletemob"):Invisible()
    HideMinimap(true)
    HideGuide(true)
    tlk:StartTalkAndCancelDigimonRide()
    Cam.Inst:Set(15.99, 3.33, 81.49, 11.8, 0.126, 90, default, 0)
    Obj:new(PLAYER, ""):SetPos(12.3, 0, 85.58, true)
    Obj:new(PLAYER, ""):SetRotationY(30, 0)
    Field.ObjectLookAtTheObject(PLAYER, 1, NPC, susa_index, 15)
    WaitFrame(15)
    FadeInWithWaitNotFlgCheck(FADE_BLACK, FADE_TIME)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, susa_index, "fe02", 10, 10)
    tlk:Message(base .. "140")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, kote_index, "fe02", 10, 10)
    tlk:Message(base .. "150")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, musya_index, "fq02", 10, 10)
    tlk:Message(base .. "160")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, zanba_index, "fq01", 10, 10)
    tlk:Message(base .. "170")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, susa_index, "fq02", 10, 10)
    tlk:Message(base .. "180")
    tlk:Message(base .. "190")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, susa_index, "fq01", 10, 10)
    tlk:Message(base .. "200")
    local result = tlk:Select(3, base .. "210")
    WaitFrame(15)
    if result == RESULT_TALK00 then
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, susa_index, "fq02", 10, 10)
      tlk:Message(base .. "220")
    elseif result == RESULT_TALK01 then
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, susa_index, "fe02", 10, 10)
      tlk:Message(base .. "230")
    elseif result == RESULT_TALK02 then
      tlk:Message(base .. "240")
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, susa_index, "fe02", 10, 10)
      tlk:Message(base .. "250")
    end
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, zanba_index, "fq02", 10, 10)
    tlk:Message(base .. "260")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, susa_index, "fq01", 10, 10)
    tlk:Message(base .. "270")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, susa_index, "fe02", 10, 10)
    tlk:Message(base .. "280")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, kote_index, "fq01", 10, 10)
    tlk:Message(base .. "290")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, susa_index, "fq01", 10, 10)
    tlk:Message(base .. "300")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, musya_index, "fq01", 10, 10)
    tlk:Message(base .. "310")
    tlk:Message(base .. "320")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, susa_index, "fq02", 10, 10)
    tlk:Message(base .. "330")
    local result = tlk:Select(3, base .. "340")
    WaitFrame(15)
    if result == RESULT_TALK00 then
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, susa_index, "fq01", 10, 10)
      tlk:Message(base .. "350")
    elseif result == RESULT_TALK01 then
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, susa_index, "fq01", 10, 10)
      tlk:Message(base .. "360")
    elseif result == RESULT_TALK02 then
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, susa_index, "fe02", 10, 10)
      tlk:Message(base .. "370")
    end
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, musya_index, "fq01", 10, 10)
    tlk:Message(base .. "380")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, susa_index, "fe02", 10, 10)
    tlk:Message(base .. "390")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, kote_index, "fq01", 10, 10)
    tlk:Message(base .. "400")
    tlk:Message(base .. "410")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, susa_index, "fq01", 10, 10)
    tlk:Message(base .. "420")
    Flg.Set("FLAG_IS_CLEAR_S110_208")
    Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
    FieldObjectSync(NPC, false)
    Field.ObjectResetAim(FLD_OBJ_PLAYER, 1, 0)
    tlk:EndTalk()
    Obj:new(MOB, "s110_208_deletemob"):CancelInvisible()
    Cam.Inst:Clear(0)
    FadeInWithWaitNotFlgCheck(FADE_BLACK, FADE_TIME)
    HideMinimap(false)
    HideGuide(false)
    Qst.Sub:End(self.ID, self.STEP_255)
    require("S100_088")
    S100_088:Event_015()
  end
end

function S110_208:Event_020()
  if Flg.Check("FLAG_FREEARENA_WIN_020") then
    Qst.Sub:Set(self.ID, self.STEP_010)
    require("S100_088")
    Qst.Sub:Set(S100_088.ID, S100_088.STEP_025)
  end
end

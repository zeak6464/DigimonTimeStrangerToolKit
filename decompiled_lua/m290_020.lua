require("include")

function m290_020()
  Fade_Out(0, 0)
  EVENT_BEGIN()
  Talk.Load("m290")
  SetEventCutNo(2)
  if Debug.IsEventView() then
    SetTimeZone("Noon")
    SetTimeAxis("A2028_daft_290")
    SetMapStatus("Disable")
    LoadMap("d0402")
  end
  LoadModel("HERO_01", "Player")
  LoadModel("chr923_01", "char_MASTERBLIMPMON_RAMP")
  LoadSceneViewerResource("c1.0", "d0402f_ta")
  LoadSceneViewerResource("c2.0", "d0402f_ta")
  LoadEnvironmentFile("c1.0", "es_m290_020_c1.0")
  LoadEnvironmentFile("c2.0", "es_m290_020_c2.0")
  WaitVistaLoad()
  ModelVisible("HERO_01", false, 0, 0)
  SetPosition("chr923_01", -36.185, 25.861, 247.184, "LINEAR", 0, 0)
  SetRotation("chr923_01", 0, 111.5, 0, "LINEAR", 0, 0)
  SetScale("chr923_01", 3.015, 3.015, 3.015)
  PlayMotion("chr923_01", "e535", 0, true, 0)
  SetStartFrame("chr923_01", "e535", 329, 0)
  ChangeDigimonFace("chr923_01", EYE_EXPRESSION_NORMAL, 0)
  SetMouth("chr923_01", 1, 0, 0)
  BlendFaceDigi("chr923_01", 0, 0, 0, "SCURVE", 0, 0)
  SetCamera(47.66, -13.234, 560.335, 0, 40, "LINEAR", 0, false, 0)
  SetCameraTarget(-46.47, 68.449, -71.754, "LINEAR", 0, false, 0)
  SetCamera(56.934, 71.974, 569.965, 0, 40, "LINEAR", 300, false, 0)
  SetCameraTarget(-37.196, 153.657, -62.125, "LINEAR", 300, false, 0)
  Event_Stop_Play_BGM(308, 5, 1, 0, 1)
  FIELD_SET()
  EVENT_START()
  ObjectInvisible(FOR_ALL)
  NpcInvisible(FOR_ALL)
  RumorNpcInvisible(FOR_ALL)
  CUT("1.0")
  SetEnv_All("c1.0", 0)
  Fade_In(0, FADE_TIME)
  WaitFrame(150)
  CUT("2.0")
  SetEnv_All("c2.0", 0)
  ModelVisible("chr923_01", false, 0, 0)
  PlayMotion("chr923_01", "fn01_02", 0, true, 0)
  SetFace("chr923_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  SetCamera(20.246, 68.311, 371.347, 0, 40, "LINEAR", 0, false, 0)
  SetCameraTarget(-108.649, 53.263, 182.689, "LINEAR", 0, false, 0)
  SetCamera(-41.64, 62.863, 404.306, 0, 40, "LINEAR", 500, true, 0)
  SetCameraTarget(-116.702, 53.263, 188.191, "LINEAR", 500, true, 0)
  MessageTalk("m290_020_010")
  MessageClose()
  WaitFrame(10)
  MessageTalk("m290_020_020")
  MessageClose()
  WaitFrame(10)
  Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
  if Debug.IsEventView() then
    Event_StopBGM(0, 0)
  end
  Vista.SetKeepBGM()
  EVENT_END()
end

function CUT(cut_no)
  CUT_START(cut_no)
end

function main()
  m290_020()
end

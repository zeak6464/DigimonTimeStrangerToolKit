require("include")

function m060_040()
  Fade_Out(0, 0)
  EVENT_BEGIN()
  Talk.Load("m060")
  SetEventCutNo(6)
  if Debug.IsEventView() then
    SetTimeZone("Noon")
    SetTimeAxis("A2020_dbef_60")
    LoadMap("t0109")
  end
  LoadModel("HERO_01", "Player")
  LoadModel("HEROINE_01", "char_HEROINE")
  LoadModel("HIROKO_01", "char_HIROKO")
  LoadObject("ATCsmartphone03_01", "ATCsmartphone03")
  Vista.LoadAnimationFace("HIROKO_01", "e03", "m03")
  Vista.LoadAnimationFace("HIROKO_01", "e01", "m01")
  Vista.LoadAnimationFace("HIROKO_01", "e02", "m02")
  LoadSceneViewerResource("c1.0", "t0109f_pa")
  LoadSceneViewerResource("c2.0", "t0109f_pa")
  LoadSceneViewerResource("c3.0", "t0109f_pa")
  LoadSceneViewerResource("c4.0", "t0109f_pa")
  LoadSceneViewerResource("c5.0", "t0109f_pa")
  LoadSceneViewerResource("c6.0", "t0109f_pa")
  LoadEnvironmentFile("c1.0", "es_m060_040_c1.0")
  LoadEnvironmentFile("c2.0", "es_m060_040_c2.0")
  LoadEnvironmentFile("c3.0", "es_m060_040_c3.0")
  LoadEnvironmentFile("c4.0", "es_m060_040_c4.0")
  LoadEnvironmentFile("c5.0", "es_m060_040_c5.0")
  LoadEnvironmentFile("c6.0", "es_m060_040_c6.0")
  WaitVistaLoad()
  PlayMotion("HERO_01", "fn01_01", 0, true, 0)
  PlayMotion("HEROINE_01", "fn01_01", 0, true, 0)
  PlayMotion("HIROKO_01", "fn01_01", 0, true, 0)
  SetPosition("HERO_01", 34.022, 0.043, -33.013, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, -231, 0, "LINEAR", 0, 0)
  SetPosition("HEROINE_01", 34.033, 0.043, -33.915, "LINEAR", 0, 0)
  SetRotation("HEROINE_01", 0, -299.5, 0, "LINEAR", 0, 0)
  SetPosition("HIROKO_01", 34.91, 0.043, -33.525, "LINEAR", 0, 0)
  SetRotation("HIROKO_01", 0, -90, 0, "LINEAR", 0, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", 0, 0, 0, false, "SCURVE", 0, 0)
  BlendEye("HEROINE_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HEROINE_01", 0, 0, 0, false, "SCURVE", 0, 0)
  BlendEye("HIROKO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HIROKO_01", 0, 50, 0, true, "SCURVE", 0, 0)
  SetCamera(32.121, 1.45, -33.135, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(34.863, 1.345, -33.5, "LINEAR", 0, false, 0)
  FIELD_SET()
  EVENT_START()
  CUT("1.0")
  SetEnv_All("c1.0", 0)
  Fade_In(0, 0)
  PlayMotion("HIROKO_01", "e002", 5, false, 0)
  PlayMotion("HIROKO_01", "fn01_01", 2, true, 130)
  SetFace("HIROKO_01", "F03", 0, 1, 3, 0)
  PlayMotion("HERO_01", "e031", 5, true, 10)
  SetFace("HERO_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  MessageTalk("m060_040_010")
  MessageClose()
  WaitFrame(10)
  PlayMotion("HIROKO_01", "e013", 5, true, 0)
  SetFace("HIROKO_01", "F02", 0, 1, FACE_BLENDTIME, 0)
  PlayMotion("HEROINE_01", "e010", 5, true, 20)
  SetFace("HEROINE_01", "F01", 0, 1, 0, 20)
  BlendEye("HIROKO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HIROKO_01", 0, -29, 0, true, "SCURVE", 20, 0)
  MessageTalk("m060_040_020")
  MessageClose()
  Event_StopBGM(1.5, 0)
  WaitFrame(10)
  CUT("2.0")
  SetEnv_All("c2.0", 0)
  PlayMotion("HERO_01", "fn01_01", 0, true, 0)
  ModelVisible("HEROINE_01", false, 0, 0)
  PlayMotion("HIROKO_01", "fn01_01_selfie", 0, true, 0)
  SetFace("HIROKO_01", "F01", 0, 1, 0, 0)
  AttachObject("HIROKO_01", "ATCsmartphone03_01", "1")
  BlendFace("HIROKO_01", -13, -11, 0, false, "SCURVE", 0, 0)
  SetCamera(33.996, 1.436, -33.44, -8, 34, "LINEAR", 0, false, 0)
  SetCameraTarget(34.704, 1.736, -33.836, "LINEAR", 0, false, 0)
  SetCamera(33.996, 1.436, -33.44, -8, 38, "SCURVE", 30, true, 5)
  SetCameraTarget(34.764, 1.676, -33.836, "SCURVE", 30, true, 5)
  WaitFrame(10)
  MessageTalk("m060_040_030")
  MessageClose()
  WaitFrame(10)
  local slot_id = Event_PlaySE(402016, 100, false, 0, 0)
  WaitFrame(10)
  Event_PlayBGM(302, 0.5, 0)
  BackFade_OutNoLoadingWithWait(0, 10)
  CUT("3.0")
  SetEnv_All("c3.0", 0)
  ModelVisible("ATCsmartphone03_01", false, 0, 0)
  PlayMotion("HEROINE_01", "fn01_01", 0, true, 0)
  SetFace("HEROINE_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  SetCamera(34.226, 1.626, -33.63, 0, 29, "LINEAR", 0, false, 0)
  SetCameraTarget(34.995, 1.482, -33.536, "LINEAR", 0, false, 0)
  PlayMotion("HIROKO_01", "fn01_01_selfie", 0, true, 0)
  SetFace("HIROKO_01", "E02_M01", 0, 1, 3, 0)
  PlayMotionBlend("HIROKO_01", "blend05", 0, false, 0)
  BlendEye("HIROKO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HIROKO_01", -32, -11, 0, false, "SCURVE", 20, 0)
  BackFade_In(0, 10)
  WaitFrame(30)
  MessageTalk("m060_040_040")
  MessageClose()
  WaitFrame(10)
  BlendFace("HIROKO_01", -13, -11, 0, false, "SCURVE", 20, 0)
  EndMotion("HIROKO_01", 0)
  MessageTalk("m060_040_050")
  MessageClose()
  WaitFrame(10)
  SetFace("HIROKO_01", "F02", 0, 1, 3, 0)
  PlayMotion("HIROKO_01", "e003_selfie", 5, true, 0)
  SetCamera(34.314, 1.651, -33.658, 4, 30, "DECEL", 5, false, 3)
  SetCameraTarget(34.996, 1.493, -33.531, "DECEL", 7, false, 5)
  SetCamera(34.309, 1.612, -33.667, 0, 30, "DECEL", 17, false, 15)
  SetCameraTarget(34.996, 1.493, -33.531, "DECEL", 16, false, 16)
  MessageTalk("m060_040_060")
  MessageClose()
  WaitFrame(30)
  BackFade_OutNoLoadingWithWait(0, 10)
  CUT("4.0")
  SetEnv_All("c4.0", 0)
  ModelVisible("HEROINE_01", true, 0, 0)
  ModelVisible("HIROKO_01", false, 0, 0)
  SetPosition("HEROINE_01", 33.533, 0.043, -33.915, "LINEAR", 0, 0)
  SetRotation("HEROINE_01", 0, -360.5, 0, "LINEAR", 0, 0)
  SetPosition("HERO_01", 33.472, 0.043, -33.033, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, -176.5, 0, "LINEAR", 0, 0)
  BlendEye("HERO_01", 12, 0, "SCURVE", 0, 0)
  SetCamera(32.914, 1.694, -32.324, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(34.158, 1.351, -34.229, "LINEAR", 0, false, 0)
  SetFace("HEROINE_01", "F04", 2, 1, 0, 0)
  BackFade_In(0, 10)
  WaitFrame(10)
  PlayMotion("HEROINE_01", "e033", 5, true, 0)
  MessageTalk("m060_040_070")
  MessageClose()
  WaitFrame(10)
  CUT("5.0")
  SetEnv_All("c5.0", 0)
  SetFace("HEROINE_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  SetCamera(33.028, 1.589, -33.899, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(33.514, 1.543, -32.996, "LINEAR", 0, false, 0)
  MessageTalkSel(1, "m060_040_080")
  result = Talk.GetResultSelectedNum()
  if result == RESULT_TALK00 then
    PlayMotionBlend("HERO_01", "blend02", 0, false, 0)
    SetFace("HERO_01", "E15_M01", 2, 1, FACE_BLENDTIME, 0)
    SetFace("HERO_01", "E02_M01", 0, 1, FACE_BLENDTIME, 45)
    SetMouth("HERO_01", 0, 6, 0)
    SetMouth("HERO_01", 1, 0, 45)
    WaitFrame(75)
  end
  CUT("6.0")
  PlayMotion("HEROINE_01", "fn01_01", 0, true, 0)
  SetEnv_All("c6.0", 0)
  SetCamera(33.205, 1.595, -33.016, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(33.542, 1.51, -33.87, "LINEAR", 0, false, 0)
  BlendFace("HEROINE_01", 37, 0, 0, false, "SCURVE", 30, 0)
  SetFace("HEROINE_01", "F02", 2, 1, FACE_BLENDTIME, 0)
  Event_StopBGM(3, 0)
  MessageTalk("m060_040_090")
  MessageClose()
  WaitFrame(10)
  SetFace("HEROINE_01", "F02", 0, 1, FACE_BLENDTIME, 0)
  BlendFace("HEROINE_01", 0, 0, 0, false, "SCURVE", 30, 0)
  MessageTalk("m060_040_100")
  MessageClose()
  WaitFrame(10)
  PlayMotion("HEROINE_01", "e004", 5, true, 0)
  SetFace("HEROINE_01", "E08_M02", 0, 1, FACE_BLENDTIME, 0)
  MessageTalk("m060_040_110")
  MessageClose()
  WaitFrame(10)
  FadeOutWithWaitNotFlgCheck(FADE_BLACK, FADE_TIME)
  Vista.SetKeepBGM()
  EVENT_END()
end

function CUT(cut_no)
  CUT_START(cut_no)
end

function main()
  m060_040()
end

require("include")

function m400_030()
  Fade_Out(1, 0)
  EVENT_BEGIN()
  Talk.Load("m400")
  SetEventCutNo(3)
  if Debug.IsEventView() then
    SetTimeAxis("P2028_daft_400")
    LoadMap("d0177b")
  end
  LoadModel("HERO_01", "Player")
  LoadModel("chr824_01", "char_DIANAMON_ADD")
  LoadModel("chr931_01", "char_APOLLOMON_ADD")
  Vista.BindSpeaker("chr931_01", "char_APOLLOMON")
  LoadSceneViewerResource("c1.0", "d0177b_sa")
  LoadSceneViewerResource("c2.0", "d0177b_sa")
  LoadSceneViewerResource("c3.0", "d0177b_sa")
  LoadSceneViewerResource("c4.0", "d0177b_sa")
  LoadEnvironmentFile("c1.0", "es_m400_030_c1.0")
  LoadEnvironmentFile("c2.0", "es_m400_030_c2.0")
  LoadEnvironmentFile("c3.0", "es_m400_030_c3.0")
  LoadEnvironmentFile("c4.0", "es_m400_030_c4.0")
  WaitVistaLoad()
  SetPosition("HERO_01", -1.525, 0.031, 9.7, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 171, 0, "LINEAR", 0, 0)
  SetScale("HERO_01", 1, 1, 1)
  SetPosition("chr824_01", -1.425, 0, -8.747, "LINEAR", 0, 0)
  SetRotation("chr824_01", 0, 0, 0, "LINEAR", 0, 0)
  SetScale("chr824_01", 2.88, 2.88, 2.88)
  SetPosition("chr931_01", -1.199, 0, 5.802, "LINEAR", 0, 0)
  SetRotation("chr931_01", 0, 180, 0, "LINEAR", 0, 0)
  SetScale("chr931_01", 2.13, 2.13, 2.13)
  PlayMotion("HERO_01", "fn01_01", 0, true, 0)
  SetFace("HERO_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  PlayMotion("chr824_01", "bn01", 0, true, 0)
  SetFace("chr824_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  PlayMotion("chr931_01", "bn01", 0, true, 0)
  SetFace("chr931_01", "F03_M01", 0, 2, FACE_BLENDTIME, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", 0, 0, 0, false, "SCURVE", 0, 0)
  SetCamera(0.21, 4.422, -12.694, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(-4.254, 5.078, 5.75, "LINEAR", 0, false, 0)
  SetCamera(1.286, 4.491, -12.424, 0, 30, "LINEAR", 300, true, 0)
  SetCameraTarget(-4.216, 5.043, 5.741, "LINEAR", 300, true, 0)
  ModelVisible("HERO_01", false, 0, 0)
  FIELD_SET()
  EVENT_START()
  CUT("1.0")
  SetEnv_All("c1.0", 0)
  Fade_In(FADE_WHITE, FADE_TIME)
  WaitFrame(30)
  PlayMotion("chr931_01", "e007", 0, true, 0)
  SetFace("chr931_01", "F03_M01", 0, 2, FACE_BLENDTIME, 0)
  MessageTalk("m400_030_010")
  MessageClose()
  WaitFrame(10)
  CUT("2.0")
  SetEnv_All("c2.0", 0)
  SetCamera(-1.025, 4.855, -4.979, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(-1.394, 4.997, -7.137, "LINEAR", 0, false, 0)
  PlayMotion("chr824_01", "e005", 0, true, 0)
  SetFace("chr824_01", "F03", 0, 1, FACE_BLENDTIME, 0)
  MessageTalk("m400_030_020")
  MessageClose()
  WaitFrame(10)
  SetFace("chr824_01", "F01", 2, 1, FACE_BLENDTIME, 0)
  MessageTalk("m400_030_030")
  MessageClose()
  WaitFrame(10)
  MessageTalk("m400_030_040")
  MessageClose()
  WaitFrame(10)
  CUT("3.0")
  SetEnv_All("c3.0", 0)
  PlayMotion("chr824_01", "fn01_01", 0, true, 0)
  SetFace("chr824_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  SetCamera(0.244, 3.291, -6.256, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(-0.543, 3.857, -8.862, "LINEAR", 0, false, 0)
  WaitFrame(5)
  PlayMotion("chr824_01", "e007", 5, true, 0)
  SetFace("chr824_01", "F03", 0, 1, FACE_BLENDTIME, 0)
  WaitFrame(35)
  CUT("4.0")
  SetEnv_All("c4.0", 0)
  SetCamera(-0.626, 3.985, -4.819, 0, 21, "LINEAR", 0, false, 0)
  SetCameraTarget(-1.683, 5.3, -8.18, "LINEAR", 0, false, 0)
  SetCamera(-0.304, 3.586, -3.795, 0, 21, "DECEL", 10, true, 0)
  SetCameraTarget(-1.683, 5.3, -8.18, "DECEL", 10, true, 0)
  MessageTalk("m400_030_050")
  MessageClose()
  WaitFrame(10)
  FadeOutWithWaitNotFlgCheck(FADE_WHITE, 10)
  Vista.SetKeepBGM()
  EVENT_END()
end

function CUT(cut_no)
  CUT_START(cut_no)
end

function main()
  m400_030()
end

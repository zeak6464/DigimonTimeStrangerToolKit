require("include")

function m440_040()
  Fade_Out(0, 0)
  EVENT_BEGIN()
  Talk.Load("m440")
  SetEventCutNo(3)
  if Debug.IsEventView() then
    SetTimeZone("Noon")
    SetTimeAxis("P2028_daft_440")
    SetMapStatus("Enable")
    LoadMap("d0990b")
  end
  if Debug.IsEventView() then
    LoadObject("d0990floor99_01", "d0990floor99")
  end
  LoadModel("DIGI_MINERVAMON_01", "char_MINERVAMON")
  LoadModel("CHRONOMON_01", "char_CHRONOMON_BOSS_EVENT")
  LoadSceneViewerResource("c1.0", "d0990b_ta")
  LoadSceneViewerResource("c2.0", "d0990b_ta")
  LoadSceneViewerResource("c3.0", "d0990b_ta")
  LoadEnvironmentFile("c1.0", "es_m440_040_c1.0")
  LoadEnvironmentFile("c2.0", "es_m440_040_c2.0")
  LoadEnvironmentFile("c3.0", "es_m440_040_c3.0")
  WaitVistaLoad()
  if Debug.IsEventView() then
    SetPosition("d0990floor99_01", 0, 0, 0, "LINEAR", 0, 0)
    SetRotation("d0990floor99_01", 0, 0, 0, "LINEAR", 0, 0)
  end
  SetPosition("CHRONOMON_01", 21.929, -92.808, -167.418, "LINEAR", 0, 0)
  SetRotation("CHRONOMON_01", 8, -7, 0, "LINEAR", 0, 0)
  SetPosition("DIGI_MINERVAMON_01", -7.84, 0.192, 8.125, "LINEAR", 0, 0)
  SetRotation("DIGI_MINERVAMON_01", 0, 189.5, 0, "LINEAR", 0, 0)
  BlendFaceDigi("DIGI_MINERVAMON_01", -20, 0, 0, "SCURVE", 0, 0)
  BlendFaceDigi("CHRONOMON_01", 0, 0, 0, "SCURVE", 0, 0)
  PlayMotion("DIGI_MINERVAMON_01", "e513", 0, true, 0)
  SetFace("DIGI_MINERVAMON_01", "F03_M03", 0, 2, FACE_BLENDTIME, 0)
  PlayMotion("CHRONOMON_01", "bn01_01", 0, true, 0)
  SetFace("CHRONOMON_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  SetCamera(-7.531, 1.281, 6.646, 0, 40, "LINEAR", 0, false, 0)
  SetCameraTarget(-7.985, 0.57, 8.2, "LINEAR", 0, false, 0)
  CameraOffsetMove(0, 0, 0.1, "LINEAR", true, true, 300, 0)
  SetEnv_All("c1.0", 0)
  FIELD_SET()
  EVENT_START()
  CUT("1.0")
  Fade_In(0, FADE_TIME)
  WaitFrame(FADE_TIME)
  WaitFrame(45)
  CUT("2.0")
  SetEnv_All("c2.0", 0)
  SetCamera(-6.278, 1.193, 9.825, 0, 60, "LINEAR", 0, false, 0, false)
  SetCameraTarget(-3.621, 2.399, -16.607, "LINEAR", 0, false, 0, false)
  SetCamera(-6.391, 1.142, 10.951, 0, 60, "SCURVE", 100, true, 0, false)
  SetCameraTarget(-3.621, 2.399, -16.607, "SCURVE", 100, true, 0, false)
  WaitFrame(10)
  MessageTalk("m440_040_010")
  MessageClose()
  WaitFrame(10)
  CUT("3.0")
  SetEnv_All("c3.0", 0)
  SetCamera(-8.038, 0.4, 6.194, 0, 40, "SCURVE", 0, false, 0)
  SetCameraTarget(-7.7, 0.7, 7.828, "SCURVE", 0, false, 0)
  BlendFace("DIGI_MINERVAMON_01", 0, 0, 0, false, "SCURVE", 0, 0)
  CameraOffsetMove(0, 0, 0.5, "LINEAR", true, true, 300, 0)
  WaitFrame(30)
  SetFace("DIGI_MINERVAMON_01", "F01_M05", 0, 2, FACE_BLENDTIME, 0)
  BlendFace("DIGI_MINERVAMON_01", 0, 0, 0, false, "SCURVE", 20, 0)
  PlayMotion("DIGI_MINERVAMON_01", "e514", 10, true, 0)
  MessageTalk("m440_040_020")
  MessageClose()
  WaitFrame(10)
  Event_StopBGM(2, 0)
  WaitFrame(10)
  MessageTalk("m440_040_030")
  MessageClose()
  WaitFrame(10)
  SetCamera(-8.038, 0.4, 6.194, 0, 40, "SCURVE", 40, true, 0)
  SetCameraTarget(-7, 1, 7.828, "SCURVE", 40, true, 0)
  WaitFrame(10)
  Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
  Vista.SetKeepBGM()
  EVENT_END()
end

function CUT(cut_no)
  CUT_START(cut_no)
end

function main()
  m440_040()
end

S070_167 = {
  ID = 167,
  STEP_001 = 1,
  STEP_005 = 5,
  STEP_010 = 10,
  STEP_015 = 15,
  STEP_016 = 16,
  STEP_017 = 17,
  STEP_020 = 20,
  STEP_255 = 255
}
local base = "s070_167_"
local text_file = "s070_167"
local tlk = Tlk:new(text_file, 1, true)

function S070_167:Event_005()
  local minerva_index = GetIndex(NPC, "s070_167_minerva")
  Field.ObjectLoadMotion(NPC, minerva_index, "fn01_01")
  Field.ObjectLoadMotion(NPC, minerva_index, "e002")
  Field.ObjectLoadMotion(NPC, minerva_index, "e003")
  Field.ObjectLoadMotion(NPC, minerva_index, "e004")
  Field.ObjectLoadMotion(NPC, minerva_index, "e008")
  Field.ObjectLoadMotion(NPC, minerva_index, "e012")
  Field.ObjectLoadMotion(NPC, minerva_index, "e013")
  Field.ObjectLoadMotion(NPC, minerva_index, "e018")
  Field.ObjectLoadMotion(NPC, minerva_index, "e513")
  Field.ObjectLoadMotion(PLAYER, 1, "e002")
  Field.ObjectLoadMotion(PLAYER, 1, "e004")
  Field.ObjectLoadMotion(PLAYER, 1, "e004_01")
  Field.ObjectLoadMotion(PLAYER, 1, "e008")
  Field.ObjectLoadMotion(PLAYER, 1, "e010_01")
  Field.ObjectLoadMotion(PLAYER, 1, "e012")
  Field.ObjectLoadMotion(PLAYER, 1, "e013")
  Field.ObjectLoadMotion(PLAYER, 1, "e015")
  Field.ObjectLoadMotion(PLAYER, 1, "e018")
  Field.ObjectLoadMotion(PLAYER, 1, "e019")
  if Qst.Sub:Check(self.ID, self.STEP_001, self.STEP_005) then
    local minerva_index = GetIndex(NPC, "s070_167_minerva")
    if not Flg.Check("FLAG_SUB_070_167_002") then
      Flg.Set("FLAG_SUB_070_167_002")
      HideMinimap(true)
      HideGuide(true)
      tlk:StartTalkAndCancelDigimonRide()
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, minerva_index, "e002", 10, 10)
      tlk:Message(base .. "080")
      local result = tlk:Select(3, base .. "090")
      WaitFrame(15)
      Field.ObjectPlayMotion(NPC, minerva_index, "e008", 15, true)
      if result == RESULT_TALK00 then
        tlk:Message(base .. "100")
      elseif result == RESULT_TALK01 then
        tlk:Message(base .. "110")
      elseif result == RESULT_TALK02 then
        tlk:Message(base .. "120")
      end
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, minerva_index, "e002", 10, 10)
      tlk:Message(base .. "130")
      Field.ObjectPlayMotion(NPC, minerva_index, "e012", 15, true)
      tlk:Message(base .. "140")
      tlk:Message(base .. "145")
      result = tlk:Select(3, base .. "150")
      WaitFrame(15)
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, minerva_index, "e002", 10, 10)
      if result == RESULT_TALK00 then
        tlk:Message(base .. "160")
      elseif result == RESULT_TALK01 then
        tlk:Message(base .. "170")
      elseif result == RESULT_TALK02 then
        tlk:Message(base .. "190")
      end
      Field.ObjectPlayMotion(NPC, minerva_index, "e008", 15, true)
      tlk:Message(base .. "210")
      tlk:Message(base .. "220")
      result = tlk:Select(2, base .. "230")
      WaitFrame(15)
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, minerva_index, "e002", 10, 10)
      if result == RESULT_TALK00 then
        tlk:Message(base .. "240")
      elseif result == RESULT_TALK01 then
        tlk:Message(base .. "250")
        tlk:EndTalk()
        HideMinimap(false)
        HideGuide(false)
        goto lbl_558
      end
      Field.ObjectPlayMotion(NPC, minerva_index, "e012", 15, true)
      tlk:Message(base .. "260")
      tlk:Message(base .. "265")
      tlk:EndTalk()
      Qst.Sub:Start(self.ID, 1, false)
      Qst.Sub:Set(self.ID, self.STEP_005)
      Qst.Sub:Set(self.ID, self.STEP_010)
      Flg.Set("FLAG_SUB_070_167_003")
      Flg.Set("FLAG_SKIP_AREACHANGE_MOVE")
      MapChange("d", 501, "start_60", true, FADE_BLACK, FADE_TIME)
    else
      HideMinimap(true)
      HideGuide(true)
      tlk:StartTalkAndCancelDigimonRide()
      Field.ObjectPlayMotion(NPC, minerva_index, "e008", 15, true)
      tlk:Message(base .. "210")
      tlk:Message(base .. "220")
      result = tlk:Select(2, base .. "230")
      WaitFrame(15)
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, minerva_index, "e002", 10, 10)
      if result == RESULT_TALK00 then
        tlk:Message(base .. "240")
      elseif result == RESULT_TALK01 then
        tlk:Message(base .. "250")
        tlk:EndTalk()
        HideMinimap(false)
        HideGuide(false)
        goto lbl_558
      end
      Field.ObjectPlayMotion(NPC, minerva_index, "e012", 15, true)
      tlk:Message(base .. "260")
      tlk:Message(base .. "265")
      Flg.Set("FLAG_SUB_070_167_003")
      tlk:EndTalk()
      Qst.Sub:Start(self.ID, 1, false)
      Qst.Sub:Set(self.ID, self.STEP_005)
      Qst.Sub:Set(self.ID, self.STEP_010)
      Flg.Set("FLAG_SKIP_AREACHANGE_MOVE")
      MapChange("d", 501, "start_60", true, FADE_BLACK, FADE_TIME)
    end
  end
  ::lbl_558::
end

function S070_167:Event_010()
  if Qst.Sub:Check(self.ID, self.STEP_010, self.STEP_015) then
    local minerva_index = GetIndex(NPC, "s070_167_minerva_01")
    local beelze_index = GetIndex(NPC, "s070_167_beelze_01")
    Field.ObjectLoadMotion(NPC, minerva_index, "fn01_01")
    Field.ObjectLoadMotion(NPC, minerva_index, "e002")
    Field.ObjectLoadMotion(NPC, minerva_index, "e003")
    Field.ObjectLoadMotion(NPC, minerva_index, "e004")
    Field.ObjectLoadMotion(NPC, minerva_index, "e008")
    Field.ObjectLoadMotion(NPC, minerva_index, "e012")
    Field.ObjectLoadMotion(NPC, minerva_index, "e013")
    Field.ObjectLoadMotion(NPC, minerva_index, "e018")
    Field.ObjectLoadMotion(NPC, minerva_index, "e513")
    Field.ObjectLoadMotion(NPC, beelze_index, "bn01")
    Field.ObjectLoadMotion(NPC, beelze_index, "bn02")
    Field.ObjectLoadMotion(NPC, beelze_index, "ba02")
    Field.ObjectLoadMotion(NPC, beelze_index, "fe02")
    Field.ObjectLoadMotion(NPC, beelze_index, "fe04")
    Field.ObjectLoadMotion(NPC, beelze_index, "fq01")
    Field.ObjectLoadMotion(NPC, beelze_index, "fq02")
    Field.ObjectLoadMotion(PLAYER, 1, "e002")
    Field.ObjectLoadMotion(PLAYER, 1, "e004")
    Field.ObjectLoadMotion(PLAYER, 1, "e004_01")
    Field.ObjectLoadMotion(PLAYER, 1, "e008")
    Field.ObjectLoadMotion(PLAYER, 1, "e010_01")
    Field.ObjectLoadMotion(PLAYER, 1, "e012")
    Field.ObjectLoadMotion(PLAYER, 1, "e013")
    Field.ObjectLoadMotion(PLAYER, 1, "e015")
    Field.ObjectLoadMotion(PLAYER, 1, "e018")
    Field.ObjectLoadMotion(PLAYER, 1, "e019")
    Cam.Inst:Set(-115.37, -10.446, 67.312, -124.234, -11.31, 71.64, default, 0)
    Obj:new(PLAYER, ""):SetPos(-122.25, -12.346, 69.596, true)
    Obj:new(PLAYER, ""):SetRotationY(90, 0)
    HideMinimap(true)
    HideGuide(true)
    tlk:StartTalkAndCancelDigimonRide()
    Field.ObjectPlayMotion(PLAYER, 1, "e018", 15, true)
    Field.ObjectPlayMotion(NPC, minerva_index, "e018", 15, true)
    Field_InvisibleFollowerAllGuest(0, 0, false)
    Field_InvisibleFollowerAllPartyMember(0, 0, false)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, beelze_index, "fq02", 10, 10)
    tlk:Message(base .. "270")
    tlk:Message(base .. "280")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, beelze_index, "fe04", 10, 10)
    tlk:Message(base .. "290")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, beelze_index, "fq01", 10, 10)
    tlk:Message(base .. "300")
    local result = tlk:Select(3, base .. "310")
    WaitFrame(15)
    Field.ObjectLookAtTheObject(NPC, beelze_index, PLAYER, 1, 30)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, beelze_index, "fq01", 10, 10)
    if result == RESULT_TALK00 then
      tlk:Message(base .. "320")
    elseif result == RESULT_TALK01 then
      tlk:Message(base .. "330")
    elseif result == RESULT_TALK02 then
      tlk:Message(base .. "340")
    end
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, minerva_index, "e008", 10, 10)
    tlk:Message(base .. "345")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, minerva_index, "e002", 10, 10)
    tlk:Message(base .. "350")
    Field.ObjectResetAim(NPC, beelze_index, 10)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, beelze_index, "fq01", 10, 10)
    tlk:Message(base .. "360")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, minerva_index, "e008", 10, 10)
    tlk:Message(base .. "370")
    result = tlk:Select(3, base .. "380")
    WaitFrame(15)
    if result == RESULT_TALK00 then
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, minerva_index, "e002", 10, 10)
      tlk:Message(base .. "390")
    elseif result == RESULT_TALK01 then
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, beelze_index, "fq01", 10, 10)
      tlk:Message(base .. "400")
    elseif result == RESULT_TALK02 then
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, minerva_index, "e002", 10, 10)
      tlk:Message(base .. "410")
    end
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, beelze_index, "fq01", 10, 10)
    tlk:Message(base .. "420")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, beelze_index, "fe04", 10, 10)
    tlk:Message(base .. "430")
    local rot = Field.ObjectGetRotationY(FLD_OBJ_PLAYER, 1)
    SetFollowerCameraOperateRotation(0, rot, 0)
    Cam.Inst:Clear(30)
    tlk:EndTalk()
    HideMinimap(false)
    HideGuide(false)
    Qst.Sub:Set(self.ID, self.STEP_015)
  end
end

function S070_167:Event_030()
  if Guest.IsExistNum(2) then
    INFO_WINDOW(10050)
    goto lbl_628
  else
    local minerva_index = GetIndex(NPC, "s070_167_minerva_01")
    local beelze_index = GetIndex(NPC, "s070_167_beelze_01")
    local beelze_index2 = GetIndex(NPC, "s070_167_beelze_02")
    Field.ObjectLoadMotion(NPC, minerva_index, "fn01_01")
    Field.ObjectLoadMotion(NPC, minerva_index, "e002")
    Field.ObjectLoadMotion(NPC, minerva_index, "e003")
    Field.ObjectLoadMotion(NPC, minerva_index, "e004")
    Field.ObjectLoadMotion(NPC, minerva_index, "e008")
    Field.ObjectLoadMotion(NPC, minerva_index, "e012")
    Field.ObjectLoadMotion(NPC, minerva_index, "e013")
    Field.ObjectLoadMotion(NPC, minerva_index, "e513")
    Field.ObjectLoadMotion(NPC, beelze_index, "bn01")
    Field.ObjectLoadMotion(NPC, beelze_index, "bn02")
    Field.ObjectLoadMotion(NPC, beelze_index, "ba02")
    Field.ObjectLoadMotion(NPC, beelze_index, "fe02")
    Field.ObjectLoadMotion(NPC, beelze_index, "fe04")
    Field.ObjectLoadMotion(NPC, beelze_index, "fq01")
    Field.ObjectLoadMotion(NPC, beelze_index, "fq02")
    Field.ObjectLoadMotion(NPC, beelze_index2, "bn01")
    Field.ObjectLoadMotion(NPC, beelze_index2, "bn02")
    Field.ObjectLoadMotion(NPC, beelze_index2, "ba02")
    Field.ObjectLoadMotion(NPC, beelze_index2, "fe02")
    Field.ObjectLoadMotion(NPC, beelze_index2, "fe04")
    Field.ObjectLoadMotion(NPC, beelze_index2, "fq01")
    Field.ObjectLoadMotion(NPC, beelze_index2, "fq02")
    Field.ObjectLoadMotion(PLAYER, 1, "e002")
    Field.ObjectLoadMotion(PLAYER, 1, "e004")
    Field.ObjectLoadMotion(PLAYER, 1, "e004_01")
    Field.ObjectLoadMotion(PLAYER, 1, "e008")
    Field.ObjectLoadMotion(PLAYER, 1, "e010_01")
    Field.ObjectLoadMotion(PLAYER, 1, "e012")
    Field.ObjectLoadMotion(PLAYER, 1, "e013")
    Field.ObjectLoadMotion(PLAYER, 1, "e015")
    Field.ObjectLoadMotion(PLAYER, 1, "e018")
    Field.ObjectLoadMotion(PLAYER, 1, "e019")
    if CheckItemNum(313, 1) and Qst.Sub:Check(self.ID, self.STEP_015, self.STEP_020) then
      START_TALK_ACTION_AND_ZOOM("s070_167_beelze_01", false, true)
      Field.ObjectLookAtTheObject(NPC, beelze_index, PLAYER, 1, 30)
      tlk:StartTalkAndCancelDigimonRide()
      HideMinimap(true)
      HideGuide(true)
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, beelze_index, "fq01", 10, 10)
      tlk:Message(base .. "440")
      tlk:MessageClose()
      INFO_RELEASE_ITEM(313, 1)
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, beelze_index, "fe02", 10, 10)
      tlk:Message(base .. "450")
      Quest.SetFlag(self.ID, 16)
      Quest.SetFlag(self.ID, 17)
      Quest.SetFlag(self.ID, 18)
      Flg.Set("FLAG_SUB_070_167_008")
      PlaySE(404032, 100)
      tlk:MessageClose()
      Fade_OutNoLoadingWithWait(FADE_WHITE, FADE_TIME)
      END_TALK_ACTION_AND_ZOOM("s070_167_beelze_01", false, true)
      Field.ObjectResetAim(NPC, beelze_index, 10)
      Qst.Sub:Set(self.ID, self.STEP_020)
      Field_InvisibleFollowerAllGuest(0, 0, false)
      Field_InvisibleFollowerAllPartyMember(0, 0, false)
      FieldObjectSync(FOR_ALL, false)
      Obj:new(PLAYER, ""):SetPos(-122.25, -12.346, 69.596, true)
      Obj:new(PLAYER, ""):SetRotationY(90, 0)
      Cam.Inst:Set(-116.291, -8.296, 67.636, -124.661, -11.958, 71.7, default, 0)
      WaitFrame(90)
      FadeInWithWaitNotFlgCheck(FADE_WHITE, FADE_TIME)
      Field.ObjectPlayMotion(PLAYER, 1, "e018", 15, true)
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, minerva_index, "e012", 10, 10)
      tlk:Message(base .. "460")
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, beelze_index2, "fq02", 10, 10)
      tlk:Message(base .. "470")
      tlk:EndTalk(true)
      Flg.Set("FLAG_SUB_070_167_004")
      Flg.Set("FLAG_SUB_070_167_007")
      Flg.Set("FLAG_IS_NOT_MAP_NAME_DISP")
      Flg.Set("FLAG_SKIP_AREACHANGE_MOVE")
      MapChange("d", 507, "start_20", true, FADE_BLACK, FADE_TIME)
    elseif Qst.Sub:Check(self.ID, self.STEP_015, self.STEP_020) then
      START_TALK_ACTION_AND_ZOOM("s070_167_beelze_01", false, true)
      Field.ObjectLookAtTheObject(NPC, beelze_index, PLAYER, 1, 30)
      tlk:StartTalkAndCancelDigimonRide()
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, beelze_index, "fq01", 10, 10)
      tlk:Message(base .. "420")
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, beelze_index, "fe04", 10, 10)
      tlk:Message(base .. "430")
      tlk:EndTalk()
      Field.ObjectResetAim(NPC, beelze_index, 10)
      END_TALK_ACTION_AND_ZOOM("s070_167_beelze_01", false, true)
    end
    if Flg.Check("FLAG_SUB_070_167_006") then
      START_TALK_ACTION_AND_ZOOM("s070_167_minerva_01", true, true)
      tlk:StartTalkAndCancelDigimonRide()
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, minerva_index, "e002", 10, 10)
      tlk:Message(base .. "520")
      result = tlk:Select(2, base .. "530")
      WaitFrame(15)
      if result == RESULT_TALK00 then
        Field.ObjectPlayMotionWithStartMoveMotion(NPC, minerva_index, "e012", 10, 10)
        tlk:Message(base .. "540")
        Flg.Set("FLAG_SUB_070_167_007")
        tlk:EndTalk(true)
        Flg.Set("FLAG_IS_NOT_MAP_NAME_DISP")
        Flg.Set("FLAG_SKIP_AREACHANGE_MOVE")
        MapChange("d", 507, "start_20", true, FADE_BLACK, FADE_TIME)
      elseif result == RESULT_TALK01 then
        Field.ObjectPlayMotionWithStartMoveMotion(NPC, minerva_index, "e008", 10, 10)
        tlk:Message(base .. "550")
        tlk:EndTalk()
      end
      END_TALK_ACTION_AND_ZOOM("s070_167_minerva_01", true, true)
    end
  end
  ::lbl_628::
end

function S070_167:Event_040()
  if Qst.Sub:Check(self.ID, self.STEP_020, self.STEP_255) then
    local minerva_index = GetIndex(NPC, "s070_167_minerva")
    local beelze_index = GetIndex(NPC, "s070_167_beelze")
    Field.ObjectLoadMotion(NPC, minerva_index, "fn01_01")
    Field.ObjectLoadMotion(NPC, minerva_index, "e002")
    Field.ObjectLoadMotion(NPC, minerva_index, "e003")
    Field.ObjectLoadMotion(NPC, minerva_index, "e004")
    Field.ObjectLoadMotion(NPC, minerva_index, "e008")
    Field.ObjectLoadMotion(NPC, minerva_index, "e012")
    Field.ObjectLoadMotion(NPC, minerva_index, "e013")
    Field.ObjectLoadMotion(NPC, minerva_index, "e018")
    Field.ObjectLoadMotion(NPC, minerva_index, "e513")
    Field.ObjectLoadMotion(NPC, beelze_index, "bn01")
    Field.ObjectLoadMotion(NPC, beelze_index, "bn02")
    Field.ObjectLoadMotion(NPC, beelze_index, "ba02")
    Field.ObjectLoadMotion(NPC, beelze_index, "fe02")
    Field.ObjectLoadMotion(NPC, beelze_index, "fe04")
    Field.ObjectLoadMotion(NPC, beelze_index, "fq01")
    Field.ObjectLoadMotion(NPC, beelze_index, "fq02")
    Field.ObjectLoadMotion(PLAYER, 1, "e002")
    Field.ObjectLoadMotion(PLAYER, 1, "e004_01")
    Field.ObjectLoadMotion(PLAYER, 1, "e008")
    Field.ObjectLoadMotion(PLAYER, 1, "e012")
    Field.ObjectLoadMotion(PLAYER, 1, "e013")
    Field.ObjectLoadMotion(PLAYER, 1, "e015")
    Field.ObjectLoadMotion(PLAYER, 1, "e018")
    Field.ObjectLoadMotion(PLAYER, 1, "e019")
    Cam.Inst:Set(-0.0792, 1.999, -3.13, -0.18, 1.029, 6.821, default, 0)
    Obj:new(NPC, "s070_167_minerva"):SetRotationY(0, 0)
    Field.ObjectPlayMotion(PLAYER, 1, "e018", 15, true)
    Field.ObjectPlayMotion(NPC, minerva_index, "e018", 15, true)
    if not Flg.Check("FLAG_SUB_070_167_005") and not Flg.Check("FLAG_SUB_070_167_006") then
      Field_InvisibleFollowerAllGuest(0, 0, false)
      Field_InvisibleFollowerAllPartyMember(0, 0, false)
      tlk:StartTalkAndCancelDigimonRide()
      HideMinimap(true)
      HideGuide(true)
      WaitFrame(15)
      FadeAllInWithWait(FADE_BLACK, FADE_TIME)
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, beelze_index, "fe02", 10, 10)
      tlk:Message(base .. "480")
      Field.ObjectPlayMotion(NPC, minerva_index, "e012", 15, true)
      tlk:Message(base .. "490")
      tlk:EndTalk(true)
      Guest.Add(27473)
      Flg.Set("FLAG_SUB_070_167_009")
      EncountFromField_PlaySound(20701670, 10576, false)
    else
      tlk:StartTalkAndCancelDigimonRide()
      HideMinimap(true)
      HideGuide(true)
      WaitFrame(10)
      Field_InvisibleFollowerAllGuest(0, 0, false)
      Field_InvisibleFollowerAllPartyMember(0, 0, false)
      FadeAllInWithWait(FADE_BLACK, FADE_TIME)
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, beelze_index, "fe02", 10, 10)
      tlk:Message(base .. "560")
      tlk:EndTalk(true)
      Guest.Add(27473)
      Flg.Set("FLAG_SUB_070_167_009")
      Flg.Clear("FLAG_SUB_070_167_006")
      EncountFromField_PlaySound(20701670, 10576, false)
    end
  end
end

function S070_167:Event_050()
  if Qst.Sub:Check(self.ID, self.STEP_020, self.STEP_255) then
    local minerva_index = GetIndex(NPC, "s070_167_minerva")
    local beelze_index = GetIndex(NPC, "s070_167_beelze")
    Field.ObjectLoadMotion(NPC, minerva_index, "bn01")
    Field.ObjectLoadMotion(NPC, minerva_index, "bn02")
    Field.ObjectLoadMotion(NPC, minerva_index, "ba02")
    Field.ObjectLoadMotion(NPC, minerva_index, "fe02")
    Field.ObjectLoadMotion(NPC, minerva_index, "fe04")
    Field.ObjectLoadMotion(NPC, minerva_index, "fq01")
    Field.ObjectLoadMotion(NPC, minerva_index, "fq02")
    Field.ObjectLoadMotion(NPC, minerva_index, "fn01_01")
    Field.ObjectLoadMotion(NPC, minerva_index, "e002")
    Field.ObjectLoadMotion(NPC, minerva_index, "e004")
    Field.ObjectLoadMotion(NPC, minerva_index, "e008")
    Field.ObjectLoadMotion(NPC, minerva_index, "e013")
    Field.ObjectLoadMotion(NPC, minerva_index, "e513")
    Field.ObjectLoadMotion(NPC, beelze_index, "bn01")
    Field.ObjectLoadMotion(NPC, beelze_index, "bn02")
    Field.ObjectLoadMotion(NPC, beelze_index, "ba02")
    Field.ObjectLoadMotion(NPC, beelze_index, "fe02")
    Field.ObjectLoadMotion(NPC, beelze_index, "fe04")
    Field.ObjectLoadMotion(NPC, beelze_index, "fq01")
    Field.ObjectLoadMotion(NPC, beelze_index, "fq02")
    Field.ObjectLoadMotion(PLAYER, 1, "e002")
    Field.ObjectLoadMotion(PLAYER, 1, "e004_01")
    Field.ObjectLoadMotion(PLAYER, 1, "e008")
    Field.ObjectLoadMotion(PLAYER, 1, "e012")
    Field.ObjectLoadMotion(PLAYER, 1, "e013")
    Field.ObjectLoadMotion(PLAYER, 1, "e018")
    Field.ObjectLoadMotion(PLAYER, 1, "e019")
    Flg.Clear("FLAG_IS_NOT_MAP_NAME_DISP")
    if Flg.Check("FLAG_SUB_070_167_005") then
      HideMinimap(true)
      HideGuide(true)
      tlk:StartTalkAndCancelDigimonRide()
      Field.ObjectPlayMotion(NPC, minerva_index, "fn01_01", 0, true)
      Field.ObjectPlayMotion(PLAYER, 1, "fn01_01", 0, true)
      Field.ObjectPlayMotion(NPC, beelze_index, "bn02", 0, true)
      Field_InvisibleFollowerAllGuest(0, 0, false)
      Field_InvisibleFollowerAllPartyMember(0, 0, false)
      FadeAllInWithWait(FADE_BLACK, FADE_TIME)
      tlk:Message(base .. "570")
      Field.ObjectPlayMotion(NPC, minerva_index, "e004", 0, true)
      tlk:Message(base .. "580")
      PlayerTurnToObject(NPC, "s070_167_minerva", true, false, 0, 0)
      local result = tlk:Select(3, base .. "590")
      WaitFrame(15)
      if result == RESULT_TALK00 then
        Field.ObjectPlayMotionWithStartMoveMotion(NPC, minerva_index, "e002", 10, 10)
        tlk:Message(base .. "600")
      elseif result == RESULT_TALK01 then
        Field.ObjectPlayMotionWithStartMoveMotion(NPC, minerva_index, "e008", 10, 10)
        tlk:Message(base .. "610")
      elseif result == RESULT_TALK02 then
        Field.ObjectPlayMotionWithStartMoveMotion(NPC, minerva_index, "e002", 10, 10)
        tlk:Message(base .. "620")
      end
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, beelze_index, "fq01", 10, 10)
      tlk:Message(base .. "630")
      Flg.Set("FLAG_SUB_070_167_010")
      Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
      FieldObjectSync(FOR_ALL, false)
      FadeInWithWaitNotFlgCheck(FADE_BLACK, FADE_TIME)
      Cam.Inst:Set(-7.05, -0.099, 1.79, 2.1, 1.439, 5.49, default, 30)
      ObjectTurnToPlayer(NPC, "s070_167_minerva")
      WaitFrame(30)
      Field.ObjectPlayMotion(NPC, minerva_index, "e013", 0, true)
      tlk:Message(base .. "640")
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, minerva_index, "e002", 10, 10)
      tlk:Message(base .. "650")
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, minerva_index, "e008", 10, 10)
      tlk:Message(base .. "660")
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, minerva_index, "e002", 10, 10)
      tlk:Message(base .. "670")
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, minerva_index, "e004", 10, 10)
      tlk:Message(base .. "680")
      Guest.Delete(27473)
      tlk:EndTalk(true)
      WaitFrame(10)
      HideMinimap(false)
      HideGuide(false)
      Qst.Sub:End(self.ID, self.STEP_255)
      WaitFrame(75)
      MapChange("d", 506, "start_03", true, FADE_BLACK, FADE_TIME)
    else
      tlk:StartTalkAndCancelDigimonRide()
      HideMinimap(true)
      HideGuide(true)
      Cam.Inst:Set(0.0193, 1.65, -2.25, -0.031, 0.691, 7.71, default, 0)
      Field_InvisibleFollowerAllGuest(0, 0, false)
      Field_InvisibleFollowerAllPartyMember(0, 0, false)
      Field.ObjectPlayMotion(NPC, minerva_index, "e513", 0, true)
      FadeAllInWithWait(FADE_BLACK, FADE_TIME)
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, beelze_index, "fe02", 10, 10)
      tlk:Message(base .. "500")
      tlk:Message(base .. "510")
      if not Flg.Check("FLAG_SUB_070_167_006") then
        Flg.Set("FLAG_SUB_070_167_006")
      end
      Flg.Clear("FLAG_SUB_070_167_007")
      Flg.Clear("FLAG_SUB_070_167_009")
      Guest.Delete(27473)
      tlk:EndTalk(true)
      MapChange("d", 501, "start_60", true, FADE_BLACK, FADE_TIME)
    end
  end
end

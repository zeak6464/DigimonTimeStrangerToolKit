require("include")

function m020_050()
  Fade_Out(1, 0)
  EVENT_BEGIN()
  Talk.Load("m020")
  LOAD_VOICE()
  SetEventCutNo(8)
  if Debug.IsEventView() then
    SetTimeZone("Noon")
    SetTimeAxis("X2028_daft_20")
    LoadMap("d1072b")
  end
  LoadModel("HERO_01", "Player")
  LoadModel("HEROINE_01", "char_HEROINE")
  LoadModel("chr929_01", "char_OMEGAMON_BIG")
  LoadModel("METALGREYMON_01", "char_METALGREYMON_BIG_BL")
  LoadEffectScript("ef_b_van_100_01", "ef_b_van_100")
  LoadEffectScript("ef01", "ef_b_hea_100")
  LoadEffectScript("eff_01", "ef_e_com_095")
  LoadEffectScript("ef_e_com_011_01", "ef_e_com_011")
  LoadDissolve("METALGREYMON_01", 602)
  LoadSceneViewerResource("c1.0", "d1072b_ca")
  LoadSceneViewerResource("c1.5", "d1072b_ca")
  LoadSceneViewerResource("c2.0", "d1072b_ca")
  LoadSceneViewerResource("c3.0", "d1072b_ca")
  LoadSceneViewerResource("c4.0", "d1072b_ca")
  LoadSceneViewerResource("c5.0", "d1072b_ca")
  LoadSceneViewerResource("c6.0", "d1072b_ca")
  LoadSceneViewerResource("c7.0", "d1072b_ca")
  LoadSceneViewerResource("c8.0", "d1072b_ca")
  LoadEnvironmentFile("c1.0", "es_m020_050_c1.0")
  LoadEnvironmentFile("c1.5", "es_m020_050_c1.5")
  LoadEnvironmentFile("c2.0", "es_m020_050_c2.0")
  LoadEnvironmentFile("c3.0", "es_m020_050_c3.0")
  LoadEnvironmentFile("c4.0", "es_m020_050_c4.0")
  LoadEnvironmentFile("c5.0", "es_m020_050_c5.0")
  LoadEnvironmentFile("c6.0", "es_m020_050_c6.0")
  LoadEnvironmentFile("c7.0", "es_m020_050_c7.0")
  LoadEnvironmentFile("c8.0", "es_m020_050_c8.0")
  Load_DigiviceHologram()
  WaitVistaLoad()
  Event_StopBGM(2, 0)
  Set_DigiviceHologram()
  SetPosition("HERO_01", -7.122, 0.019, 29.942, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 145, 0, "LINEAR", 0, 0)
  SetPosition("HEROINE_01", -7.863, 0.045, 29.423, "LINEAR", 0, 0)
  SetRotation("HEROINE_01", 0, 145, 0, "LINEAR", 0, 0)
  SetPosition("chr929_01", -3.718, 0.019, 25.08, "LINEAR", 0, 0)
  SetRotation("chr929_01", 0, -195, 0, "LINEAR", 0, 0)
  SetPosition("METALGREYMON_01", -7.156, 0, 17.075, "LINEAR", 0, 0)
  SetRotation("METALGREYMON_01", 0, 22, 0, "LINEAR", 0, 0)
  PlayMotion("HERO_01", "fn01_01", 0, true, 0)
  SetFace("HERO_01", "E03_M10", 0, 1, 0, 0)
  PlayMotion("HEROINE_01", "fn01_01", 0, true, 0)
  SetFace("HEROINE_01", "E09_M03", 0, 1, 0, 0)
  PlayMotion("chr929_01", "bn01", 0, true, 0)
  ChangeDigimonFace("METALGREYMON_01", EYE_EXPRESSION_CLOSE, 0)
  SetScale("ef_b_van_100_01", 2, 2, 2)
  SetPosition("ef_b_van_100_01", -9.103, 0.019, 11.969, "LINEAR", 0, 0)
  SetRotation("ef_b_van_100_01", 0, 135, 0, "LINEAR", 0, 0)
  SetPosition("ef_e_com_011_01", -7.156, 0, 17.075, "LINEAR", 0, 0)
  SetRotation("ef_e_com_011_01", 0, 22, 0, "LINEAR", 0, 0)
  SetFace("HERO_02", "E02_M09", 0, 1, FACE_BLENDTIME, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", -60, 0, 0, false, "SCURVE", 0, 0)
  BlendEye("HEROINE_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HEROINE_01", -60, 0, 0, true, "SCURVE", 0, 0)
  ModelVisible("chr929_01", false, 0, 0)
  FIELD_SET()
  EVENT_START()
  CUT("1.0")
  SetEnv_All("c1.0", 0)
  SetCamera(-13.671, 9.441, 24.287, 0, 30, "LINEAR", 0, false, 0, false)
  SetCameraTarget(-7.247, 12.873, 18.508, "LINEAR", 0, false, 0, false)
  SetCamera(-14.895, 6.498, 24.674, 0, 30, "DECEL", 8, true, 2, false)
  SetCameraTarget(-9.734, 12.392, 14.738, "DECEL", 8, true, 2, false)
  SetCamera(-14.895, 6.498, 24.674, 0, 30, "LINEAR", 60, false, 10)
  SetCameraTarget(-9.734, 12.812, 12.988, "LINEAR", 60, false, 10)
  local SE_01 = Event_PlaySE(300104, 100, true, 0, 0)
  Event_PlaySE(300202, 80, true, 0, 0)
  Event_StopSE(SE_01, 0.8, 1.5)
  Event_Quake_Start(9, 1, 30, 0)
  Event_Quake_Stop(30)
  PlayMotion("METALGREYMON_01", "e214", 0, false, 0)
  Fade_In(1, 3)
  WaitFrame(55)
  CUT("1.5")
  SetEnv_All("c1.5", 0)
  SetCamera(-25.462, 3.976, 19.682, 14, 40, "LINEAR", 0, false, 0)
  SetCameraTarget(-0.034, 12.895, -1.015, "LINEAR", 0, false, 0)
  SetCamera(2.775, 7.149, 25.458, 0, 40, "SCURVE", 170, true, 0, false)
  SetCameraTarget(-18.177, 10.545, 4.217, "SCURVE", 170, true, 0, false)
  PlayEffect("ef_e_com_011_01", false, 0)
  Event_PlaySE(404030, 100, true, 0, 0)
  PlayDissolve("METALGREYMON_01", 602)
  WaitFrame(20)
  Event_Quake_Start(6, 2.5, 140, 0)
  Event_Quake_Stop(150)
  WaitFrame(180)
  CUT("2.0")
  SetEnv_All("c2.0", 0)
  Event_PlayBGM(704, 0, 0)
  ModelVisible("chr929_01", true, 0, 0)
  SetCamera(-6.876, 1.074, 30.604, 0, 60, "LINEAR", 0, false, 0)
  SetCameraTarget(-4.719, 2.789, 23.459, "LINEAR", 0, false, 0)
  SetCamera(-7.072, 0.918, 31.255, 0, 60, "SCURVE", 120, false, 0)
  SetCameraTarget(-4.719, 4.289, 23.459, "SCURVE", 120, false, 0)
  WaitFrame(150)
  CUT("3.0")
  SetEnv_All("c3.0", 0)
  PlayMotion("chr929_01", "e001", 0, true, 0)
  SetEyeUVOffsetDigi("chr929_01", 0, 0.042, "SCURVE", 0, 0)
  BlendFaceDigi("chr929_01", 15, 0, 0, "SCURVE", 0, 0)
  SetPosition("chr929_01", -3.718, 0, 25.08, "LINEAR", 0, 0)
  SetRotation("chr929_01", 0, 23, 0, "LINEAR", 0, 0)
  SetRotation("chr929_01", 0, 117.5, 0, "SCURVE", 22, 0)
  SetCamera(-1.045, 4.957, 23.463, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(-4.02, 6.234, 25.549, "LINEAR", 0, false, 0)
  Event_PlaySE(403002, 50, false, 0, 0)
  WaitFrame(40)
  CUT("4.0")
  SetEnv_All("c4.0", 0)
  SetPosition("HERO_01", 2.053, 0, 27.581, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 188, 0, "LINEAR", 0, 0)
  SetPosition("HEROINE_01", 1.148, 0.026, 27.581, "LINEAR", 0, 0)
  SetRotation("HEROINE_01", 0, 180, 0, "LINEAR", 0, 0)
  SetPosition("chr929_01", 1.763, 0, 20.036, "LINEAR", 0, 0)
  SetRotation("chr929_01", 0, -27.5, 0, "LINEAR", 0, 0)
  SetCamera(3.543, 7.447, 19.974, 0, 60, "LINEAR", 0, false, 0)
  SetCameraTarget(0.647, 2.761, 23.169, "LINEAR", 0, false, 0)
  SetCamera(3.432, 7.452, 19.885, 0, 60, "LINEAR", 60, false, 0)
  SetCameraTarget(0.647, 2.761, 23.169, "LINEAR", 60, false, 0)
  WaitFrame(60)
  CUT("5.0")
  SetEnv_All("c5.0", 0)
  SetPosition("HERO_01", -5.227, 0, 27.581, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 180, 0, "LINEAR", 0, 0)
  SetPosition("HEROINE_01", -6.132, 0.026, 27.581, "LINEAR", 0, 0)
  SetRotation("HEROINE_01", 0, 180, 0, "LINEAR", 0, 0)
  SetPosition("chr929_01", -5.577, 0, 22.126, "LINEAR", 0, 0)
  SetRotation("chr929_01", 0, -3, 0, "LINEAR", 0, 0)
  SetPosition("eff_01", -5.577, 0, 22.126, "LINEAR", 0, 0)
  SetRotation("eff_01", 0, -3, 0, "LINEAR", 0, 0)
  SetEyeUVOffsetDigi("chr929_01", 0, 0, "SCURVE", 0, 0)
  BlendFaceDigi("chr929_01", 0, 0, 0, "SCURVE", 0, 0)
  PlayEffect("eff_01", false, 51)
  Event_PlaySE(403008, 100, false, 0, 1.8)
  SetCamera(-5.664, 0.829, 28.787, 0, 50, "LINEAR", 0, false, 0)
  SetCameraTarget(-5.663, 3.955, 21.439, "LINEAR", 0, false, 0)
  WaitFrame(15)
  BlendFace("HEROINE_01", -60, 0, 0, true, "SCURVE", 20, 0)
  PlayMotion("chr929_01", "e500", 5, false, 0)
  PlayMotion("HEROINE_01", "e005", 2, true, 40)
  PlayMotion("HERO_01", "e006", 2, true, 40)
  WaitFrame(50)
  CUT("6.0")
  SetEnv_All("c6.0", 0)
  SetPosition("chr929_01", 4.463, 0, 15.256, "LINEAR", 0, 0)
  SetRotation("chr929_01", 0, 35, 0, "LINEAR", 0, 0)
  SetPosition("eff_01", 4.463, 0, 15.256, "LINEAR", 0, 0)
  SetRotation("eff_01", 0, 35, 0, "LINEAR", 0, 0)
  PlayMotion("chr929_01", "e500", 0, false, 0)
  SetStartFrame("chr929_01", "e500", 40, 0)
  SetPosition("chr929_01", 4.463, 50, 15.256, "LINEAR", 20, 30)
  SetCamera(6.876, 59.381, 17.545, 0, 50, "LINEAR", 0, false, 0)
  SetCameraTarget(4.46, 51.381, 15.26, "LINEAR", 0, false, 0)
  SetCamera(7.376, 59.381, 16.51, 0, 50, "LINEAR", 170, true, 0)
  SetCameraTarget(4.46, 51.381, 15.26, "LINEAR", 170, true, 0)
  WaitFrame(110)
  CUT("7.0")
  SetEnv_All("c7.0", 0)
  ModelVisible("eff_01", false, 0, 0)
  SetPosition("HERO_01", -1.227, 0, 32.411, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 180, 0, "LINEAR", 0, 0)
  SetPosition("HEROINE_01", -2.132, 0.026, 32.411, "LINEAR", 0, 0)
  SetRotation("HEROINE_01", 0, 180, 0, "LINEAR", 0, 0)
  PlayMotion("HEROINE_01", "fn01_01", 0, true, 0)
  PlayMotion("HERO_01", "fn01_01", 0, true, 0)
  SetCamera(-1.212, 1.199, 34.812, 0, 40, "LINEAR", 0, false, 0)
  SetCameraTarget(-1.61, 6.751, 26.627, "LINEAR", 0, false, 0)
  SetCamera(-1.158, 0.734, 34.567, 0, 40, "DECEL", 150, true, 0)
  SetCameraTarget(-1.547, 3.123, 26.493, "DECEL", 150, true, 0)
  WaitFrame(60)
  MessageTalk("m020_050_010")
  MessageClose()
  WaitFrame(30)
  CUT("8.0")
  SetEnv_All("c8.0", 0)
  SetPosition("HERO_01", 4.845, 0, 21.133, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, -140.5, 0, "LINEAR", 0, 0)
  BlendFace("HERO_01", -50, 0, 0, false, "SCURVE", 0, 0)
  SetPosition("HEROINE_01", 4.157, 0.026, 21.721, "LINEAR", 0, 0)
  SetRotation("HEROINE_01", 0, -140.5, 0, "LINEAR", 0, 0)
  SetCamera(4.68, 1.262, 18.907, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(4.445, 1.31, 21.771, "LINEAR", 0, false, 0)
  BlendEye("HEROINE_01", 0, -26, "SCURVE", 20, 0)
  BlendFace("HEROINE_01", 0, -85, 0, true, "SCURVE", 20, 0)
  MessageTalk("m020_050_020")
  MessageClose()
  WaitFrame(10)
  BlendEye("HEROINE_01", 0, 0, "SCURVE", 20, 0)
  BlendFace("HEROINE_01", 0, 0, 0, true, "SCURVE", 20, 0)
  SetPosition("HEROINE_01", -3.591, 0, 27.38, "SCURVE", 160, 0)
  SetRotation("HEROINE_01", 0, -38.5, 0, "SCURVE", 20, 0)
  PlayMotion("HEROINE_01", "fw01_01", 10, true, 0)
  Event_PlaySE(210022, 100, false, 0, 0)
  Event_PlaySE(210022, 100, false, 0, 0.6)
  Event_PlaySE(210022, 100, false, 0, 1.2)
  Event_PlaySE(210022, 100, false, 0, 1.8)
  Event_PlaySE(210022, 100, false, 0, 2.4)
  SetCamera(4.502, 1.439, 20.254, 0, 40, "SCURVE", 90, true, 0)
  SetCameraTarget(4.846, 1.432, 21.116, "SCURVE", 90, true, 0)
  WaitFrame(80)
  local slot_id = Event_PlaySE(500006, 100, true, 0, 0)
  WaitFrame(40)
  SetFace("HERO_01", "E03_M04", 0, 1, 0, 0)
  BlendEye("HERO_01", 39, 0, "SCURVE", 20, 0)
  BlendFace("HERO_01", 0, 0, 0, false, "SCURVE", 20, 0)
  Event_StopSE(slot_id, 0.2, 2.5)
  local slot_id = Event_PlaySE(402002, 100, false, 0, 3)
  Play_DigiviceHologram()
  WaitFrame(20)
  PlayMotion("Horo_AGENT", "e002", 5, true, 0)
  MessageTalk("m020_050_030")
  MessageClose()
  PlayMotion("Horo_AGENT", "e021_01", 5, true, 0)
  MessageTalk("m020_050_040")
  MessageTalk("m020_050_050")
  EndMotion("Horo_AGENT", 0)
  MessageClose()
  WaitFrame(20)
  MessageTalkSel(3, "m020_050_060")
  result = Talk.GetResultSelectedNum()
  if result == RESULT_TALK00 then
    PlayMotionBlend("HERO_01", "blend01", 3, false, 0)
    SetFace("HERO_01", "E03_M15", 0, 0, FACE_BLENDTIME, 0)
    SetFace("HERO_01", "E03_M15", 0, 1, FACE_BLENDTIME, 20)
    WaitFrame(60)
  elseif result == RESULT_TALK01 then
    BlendEye("HERO_01", 20, 0, "SCURVE", 20, 0)
    BlendFace("HERO_01", 27, 0, 0, false, "SCURVE", 20, 0)
    SetFace("HERO_01", "E03_M15", 1, 0, FACE_BLENDTIME, 0)
    SetFace("HERO_01", "E03_M15", 0, 1, FACE_BLENDTIME, 40)
    WaitFrame(60)
  elseif result == RESULT_TALK02 then
    BlendEye("HERO_01", 20, 0, "SCURVE", 20, 0)
    BlendFace("HERO_01", 27, 0, 0, false, "SCURVE", 20, 0)
    SetFace("HERO_01", "E03_M15", 1, 0, FACE_BLENDTIME, 0)
    SetFace("HERO_01", "E03_M15", 0, 1, FACE_BLENDTIME, 40)
    WaitFrame(60)
  end
  BlendEye("HERO_01", 39, 0, "SCURVE", 20, 0)
  BlendFace("HERO_01", 0, 0, 0, false, "SCURVE", 20, 0)
  SetFace("HERO_01", "F15", 0, 1, FACE_BLENDTIME, 0)
  PlayMotion("Horo_AGENT", "e002", 5, true, 0)
  MessageTalk("m020_050_070")
  MessageClose()
  WaitFrame(10)
  BlendEye("HERO_01", 0, 30, "SCURVE", 20, 60)
  BlendFace("HERO_01", 0, 50, 0, false, "SCURVE", 20, 60)
  Close_DigiviceHologram()
  Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
  if Debug.IsEventView() then
    Event_StopBGM(0, 0)
    Event_StopAllSE(0, 0)
  end
  Event_StopBGM(5, 0)
  EVENT_END()
end

function CUT(cut_no)
  CUT_START(cut_no)
end

function main()
  m020_050()
end

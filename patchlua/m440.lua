gGimText = "field_text"
M440 = {
  ID = 440,
  STEP_001 = 1,
  STEP_002 = 2,
  STEP_003 = 3,
  STEP_004 = 4,
  STEP_005 = 5,
  STEP_006 = 6,
  STEP_010 = 10,
  STEP_012 = 12,
  STEP_013 = 13,
  STEP_015 = 15,
  STEP_020 = 20,
  STEP_022 = 22,
  STEP_025 = 25,
  STEP_035 = 35,
  STEP_040 = 40,
  STEP_045 = 45,
  STEP_050 = 50,
  STEP_055 = 55,
  STEP_057 = 57,
  STEP_058 = 58,
  STEP_075 = 75,
  STEP_080 = 80,
  STEP_095 = 95,
  STEP_097 = 97,
  STEP_099 = 99,
  STEP_101 = 101,
  STEP_103 = 103,
  STEP_105 = 105,
  STEP_107 = 107,
  STEP_109 = 109,
  STEP_111 = 111,
  STEP_113 = 113,
  STEP_120 = 120,
  STEP_125 = 125,
  STEP_126 = 126,
  STEP_127 = 127,
  STEP_132 = 132,
  STEP_133 = 133,
  STEP_135 = 135,
  STEP_140 = 140,
  STEP_150 = 150,
  STEP_185 = 185,
  STEP_190 = 190,
  STEP_255 = 255,
  Item = {SPBatteryA = 795, SPBatteryB = 796}
}

function M440:Event_010()
  if Flg.Check("FLAG_MAIN_21_060", "FLAG_MAIN_22_010") then
    Flg.Set("FLAG_SKIP_AREACHANGE_MOVE")
    Flg.Set("FLAG_MAIN_22_010")
    Flg.Set("FLAG_FREEARENA_RELEASE_013")
    Flg.Set("FLAG_FREEARENA_RELEASE_014")
    Flg.Set("FLAG_FREEARENA_RELEASE_015")
    Common.SetDigimonGraspState(186, DIGIMON_GRASP_FLAG_JOIN)
    if Common.GetGameClearNum() < 1 then
      Common.SetAegiomonFriendship(100)
      Common.SetAegiomonGiftPoint(99000)
    end
    WaitFrame(60)
    Qst.Main:Start(self.ID, self.STEP_001)
  end
end

function M440:Event_495()
  if Flg.Check("FLAG_MAIN_22_010", "FLAG_MAIN_22_015") then
    local tlk = Tlk:new("d09", 1, true)
    tlk:StartTalkAndCancelDigimonRide()
    Flg.Set("FLAG_MAIN_22_015")
    tlk:Message("f_d0900_0020_0010")
    tlk:Message("f_d0900_0020_0020")
    local result = tlk:Select(2, "f_d0900_0020_0030")
    if result == RESULT_TALK00 then
      tlk:EndTalk()
      Flg.Set("FLAG_FIELD_TO_D1204")
      MapChange("d", 607, "start_00", true, FADE_BLACK, FADE_TIME)
    end
    tlk:EndTalk()
  end
end

function M440:Event_496()
  if Qst.Main:Check(self.ID, self.STEP_001, self.STEP_002) then
    Execute("m440_010")
    Execute("m440_011")
    Flg.Set("FLAG_MAIN_22_015")
    Field_InvisibleFollowerAllPartyMember(1, 0, false)
    WaitFrame(10)
    Obj:new(PLAYER, ""):SetPos(27.966, 7.98, -54.07, true)
    Obj:new(PLAYER, ""):SetRotationY(10, 0)
    Field.FollowerWarp()
    WaitFrame(5)
    local aegio = Field.GetFollowerIndexForAegiomon()
    local heroine = Field.GetFollowerIndexByGuestID(GST_HEROINE)
    Field.ObjectSuspendAutoTransparentForCamera(FLD_OBJ_FOLLOWER, heroine)
    Field.ObjectSetPos(FLD_OBJ_FOLLOWER, heroine, 27.087, 7.98, -54.881, true)
    Field.ObjectSetRotationY(FLD_OBJ_FOLLOWER, heroine, 10, 0)
    Field.ObjectSuspendAutoTransparentForCamera(FLD_OBJ_FOLLOWER, aegio)
    Field.ObjectSetPos(FLD_OBJ_FOLLOWER, aegio, 29.055, 8.03, -54.711, true)
    Field.ObjectSetRotationY(FLD_OBJ_FOLLOWER, aegio, 0, 0)
    Cam.Inst:Set(28.324, 9.28, -62.312, 27.653, 9.28, -52.335, default, 0)
    Obj:new(NPC, "npc0000"):CancelInvisible()
    Field.ObjectLoadMotion(FLD_OBJ_FOLLOWER, aegio, "e008")
    Field.ObjectLoadMotion(FLD_OBJ_FOLLOWER, heroine, "e008")
    Field.ObjectLoadMotion(PLAYER, 1, "e008")
    Field.ObjectPlayMotion(FLD_OBJ_FOLLOWER, heroine, "e008", 10, true)
    Field.ObjectPlayMotion(FLD_OBJ_FOLLOWER, aegio, "e008", 10, true)
    Field.ObjectPlayMotion(PLAYER, 1, "e008", 10, true)
    WaitFrame(15)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    local tlk = Tlk:new("d09", 1, true, false)
    tlk:StartTalkAndCancelDigimonRide()
    WaitFrame(15)
    tlk:Message("f_d0900_0040_0005")
    tlk:Message("f_d0900_0040_0007")
    MessageClose()
    WaitFrame(30)
    tlk:Message("f_d0900_0040_0010")
    WaitFrame(10)
    Field.ObjectPlayMotion(FLD_OBJ_FOLLOWER, heroine, "fn01_01", 10, true)
    Field.ObjectPlayMotion(FLD_OBJ_FOLLOWER, aegio, "fn01_01", 10, true)
    Field.ObjectPlayMotion(PLAYER, 1, "fn01_01", 10, true)
    Cam.Inst:Set(-8.526, 6.901, -51.76, 1.332, 8.345, -52.606, default, 30)
    MessageClose()
    WaitFrame(45)
    Obj:new(PLAYER, ""):SetRotationY(260, 0)
    Field.ObjectSetRotationY(FLD_OBJ_FOLLOWER, heroine, 260, 0)
    Field.ObjectSetRotationY(FLD_OBJ_FOLLOWER, aegio, 260, 0)
    tlk:Message("f_d0900_0040_0020")
    SetFollowerCameraOperateRotation(0, 250)
    tlk:EndTalk()
    Field_CancelInvisibleFollowerAllPartyMember(1, 15, false, false)
    Field.ObjectCancelSuspendAutoTransparentForCamera(FLD_OBJ_FOLLOWER, aegio)
    Field.ObjectCancelSuspendAutoTransparentForCamera(FLD_OBJ_FOLLOWER, heroine)
    Cam.Inst:Clear(30)
    Qst.Main:Set(self.ID, self.STEP_002)
  end
end

function M440:Event_500()
  if Qst.Main:Check(self.ID, self.STEP_002, self.STEP_003) and Flg.Check("FLAG_MAIN_22_015", "FLAG_MAIN_22_021") then
    local tlk = Tlk:new("d09", 1, true)
    local piyo = GetIndex(NPC, "npc0000")
    local bn01 = Motion.Object:new(NPC, "npc0000", "bn01")
    local bn02 = Motion.Object:new(NPC, "npc0000", "bn02")
    local fe02 = Motion.Object:new(NPC, "npc0000", "fe02")
    Field.ObjectLoadMotion(NPC, piyo, "f000")
    Field.ObjectLoadMotion(NPC, piyo, "fq01")
    Field.ObjectLoadMotion(NPC, piyo, "fq02")
    Field.ObjectLookAtTheObject(PLAYER, 1, NPC, piyo, 15, 10)
    Field.ObjectLookAtTheObject(NPC, piyo, PLAYER, 1, 15, 10)
    Field.ObjectPlayMotion(NPC, piyo, "f000", 10, true)
    tlk:StartTalkAndCancelDigimonRide()
    Flg.Set("FLAG_MAIN_22_020")
    Flg.Set("FLAG_MAIN_22_021")
    tlk:Message("f_d0900_0010_0010")
    bn01:Play(10, true)
    tlk:Message("f_d0900_0010_0020")
    tlk:Message("f_d0900_0010_0030")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, piyo, "fq02", 10, 10)
    tlk:Message("f_d0900_0010_0040")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, piyo, "fq01", 10, 10)
    tlk:Message("f_d0900_0010_0050")
    tlk:Message("f_d0900_0010_0060")
    local result = tlk:Select(2, "f_d0900_0010_0070")
    if result == RESULT_TALK00 then
      PlayerTurnToObject(NPC, "npc0000", true, false, 0, 0)
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, piyo, "fe02", 10, 10)
      WaitFrame(30)
      tlk:Message("f_d0900_0010_0080")
      Flg.Set("FLAG_MAIN_22_100")
      tlk:EndTalk()
      Field.ObjectResetAim(NPC, piyo, 5)
      Field.ObjectResetAim(PLAYER, 1, 5)
      Field_InvisibleFollowerAllGuest(0, 0, false)
      Field_InvisibleFollowerAllPartyMember(0, 0, false)
      self:Event_506()
    end
    tlk:EndTalk()
    Field.ObjectPlayMotion(NPC, piyo, "f000", 10, true)
  end
end

function M440:Event_505()
  if Qst.Main:Check(self.ID, self.STEP_002, self.STEP_004) and Flg.Check("FLAG_MAIN_22_021") then
    local piyo = GetIndex(NPC, "npc0000")
    local fe02 = Motion.Object:new(NPC, "npc0000", "fe02")
    Field.ObjectLoadMotion(NPC, piyo, "f000")
    Field.ObjectLoadMotion(NPC, piyo, "bn01")
    Field.ObjectLookAtTheObject(PLAYER, 1, NPC, piyo, 15, 10)
    Field.ObjectLookAtTheObject(NPC, piyo, PLAYER, 1, 15, 10)
    local tlk = Tlk:new("d09", 1, true)
    tlk:StartTalkAndCancelDigimonRide()
    tlk:Message("f_d0900_0010_0060")
    local result = tlk:Select(2, "f_d0900_0010_0070")
    if result == RESULT_TALK00 then
      PlayerTurnToObject(NPC, "npc0000", true, false, 0, 0)
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, piyo, "fe02", 10, 10)
      WaitFrame(30)
      tlk:Message("f_d0900_0010_0080")
      Flg.Set("FLAG_MAIN_22_100")
      tlk:EndTalk()
      Field.ObjectResetAim(NPC, piyo, 5)
      Field.ObjectResetAim(PLAYER, 1, 5)
      Field_InvisibleFollowerAllGuest(0, 0, false)
      Field_InvisibleFollowerAllPartyMember(0, 0, false)
      self:Event_506()
    end
    tlk:EndTalk()
    Field.ObjectPlayMotion(NPC, piyo, "f000", 10, true)
  end
end

function M440:Event_506()
  if Qst.Main:Check(self.ID, self.STEP_002, self.STEP_004) then
    local tlk = Tlk:new("d09", 1, true)
    tlk:StartTalkAndCancelDigimonRide()
    local se_slot = PlaySE(403087, 100)
    local pc = Motion.Object:new(PLAYER, "", "r307_in01")
    local piyo = GetIndex(NPC, "npc0000")
    local piyo_m = Motion.Object:new(NPC, "npc0000", "bs01")
    pc:Play(10, false)
    piyo_m:Play(10, false)
    WaitFrame(5)
    Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
    Field.CancelPlayerAnywhereDigimonRide()
    pc:Reset(0)
    piyo_m:Reset(0)
    Field.ObjectReleaseMonopolyOnAll(NPC, piyo)
    Field.ObjectReleaseMonopolyOnAll(PLAYER, 1)
    WaitFrame(10)
    Field_InvisibleFollowerAllGuest(0, 0, false)
    Field_InvisibleFollowerAllPartyMember(0, 0, false)
    Field.ObjectSuspendAutoTransparent(NPC, piyo, AUTO_TRANSPARENT_TYPE_ALL)
    SetControlScriptExternalVariable("piyo_state", "fly")
    Cam.Inst:Set(-48.197, -14.927, -122.887, -44.496, -12.411, -113.944, default, 0)
    WaitFrame(30)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    WaitFrame(60)
    tlk:Message("f_d0900_0010_0090")
    tlk:MessageClose()
    Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
    tlk:EndTalk()
    local se_slot2 = PlaySE(403089, 100)
    StopSE(se_slot, 1)
    WaitFrame(60)
    Qst.Main:Set(self.ID, self.STEP_003)
    Flg.Clear("FLAG_IS_DISPLAYED_MAP_NAME_UI")
    Flg.Set("FLAG_SKIP_AREACHANGE_MOVE")
    MapChangeWithTimeTravel("d", 901, "start_11", AXIS_ORIGINAL, "P2028_daft_441", NOON)
  end
end

function M440:Event_508()
  if Qst.Main:Check(self.ID, self.STEP_003, self.STEP_004) and Flg.Check("FLAG_MAIN_22_100", "FLAG_MAIN_22_105") then
    Field.ObjectLoadMotion(PLAYER, 1, "e017")
    Field.ObjectPlayMotion(PLAYER, 1, "e017", 10, true)
    Cam.Inst:Set(-28.069, -4.976, 78.821, -27.619, -2.393, 88.471, default, 0)
    SetFollowerCameraOperateRotation(7, Obj:new(PLAYER, "").rot_y)
    local tlk = Tlk:new("d09", 1, true)
    START_TALK_ACTION_AND_ZOOM("npc0011", true, false)
    tlk:StartTalkAndCancelDigimonRide()
    Obj:new(PLAYER, ""):SetRotationY(270, 0)
    WaitFrame(15)
    local se_slot1 = PlaySE(400007, 100)
    WaitFrame(30)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    Flg.Set("FLAG_MAIN_22_105")
    WaitFrame(30)
    tlk:Message("f_d0901_0110_0010")
    tlk:EndTalk()
    Field.ObjectPlayMotion(PLAYER, 1, "fn01_01", 20, true)
    END_TALK_ACTION_AND_ZOOM("npc0011", true, false)
    Cam.Inst:Clear(30)
  end
end

function M440:Event_510()
  if Qst.Main:Check(self.ID, self.STEP_003, self.STEP_004) and Flg.Check("FLAG_MAIN_22_100", "FLAG_MAIN_22_115") then
    Flg.Set("FLAG_MAIN_22_110")
    local index = GetIndex(OGIM, "obj_door_01")
    Field.ObjectLoadMotion(OGIM, index, "e001")
    Field_InvisibleFollowerAllPartyMember(0, 10, false)
    Field_InvisibleFollowerAllGuest(0, 10, false)
    Cam.Inst:Set(-24.8278, 4.3497, 30.9732, -24.7493, 0.3127, 40.1218, default, 40)
    WaitFrame(15)
    Field.ObjectPlayMotion(OGIM, index, "e001", 10, false)
    Obj:new(OGIM, "col_door_01"):Invisible(5)
    Obj:new(OGIM, "obj_door_01"):SetEnableCheckAndFieldAttack(false)
    WaitFrame(25)
    local se_slot = PlaySE(201009, 100)
    WaitFrame(190)
    StopSE(se_slot, 30)
    PlaySE(201019, 100)
    WaitFrame(50)
    Cam.Inst:Clear(40)
    WaitFrame(20)
    Field_CancelInvisibleFollowerAllPartyMember(0, 30, false, true)
    Field_CancelInvisibleFollowerAllGuest(0, 30, false, true)
    Qst.Main:Set(self.ID, self.STEP_004)
  end
end

function M440:Event_515()
  if Qst.Main:Check(self.ID, self.STEP_004, self.STEP_005) and Flg.Check("FLAG_MAIN_22_110", "FLAG_MAIN_22_115") then
    Flg.Set("FLAG_MAIN_22_115")
    local tlk = Tlk:new("d09", 1, true)
    tlk:StartTalkAndCancelDigimonRide()
    tlk:Message("f_d0901_0010_0010")
    tlk:MessageClose()
    local pc = Obj:new(PLAYER, "")
    local pluto = Obj:new(NPC, "npc0001")
    pc:LookAtTheObject(pluto.type, pluto.name, 20)
    pluto:LookAtTheObject(pc.type, pc.name, 20)
    Cam.Inst:Set(-17.203, 2.601, 23.217, -26.636, 1.359, 26.295, default, 30, EASING_MODE_QUADRATIC_IN_OUT, false)
    WaitFrame(30)
    SetFollowerCameraOperateRotation(-10, 55)
    tlk:Message("f_d0901_0010_0011")
    Cam.Inst:Clear(30)
    tlk:EndTalk()
    Qst.Main:Set(self.ID, self.STEP_005)
  end
end

function M440:Event_520()
  if Qst.Main:Check(self.ID, self.STEP_005, self.STEP_006) and Flg.Check("FLAG_MAIN_22_110", "FLAG_MAIN_22_120") then
    Flg.Set("FLAG_MAIN_22_120")
    if Field.IsPlayerAnywhereDigimonRiding() then
      Field.CancelPlayerAnywhereDigimonRide(false)
      WaitFrame(15)
    end
    local geko = Obj:new(NPC, "npc0006")
    local geko_index = GetIndex(NPC, "npc0007")
    local npc_geko = "npc0008"
    Obj:new(NPC, npc_geko):Invisible()
    local bn01 = Motion.Object:new(NPC, "npc0006", "bn01")
    local ba02 = Motion.Object:new(NPC, "npc0006", "ba02")
    local pluto_index = GetIndex(NPC, "npc0001")
    local npc_pluto = "npc0001"
    local e002 = Motion.Object:new(NPC, "npc0001", "e002")
    local e008 = Motion.Object:new(NPC, "npc0001", "e008")
    local p_bn01 = Motion.Object:new(NPC, "npc0001", "bn01")
    Obj:new(PLAYER, ""):MoveToTarget2D(29.86, 6.986, 7, 30)
    local tlk = Tlk:new("d09", 1, true)
    tlk:StartTalkAndCancelDigimonRide()
    geko:SetRotationY(180, 0)
    Cam.Inst:Set(30.84, 19.78, 9.581, 37.429, 24.17, 15.68, default, 30)
    WaitFrame(30)
    FieldObjectSync(NPC, false)
    e008:Play(20, true)
    tlk:Message("f_d0901_0010_0020")
    tlk:Message("f_d0901_0010_0025")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, pluto_index, "e002", 20, 20)
    tlk:Message("f_d0901_0010_0030")
    tlk:Message("f_d0901_0010_0033")
    e008:Play(20, true)
    tlk:Message("f_d0901_0010_0035")
    tlk:MessageClose()
    Cam.Inst:Set(33.246, 15.28, 9.993, 39.932, 12.89, 17.033, default, 0)
    WaitFrame(15)
    PlayEffectScript("ef_f_mov_111_wa", geko.pos.x, geko.pos.y + 1, geko.pos.z, 0, 1)
    PlaySE(200006, 100)
    WaitFrame(20)
    geko:CancelInvisible(15)
    ba02:Play(15, true)
    Obj:new(OGIM, "eff_geko_01"):CancelInvisible(5)
    Field.ObjectLookAtTheObject(NPC, pluto_index, FLD_OBJ_NPC, GetIndex(FLD_OBJ_NPC, "npc0006"), 30)
    tlk:Message("f_d0901_0010_0040")
    Field.ObjectLookAtTheObject(PLAYER, 1, FLD_OBJ_NPC, GetIndex(FLD_OBJ_NPC, "npc0006"), 30)
    WaitFrame(30)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, pluto_index, "e002", 20, 20)
    tlk:Message("f_d0901_0010_0050")
    Field.ObjectResetAim(PLAYER, 1, 30)
    WaitFrame(30)
    tlk:EndTalk()
    Fade_OutNoLoadingWithWait(0, FADE_TIME)
    Obj:new(OGIM, "eff_geko_01"):Invisible()
    Flg.Set("FLAG_MAIN_22_120A")
    FieldObjectSync(NPC, false)
    Cam.Inst:Clear(0)
    SetFollowerCameraOperateRotation(0, 120)
    geko:SetRotationYToPlayer(0)
    bn01:Play(0, true)
    FadeAllInWithWait(0, FADE_TIME)
    Qst.Main:Set(self.ID, self.STEP_006)
  end
end

function M440:Event_530()
  if Qst.Main:Check(self.ID, self.STEP_006, self.STEP_010) then
    Field.CancelPlayerAnywhereDigimonRide()
    local geko_index = GetIndex(NPC, "npc0006")
    local npc_geko = "npc0008"
    Obj:new(NPC, npc_geko):CancelInvisible()
    Field.ObjectLoadMotion(NPC, geko_index, "bn01")
    Field.ObjectLoadMotion(NPC, geko_index, "ba01")
    Field.ObjectLoadMotion(NPC, geko_index, "fe01")
    Field.ObjectLoadMotion(NPC, geko_index, "fe04")
    Field.ObjectLoadMotion(NPC, geko_index, "bd01")
    Field.ObjectLoadMotion(PLAYER, 1, "e002")
    Field.ObjectLoadMotion(PLAYER, 1, "e017")
    Field.ObjectLoadMotion(PLAYER, 1, "bn01")
    Field.ObjectLoadMotion(PLAYER, 1, "bc01")
    Field.LoadEffectScript("ef_f_mov_111_wa", 2)
    Fade_OutNoLoadingWithWait(0, FADE_TIME)
    Cam.Inst:Set(44.387, 11.449, 17.145, 36.075, 14.63, 12.585, default, 0)
    Obj:new(PLAYER, ""):SetPos(37.146, 12.849, 12.773, true)
    local player_pos = Field.ObjectGetPosition(FLD_OBJ_PLAYER, 1)
    local geko_pos = Field.ObjectGetPosition(NPC, geko_index)
    local obj1_to_obj2_rot = Field.GetAngleToTarget2D(player_pos.x, player_pos.z, geko_pos.x, geko_pos.z)
    Field.ObjectSetRotationY(FLD_OBJ_PLAYER, 1, obj1_to_obj2_rot, 0)
    PlayerLookAtObject(NPC, "npc0006")
    local obj2_to_obj1_rot = Field.GetAngleToTarget2D(geko_pos.x, geko_pos.z, player_pos.x, player_pos.z)
    Field.ObjectSetRotationY(NPC, geko_index, obj2_to_obj1_rot, 0)
    local tlk = Tlk:new("d09", 1, true)
    tlk:StartTalkAndCancelDigimonRide()
    WaitFrame(20)
    FadeAllInWithWait(0, FADE_TIME)
    if Flg.Check("FLAG_MAIN_22_120", "FLAG_MAIN_22_130") then
      Flg.Set("FLAG_MAIN_22_130")
      WaitFrame(20)
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, geko_index, "ba01", 10, 10)
      tlk:Message("f_d0901_0020_0010")
    else
      tlk:Message("f_d0901_0020_0018")
    end
    local result = tlk:Select(2, "f_d0901_0020_0011")
    if result == RESULT_TALK00 then
      Flg.Set("FLAG_MAIN_22_140")
      Field.ObjectPlayMotionWithStartMoveMotion(PLAYER, 1, "bc01", 10, 10)
      WaitFrame(15)
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, geko_index, "bd01", 10, 10)
      tlk:Message("f_d0901_0020_0020")
      Field.ObjectPlayMotion(NPC, geko_index, "fe01", 10, true)
      tlk:Message("f_d0901_0020_0030")
      tlk:MessageClose()
      Field.ObjectPlayMotion(NPC, geko_index, "fe04", 10, false)
      player_pos = Field.ObjectGetPosition(FLD_OBJ_PLAYER, 1)
      geko_pos = Field.ObjectGetPosition(NPC, geko_index)
      obj1_to_obj2_rot = Field.GetAngleToTarget2D(player_pos.x, player_pos.z, geko_pos.x, geko_pos.z)
      local vector2d = Field.GetUnitVector2D(obj1_to_obj2_rot)
      PlayEffectScript("ef_f_mov_111_wa", player_pos.x + vector2d.x, player_pos.y + 1, player_pos.z + vector2d.z, 0, 1)
      PlaySE(200006, 100)
      WaitFrame(20)
      Obj:new(PLAYER, ""):Invisible(5)
      Obj:new(NPC, "npc0006"):Invisible(5)
      Fade_OutNoLoadingWithWait(0, FADE_TIME)
      FieldObjectSync(FOR_ALL, false)
      Obj:new(NPC, "npc0015"):Invisible(5)
      WaitFrame(1)
      Obj:new(PLAYER, ""):SetPos(-25.484, -17.205, -43.075, true)
      Obj:new(PLAYER, ""):SetRotationY(0, 0)
      Cam.Inst:Set(28.75, 16.098, 5.522, 34.837, 20.605, 12.049, default, 0)
      WaitFrame(1)
      Obj:new(NPC, "npc0008"):Invisible()
      geko_index = GetIndex(NPC, "npc0008")
      Field.ObjectLoadMotion(NPC, geko_index, "fe04")
      local aigio_index = GetIndex(NPC, "npc0015")
      local aigio_pos = Field.ObjectGetPosition(NPC, aigio_index)
      player_pos = Field.ObjectGetPosition(FLD_OBJ_PLAYER, 1)
      geko_pos = Field.ObjectGetPosition(NPC, geko_index)
      obj1_to_obj2_rot = Field.GetAngleToTarget2D(player_pos.x, player_pos.z, geko_pos.x, geko_pos.z)
      Field.ObjectResetAim(FLD_OBJ_PLAYER, 1, 0)
      WaitFrame(20)
      FadeAllInWithWait(0, FADE_TIME)
      vector2d = Field.GetUnitVector2D(obj1_to_obj2_rot)
      PlayEffectScript("ef_f_mov_111_wa", player_pos.x + vector2d.x, player_pos.y + 1, player_pos.z + vector2d.z, 0, 1)
      PlayEffectScript("ef_f_mov_111_wa", aigio_pos.x + vector2d.x, aigio_pos.y + 1, aigio_pos.z + vector2d.z, 0, 1)
      PlaySE(200006, 100)
      WaitFrame(20)
      Cam.Inst:Set(-24.81, -14.36, -47.61, -23.43, -16.9, -38.04, default, 0)
      WaitFrame(5)
      Obj:new(PLAYER, ""):CancelInvisible(10)
      Obj:new(NPC, "npc0008"):CancelInvisible(10)
      Obj:new(NPC, "npc0015"):CancelInvisible(10)
      WaitFrame(30)
      local npc_index02 = GetIndex(NPC, "npc0012")
      local npc_oga = "npc0012"
      local npc_pos02 = Field.ObjectGetPosition(NPC, npc_index02)
      local oga_bn01 = Motion.Object:new(NPC, "npc0012", "bn01")
      local oga_fe02 = Motion.Object:new(NPC, "npc0012", "fe02")
      local oga_fe04 = Motion.Object:new(NPC, "npc0012", "fe04")
      Field.ObjectLoadMotion(NPC, npc_index02, "bs02")
      local npc_index03 = GetIndex(NPC, "npc0013")
      local npc_hyoga = "npc0013"
      local npc_pos03 = Field.ObjectGetPosition(NPC, npc_index03)
      local hyoga_bn01 = Motion.Object:new(NPC, "npc0013", "bn01")
      local hyoga_fe04 = Motion.Object:new(NPC, "npc0013", "fe04")
      local hyoga_fe02 = Motion.Object:new(NPC, "npc0013", "fe02")
      Field.ObjectLoadMotion(NPC, npc_index03, "bs02")
      local npc_index04 = GetIndex(NPC, "npc0014")
      local npc_huga = "npc0014"
      local npc_pos04 = Field.ObjectGetPosition(NPC, npc_index04)
      local huga_bn01 = Motion.Object:new(NPC, "npc0014", "bn01")
      local huga_fe04 = Motion.Object:new(NPC, "npc0014", "fe04")
      local huga_f003 = Motion.Object:new(NPC, "npc0014", "f003")
      local huga_fe02 = Motion.Object:new(NPC, "npc0014", "fe02")
      Field.ObjectLoadMotion(NPC, npc_index04, "bs02")
      Field.ObjectPlayMotion(NPC, geko_index, "fe04", 10, true)
      Field.ObjectPlayMotion(PLAYER, 1, "bn01", 10, true)
      WaitFrame(15)
      Obj:new(OGIM, "eff_geko_02"):CancelInvisible(5)
      Field.ObjectPlayMotionAndSetting(NPC, npc_index03, "bs02", 10, 0, 0, 31, 1, true)
      tlk:Message("f_d0901_0020_0040")
      hyoga_bn01:Play(10, true)
      Field.ObjectPlayMotionAndSetting(NPC, npc_index04, "bs02", 10, 0, 0, 31, 1, true)
      tlk:Message("f_d0901_0020_0050")
      tlk:Message("f_d0901_0020_0060")
      huga_bn01:Play(10, true)
      Field.ObjectPlayMotionAndSetting(NPC, npc_index02, "bs02", 10, 0, 0, 31, 1, true)
      tlk:Message("f_d0901_0020_0070")
      tlk:Message("f_d0901_0020_0080")
      oga_bn01:Play(10, true)
      Field.ObjectPlayMotionAndSetting(NPC, npc_index03, "bs02", 10, 0, 0, 31, 1, true)
      tlk:Message("f_d0901_0020_0090")
      tlk:Message("f_d0901_0020_0100")
      tlk:MessageClose()
      Guest.Add(GST_OGA)
      Guest.Add(GST_GEKO)
      hyoga_fe02:Play(10, true)
      oga_fe02:Play(10, true)
      huga_fe02:Play(10, true)
      SetControlScriptExternalVariable("PlayVoice_Event_530_1", "start")
      WaitFrame(5)
      SetControlScriptExternalVariable("PlayVoice_Event_530_2", "start")
      WaitFrame(5)
      SetControlScriptExternalVariable("PlayVoice_Event_530_3", "start")
      WaitFrame(50)
      tlk:EndTalk()
      EncountFromField_WithNormalEffect(11900200, 10971, true)
    end
    if result == RESULT_TALK01 then
      tlk:Message("f_d0901_0020_0015")
      tlk:EndTalk()
      Cam.Inst:Clear(30)
      WaitFrame(30)
    end
  end
end

function M440:Event_540()
  if Qst.Main:Check(self.ID, self.STEP_010, self.STEP_012) and Flg.Check("FLAG_MAIN_22_182") then
    Field.CancelPlayerAnywhereDigimonRide()
    Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
    WaitFrame(5)
    local geko_index = GetIndex(NPC, "npc0007")
    local npc_geko = "npc0007"
    Field.ObjectLoadMotion(NPC, geko_index, "bn01")
    Field.ObjectLoadMotion(NPC, geko_index, "ba01")
    Field.ObjectLoadMotion(NPC, geko_index, "bd01")
    Field.ObjectLoadMotion(NPC, geko_index, "fe01")
    Field.ObjectLoadMotion(NPC, geko_index, "fe04")
    Field.ObjectLoadMotion(NPC, geko_index, "f000")
    Field.ObjectLoadMotion(NPC, geko_index, "fq01")
    Field.ObjectLoadMotion(NPC, geko_index, "fq02")
    Field.ObjectLoadMotion(PLAYER, 1, "e002")
    Field.ObjectLoadMotion(PLAYER, 1, "e017")
    Field.ObjectLoadMotion(PLAYER, 1, "bc01")
    Field.ObjectLoadMotionBlend(PLAYER, 1, "blend01")
    WaitFrame(15)
    Cam.Inst:Set(-27.91, -10.51, -68.81, -26.91, -16.58, -60.92, default, 1)
    Field.ObjectSuspendAutoTransparentForCamera(FLD_OBJ_NPC, geko_index)
    Field.ObjectSetPos(FLD_OBJ_NPC, geko_index, -26.57, -16.62, -62.17)
    ObjectSetRotationY(FLD_OBJ_NPC, geko_index, 345, 0)
    Obj:new(PLAYER, ""):SetPos(-27.45, -17.306, -61.787, true)
    Field.ObjectSetRotationY(FLD_OBJ_PLAYER, 1, 350, 0)
    Field.ObjectLookAtTheObject(PLAYER, 1, FLD_OBJ_GIMMICK, GetIndex(FLD_OBJ_GIMMICK, "lookat_01"), 15)
    Field.ObjectLookAtTheObject(NPC, geko_index, FLD_OBJ_GIMMICK, GetIndex(FLD_OBJ_GIMMICK, "lookat_01"), 15)
    WaitFrame(30)
    FadeInWithWaitNotFlgCheck(FADE_BLACK, 10)
    local player_pos = Field.ObjectGetPosition(FLD_OBJ_PLAYER, 1)
    local geko_pos = Field.ObjectGetPosition(NPC, geko_index)
    local obj1_to_obj2_rot = Field.GetAngleToTarget2D(player_pos.x, player_pos.z, geko_pos.x, geko_pos.z)
    local tlk = Tlk:new("d09", 1, true)
    tlk:StartTalkAndCancelDigimonRide()
    if Flg.Check("FLAG_MAIN_22_182", "FLAG_MAIN_22_183") then
      Flg.Set("FLAG_MAIN_22_183")
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, geko_index, "ba01", 10, 10)
      tlk:Message("f_d0901_0120_0010")
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, geko_index, "fq02", 10, 10)
      tlk:Message("f_d0901_0120_0020")
      tlk:MessageClose()
      Field.ObjectPlayMotionBlend(PLAYER, 1, "blend01", 10, false)
      WaitFrame(30)
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, geko_index, "fq01", 10, 10)
      tlk:Message("f_d0901_0120_0030")
      Field.ObjectResetAim(NPC, geko_index, 10)
    else
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, geko_index, "ba01", 10, 10)
      tlk:Message("f_d0901_0120_0038")
      Field.ObjectResetAim(NPC, geko_index, 10)
    end
    local result = tlk:Select(2, "f_d0901_0120_0031")
    if result == RESULT_TALK00 then
      WaitFrame(60)
      Field.ObjectLookAtTheObject(PLAYER, 1, FLD_OBJ_NPC, GetIndex(FLD_OBJ_NPC, "npc0007"), 15)
      Field.ObjectPlayMotion(NPC, geko_index, "f000", 10, true)
      tlk:Message("f_d0901_0120_0040")
      Field.ObjectLookAtTheObject(NPC, geko_index, PLAYER, GetIndex(PLAYER, PLAYER), 15)
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, geko_index, "ba01", 10, 10)
      tlk:Message("f_d0901_0120_0050")
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, geko_index, "ba01", 10, 10)
      tlk:Message("f_d0901_0120_0060")
      Field.ObjectResetAim(NPC, geko_index, 10)
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, geko_index, "bd01", 10, 10)
      tlk:Message("f_d0901_0120_0070")
      Field.ObjectPlayMotion(NPC, geko_index, "fe01", 10, true)
      tlk:Message("f_d0901_0120_0080")
      tlk:MessageClose()
      vector2d = Field.GetUnitVector2D(obj1_to_obj2_rot)
      PlayEffectScript("ef_f_mov_111_wa", player_pos.x + vector2d.x, player_pos.y + 1, player_pos.z + vector2d.z, 0, 1)
      PlaySE(200006, 100)
      WaitFrame(20)
      Obj:new(PLAYER, ""):Invisible(5)
      Obj:new(NPC, npc_geko):Invisible(5)
      tlk:EndTalk()
      Field_InvisibleFollowerAllPartyMember(0, 0, false)
      Field_InvisibleFollowerAllGuest(0, 0, false)
      Flg.Set("FLAG_FIELD_D09_001")
      Qst.Main:Set(self.ID, self.STEP_012)
      WaitFrame(60)
      Digimon.RestoreAllParty()
      Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
      Flg.Clear("FLAG_IS_DISPLAYED_MAP_NAME_UI")
      MapChangeWithTimeTravel("d", 902, "start_00", AXIS_ORIGINAL, "P2028_daft_442", NOON)
    elseif result == RESULT_TALK01 then
      tlk:Message("f_d0901_0120_0035")
      tlk:EndTalk()
      Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
      Obj:new(PLAYER, ""):SetPos(-27.433, -17.287, -46.017, true)
      Obj:new(PLAYER, ""):SetRotationY(0, 0)
      Obj:new(NPC, "npc0007"):SetPos(-27.553, -16.987, -50.43, true)
      Obj:new(NPC, "npc0007"):SetRotationY(180, 0)
      Cam.Inst:Clear(0)
      WaitFrame(30)
      FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    end
  end
end

function M440:Event_550()
  if Qst.Main:Check(self.ID, self.STEP_005, self.STEP_010) and Flg.Check("FLAG_MAIN_22_150", "FLAG_MAIN_22_155") then
    Field_InvisibleFollowerAllGuest(1, 0, false)
    Field_InvisibleFollowerAllPartyMember(1, 0, false)
    FadeAllInWithWait(0, FADE_TIME)
    Flg.Set("FLAG_MAIN_22_155")
    Cam.Inst:Set(-21.54, -14.77, -50.66, -20.29, -16.07, -40.68, default, 0)
    local tlk = Tlk:new("d09", 1, true)
    tlk:StartTalkAndCancelDigimonRide()
    tlk:Message("f_d0901_0030_0010")
    Flg.Set("FLAG_MAIN_22_160")
    tlk:EndTalk()
    Guest.Delete(GST_OGA)
    Guest.Add(GST_HYOGA)
    EncountFromField(11900200, 10772, false)
    WaitFrame(120)
  end
end

function M440:Event_560()
  if Qst.Main:Check(self.ID, self.STEP_005, self.STEP_010) and Flg.Check("FLAG_MAIN_22_160", "FLAG_MAIN_22_165") then
    Field_InvisibleFollowerAllGuest(1, 0, false)
    Field_InvisibleFollowerAllPartyMember(1, 0, false)
    Guest.Add(GST_HUGA)
    Guest.Delete(GST_HYOGA)
    FadeAllInWithWait(0, FADE_TIME)
    Flg.Set("FLAG_MAIN_22_165")
    Cam.Inst:Set(-21.54, -14.77, -50.66, -20.29, -16.07, -40.68, default, 0)
    local tlk = Tlk:new("d09", 1, true)
    tlk:StartTalkAndCancelDigimonRide()
    tlk:Message("f_d0901_0040_0020")
    Flg.Set("FLAG_MAIN_22_170")
    tlk:EndTalk()
    EncountFromField(11900300, 10772, false)
    WaitFrame(120)
  end
end

function M440:Event_570()
  if Qst.Main:Check(self.ID, self.STEP_005, self.STEP_010) and Flg.Check("FLAG_MAIN_22_150", "FLAG_MAIN_22_182") then
    Field_InvisibleFollowerAllGuest(1, 0, false)
    Field_InvisibleFollowerAllPartyMember(1, 0, false)
    Obj:new(NPC, "npc0001"):SuspendAutoTransparentForCamera()
    FieldObjectSync(FOR_ALL, false)
    Guest.Delete(GST_OGA)
    Guest.Delete(GST_HUGA)
    Guest.Delete(GST_HYOGA)
    Guest.Delete(GST_GEKO)
    local geko_index = GetIndex(NPC, "npc0008")
    local npc_geko = "npc0008"
    local pluto_index = GetIndex(NPC, "npc0001")
    local npc_pluto = "npc0001"
    local fe04 = Motion.Object:new(NPC, "npc0001", "fe04")
    local npc_index01 = GetIndex(NPC, "npc0019")
    local npc_aigio = "npc0019"
    local npc_pos01 = Field.ObjectGetPosition(NPC, npc_index01)
    local npc_index02 = GetIndex(NPC, "npc0016")
    local npc_oga = "npc0016"
    local npc_pos02 = Field.ObjectGetPosition(NPC, npc_index02)
    local npc_index03 = GetIndex(NPC, "npc0017")
    local npc_hyoga = "npc0017"
    local npc_pos03 = Field.ObjectGetPosition(NPC, npc_index03)
    local npc_index04 = GetIndex(NPC, "npc0018")
    local npc_huga = "npc0018"
    local npc_pos04 = Field.ObjectGetPosition(NPC, npc_index04)
    Field.ObjectLoadMotion(NPC, geko_index, "bn01")
    Field.ObjectLoadMotion(NPC, geko_index, "ba01")
    Field.ObjectLoadMotion(NPC, geko_index, "fe01")
    Field.ObjectLoadMotion(NPC, geko_index, "fe04")
    Field.ObjectLoadMotion(PLAYER, 1, "e002")
    Field.ObjectLoadMotion(PLAYER, 1, "e017")
    Field.ObjectLoadMotion(PLAYER, 1, "bc01")
    Field.LoadEffectScript("ef_b_chr180_bs02", 1)
    local bs02 = Motion.Object:new(NPC, "npc0001", "bs02")
    local bn01 = Motion.Object:new(NPC, "npc0001", "bn01")
    PlayerLookAtObject(NPC, npc_geko)
    local player_pos = Field.ObjectGetPosition(FLD_OBJ_PLAYER, 1)
    local player_rot = Field.ObjectGetRotationY(PLAYER, 1)
    local geko_pos = Field.ObjectGetPosition(NPC, geko_index)
    local pluto_pos = Field.ObjectGetPosition(NPC, pluto_index)
    local obj1_to_obj2_rot = Field.GetAngleToTarget2D(player_pos.x, player_pos.z, geko_pos.x, geko_pos.z)
    local obj2_to_obj1_rot = Field.GetAngleToTarget2D(geko_pos.x, geko_pos.z, player_pos.x, player_pos.z)
    local vector2d = 0
    obj2_to_obj1_rot = Field.GetAngleToTarget2D(geko_pos.x, geko_pos.z, player_pos.x, player_pos.z)
    Field.ObjectSetRotationY(NPC, geko_index, obj2_to_obj1_rot, 0)
    Cam.Inst:Set(28.811, 23.091, 13.276, 21.924, 19.966, 6.734, default, 0)
    Field.ObjectLookAtTheObject(NPC, pluto_index, FLD_OBJ_NPC, GetIndex(FLD_OBJ_NPC, "npc0008"), 20)
    FadeAllInWithWait(0, FADE_TIME)
    local tlk = Tlk:new("d09", 1, true)
    tlk:StartTalkAndCancelDigimonRide()
    tlk:Message("f_d0901_0050_0010")
    tlk:Message("f_d0901_0050_0035")
    tlk:MessageClose()
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, pluto_index, "fe04", 10, 10)
    Field.ObjectResetAim(NPC, pluto_index, 10)
    WaitFrame(60)
    Cam.Inst:Set(-20.02, -17.99, -41.14, -28.33, -15.17, -45.92, default, 0)
    WaitFrame(15)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, geko_index, "ba01", 10, 10)
    tlk:Message("f_d0901_0050_0020")
    Obj:new(OGIM, "eff_geko_03"):Invisible()
    local _ = tlk:Select(2, "f_d0901_0050_0021")
    Field.ObjectPlayMotionWithStartMoveMotion(PLAYER, 1, "bc01", 10, 10)
    WaitFrame(15)
    Field.ObjectPlayMotion(NPC, geko_index, "fe04", 10, false)
    Talk.Message_Auto("f_d0901_0050_0030", 5)
    vector2d = Field.GetUnitVector2D(obj1_to_obj2_rot)
    PlayEffectScript("ef_f_mov_111_wa", player_pos.x + vector2d.x, player_pos.y + 1, player_pos.z + vector2d.z, 0, 1)
    PlayEffectScript("ef_f_mov_111_wa", npc_pos01.x + vector2d.x, npc_pos01.y + 1, npc_pos01.z + vector2d.z, 0, 1)
    PlayEffectScript("ef_f_mov_111_wa", npc_pos02.x + vector2d.x, npc_pos02.y + 1, npc_pos02.z + vector2d.z, 0, 1)
    PlayEffectScript("ef_f_mov_111_wa", npc_pos03.x + vector2d.x, npc_pos03.y + 1, npc_pos03.z + vector2d.z, 0, 1)
    PlayEffectScript("ef_f_mov_111_wa", npc_pos04.x + vector2d.x, npc_pos04.y + 1, npc_pos04.z + vector2d.z, 0, 1)
    PlaySE(200006, 100)
    WaitFrame(20)
    Obj:new(PLAYER, ""):Invisible(5)
    Obj:new(NPC, npc_geko):Invisible(5)
    Obj:new(NPC, npc_aigio):Invisible(5)
    Obj:new(NPC, npc_oga):Invisible(5)
    Obj:new(NPC, npc_hyoga):Invisible(5)
    Obj:new(NPC, npc_huga):Invisible(5)
    WaitFrame(20)
    tlk:MessageClose()
    Field.ObjectResetMotion(NPC, geko_index, 15)
    Field.ObjectResetMotion(PLAYER, 1, 15)
    local plt = Obj:new(NPC, "npc0001")
    local vec = Field.GetUnitVector2D(plt.rot_y)
    bs02:Play(15, false)
    PlayEffectScript("ef_b_chr180_bs02", plt.pos.x + vec.x + 0.2, plt.pos.y + 3.6, plt.pos.z + vec.z * 0.7, plt.rot_y, 1)
    PlaySE(201023, 100)
    Cam.Inst:Set(24.978, 19.699, 16.13, 23.992, 21.676, 6.377, default, 0)
    WaitFrame(90)
    Cam.Inst:Set(30.761, 45.354, -45.146, 35.757, 51.284, -51.461, default, 35, EASING_MODE_QUINTIC_OUT)
    WaitFrame(35)
    Fade_OutNoLoadingWithWait(FADE_WHITE, FADE_TIME)
    Cam.Inst:Set(30.84, 19.78, 9.581, 37.429, 24.17, 15.68, default, 0)
    Flg.Set("FLAG_MAIN_22_181")
    WaitFrame(10)
    bn01:Play(0, true)
    Quake.Start(0, 1, 80)
    FieldObjectSync(FOR_ALL, false)
    WaitFrame(50)
    Obj:new(PLAYER, ""):SetPos(player_pos.x, player_pos.y, player_pos.z)
    Obj:new(PLAYER, ""):SetRotationY(player_rot, 0)
    Field.PlayEffectScript("ef_f_com_300_sm", -26.487, -11.855, -68.68, 2.984, 10)
    Field.PlayEffectScript("ef_b_van_100", -26.487, -11.855, -68.68, 2.984, 10)
    Field.PlayEffectScript("ef_f_com_300_sm", -34.293, -17.41, -55.27, 2.984, 10)
    Field.PlayEffectScript("ef_b_van_100", -34.293, -17.41, -55.27, 2.984, 10)
    Field.PlayEffectScript("ef_f_com_300_sm", -16.289, -17.252, -51.602, 2.984, 10)
    Field.PlayEffectScript("ef_b_van_100", -16.289, -17.252, -51.602, 2.984, 10)
    PlaySE(300215, 100)
    PlaySE(300211, 50)
    PlaySE(300103, 100)
    FadeInWithWaitNotFlgCheck(FADE_WHITE, FADE_TIME)
    WaitFrame(60)
    Field.ObjectResetMotion(NPC, pluto_index, 15)
    Field.ObjectResetMotion(NPC, geko_index, 15)
    Field.ObjectResetMotion(PLAYER, 1, 15)
    Quake_Stop()
    PlayerLookAtObject(NPC, npc_pluto)
    Field.ObjectSetRotationY(FLD_OBJ_PLAYER, 1, 150, 0)
    Field.ObjectSetPos(FLD_OBJ_PLAYER, 1, -22.829, -17.387, -35.664)
    Field.ObjectSetPos(FLD_OBJ_NPC, geko_index, -21.023, -17.279, -36.315)
    Field.ObjectSetPos(FLD_OBJ_NPC, npc_index01, -24.814, -17.275, -38.759)
    Field.ObjectSetPos(FLD_OBJ_NPC, npc_index02, -25.939, -17.272, -52.231)
    Field.ObjectSetPos(FLD_OBJ_NPC, npc_index03, -30.566, -17.482, -46.238)
    Field.ObjectSetPos(FLD_OBJ_NPC, npc_index04, -17.312, -17.15, -47.502)
    player_pos = Field.ObjectGetPosition(FLD_OBJ_PLAYER, 1)
    npc_index01 = GetIndex(NPC, "npc0019")
    npc_aigio = "npc0019"
    npc_pos01 = Field.ObjectGetPosition(NPC, npc_index01)
    npc_index02 = GetIndex(NPC, "npc0016")
    npc_oga = "npc0016"
    npc_pos02 = Field.ObjectGetPosition(NPC, npc_index02)
    npc_index03 = GetIndex(NPC, "npc0017")
    npc_hyoga = "npc0017"
    npc_pos03 = Field.ObjectGetPosition(NPC, npc_index03)
    npc_index04 = GetIndex(NPC, "npc0018")
    npc_huga = "npc0018"
    npc_pos04 = Field.ObjectGetPosition(NPC, npc_index04)
    WaitFrame(15)
    vector2d = Field.GetUnitVector2D(obj1_to_obj2_rot)
    PlayEffectScript("ef_f_mov_111_wa", player_pos.x, player_pos.y + 1, player_pos.z, 0, 1)
    PlayEffectScript("ef_f_mov_111_wa", npc_pos01.x, npc_pos01.y + 1, npc_pos01.z, 0, 1)
    PlayEffectScript("ef_f_mov_111_wa", npc_pos02.x, npc_pos02.y + 1, npc_pos02.z, 0, 1)
    PlayEffectScript("ef_f_mov_111_wa", npc_pos03.x, npc_pos03.y + 1, npc_pos03.z, 0, 1)
    PlayEffectScript("ef_f_mov_111_wa", npc_pos04.x, npc_pos04.y + 1, npc_pos04.z, 0, 1)
    PlaySE(200006, 100)
    WaitFrame(20)
    Obj:new(PLAYER, ""):CancelInvisible(15)
    Obj:new(NPC, npc_geko):CancelInvisible(15)
    Obj:new(NPC, npc_aigio):CancelInvisible(15)
    Obj:new(NPC, npc_oga):CancelInvisible(15)
    Obj:new(NPC, npc_hyoga):CancelInvisible(15)
    Obj:new(NPC, npc_huga):CancelInvisible(15)
    Field.ObjectSetRotationY(FLD_OBJ_NPC, npc_index01, 130, 0)
    Field.ObjectSetRotationY(FLD_OBJ_NPC, npc_index02, 150, 0)
    Field.ObjectSetRotationY(FLD_OBJ_NPC, npc_index03, 150, 0)
    Field.ObjectSetRotationY(FLD_OBJ_NPC, npc_index04, 150, 0)
    local oga_f003 = Motion.Object:new(NPC, "npc0016", "f003")
    local hyoga_fe02 = Motion.Object:new(NPC, "npc0017", "fe02")
    local huga_fe02 = Motion.Object:new(NPC, "npc0018", "fe02")
    oga_f003:Play(5, true)
    hyoga_fe02:Play(5, true)
    huga_fe02:Play(5, true)
    Field.ObjectPlayMotion(NPC, geko_index, "fe04", 10, false)
    tlk:Message("f_d0901_0060_0040")
    tlk:Message("f_d0901_0060_0050")
    tlk:EndTalk()
    Fade_OutNoLoadingWithWait(0, FADE_TIME)
    WaitFrame(15)
    Field_CancelInvisibleFollowerAllGuest(1, 0, false, false)
    Field_CancelInvisibleFollowerAllPartyMember(1, 0, false, false)
    Cam.Inst:Clear(0)
    Field.ObjectSetPos(FLD_OBJ_PLAYER, 1, -27.748, -17.231, -42.535)
    Field.ObjectSetRotationY(FLD_OBJ_PLAYER, 1, 0, 0)
    SetFollowerCameraOperateRotation(5, Field.ObjectGetRotationY(PLAYER, 1), 0)
    SetFollowerCameraOperateRotation(0, 0)
    Field.ObjectResetMotion(PLAYER, 1, 1)
    Flg.Set("FLAG_MAIN_22_182")
    FieldObjectSync(FOR_ALL, false)
    Field.ObjectResetAim(PLAYER, 1, 10)
    WaitFrame(15)
    FadeAllInWithWait(0, FADE_TIME)
    Qst.Main:Set(self.ID, self.STEP_010)
  end
end

function M440:Event_580()
  if Qst.Main:Check(self.ID, self.STEP_012, self.STEP_015) and Flg.Check("FLAG_MAIN_22_182", "FLAG_MAIN_22_190") then
    Field.CancelPlayerAnywhereDigimonRide()
    Field.MovePlayerToLocatorFrame("gim_0001", 20)
    Fade_OutNoLoadingWithWait(0, FADE_TIME)
    Execute("m440_910")
    Flg.Set("FLAG_MAIN_22_190")
    Guest.Add(GST_MARS)
    EncountFromField(11900500, 10972, false)
  end
end

function M440:Event_590()
  if Qst.Main:Check(self.ID, self.STEP_012, self.STEP_015) and Flg.Check("FLAG_MAIN_22_200", "FLAG_MAIN_22_210") then
    Execute("m440_911")
    Flg.Set("FLAG_MAIN_22_191")
    Flg.Set("FLAG_MAIN_22_210")
    Guest.Add(GST_KARS)
    Flg.Set("FLAG_SKIP_CHANGE_BGM")
    EncountFromField(11900600, 10972, false)
  end
end

function M440:Event_600()
  if Qst.Main:Check(self.ID, self.STEP_012, self.STEP_015) and Flg.Check("FLAG_MAIN_22_210", "FLAG_MAIN_22_213") then
    Obj:new(PLAYER, ""):SetRotationY(0, 0)
    SetFollowerCameraOperateRotation(0, 0)
    FieldObjectSync(FOR_ALL, false)
    Execute("m440_912")
    PlayDungeonBGM()
    Flg.Set("FLAG_MAIN_22_213")
    Flg.Set("FLAG_MAIN_22_211")
    FieldObjectSync(FOR_ALL, false)
    WaitFrame(1)
    Guest.Delete(GST_MARS)
    Guest.Delete(GST_KARS)
    FollowerSync()
    SetFollowerCameraOperateRotation(-5, 260, 0)
    WaitFrame(1)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    Qst.Main:Set(self.ID, self.STEP_013)
  end
end

function M440:Event_605()
  if Qst.Main:Check(self.ID, self.STEP_013, self.STEP_015) then
    Field.CancelPlayerAnywhereDigimonRide()
    local npc_index01 = GetIndex(NPC, "npc0011")
    local pegasu_bn01 = Motion.Object:new(NPC, "npc0011", "bn01")
    Field.ObjectLoadMotion(NPC, npc_index01, "ba02")
    Field.ObjectLoadMotion(NPC, npc_index01, "fq01")
    local tlk = Tlk:new("d09", 1, true)
    tlk:StartTalkAndCancelDigimonRide()
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, npc_index01, "ba02", 10, 10)
    tlk:Message("f_d0902_0060_0010")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, npc_index01, "fq01", 10, 10)
    tlk:Message("f_d0902_0060_0020")
    local result = tlk:Select(2, "f_d0902_0060_0030")
    if result == RESULT_TALK00 then
      tlk:EndTalk()
      Field_InvisibleFollowerAllPartyMember(0, 0, false)
      Field_InvisibleFollowerAllGuest(0, 0, false)
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, npc_index01, "ba02", 10, 10)
      WaitFrame(45)
      Obj:new(NPC, "npc0011"):Invisible(15)
      WaitFrame(5)
      Field.PlayerScriptDigimonRideStartFromID(146, true, "", 15)
      WaitFrame(5)
      Qst.Main:Set(self.ID, self.STEP_015)
      WaitFrame(25)
      Digimon.RestoreAllParty()
      Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
      Flg.Clear("FLAG_IS_DISPLAYED_MAP_NAME_UI")
      MapChangeWithTimeTravel("d", 903, "start_10", AXIS_ORIGINAL, "P2028_daft_443", NOON)
    else
      tlk:Message("f_d0902_0060_0050")
    end
    tlk:EndTalk()
  end
end

function M440:Event_608()
  if Qst.Main:Check(self.ID, self.STEP_015, self.STEP_020) and Flg.Check("FLAG_MAIN_22_211", "FLAG_MAIN_22_220") then
    local tlk = Tlk:new("d09", 1, true)
    tlk:StartTalkAndCancelDigimonRide()
    tlk:Message("f_d0903_0110_0010")
    tlk:Message("f_d0903_0110_0020")
    tlk:EndTalk()
    Common.CancelProhibitSave()
  end
end

function M440:Event_610()
  if Qst.Main:Check(self.ID, self.STEP_015, self.STEP_020) and Flg.Check("FLAG_MAIN_22_210", "FLAG_MAIN_22_220") then
    Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
    Flg.Set("FLAG_MAIN_22_220")
    FieldObjectSync(FOR_ALL, false)
    Cam.Inst:Set(22.064, 0.735, -9.521, 22.392, -1.153, 0.293, default, 0)
    Obj:new(PLAYER, ""):SetPos(20.89, -2.293, -3.53, true)
    Obj:new(PLAYER, ""):SetRotationY(40, 0)
    local pikkoro_index = GetIndex(NPC, "npc0015")
    Field.ObjectSetPos(FLD_OBJ_NPC, pikkoro_index, 19.296, 4.69, -22.094)
    local npc_hipoguri = "npc0042"
    local tlk = Tlk:new("d09", 1, true)
    tlk:StartTalkAndCancelDigimonRide()
    WaitFrame(30)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    local bakkas_index = GetIndex(NPC, "npc0001")
    local fe01 = Motion.Object:new(NPC, "npc0001", "fe01")
    local fe02 = Motion.Object:new(NPC, "npc0001", "fe02")
    local e002 = Motion.Object:new(NPC, "npc0001", "e002")
    local e004 = Motion.Object:new(NPC, "npc0001", "e004")
    local e005 = Motion.Object:new(NPC, "npc0001", "e005")
    local e006 = Motion.Object:new(NPC, "npc0001", "e006")
    local e007 = Motion.Object:new(NPC, "npc0001", "e007")
    local e008 = Motion.Object:new(NPC, "npc0001", "e008")
    local bv01 = Motion.Object:new(NPC, "npc0001", "bv01")
    local bn01 = Motion.Object:new(NPC, "npc0001", "bn01")
    local bn02 = Motion.Object:new(NPC, "npc0001", "bn02")
    Field.ObjectLoadMotion(NPC, bakkas_index, "fq01")
    Field.ObjectLoadMotion(NPC, bakkas_index, "fq02")
    Field.ObjectLoadMotion(NPC, bakkas_index, "fe04")
    local aigio_index = GetIndex(NPC, "npc0017")
    local aigio_e002 = Motion.Object:new(NPC, "npc0017", "e002")
    local aigio_e006 = Motion.Object:new(NPC, "npc0017", "e006")
    local aigio_e013 = Motion.Object:new(NPC, "npc0017", "e013")
    local aigio_e018 = Motion.Object:new(NPC, "npc0017", "e018")
    local aigio_fn01_01 = Motion.Object:new(NPC, "npc0017", "fn01_01")
    local inori_index = GetIndex(NPC, "npc0016")
    local inori_e002 = Motion.Object:new(NPC, "npc0016", "e002")
    local inori_e006 = Motion.Object:new(NPC, "npc0016", "e006")
    local inori_e010 = Motion.Object:new(NPC, "npc0016", "e010")
    local inori_e013 = Motion.Object:new(NPC, "npc0016", "e013")
    local inori_e020 = Motion.Object:new(NPC, "npc0016", "e020")
    local inori_fn01_01 = Motion.Object:new(NPC, "npc0016", "fn01_01")
    local Gryphon_index = GetIndex(NPC, "npc0006")
    local Gryphon_fe02 = Motion.Object:new(NPC, "npc0006", "fe02")
    local Gryphon_fq02 = Motion.Object:new(NPC, "npc0006", "fq01")
    local Gryphon_bn01 = Motion.Object:new(NPC, "npc0006", "bn01")
    local Gryphon_f000 = Motion.Object:new(NPC, "npc0006", "f000")
    Field.ObjectLoadMotion(NPC, Gryphon_index, "fq02")
    Field.ObjectLoadMotion(NPC, Gryphon_index, "fe04")
    local pikkoro_fe02 = Motion.Object:new(NPC, "npc0015", "fe02")
    local pikkoro_fe04 = Motion.Object:new(NPC, "npc0015", "fe04")
    local pikkoro_fq02 = Motion.Object:new(NPC, "npc0015", "fq02")
    local pikkoro_bn01 = Motion.Object:new(NPC, "npc0015", "bn01")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, Gryphon_index, "fe02", 10, 10)
    tlk:Message("f_d0903_0010_0010")
    Field.ObjectPlayMotion(NPC, Gryphon_index, "f000", 10, true)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, bakkas_index, "e007", 20, 30)
    tlk:Message("f_d0903_0010_0020")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, pikkoro_index, "fe04", 10, 10)
    tlk:Message("f_d0903_0010_0030")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, inori_index, "e020", 10, 10)
    tlk:Message("f_d0903_0010_0040")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, Gryphon_index, "fq01", 10, 10)
    WaitFrame(15)
    Field.ObjectLookAtTheObject(NPC, Gryphon_index, FLD_OBJ_NPC, GetIndex(FLD_OBJ_NPC, "npc0016"), 30)
    tlk:Message("f_d0903_0010_0050")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, bakkas_index, "e004", 30, 30)
    tlk:Message("f_d0903_0010_0060")
    inori_e010:Play(30, true)
    tlk:Message("f_d0903_0010_0070")
    Field.ObjectResetAim(NPC, Gryphon_index, 10)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, Gryphon_index, "fq02", 10, 10)
    tlk:Message("f_d0903_0010_0080")
    Field.ObjectLookAtTheObject(NPC, Gryphon_index, FLD_OBJ_NPC, GetIndex(FLD_OBJ_NPC, "npc0016"), 30)
    Field.ObjectPlayMotion(NPC, Gryphon_index, "f000", 10, true)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, bakkas_index, "fq01", 20, 30)
    inori_fn01_01:Play(20, true)
    tlk:Message("f_d0903_0010_0090")
    MessageClose()
    Cam.Inst:Set(-3.465, 5.108, -36.425, 3.728, 8.57, -30.403, default, 45)
    Obj:new(NPC, npc_hipoguri):Invisible(5)
    WaitFrame(60)
    aigio_e018:Play(30, true)
    tlk:Message("f_d0903_0010_0100")
    MessageClose()
    Cam.Inst:Set(25.546, 2.568, -9.31, 32.359, 0.516, -2.284, default, 45)
    WaitFrame(45)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, bakkas_index, "e004", 20, 30)
    tlk:Message("f_d0903_0010_0110")
    Obj:new(NPC, npc_hipoguri):CancelInvisible(15)
    Cam.Inst:Set(22.064, 0.735, -9.521, 22.392, -1.153, 0.293, default, 30)
    WaitFrame(30)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, bakkas_index, "fq02", 20, 30)
    tlk:Message("f_d0903_0010_0200")
    e008:Play(20, true)
    tlk:Message("f_d0903_0010_0210")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, Gryphon_index, "fq02", 10, 10)
    tlk:Message("f_d0903_0010_0220")
    Field.ObjectPlayMotion(NPC, Gryphon_index, "f000", 10, true)
    Field.ObjectLookAtTheObject(NPC, Gryphon_index, FLD_OBJ_NPC, GetIndex(FLD_OBJ_NPC, "npc0016"), 30)
    tlk:Message("f_d0903_0010_0230")
    Cam.Inst:Set(6.025, 34.737, -10.669, 0.909, 27.739, -15.655, default, 0)
    WaitFrame(30)
    tlk:Message("f_d0903_0010_0240")
    tlk:Message("f_d0903_0010_0260")
    tlk:Message("f_d0903_0010_0270")
    tlk:Message("f_d0903_0010_0280")
    Field.ObjectResetAim(NPC, Gryphon_index, 10)
    Field.ObjectSetPos(FLD_OBJ_NPC, pikkoro_index, 22.253, -1.954, -24.289)
    Field.ObjectSetEnableCheckAndFieldAttack(OGIM, GetIndex(OGIM, "fa_firenuts_correct"), true)
    Obj:new(PLAYER, ""):SetRotationY(180, 0)
    SetFollowerCameraOperateRotation(0, Obj:new(PLAYER, "").rot_y)
    tlk:EndTalk()
    Obj:new(PLAYER, ""):SetPos(20.89, -2.292, -3.53, true)
    Obj:new(PLAYER, ""):SetRotationY(180, 0)
    SetFollowerCameraOperateRotation(0, Obj:new(PLAYER, "").rot_y)
    Cam.Inst:Clear(30)
    Flg.Set("FLAG_MAIN_22_221")
    FieldObjectSync(FOR_ALL, false)
    WaitFrame(30)
    HideMinimap(false)
    HideGuide(false)
    Qst.Main:Set(self.ID, self.STEP_020)
  end
end

function M440:Event_615()
  if Qst.Main:Check(self.ID, self.STEP_020, self.STEP_022) then
    Qst.Main:Set(self.ID, self.STEP_022)
  end
end

function M440:Event_620()
  if Qst.Main:Check(self.ID, self.STEP_022, self.STEP_025) and Flg.Check("FLAG_MAIN_22_220", "FLAG_MAIN_22_230") then
    Field.CancelPlayerAnywhereDigimonRide()
    Cam.Inst:Set(23.778, 40.663, 2.931, 30.2, 42.822, 10.285, default, 30)
    WaitFrame(30)
    Field.ObjectSuspendAutoTransparentForCamera(NPC, FOR_ALL)
    Flg.Set("FLAG_MAIN_22_230")
    FieldObjectSync(FOR_ALL, false)
    Obj:new(PLAYER, ""):SetPos(39.234, 28.71, 32.033, true)
    Obj:new(PLAYER, ""):SetRotationY(0, 0)
    FieldObjectSync(FLD_OBJ_GIMMICK, false)
    Prcs_d0903_JumpRideAccess(true)
    local tlk = Tlk:new("d09", 1, true)
    tlk:StartTalkAndCancelDigimonRide()
    tlk:Message("f_d0903_0020_0010")
    Cam.Inst:Set(35.988, 31.932, 26.382, 42.273, 29.661, 33.822, default, 30)
    local aigio_e015 = Motion.Object:new(NPC, "npc0019", "e015")
    aigio_e015:Play(10, true)
    WaitFrame(30)
    tlk:Message("f_d0903_0020_0020")
    tlk:Message("f_d0903_0020_0030")
    Fade_OutNoLoadingWithWait(0, FADE_TIME)
    Cam.Inst:Set(-6.59, 40.83, 4.38, 0.99, 39, 10.63, default, 0)
    WaitFrame(15)
    Flg.Set("FLAG_MAIN_22_231")
    FieldObjectSync(FOR_ALL, false)
    FadeAllInWithWait(0, FADE_TIME)
    local npc_index01 = GetIndex(NPC, "npc0002")
    local roze_fe02 = Motion.Object:new(NPC, "npc0002", "fe02")
    local roze_fq01 = Motion.Object:new(NPC, "npc0002", "fq01")
    local roze_bv01 = Motion.Object:new(NPC, "npc0002", "bv01")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, npc_index01, "fq01", 10, 10)
    tlk:Message("f_d0903_0020_0040")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, npc_index01, "bv01", 10, 5)
    tlk:Message("f_d0903_0020_0050")
    tlk:MessageClose()
    Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
    Cam.Inst:Set(27.216, 46.2, 1.946, 32.182, 45.69, 10.611, default, 0)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    tlk:Message("f_d0903_0020_0060")
    tlk:MessageClose()
    Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
    Cam.Inst:Set(12.76, 44.53, 29.36, 19.29, 42.49, 22.07, default, 0)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    tlk:Message("f_d0903_0020_0070")
    tlk:MessageClose()
    Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
    Obj:new(NPC, "npc0009"):SetRotationY(0, 0)
    Obj:new(NPC, "npc0009"):SetRotationZ(10, 0)
    Cam.Inst:Set(29.095, 75.261, 13.821, 32.481, 73.643, 4.552, default, 0)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    tlk:Message("f_d0903_0020_0080")
    tlk:MessageClose()
    Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
    Cam.Inst:Set(-6.59, 40.83, 4.38, 0.99, 39, 10.63, default, 0)
    Obj:new(NPC, "npc0009"):SetRotationZ(0, 0)
    Obj:new(PLAYER, ""):SetRotationY(330, 0)
    SetFollowerCameraOperateRotation(0, 330)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, npc_index01, "fe02", 10, 10)
    tlk:Message("f_d0903_0020_0090")
    tlk:EndTalk()
    Flg.Set("FLAG_MAIN_22_232")
    FieldObjectSync(FOR_ALL, true)
    Obj:new(NPC, "npc0009"):SetRotationY(180, 0)
    Cam.Inst:Clear(30)
    Field.ObjectCancelSuspendAutoTransparentForCamera(NPC, FOR_ALL)
  end
end

function M440:Event_625()
  if Qst.Main:Check(self.ID, self.STEP_020, self.STEP_025) and Flg.Check("FLAG_MAIN_22_230", "FLAG_MAIN_22_235") then
    Field.CancelPlayerAnywhereDigimonRide()
    Field.ObjectLoadMotion(PLAYER, 1, "e017")
    local inori = GetIndex(NPC, "npc0021")
    Field.ObjectLoadMotion(NPC, inori, "e205")
    Field.ObjectLoadMotion(NPC, inori, "e203")
    Field.ObjectLoadMotion(NPC, inori, "e013")
    Field.ObjectLoadMotion(NPC, inori, "fn01_01")
    local agio = GetIndex(NPC, "npc0022")
    Field.ObjectLoadMotion(NPC, agio, "fe02")
    Field.ObjectLoadMotion(NPC, agio, "e012")
    Field.ObjectLoadMotion(NPC, agio, "fn01_01")
    local tlk = Tlk:new("d09", 1, true)
    tlk:StartTalkAndCancelDigimonRide()
    Field.ObjectPlayMotionWithStartMoveMotion(PLAYER, 1, "fa01", 10, 10)
    WaitFrame(5)
    tlk:Message("f_d0903_0025_0010")
    tlk:MessageClose()
    Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
    Flg.Set("FLAG_MAIN_22_235")
    FieldObjectSync(NPC, false)
    Cam.Inst:Set(15.82, 38.3, -6.31, 18.97, 45.65, -12.32, default, 0)
    Obj:new(PLAYER, ""):SetPos(19.83, 38.3, -7.34, true)
    Obj:new(PLAYER, ""):SetRotationY(250, 0)
    WaitFrame(10)
    FadeInWithWaitNotFlgCheck(FADE_BLACK, FADE_TIME)
    WaitFrame(30)
    local npc_index01 = GetIndex(NPC, "npc0046")
    local aigio_e018 = Motion.Object:new(NPC, "npc0046", "e018")
    local npc_index02 = GetIndex(NPC, "npc0047")
    local inori_e017_end01 = Motion.Object:new(NPC, "npc0047", "e017_end01")
    local inori_e004 = Motion.Object:new(NPC, "npc0047", "e004")
    local inori_fn01_01 = Motion.Object:new(NPC, "npc0047", "fn01_01")
    tlk:Message("f_d0903_0025_0020")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, npc_index02, "e017_end01", 10, 10)
    Field.ObjectLookAtTheObject(NPC, npc_index02, FLD_OBJ_NPC, GetIndex(FLD_OBJ_NPC, "npc0046"), 20)
    local Frame = Field.ObjectGetMotionDefaultEndFrame(NPC, npc_index02, "e017_end01")
    inori_fn01_01:Play(20, true)
    tlk:Message("f_d0903_0025_0030")
    aigio_e018:Play(25, true)
    Field.ObjectLookAtTheObject(NPC, npc_index01, FLD_OBJ_NPC, GetIndex(FLD_OBJ_NPC, "npc0047"), 20)
    tlk:Message("f_d0903_0025_0040")
    MessageClose()
    Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
    Cam.Inst:Set(16.392, 32.118, -3.615, 17.69, 41.054, -7.912, default, 0)
    Obj:new(PLAYER, ""):SetPos(18.066, 38.3, -6.645, true)
    Field.ObjectPlayMotion(PLAYER, 1, "e017", 5, false)
    Flg.Set("FLAG_MAIN_22_236")
    Guest.Delete(GST_HEROINE)
    Common.SetExistPartyAegiomon(false)
    FollowerSync()
    FieldObjectSync(NPC, false)
    WaitFrame(Util.FrameFromSecond(3))
    FadeInWithWaitNotFlgCheck(FADE_BLACK, FADE_TIME)
    Field.ObjectPlayMotion(NPC, inori, "e205", 10, true)
    tlk:Message("f_d0903_0025_0060")
    MessageClose()
    Field.ObjectPlayMotion(NPC, agio, "fe02", 10, false)
    Field.ObjectPlayMotion(NPC, inori, "e203", 10, false)
    WaitFrame(30)
    Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
    WaitFrame(5)
    Cam.Inst:Clear(0)
    Field.ObjectResetMotion(PLAYER, 1, 1)
    Field.ObjectPlayMotion(NPC, agio, "e012", 10, true)
    Field.ObjectPlayMotion(NPC, inori, "e013", 10, true)
    WaitFrame(10)
    FadeInWithWaitNotFlgCheck(FADE_BLACK, FADE_TIME)
    tlk:EndTalk()
  end
end

function M440:Event_638()
  if Qst.Main:Check(self.ID, self.STEP_020, self.STEP_025) then
    local tlk = Tlk:new("d09", 1, true)
    tlk:StartTalkAndCancelDigimonRide()
    tlk:Message("f_d0903_0025_0090")
    tlk:EndTalk()
    Qst.Main:Set(self.ID, self.STEP_025)
  end
end

function M440:Event_630()
  if Qst.Main:Check(self.ID, self.STEP_025, self.STEP_035) and Flg.Check("FLAG_MAIN_22_220", "FLAG_MAIN_22_240") then
    local tlk = Tlk:new("d09", 1, true)
    local inori_fn01_01 = Motion.Object:new(NPC, "npc0051", "fn01_01")
    local inori_e022 = Motion.Object:new(NPC, "npc0051", "e022")
    local aigio_e004 = Motion.Object:new(NPC, "npc0052", "e004")
    local aigio_fn01_01 = Motion.Object:new(NPC, "npc0052", "fn01_01")
    tlk:StartTalkAndCancelDigimonRide()
    aigio_e004:Play(10, true)
    tlk:Message("f_d0903_0025_0110")
    Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
    Flg.Set("FLAG_MAIN_22_240")
    FieldObjectSync(FOR_ALL, false)
    tlk:EndTalk()
    Obj:new(PLAYER, ""):SetPos(22.617, -2.05, -11.12, true)
    Obj:new(PLAYER, ""):SetRotationYToObject(NPC, "npc0001", 0)
    self:Event_640()
  end
end

function M440:Event_640()
  if Qst.Main:Check(self.ID, self.STEP_025, self.STEP_035) and Flg.Check("FLAG_MAIN_22_240", "FLAG_MAIN_22_250") then
    Flg.Set("FLAG_MAIN_22_250")
    FieldObjectSync(FOR_ALL, false)
    local tlk = Tlk:new("d09", 1, true)
    Field.ObjectResetAim(PLAYER, 1, 15)
    tlk:StartTalkAndCancelDigimonRide()
    local bakkas_index = GetIndex(NPC, "npc0001")
    local fe01 = Motion.Object:new(NPC, "npc0001", "fe01")
    local fe02 = Motion.Object:new(NPC, "npc0001", "fe02")
    local e005 = Motion.Object:new(NPC, "npc0001", "e005")
    local e006 = Motion.Object:new(NPC, "npc0001", "e006")
    local e007 = Motion.Object:new(NPC, "npc0001", "e007")
    local e008 = Motion.Object:new(NPC, "npc0001", "e008")
    local bv01 = Motion.Object:new(NPC, "npc0001", "bv01")
    Field.ObjectLoadMotion(NPC, bakkas_index, "bn01")
    Field.ObjectLoadMotion(NPC, bakkas_index, "e004")
    Field.ObjectLoadMotion(NPC, bakkas_index, "e501")
    local aigio_index = GetIndex(NPC, "npc0023")
    local aigio_e002 = Motion.Object:new(NPC, "npc0023", "e002")
    local aigio_e006 = Motion.Object:new(NPC, "npc0023", "e006")
    local aigio_e013 = Motion.Object:new(NPC, "npc0023", "e013")
    local aigio_fn01_01 = Motion.Object:new(NPC, "npc0023", "fn01_01")
    local inori_index = GetIndex(NPC, "npc0024")
    local inori_e002 = Motion.Object:new(NPC, "npc0024", "e002")
    local inori_e006 = Motion.Object:new(NPC, "npc0024", "e006")
    local inori_e010 = Motion.Object:new(NPC, "npc0024", "e010")
    local inori_e013 = Motion.Object:new(NPC, "npc0024", "e013")
    local inori_fn01_01 = Motion.Object:new(NPC, "npc0024", "fn01_01")
    local Gryphon_index = GetIndex(NPC, "npc0038")
    local Gryphon_fe02 = Motion.Object:new(NPC, "npc0038", "fe02")
    local Gryphon_bn01 = Motion.Object:new(NPC, "npc0038", "bn01")
    local Gryphon_f000 = Motion.Object:new(NPC, "npc0038", "f000")
    Cam.Inst:Set(23.211, 1.345, -14.625, 14.954, -0.964, -9.479, default, 0)
    Field.ObjectLookAtTheObject(PLAYER, 1, FLD_OBJ_NPC, GetIndex(FLD_OBJ_NPC, "npc0001"), 15)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    WaitFrame(40)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, bakkas_index, "fe01", 10, 10)
    WaitFrame(70)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, bakkas_index, "e007", 10, 10)
    WaitFrame(25)
    Motion.Player:PlayWithMoveMotion("e006", 5, 5)
    aigio_e013:Play(10, true)
    inori_e013:Play(10, true)
    tlk:Message("f_d0903_0030_0010")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, bakkas_index, "e004", 10, 20)
    aigio_fn01_01:Play(20, true)
    tlk:Message("f_d0903_0030_0040")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, bakkas_index, "e008", 10, 20)
    tlk:Message("f_d0903_0030_0050")
    inori_fn01_01:Play(20, true)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, Gryphon_index, "fe02", 10, 10)
    tlk:Message("f_d0903_0030_0060")
    Field.ObjectPlayMotion(NPC, Gryphon_index, "f000", 10, true)
    MessageClose()
    FieldObjectSync(FLD_OBJ_GIMMICK, false)
    Cam.Inst:Set(57.33, 12.5, 73.28, 51.23, 10.76, 65.55, default, 30)
    tlk:Message("f_d0903_0030_0070")
    MessageClose()
    WaitFrame(20)
    Field.ObjectSetEnableCheckAndFieldAttack(OGIM, GetIndex(OGIM, "fa_icenuts_correct"), true)
    Cam.Inst:Set(23.211, 1.345, -14.625, 14.954, -0.964, -9.479, default, 0)
    Field.ObjectResetAim(PLAYER, 1, 15)
    inori_e002:Play(10, true)
    tlk:Message("f_d0903_0030_0110")
    tlk:MessageClose()
    local pc = Obj:new(PLAYER, "")
    local gim = Obj:new(FLD_OBJ_GIMMICK, "fa_icenuts_correct")
    local r_yrot = Field.GetAngleToTarget2D(gim.pos.x, gim.pos.z, pc.pos.x, pc.pos.z)
    SetFollowerCameraOperateRotation(0, r_yrot - 180)
    Flg.Set("FLAG_MAIN_22_223")
    Qst.Main:Set(self.ID, self.STEP_035)
    Cam.Inst:Clear(30)
    WaitFrame(10)
    FieldObjectSync(FOR_ALL, false)
    WaitFrame(10)
    Field.ObjectPlayMotion(NPC, bakkas_index, "bn01", 10, true)
    WaitFrame(10)
    tlk:EndTalk()
  end
end

function M440:Event_648()
  if Qst.Main:Check(self.ID, self.STEP_035, self.STEP_040) then
    local tlk = Tlk:new("d09", 1, true)
    tlk:StartTalkAndCancelDigimonRide()
    tlk:Message("f_d0903_0035_0020")
    tlk:EndTalk()
    Qst.Main:Set(self.ID, self.STEP_040)
  end
end

function M440:Event_649()
  if Qst.Main:Check(self.ID, self.STEP_040, self.STEP_045) then
    local tlk = Tlk:new("d09", 1, true)
    tlk:StartTalkAndCancelDigimonRide()
    Flg.Set("FLAG_MAIN_22_265")
    Field.SymbolForceRespawn(GetIndex(ENEMY, "enemy003"), true, true)
    Field.SymbolForceRespawn(GetIndex(ENEMY, "enemy004"), true, true)
    Field.SymbolForceRespawn(GetIndex(ENEMY, "enemy005"), true, true)
    Field.SymbolForceRespawn(GetIndex(ENEMY, "enemy006"), true, true)
    Field.SymbolForceRespawn(GetIndex(ENEMY, "enemy007"), true, true)
    WaitFrame(1)
    Field.ObjectPlayMotion(ENEMY, GetIndex(ENEMY, "enemy003"), "fe02", 15, true)
    Field.ObjectPlayMotion(ENEMY, GetIndex(ENEMY, "enemy004"), "fe02", 15, true)
    Field.ObjectPlayMotion(ENEMY, GetIndex(ENEMY, "enemy005"), "fe02", 15, true)
    Field.ObjectPlayMotion(ENEMY, GetIndex(ENEMY, "enemy006"), "fe01", 15, true)
    Field.ObjectPlayMotion(ENEMY, GetIndex(ENEMY, "enemy007"), "fe01", 15, true)
    local npc_index01 = GetIndex(NPC, "npc0056")
    local aigio_e018 = Motion.Object:new(NPC, "npc0056", "e018")
    local aigio_e002 = Motion.Object:new(NPC, "npc0056", "e002")
    local aigio_e009 = Motion.Object:new(NPC, "npc0056", "e009")
    local aigio_fn01_01 = Motion.Object:new(NPC, "npc0056", "fn01_01")
    local npc_index02 = GetIndex(NPC, "npc0029")
    local inori_e004 = Motion.Object:new(NPC, "npc0029", "e004")
    local inori_e002 = Motion.Object:new(NPC, "npc0029", "e002")
    local inori_e010 = Motion.Object:new(NPC, "npc0029", "e010")
    local inori_e017 = Motion.Object:new(NPC, "npc0029", "e017")
    local inori_fn01_01 = Motion.Object:new(NPC, "npc0050", "fn01_01")
    PlaySE(101017, 100)
    WaitFrame(15)
    tlk:Message("f_d0903_0035_0030")
    tlk:Message("f_d0903_0035_0040")
    tlk:MessageClose()
    Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
    Flg.Set("FLAG_MAIN_22_260")
    FieldObjectSync(FOR_ALL, true)
    Obj:new(PLAYER, ""):SetRotationY(45, 0)
    Obj:new(PLAYER, ""):SetPos(32.849, 5.123, 73.792)
    Cam.Inst:Set(38.111, 5.337, 70.0076, 30.325, 7.811, 75.774, default, 0)
    Field.ObjectSetPos(FLD_OBJ_NPC, npc_index01, 48.577, -0.02, 57.112)
    ObjectSetRotationY(FLD_OBJ_NPC, npc_index01, 0, 0)
    Field.ObjectSetPos(FLD_OBJ_NPC, npc_index02, 48.821, 0.009, 55.539)
    ObjectSetRotationY(FLD_OBJ_NPC, npc_index02, 180, 0)
    inori_e017:Play(10, true)
    WaitFrame(30)
    FadeAllInWithWait(FADE_TIME, FADE_TIME)
    aigio_e009:Play(20, true)
    tlk:Message("f_d0903_0035_0050")
    inori_e002:Play(20, true)
    tlk:Message("f_d0903_0035_0060")
    tlk:MessageClose()
    Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
    Obj:new(PLAYER, ""):SetRotationY(130, 0)
    Obj:new(PLAYER, ""):SetPos(45.235, 0.003, 58.581)
    Cam.Inst:Set(52.053, -0.406, 62.531, 43.563, 1.889, 57.771, default, 0)
    Field.ObjectSetPos(FLD_OBJ_NPC, npc_index01, 47.235, -0.02, 58.99)
    ObjectSetRotationY(FLD_OBJ_NPC, npc_index01, 130, 0)
    aigio_fn01_01:Play(10, true)
    Field.ObjectSetPos(FLD_OBJ_NPC, npc_index02, 48.401, 0.036, 58.435)
    ObjectSetRotationY(FLD_OBJ_NPC, npc_index02, 130, 0)
    WaitFrame(30)
    Obj:new(PLAYER, ""):MoveToTarget2D(45.915, 59.468, 3, 60)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    aigio_e018:Play(20, true)
    tlk:Message("f_d0903_0035_0080")
    local _ = tlk:Select(1, "f_d0903_0035_0110")
    START_TALK_ACTION_AND_ZOOM("npc0029", true, false)
    aigio_e002:Play(10, true)
    tlk:Message("f_d0903_0035_0120")
    END_TALK_ACTION_AND_ZOOM("npc0029", true, false)
    tlk:EndTalk()
    Fade_OutNoLoadingWithWait(FADE_TIME, FADE_TIME)
    Cam.Inst:Clear(30)
    WaitFrame(15)
    Field.ObjectSetPos(FLD_OBJ_NPC, npc_index02, 49.036, 0.036, 58.09)
    ObjectSetRotationY(FLD_OBJ_NPC, npc_index02, 70, 0)
    inori_e004:Play(10, true)
    Flg.Set("FLAG_MAIN_22_263")
    FieldObjectSync(FOR_ALL, true)
    SetFollowerCameraOperateRotation(0, 130)
    Common.SetExistPartyAegiomon(true)
    FollowerSync()
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
  end
end

function M440:Event_650()
  if Qst.Main:Check(self.ID, self.STEP_040, self.STEP_045) and Flg.Check("FLAG_MAIN_22_250", "FLAG_MAIN_22_270") then
    Flg.Set("FLAG_MAIN_22_264")
    Prcs_d0903_PickUpNuts("icenuts_correct", 12)
    Qst.Main:Set(self.ID, self.STEP_045)
  end
end

function M440:Event_655()
  if Qst.Main:Check(self.ID, self.STEP_045, self.STEP_050) then
    local npc_index01 = GetIndex(NPC, "npc0055")
    local aigio_e015 = Motion.Object:new(NPC, "npc0055", "e015")
    local aigio_e018 = Motion.Object:new(NPC, "npc0055", "e018")
    local aigio_fn01_01 = Motion.Object:new(NPC, "npc0055", "fn01_01")
    local npc_index02 = GetIndex(NPC, "npc0029")
    local inori_e002 = Motion.Object:new(NPC, "npc0029", "e002")
    local inori_e004 = Motion.Object:new(NPC, "npc0029", "e004")
    local inori_fn01_01 = Motion.Object:new(NPC, "npc0029", "fn01_01")
    local inori = Obj:new(NPC, "npc0029")
    local tlk = Tlk:new("d09", 1, true)
    tlk:StartTalkAndCancelDigimonRide()
    Cam.Inst:Set(44.957, 0.114, 59.959, 52.166, 1.79, 53.234, default, 30)
    ObjectTurnToPlayer(NPC, inori.name)
    inori_e004:Play(20, true)
    tlk:Message("f_d0903_0035_0140")
    aigio_e015:Play(10, true)
    tlk:Message("f_d0903_0035_0160")
    Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
    WaitFrame(15)
    tlk:EndTalk()
    Cam.Inst:Clear(0)
    Obj:new(PLAYER, ""):SetPos(22.617, -2.05, -11.12, true)
    Obj:new(PLAYER, ""):SetRotationY(340, 0)
    Flg.Set("FLAG_MAIN_22_261")
    FieldObjectSync(FOR_ALL, true)
    WaitFrame(1)
    self:Event_660()
  end
end

function M440:Event_660()
  if Qst.Main:Check(self.ID, self.STEP_045, self.STEP_050) and Flg.Check("FLAG_MAIN_22_264", "FLAG_MAIN_22_270") then
    Flg.Set("FLAG_MAIN_22_270")
    Prcs_d0903_PassNuts(12)
    FieldObjectSync(FOR_ALL, false)
    local bakkas_index = GetIndex(NPC, "npc0001")
    local fe01 = Motion.Object:new(NPC, "npc0001", "fe01")
    local fe02 = Motion.Object:new(NPC, "npc0001", "fe02")
    local e005 = Motion.Object:new(NPC, "npc0001", "e005")
    local e006 = Motion.Object:new(NPC, "npc0001", "e006")
    local e007 = Motion.Object:new(NPC, "npc0001", "e007")
    local e008 = Motion.Object:new(NPC, "npc0001", "e008")
    local bv01 = Motion.Object:new(NPC, "npc0001", "bv01")
    local bn02 = Motion.Object:new(NPC, "npc0001", "bn02")
    Field.ObjectLoadMotion(NPC, bakkas_index, "bn01")
    Field.ObjectLoadMotion(NPC, bakkas_index, "e501")
    local aigio_index = GetIndex(NPC, "npc0023")
    local aigio_e002 = Motion.Object:new(NPC, "npc0023", "e002")
    local aigio_e006 = Motion.Object:new(NPC, "npc0023", "e006")
    local aigio_e013 = Motion.Object:new(NPC, "npc0023", "e013")
    local aigio_fn01_01 = Motion.Object:new(NPC, "npc0023", "fn01_01")
    local inori_index = GetIndex(NPC, "npc0024")
    local inori_e002 = Motion.Object:new(NPC, "npc0024", "e002")
    local inori_e006 = Motion.Object:new(NPC, "npc0024", "e006")
    local inori_e010 = Motion.Object:new(NPC, "npc0024", "e010")
    local inori_e013 = Motion.Object:new(NPC, "npc0024", "e013")
    local inori_fn01_01 = Motion.Object:new(NPC, "npc0024", "fn01_01")
    local Gryphon_index = GetIndex(NPC, "npc0038")
    local Gryphon_fe02 = Motion.Object:new(NPC, "npc0038", "fe02")
    local Gryphon_bn01 = Motion.Object:new(NPC, "npc0038", "bn01")
    local Gryphon_f000 = Motion.Object:new(NPC, "npc0038", "f000")
    Field.ObjectLookAtTheObject(PLAYER, 1, FLD_OBJ_NPC, GetIndex(FLD_OBJ_NPC, "npc0001"), 15)
    local tlk = Tlk:new("d09", 1, true)
    tlk:StartTalkAndCancelDigimonRide()
    local bakkas_index = GetIndex(NPC, "npc0001")
    Cam.Inst:Set(23.211, 1.345, -14.625, 14.954, -0.964, -9.479, default, 0)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    WaitFrame(40)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, bakkas_index, "fe01", 10, 10)
    WaitFrame(70)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, bakkas_index, "fe02", 10, 10)
    WaitFrame(25)
    Motion.Player:PlayWithMoveMotion("e006", 5, 5)
    aigio_e013:Play(10, true)
    inori_e013:Play(10, true)
    tlk:Message("f_d0903_0040_0010")
    inori_e010:Play(10, true)
    e005:Play(30, true)
    tlk:Message("f_d0903_0040_0040")
    e008:Play(10, true)
    tlk:Message("f_d0903_0040_0050")
    FieldObjectSync(FLD_OBJ_GIMMICK, false)
    Cam.Inst:Set(15.01, 75.86, 71.27, 8.45, 75.91, 63.72, default, 30)
    tlk:Message("f_d0903_0040_0060")
    MessageClose()
    WaitFrame(30)
    Cam.Inst:Set(23.55, 1.34, -13.32, 15.56, -1.03, -7.8, default, 0)
    Field.ObjectSetEnableCheckAndFieldAttack(OGIM, GetIndex(OGIM, "fa_shocknuts_correct"), true)
    Field.ObjectPlayMotion(NPC, Gryphon_index, "f000", 10, true)
    Field.ObjectResetAim(PLAYER, 1, 15)
    Field.ObjectLookAtTheObject(NPC, Gryphon_index, FLD_OBJ_NPC, GetIndex(FLD_OBJ_NPC, "npc0024"), 30)
    tlk:Message("f_d0903_0040_0090")
    inori_e002:Play(10, true)
    tlk:Message("f_d0903_0040_0100")
    tlk:EndTalk()
    Flg.Set("FLAG_MAIN_22_225")
    FieldObjectSync(FOR_ALL, false)
    Field.CheckSymbolEnemyCondition(false)
    local pc = Obj:new(PLAYER, "")
    local gim = Obj:new(FLD_OBJ_GIMMICK, "fa_shocknuts_correct")
    local r_yrot = Field.GetAngleToTarget2D(gim.pos.x, gim.pos.z, pc.pos.x, pc.pos.z)
    SetFollowerCameraOperateRotation(0, r_yrot - 180)
    Cam.Inst:Clear(30)
    WaitFrame(30)
    Field.ObjectPlayMotion(NPC, bakkas_index, "bn01", 10, true)
    Qst.Main:Set(self.ID, self.STEP_050)
    Flg.Set("FLAG_MAIN_22_227")
    Common.SetExistPartyAegiomon(false)
    FollowerSync()
    FieldObjectSync(FOR_ALL, false)
    WaitFrame(5)
  end
end

function M440:Event_662()
  if Qst.Main:Check(self.ID, self.STEP_050, self.STEP_055) then
    Qst.Main:Set(self.ID, self.STEP_055)
  end
end

function M440:Event_663()
  if Qst.Main:Check(self.ID, self.STEP_055, self.STEP_057) then
    Qst.Main:Set(self.ID, self.STEP_057)
  end
end

function M440:Event_664()
  if Qst.Main:Check(self.ID, self.STEP_057, self.STEP_058) then
    Qst.Main:Set(self.ID, self.STEP_058)
  end
end

function M440:Event_668()
  if Qst.Main:Check(self.ID, self.STEP_058, self.STEP_075) then
    local npc_index01 = GetIndex(NPC, "npc0030")
    local aigio_e018 = Motion.Object:new(NPC, "npc0030", "e018")
    local aigio_fn01_01 = Motion.Object:new(NPC, "npc0030", "fn01_01")
    Field.ObjectLoadMotion(NPC, npc_index01, "fn01_01")
    local npc_index02 = GetIndex(NPC, "npc0031")
    local inori_e004 = Motion.Object:new(NPC, "npc0031", "e004")
    local inori_fn01_01 = Motion.Object:new(NPC, "npc0031", "fn01_01")
    Field.ObjectLoadMotion(NPC, npc_index02, "fn01_01")
    Cam.Inst:Set(11.385, 6.136, 85.271, 17.085, 7.151, 77.117, default, 0)
    WaitFrame(45)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    WaitFrame(30)
    local tlk = Tlk:new("d09", 1, true)
    tlk:StartTalkAndCancelDigimonRide()
    aigio_e018:Play(10, true)
    tlk:Message("f_d0903_0045_0020")
    tlk:EndTalk()
    Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
    WaitFrame(15)
    Cam.Inst:Clear(0)
    FieldObjectSync(NPC, true)
    WaitFrame(15)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    Qst.Main:Set(self.ID, self.STEP_075)
  end
end

function M440:Event_670()
  if Qst.Main:Check(self.ID, self.STEP_075, self.STEP_080) and Flg.Check("FLAG_MAIN_22_227", "FLAG_MAIN_22_281") then
    local npc_index01 = GetIndex(NPC, "npc0055")
    local npc_aigio = "npc0055"
    local aigio_e018 = Motion.Object:new(NPC, "npc0055", "e018")
    local aigio_e002 = Motion.Object:new(NPC, "npc0055", "e002")
    local aigio_e005 = Motion.Object:new(NPC, "npc0055", "e005")
    local aigio_e007 = Motion.Object:new(NPC, "npc0055", "e007")
    local aigio_bn01 = Motion.Object:new(NPC, "npc0055", "bn01")
    local aigio_fn01_01 = Motion.Object:new(NPC, "npc0055", "fn01_01")
    Field.ObjectLoadExpression(NPC, npc_index01, "F01")
    local npc_index02 = GetIndex(NPC, "npc0050")
    local inori_e002 = Motion.Object:new(NPC, "npc0050", "e002")
    local inori_e004 = Motion.Object:new(NPC, "npc0050", "e004")
    local inori_e006 = Motion.Object:new(NPC, "npc0050", "e006")
    local inori_e018 = Motion.Object:new(NPC, "npc0050", "e018")
    local inori_bn01 = Motion.Object:new(NPC, "npc0050", "bn01")
    local inori_fn01_01 = Motion.Object:new(NPC, "npc0050", "fn01_01")
    Field.ObjectLoadMotion(NPC, npc_index02, "e201")
    Field.ObjectLoadMotion(NPC, npc_index02, "e022")
    Field.ObjectLoadExpression(NPC, npc_index02, "F01")
    Field.ObjectLoadMotion(PLAYER, 1, "e018")
    Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
    WaitFrame(10)
    Cam.Inst:Set(12.656, 6.188, 84.393, 17.301, 7.054, 75.58, default, 0)
    Obj:new(PLAYER, ""):SetPos(13.823, 5.11, 80.025, true)
    Obj:new(PLAYER, ""):SetRotationY(180, 0)
    local tlk = Tlk:new("d09", 1, true)
    tlk:StartTalkAndCancelDigimonRide()
    WaitFrame(10)
    aigio_fn01_01:Play(10, true)
    Field_InvisibleFollowerAllPartyMember(0, 0, false)
    Field_InvisibleFollowerAllGuest(0, 0, false)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    inori_e002:Play(10, true)
    Field.ObjectChangeExpression(NPC, npc_index02, "F01", EYES_BLINK_TYPE_BLINK, true, 30, AUTO_CANCEL_NONE, 15)
    Talk.NextNoVoice()
    tlk:Message("f_d0903_0045_0050")
    Field.ObjectChangeExpression(NPC, npc_index02, "F01", EYES_BLINK_TYPE_BLINK, false, 10, AUTO_CANCEL_NONE, 15)
    local ririsu_index = GetIndex(NPC, "npc0034")
    local npc_ririsu = "npc0034"
    local ririsu_fe02 = Motion.Object:new(NPC, "npc0034", "fe02")
    local ririsu_bn01 = Motion.Object:new(NPC, "npc0034", "bn01")
    local ririsu_bs01 = Motion.Object:new(NPC, "npc0034", "bs01")
    local ririsu_pos01 = Field.ObjectGetPosition(NPC, ririsu_index)
    local mob_index01 = GetIndex(MOB, "Mob_001")
    local mob_pos01 = Field.ObjectGetPosition(MOB, mob_index01)
    local mob_index02 = GetIndex(MOB, "Mob_002")
    local mob_pos02 = Field.ObjectGetPosition(MOB, mob_index02)
    local mob_index03 = GetIndex(MOB, "Mob_003")
    local mob_pos03 = Field.ObjectGetPosition(MOB, mob_index03)
    local mob_index04 = GetIndex(MOB, "Mob_004")
    local mob_pos04 = Field.ObjectGetPosition(MOB, mob_index04)
    local mob_index05 = GetIndex(MOB, "Mob_005")
    local mob_pos05 = Field.ObjectGetPosition(MOB, mob_index05)
    Flg.Set("FLAG_MAIN_22_282")
    FieldObjectSync(FOR_ALL, true)
    PlaySE(101017, 100)
    Field.ObjectLookAtTheObject(NPC, npc_index01, FLD_OBJ_NPC, GetIndex(FLD_OBJ_NPC, "npc0034"), 30)
    WaitFrame(30)
    aigio_e018:Play(10, true)
    Field.ObjectChangeExpression(NPC, npc_index01, "F01", EYES_BLINK_TYPE_BLINK, true, 30, AUTO_CANCEL_NONE, 15)
    Talk.NextNoVoice()
    tlk:Message("f_d0903_0045_0060")
    Field.ObjectChangeExpression(NPC, npc_index01, "F01", EYES_BLINK_TYPE_BLINK, false, 10, AUTO_CANCEL_NONE, 15)
    MessageClose()
    Cam.Inst:Set(8.781, 7.282, 72.179, 14.877, 6.234, 80.037, default, 30)
    WaitFrame(30)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, ririsu_index, "fe02", 10, 10)
    WaitFrame(20)
    SetControlScriptExternalVariable("PlayVoice_Event_670", "start_01")
    WaitFrame(40)
    Field.ObjectSetPos(FLD_OBJ_NPC, npc_index01, 15.375, 5.133, 81.851)
    ObjectSetRotationY(FLD_OBJ_NPC, npc_index01, 0, 0)
    Obj:new(PLAYER, ""):SetPos(15.389, 5.132, 81.285, true)
    Obj:new(PLAYER, ""):SetRotationY(0, 0)
    Cam.Inst:Set(8.956, 6.616, 77.047, 17.433, 6.582, 82.353, default, 30)
    aigio_bn01:Play(10, true)
    inori_e006:Play(10, true)
    WaitFrame(30)
    Field.ObjectChangeExpression(NPC, npc_index01, "F01", EYES_BLINK_TYPE_BLINK, true, 30, AUTO_CANCEL_NONE, 15)
    Talk.NextNoVoice()
    tlk:Message("f_d0903_0045_0070")
    Field.ObjectChangeExpression(NPC, npc_index01, "F01", EYES_BLINK_TYPE_BLINK, false, 10, AUTO_CANCEL_NONE, 15)
    local _ = tlk:Select(1, "f_d0903_0045_0080")
    Motion.Player:Play("e018", 10, true)
    WaitFrame(20)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, npc_index02, "e022", 10, 10)
    Talk.NextNoVoice()
    tlk:Message("f_d0903_0045_0130")
    Field.ObjectChangeExpression(NPC, npc_index02, "F01", EYES_BLINK_TYPE_BLINK, false, 10, AUTO_CANCEL_NONE, 15)
    aigio_e002:Play(10, true)
    Field.ObjectChangeExpression(NPC, npc_index01, "F01", EYES_BLINK_TYPE_BLINK, true, 30, AUTO_CANCEL_NONE, 15)
    Talk.NextNoVoice()
    tlk:Message("f_d0903_0045_0140")
    Field.ObjectChangeExpression(NPC, npc_index01, "F01", EYES_BLINK_TYPE_BLINK, false, 10, AUTO_CANCEL_NONE, 15)
    MessageClose()
    Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
    Flg.Set("FLAG_MAIN_22_280")
    Cam.Inst:Set(9.135, 7.317, 75.702, 16.99, 6.211, 81.791, default, 1)
    Motion.Player:Play("bn01", 10, true)
    WaitFrame(15)
    FieldObjectSync(FOR_ALL, false)
    WaitFrame(30)
    FadeInWithWaitNotFlgCheck(FADE_BLACK, FADE_TIME)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, ririsu_index, "bs01", 20, 30)
    WaitFrame(60)
    SetControlScriptExternalVariable("PlayVoice_Event_670", "start_02")
    WaitFrame(35)
    Motion.Player:PlayWithMoveMotion("bc01", 5, 5)
    WaitFrame(15)
    tlk:EndTalk()
    EncountFromField_WithNormalEffect(11901300, 10973, true)
  end
end

function M440:Event_672()
  if Qst.Main:Check(self.ID, self.STEP_075, self.STEP_080) and Flg.Check("FLAG_MAIN_22_284", "FLAG_MAIN_22_285") then
    Cam.Inst:Set(21.795, 8.117, 79.482, 13.185, 6.579, 84.331, default, 0)
    FieldObjectSync(FOR_ALL, false)
    Obj:new(PLAYER, ""):SetRotationY(80, 0)
    WaitFrame(10)
    FadeAllIn(FADE_BLACK, FADE_TIME)
    local rotosu_index = GetIndex(NPC, "npc0005")
    local rotosu_fe02 = Motion.Object:new(NPC, "npc0005", "fe02")
    local rotosu_fq01 = Motion.Object:new(NPC, "npc0005", "fq01")
    local rotosu_fq02 = Motion.Object:new(NPC, "npc0005", "fq02")
    local rotosu_bv01 = Motion.Object:new(NPC, "npc0005", "bv01")
    local roze_index = GetIndex(NPC, "npc0035")
    local roze_fe02 = Motion.Object:new(NPC, "npc0035", "fe02")
    local roze_fq01 = Motion.Object:new(NPC, "npc0035", "fq01")
    local roze_fq02 = Motion.Object:new(NPC, "npc0035", "fq02")
    local roze_bv01 = Motion.Object:new(NPC, "npc0035", "bv01")
    local roze_ba01 = Motion.Object:new(NPC, "npc0035", "ba01")
    Field.ObjectLoadMotion(NPC, roze_index, "fe03")
    local Gryphon_index = GetIndex(NPC, "npc0036")
    local Gryphon_fe02 = Motion.Object:new(NPC, "npc0036", "fe02")
    local Gryphon_fq01 = Motion.Object:new(NPC, "npc0036", "fq01")
    local Gryphon_fq02 = Motion.Object:new(NPC, "npc0036", "fq02")
    local kabuteri_index = GetIndex(MOB, "Mob_006")
    Field.ObjectLoadMotion(MOB, kabuteri_index, "fe04")
    Field.ObjectLoadMotion(MOB, kabuteri_index, "bn01")
    local lili_index = GetIndex(MOB, "Mob_011")
    Field.ObjectLoadMotion(MOB, lili_index, "fe02")
    Field.ObjectLoadMotion(MOB, lili_index, "bn01")
    local tlk = Tlk:new("d09", 1, true)
    tlk:StartTalkAndCancelDigimonRide()
    WaitFrame(30)
    Field.ObjectPlayMotionWithStartMoveMotion(MOB, kabuteri_index, "fe04", 10, 10)
    tlk:Message("f_d0903_0045_0160")
    Field.ObjectPlayMotionWithStartMoveMotion(MOB, lili_index, "fe02", 10, 10)
    tlk:Message("f_d0903_0045_0170")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, Gryphon_index, "fe02", 10, 10)
    tlk:Message("f_d0903_0045_0180")
    Field.ObjectLookAtTheObject(NPC, roze_index, FLD_OBJ_NPC, GetIndex(FLD_OBJ_NPC, "npc0005"), 30)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, roze_index, "ba01", 10, 10)
    tlk:Message("f_d0903_0045_0190")
    Field.ObjectLookAtTheObject(NPC, rotosu_index, FLD_OBJ_NPC, GetIndex(FLD_OBJ_NPC, "npc0035"), 30)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, rotosu_index, "fq02", 10, 10)
    tlk:Message("f_d0903_0045_0200")
    Field.ObjectLookAtTheObject(NPC, Gryphon_index, FLD_OBJ_NPC, GetIndex(FLD_OBJ_NPC, "npc0035"), 30)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, Gryphon_index, "fq02", 10, 10)
    tlk:Message("f_d0903_0045_0210")
    Field.ObjectLookAtTheObject(NPC, roze_index, FLD_OBJ_NPC, GetIndex(FLD_OBJ_NPC, "npc0005"), 30)
    tlk:Message("f_d0903_0045_0220")
    Field.ObjectResetAim(NPC, rotosu_index, 25)
    Field.ObjectResetAim(NPC, roze_index, 15)
    Field.ObjectResetAim(NPC, Gryphon_index, 30)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, roze_index, "fe02", 10, 10)
    tlk:Message("f_d0903_0045_0230")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, Gryphon_index, "fe02", 10, 10)
    tlk:Message("f_d0903_0045_0310")
    MessageClose()
    Flg.Set("FLAG_MAIN_22_285")
    Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
    tlk:EndTalk()
    FieldObjectSync(FOR_ALL, true)
    Obj:new(PLAYER, ""):SetPos(19.752, -2.292, -2.21, true)
    self:Event_680()
  end
end

function M440:Event_680()
  if Qst.Main:Check(self.ID, self.STEP_075, self.STEP_080) and Flg.Check("FLAG_MAIN_22_280", "FLAG_MAIN_22_290") then
    Cam.Inst:Set(22.064, 0.735, -9.521, 22.392, -1.153, 0.293, default, 0)
    local bakkas_index = GetIndex(NPC, "npc0001")
    local fe01 = Motion.Object:new(NPC, "npc0001", "fe01")
    local fe02 = Motion.Object:new(NPC, "npc0001", "fe02")
    local e002 = Motion.Object:new(NPC, "npc0001", "e002")
    local e004 = Motion.Object:new(NPC, "npc0001", "e004")
    local e005 = Motion.Object:new(NPC, "npc0001", "e005")
    local e006 = Motion.Object:new(NPC, "npc0001", "e006")
    local e007 = Motion.Object:new(NPC, "npc0001", "e007")
    local e008 = Motion.Object:new(NPC, "npc0001", "e008")
    local bv01 = Motion.Object:new(NPC, "npc0001", "bv01")
    local bn01 = Motion.Object:new(NPC, "npc0001", "bn01")
    local bn02 = Motion.Object:new(NPC, "npc0001", "bn02")
    Field.ObjectLoadMotion(NPC, bakkas_index, "fe02")
    Field.ObjectLoadMotion(NPC, bakkas_index, "fe04")
    Field.ObjectLoadMotion(NPC, bakkas_index, "bs03")
    local aigio_index = GetIndex(NPC, "npc0017")
    local aigio_e002 = Motion.Object:new(NPC, "npc0017", "e002")
    local aigio_e004 = Motion.Object:new(NPC, "npc0017", "e004")
    local aigio_e006 = Motion.Object:new(NPC, "npc0017", "e006")
    local aigio_e013 = Motion.Object:new(NPC, "npc0017", "e013")
    local aigio_fn01_01 = Motion.Object:new(NPC, "npc0017", "fn01_01")
    local aigio01_e013 = Motion.Object:new(NPC, "npc0023", "e013")
    Field.ObjectLoadMotion(NPC, aigio_index, "e032")
    Field.ObjectLoadMotion(NPC, aigio_index, "fe02")
    Field.ObjectLoadExpression(NPC, aigio_index, "F01")
    local inori_index = GetIndex(NPC, "npc0016")
    local inori_e002 = Motion.Object:new(NPC, "npc0016", "e002")
    local inori_e006 = Motion.Object:new(NPC, "npc0016", "e006")
    local inori_e010 = Motion.Object:new(NPC, "npc0016", "e010")
    local inori_e013 = Motion.Object:new(NPC, "npc0016", "e013")
    local inori_fn01_01 = Motion.Object:new(NPC, "npc0016", "fn01_01")
    local inori01_e013 = Motion.Object:new(NPC, "npc0024", "e013")
    Field.ObjectLoadExpression(NPC, inori_index, "F01")
    local Gryphon_index = GetIndex(NPC, "npc0006")
    local Gryphon_fe02 = Motion.Object:new(NPC, "npc0006", "fe02")
    local Gryphon_fq01 = Motion.Object:new(NPC, "npc0006", "fq01")
    local Gryphon_fq02 = Motion.Object:new(NPC, "npc0006", "fq02")
    local Gryphon_bn01 = Motion.Object:new(NPC, "npc0006", "bn01")
    local Gryphon_f000 = Motion.Object:new(NPC, "npc0006", "f000")
    local pikkoro_index = GetIndex(NPC, "npc0015")
    local pikkoro_fe02 = Motion.Object:new(NPC, "npc0015", "fe02")
    local pikkoro_fq02 = Motion.Object:new(NPC, "npc0015", "fq02")
    local pikkoro_bn01 = Motion.Object:new(NPC, "npc0015", "bn01")
    Field.ObjectLoadMotion(NPC, pikkoro_index, "fe04")
    local acuira_index = GetIndex(NPC, "npc0044")
    local acuira_fe02 = Motion.Object:new(NPC, "npc0044", "fe02")
    local acuira_bn01 = Motion.Object:new(NPC, "npc0044", "bn01")
    local rara_index = GetIndex(NPC, "npc0043")
    local rara_fe02 = Motion.Object:new(NPC, "npc0043", "fe02")
    local rara_bn01 = Motion.Object:new(NPC, "npc0043", "bn01")
    local HippoGryphon_index = GetIndex(NPC, "npc0042")
    local HippoGryphon_fe02 = Motion.Object:new(NPC, "npc0042", "fe02")
    local HippoGryphon_bn01 = Motion.Object:new(NPC, "npc0042", "bn01")
    local p_fn01_01 = Motion.Object:new(PLAYER, "", "fn01_01")
    local p_e004_01 = Motion.Object:new(PLAYER, "", "e004_01")
    local hoe_index = GetIndex(NPC, "npc0004")
    Field.ObjectLoadMotion(NPC, hoe_index, "bn01")
    Field.ObjectLoadMotion(NPC, hoe_index, "f000")
    Field.ObjectLoadMotion(NPC, hoe_index, "f001")
    Obj:new(NPC, "npc0004"):Invisible()
    local tlk = Tlk:new("d09", 1, true)
    tlk:StartTalkAndCancelDigimonRide()
    ObjectSetRotationY(FLD_OBJ_NPC, aigio_index, 210, 0)
    ObjectSetRotationY(FLD_OBJ_NPC, inori_index, 210, 0)
    Field.ObjectSetPos(FLD_OBJ_NPC, pikkoro_index, 22.283, 4.69, -23.391)
    WaitFrame(10)
    FadeInWithWait(FADE_BLACK, FADE_TIME)
    Obj:new(PLAYER, ""):MoveToTarget2D(20.89, -3.53, 5, 60)
    inori_e002:Play(10, true)
    Field.ObjectChangeExpression(NPC, inori_index, "F01", EYES_BLINK_TYPE_BLINK, true, 30, AUTO_CANCEL_NONE, 15)
    tlk:Message("f_d0903_0050_0010")
    Field.ObjectChangeExpression(NPC, inori_index, "F01", EYES_BLINK_TYPE_BLINK, false, 10, AUTO_CANCEL_NONE, 15)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, pikkoro_index, "fe04", 10, 10)
    tlk:Message("f_d0903_0050_0040")
    pikkoro_bn01:Play(10, true)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, bakkas_index, "e006", 10, 10)
    tlk:Message("f_d0903_0050_0050")
    e004:Play(10, true)
    inori_fn01_01:Play(20, true)
    tlk:Message("f_d0903_0050_0060")
    tlk:MessageClose()
    Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
    Cam.Inst:Set(23.211, 1.345, -14.625, 14.954, -0.964, -9.479, default, 0)
    WaitFrame(15)
    Flg.Set("FLAG_MAIN_22_275")
    FieldObjectSync(FOR_ALL, false)
    Obj:new(PLAYER, ""):SetPos(22.617, -2.05, -11.12, true)
    Obj:new(PLAYER, ""):SetRotationY(340, 0)
    WaitFrame(15)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, bakkas_index, "fe01", 10, 10)
    WaitFrame(70)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, bakkas_index, "fe02", 10, 10)
    WaitFrame(25)
    Motion.Player:PlayWithMoveMotion("e006", 5, 5)
    aigio01_e013:Play(10, true)
    inori01_e013:Play(10, true)
    tlk:Message("f_d0903_0080_0010")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, bakkas_index, "bv01", 10, 10)
    tlk:Message("f_d0903_0080_0020")
    tlk:MessageClose()
    Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
    WaitFrame(15)
    Cam.Inst:Set(10.577, 2.658, -27.367, 18.898, 0.639, -19.887, default, 0)
    local bacchus_02 = Obj:new(NPC, "npc_0053")
    Flg.Set("FLAG_MAIN_22_290")
    FieldObjectSync(NPC, true)
    Obj:new(NPC, "npc0053"):CancelInvisible(0, true)
    Obj:new(PLAYER, ""):SetPos(16.418, -1.947, -10.047, true)
    Obj:new(PLAYER, ""):SetRotationY(0, 0)
    WaitFrame(15)
    Obj:new(NPC, "npc0053"):MoveToTarget2D(11.87, -32.99, 4, 90)
    FadeInWithWaitNotFlgCheck(FADE_BLACK, FADE_TIME)
    WaitFrame(90)
    Cam.Inst:Set(5.823, 5.128, -32.901, -1.942, 7.828, -38.594, default, 0)
    local bakkas01_index = GetIndex(NPC, "npc0053")
    local bacchus_bs03 = Motion.Object:new(NPC, "npc0053", "bs03")
    local bacchus_bs02 = Motion.Object:new(NPC, "npc0053", "bs02")
    local bakkas_bs01 = Motion.Object:new(NPC, "npc0053", "bs01")
    local bakkas_fe02 = Motion.Object:new(NPC, "npc0053", "fe02")
    local b_e004 = Motion.Object:new(NPC, "npc0053", "e004")
    local b_e006 = Motion.Object:new(NPC, "npc0053", "e006")
    local b_bn01 = Motion.Object:new(NPC, "npc0053", "bn01")
    local b_e007 = Motion.Object:new(NPC, "npc0053", "e007")
    local b_bs01 = Motion.Object:new(NPC, "npc0053", "bs01")
    Field.LoadEffectScript("ef_b_chr179_bs02", 1)
    Field.ObjectAttachEffectScript(NPC, bakkas01_index, "ef_b_chr179_bs02", false, 1, false, false, false, false)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, bakkas01_index, "e007", 10, 10)
    tlk:Message("f_d0903_0080_0030")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, pikkoro_index, "fe04", 10, 10)
    tlk:Message("f_d0903_0080_0040")
    tlk:Message("f_d0903_0080_0050")
    MessageClose()
    local bakkas = Obj:new(NPC, "npc0053")
    local vec = Field.GetUnitVector2D(bakkas.rot_y)
    bacchus_bs03:Play(0, false)
    SetControlScriptExternalVariable("PlayVoice_Event_680_1", "start_00")
    Cam.Inst:Set(13.037, 3.755, -33.025, 5.469, 6.78, -38.818, default, 0)
    WaitFrame(1)
    Cam.Inst:Set(8.79, 3.264, -34.982, -0.934, 4.923, -36.614, default, 50)
    WaitFrame(50)
    Cam.Inst:Set(15.995, 4.146, -30.097, 8.636, 3.59, -36.846, default, 45)
    WaitFrame(45)
    SetControlScriptExternalVariable("PlayVoice_Event_680_1", "start_01")
    Cam.Inst:Set(0.399, 4.12, -41.87, -5.328, 3.917, -50.064, default, 5)
    WaitFrame(10)
    local pos1_x, pos1_y, pos1_z = -18.690001, 10.346, -46.023998
    local pos2_x, pos2_y, pos2_z = -20.889, 9.087, -42.868999
    local pos3_x, pos3_y, pos3_z = -20.813, 5.774, -43.074001
    local pos4_x, pos4_y, pos4_z = -18.482, 5.774, -49.569
    local pos5_x, pos5_y, pos5_z = -17.750999, 9.087, -49.186001
    local pos6_x, pos6_y, pos6_z = -18.690001, 4.204, -46.023998
    local pos7_x, pos7_y, pos7_z = -19.323999, 8.606, -44.798
    local pos8_x, pos8_y, pos8_z = -18.113001, 8.606, -47.290001
    local pos9_x, pos9_y, pos9_z = -19.323999, 6.684, -44.798
    local pos10_x, pos10_y, pos10_z = -18.113001, 6.658, -47.290001
    local se_id = 401008
    local start_value, end_value, frame = 0.01, 0.1, 5
    Fade_OutNoLoadingWithWait(FADE_WHITE, 5)
    WaitFrame(5)
    Cam.Inst:Set(-17.209, 5.302, -45.239, -27.038, 6.333, -46.769, default, 0)
    Obj:new(NPC, "npc0053"):SetPos(-12.73, -1, -43.165, true)
    Obj:new(NPC, "npc0053"):SetRotationY(300, 0)
    Field.ObjectSuspendAutoTransparent(NPC, bakkas01_index, AUTO_TRANSPARENT_TYPE_ALL)
    b_e004:Play(0, true)
    Obj:new(NPC, "npc0053"):Invisible()
    PlayEffectScript("ef_b_bos_213", pos1_x, pos1_y, pos1_z, 0, 0.05)
    PlaySE(se_id, 100)
    Quake.Start(start_value, end_value, frame)
    SetControlScriptExternalVariable("PlayVoice_Event_680_1", "start_02")
    WaitFrame(15)
    PlayEffectScript("ef_b_bos_213", pos3_x, pos3_y, pos3_z, 0, 0.05)
    PlaySE(se_id, 100)
    Quake.Start(start_value, end_value, frame)
    WaitFrame(5)
    PlayEffectScript("ef_b_bos_213", pos4_x, pos4_y, pos4_z, 0, 0.05)
    PlaySE(se_id, 100)
    Quake.Start(start_value, end_value, frame)
    SetControlScriptExternalVariable("PlayVoice_Event_680_1", "start_03")
    FadeAllInWithWait(FADE_WHITE, 5)
    WaitFrame(10)
    PlayEffectScript("ef_b_bos_213", pos5_x, pos5_y, pos5_z, 0, 0.05)
    PlaySE(se_id, 100)
    Quake.Start(start_value, end_value, frame)
    WaitFrame(5)
    PlayEffectScript("ef_b_bos_213", pos2_x, pos2_y, pos2_z, 0, 0.05)
    PlaySE(se_id, 100)
    Quake.Start(start_value, end_value, frame)
    SetControlScriptExternalVariable("PlayVoice_Event_680_1", "start_04")
    WaitFrame(10)
    PlayEffectScript("ef_b_bos_213", pos7_x, pos7_y, pos7_z, 0, 0.05)
    PlaySE(se_id, 100)
    Quake.Start(start_value, end_value, frame)
    WaitFrame(5)
    PlayEffectScript("ef_b_bos_213", pos6_x, pos6_y, pos6_z, 0, 0.05)
    PlaySE(se_id, 100)
    Quake.Start(start_value, end_value, frame)
    SetControlScriptExternalVariable("PlayVoice_Event_680_1", "start_03")
    WaitFrame(10)
    PlayEffectScript("ef_b_bos_213", pos9_x, pos9_y, pos9_z, 0, 0.05)
    PlaySE(se_id, 100)
    Quake.Start(start_value, end_value, frame)
    WaitFrame(5)
    PlayEffectScript("ef_b_bos_213", pos10_x, pos10_y, pos10_z, 0, 0.1)
    PlaySE(se_id, 100)
    Quake.Start(start_value, end_value, frame)
    SetControlScriptExternalVariable("PlayVoice_Event_680_1", "start_02")
    WaitFrame(15)
    PlayEffectScript("ef_b_bos_213", -10.847, 6.568, -44.25, 0, 0.1)
    PlaySE(se_id, 100)
    Quake.Start(0.05, 0.3, 5)
    Field.PlayEffectScript("ef_f_com_300_sm", pos4_x, pos4_y, pos4_z, 0, 3)
    WaitFrame(10)
    PlaySE(401009, 100)
    SetControlScriptExternalVariable("PlayVoice_Event_680_1", "start_05")
    Field.ObjectInvisible(OGIM, GetIndex(OGIM, "d09blackwall"), 0, 30, true)
    Field.ObjectInvisible(OGIM, GetIndex(OGIM, "d09blackwall_eff"), 0, 30, true)
    Field.ObjectInvisible(OGIM, GetIndex(OGIM, "d09blackwall_col"), 0, 0, true)
    WaitFrame(10)
    Obj:new(NPC, "npc0053"):CancelInvisible(15)
    p_e004_01:PlayWithStartMoveMotion(10, 10)
    aigio_e004:PlayWithStartMoveMotion(10, 10)
    inori_e006:PlayWithStartMoveMotion(10, 10)
    WaitFrame(150)
    Cam.Inst:Set(10.577, 2.658, -27.367, 18.898, 0.639, -19.887, default, 0)
    WaitFrame(15)
    b_bs01:PlayWithStartMoveMotion(10, 20)
    tlk:Message("f_d0903_0080_0070")
    MessageClose()
    Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
    WaitFrame(15)
    Flg.Set("FLAG_MAIN_22_291")
    FieldObjectSync(FOR_ALL, false)
    Obj:new(PLAYER, ""):SetPos(20.89, -2.293, -3.53, true)
    Obj:new(PLAYER, ""):SetRotationY(40, 0)
    Cam.Inst:Clear(0)
    Cam.Inst:Set(22.064, 0.735, -9.521, 22.392, -1.153, 0.293, default, 0)
    local pikkoro_index = GetIndex(NPC, "npc0015")
    Field.ObjectSetPos(FLD_OBJ_NPC, pikkoro_index, 22.283, 4.69, -23.391)
    WaitFrame(15)
    Gryphon_bn01:Play(10, true)
    pikkoro_bn01:Play(10, true)
    acuira_bn01:Play(10, true)
    rara_bn01:Play(10, true)
    HippoGryphon_bn01:Play(10, true)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, Gryphon_index, "fe02", 10, 10)
    tlk:Message("f_d0903_0080_0090")
    Field.ObjectPlayMotion(NPC, Gryphon_index, "f000", 10, true)
    e008:Play(10, true)
    tlk:Message("f_d0903_0080_0110")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, bakkas_index, "fe04", 10, 10)
    tlk:Message("f_d0903_0080_0120")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, Gryphon_index, "fq01", 10, 10)
    Field.ObjectLookAtTheObject(NPC, Gryphon_index, FLD_OBJ_NPC, GetIndex(FLD_OBJ_NPC, "npc0001"), 30)
    tlk:Message("f_d0903_0080_0130")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, bakkas_index, "e002", 10, 10)
    tlk:Message("f_d0903_0080_0140")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, bakkas_index, "e004", 10, 10)
    tlk:Message("f_d0903_0080_0150")
    tlk:MessageClose()
    Field.PlayEffectScript("ef_e_com_105", -110.936, -23.377, -78.499, 96.694, 1.5)
    Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
    Obj:new(NPC, "npc0004"):CancelInvisible()
    Cam.Inst:Set(-33.817, 10.628, -49.905, -14.638, 18.273, -42.307, default, 0)
    Field.ObjectPlayMotion(NPC, hoe_index, "f000", 10, false)
    local h_pos = Field.ObjectGetPosition(NPC, hoe_index)
    local h_rot = Field.ObjectGetRotationY(NPC, hoe_index)
    WaitFrame(15)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    PlaySE(202006, 100)
    WaitFrame(30)
    Field.ObjectPlayMotion(NPC, hoe_index, "f001", 10, true)
    WaitFrame(30)
    Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
    Cam.Inst:Set(22.19, 1.641, -9.186, 22.796, -1.233, 0.372, default, 0)
    Field.ObjectPlayMotion(NPC, hoe_index, "bn01", 10, true)
    WaitFrame(30)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, bakkas_index, "e005", 10, 10)
    tlk:Message("f_d0903_0080_0160")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, Gryphon_index, "fe02", 10, 10)
    tlk:Message("f_d0903_0080_0180")
    Field.ObjectPlayMotion(NPC, Gryphon_index, "f000", 10, true)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, pikkoro_index, "fe04", 10, 10)
    tlk:Message("f_d0903_0080_0190")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, bakkas_index, "bs03", 10, 10)
    tlk:Message("f_d0903_0080_0200")
    Field.ObjectResetAim(NPC, Gryphon_index, 10)
    Gryphon_fe02:Play(10, true)
    pikkoro_fe02:Play(10, true)
    acuira_fe02:Play(10, true)
    rara_fe02:Play(10, true)
    HippoGryphon_fe02:Play(10, true)
    tlk:EndTalk()
    WaitFrame(30)
    Flg.Set("FLAG_MAIN_22_276")
    Guest.Add(GST_HEROINE)
    Common.SetExistPartyAegiomon(true)
    Gryphon_bn01:Play(10, true)
    pikkoro_bn01:Play(10, true)
    acuira_bn01:Play(10, true)
    rara_bn01:Play(10, true)
    HippoGryphon_bn01:Play(10, true)
    FollowerSync()
    SetFollowerCameraOperateRotation(5, Field.ObjectGetRotationY(PLAYER, 1), 0)
    FieldObjectSync(FOR_ALL, false)
    bn01:Play(10, true)
    Cam.Inst:Clear(30)
    WaitFrame(20)
    Field.ObjectSetPos(FLD_OBJ_NPC, pikkoro_index, 22.253, -1.954, -24.289)
    Qst.Main:Set(self.ID, self.STEP_080)
  end
end

function M440:Event_690()
  if Qst.Main:Check(self.ID, self.STEP_080, self.STEP_095) and Flg.Check("FLAG_MAIN_22_290", "FLAG_MAIN_22_295") then
    AnswerTheCall()
    local tlk = Tlk:new("d09", 1, true)
    tlk:StartTalkAndCancelDigimonRide()
    tlk:Message("f_d0903_0410_0010")
    tlk:EndTalk(true)
    Flg.Set("FLAG_SKIP_CHANGE_BGM")
    MapChange("e", 4, "start_00", true, FADE_BLACK, FADE_TIME)
  end
end

function M440:Event_690_2()
  if Qst.Main:Check(self.ID, self.STEP_080, self.STEP_095) and Flg.Check("FLAG_MAIN_22_290", "FLAG_MAIN_22_295") then
    Execute("m440_940")
    Flg.Set("FLAG_SKIP_AREACHANGE_MOVE")
    Flg.Set("FLAG_MAIN_22_295")
    MapChange("d", 903, "start_01", false, FADE_BLACK, FADE_TIME)
  end
end

function M440:Event_690_3()
  if Qst.Main:Check(self.ID, self.STEP_080, self.STEP_095) and Flg.Check("FLAG_MAIN_22_295", "FLAG_MAIN_22_296") then
    Flg.Set("FLAG_MAIN_22_296")
    local tlk = Tlk:new("d09", 1, true)
    tlk:StartTalkAndCancelDigimonRide()
    Motion.Player:Play("e503", 15, true)
    WaitFrame(30)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    WaitFrame(15)
    tlk:Message("f_d0903_0410_0060")
    tlk:EndTalk()
    EndTheCall()
  end
end

function M440:Event_700()
  if Qst.Main:Check(self.ID, self.STEP_080, self.STEP_095) and Flg.Check("FLAG_MAIN_22_276", "FLAG_MAIN_22_310") then
    Field.CancelPlayerAnywhereDigimonRide()
    local pc = Obj:new(PLAYER, "")
    local pc_fn01_01 = Motion.Object:new(pc.type, pc.name, "fn01_01")
    local pc_e212 = Motion.Object:new(pc.type, pc.name, "e212")
    local pc_e213 = Motion.Object:new(pc.type, pc.name, "e213")
    local hoe_index = GetIndex(NPC, "npc0004")
    local f001 = Motion.Object:new(NPC, "npc0004", "f001")
    local f004 = Motion.Object:new(NPC, "npc0004", "f004")
    Field.ObjectLoadMotion(NPC, hoe_index, "fe01")
    Field.ObjectLoadMotion(NPC, hoe_index, "fe02")
    Field.ObjectLoadMotion(NPC, hoe_index, "fe04")
    Field.ObjectLoadMotion(NPC, hoe_index, "fq01")
    Field.ObjectLoadMotion(NPC, hoe_index, "ba02")
    Field.ObjectLoadMotion(NPC, hoe_index, "bn01")
    Field.ObjectLoadMotion(NPC, hoe_index, "f005")
    Field.ObjectLoadAttachment(pc.type, pc.index, 15)
    Cam.Inst:Set(-101.591, -15.901, -78.367, -92.936, -16.387, -83.352, default, 30)
    WaitFrame(30)
    local tlk = Tlk:new("d09", 1, true)
    tlk:StartTalkAndCancelDigimonRide()
    if not Flg.Check("FLAG_MAIN_22_300") then
      Flg.Set("FLAG_MAIN_22_300")
      PlayerTurnToObject(NPC, "npc0004", true, false, 0, 0)
      Field.PlayEffectScript("ef_e_com_105", -110.936, -23.377, -78.499, 96.694, 1.5)
      PlaySE(202006, 100)
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, hoe_index, "fe02", 10, 10)
      tlk:Message("f_d0903_0390_0010")
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, hoe_index, "fe01", 10, 10)
      tlk:Message("f_d0903_0390_0020")
      Field.PlayEffectScript("ef_e_com_105", -110.936, -23.377, -78.499, 96.694, 1.5)
      PlaySE(202006, 100)
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, hoe_index, "fe04", 10, 10)
      tlk:Message("f_d0903_0390_0040")
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, hoe_index, "fq01", 10, 10)
      tlk:Message("f_d0903_0390_0050")
    else
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, hoe_index, "fq01", 10, 10)
      tlk:Message("f_d0903_0390_0100")
    end
    local result = tlk:Select(2, "f_d0903_0390_0060")
    if result == RESULT_TALK00 then
      Field.PlayEffectScript("ef_e_com_105", -110.936, -23.377, -78.499, 96.694, 1.5)
      PlaySE(202006, 100)
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, hoe_index, "fe01", 10, 10)
      tlk:Message("f_d0903_0390_0070")
      MessageClose()
      Field.ObjectShowAttachment(pc.type, pc.index, 15)
      pc_e213:Play(10, false)
      WaitFrame(35)
      local slot_1 = Sound.PlaySE(401036, 100)
      WaitFrame(40)
      Sound.StopSE(slot_1, 1)
      WaitFrame(30)
      pc_e212:Play(10, false)
      WaitFrame(10)
      Field.ObjectHideAttachment(pc.type, pc.index, 15)
      pc_fn01_01:Play(10, true)
      Field.PlayEffectScript("ef_e_com_105", -110.936, -23.377, -78.499, 96.694, 1.5)
      PlaySE(202006, 100)
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, hoe_index, "ba02", 10, 10)
      tlk:Message("f_d0903_0390_0080")
      Flg.Set("FLAG_MAIN_22_310")
      MessageClose()
      Field.ObjectPlayMotion(NPC, hoe_index, "f004", 10, 10)
      Field.ObjectSetPos(NPC, hoe_index, -114.016, -22.667, -76.115)
      WaitFrame(30)
      Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
      WaitFrame(10)
      tlk:EndTalk()
      Digimon.RestoreAllParty()
      Flg.Clear("FLAG_IS_DISPLAYED_MAP_NAME_UI")
      MapChangeWithTimeTravel("d", 904, "start_00", AXIS_ORIGINAL, "P2028_daft_444", NOON)
    else
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, hoe_index, "fq01", 10, 10)
      tlk:Message("f_d0903_0390_0090")
      Cam.Inst:Clear(30)
      Field.ObjectPlayMotion(NPC, hoe_index, "f001", 10, true)
    end
    tlk:EndTalk()
  end
end

function M440:Event_710()
  if Qst.Main:Check(self.ID, self.STEP_080, self.STEP_095) and Flg.Check("FLAG_MAIN_22_310", "FLAG_MAIN_22_320") then
    local npc01_index = GetIndex(NPC, "npc0003")
    Field.ObjectLoadMotion(NPC, npc01_index, "bn01")
    Field.ObjectLoadMotion(NPC, npc01_index, "fe02")
    Field.ObjectLoadMotion(NPC, npc01_index, "ba01")
    WaitFrame(15)
    Cam.Inst:Set(-20.476, 1.728, 17.901, -17.799, 1.244, 27.524, default, 0)
    Flg.Set("FLAG_MAIN_22_319")
    Flg.Set("FLAG_SKIP_AREACHANGE_MOVE")
    FieldObjectSync(FOR_ALL, false)
    Obj:new(PLAYER, ""):SetPos(-18.892, 0, 26.216, true)
    Obj:new(PLAYER, ""):SetRotationY(0, 0)
    local tlk = Tlk:new("d09", 1, true)
    tlk:StartTalkAndCancelDigimonRide()
    WaitFrame(15)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    WaitFrame(15)
    Field.ObjectPlayMotion(NPC, npc01_index, "fe02", 10, true)
    tlk:Message("f_d0904_0200_0010")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, npc01_index, "ba01", 10, 10)
    tlk:Message("f_d0904_0200_0020")
    Obj:new(NPC, "npc0003"):MoveToTarget2D(-21.237, 13.048, 7, 60)
    WaitFrame(15)
    Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
    WaitFrame(15)
    tlk:EndTalk()
    Flg.Set("FLAG_MAIN_22_320")
    FieldObjectSync(FOR_ALL, false)
    Cam.Inst:Clear(0)
    SetFollowerCameraOperateRotation(5, Field.ObjectGetRotationY(PLAYER, 1), 0)
    WaitFrame(15)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    Qst.Main:Set(self.ID, self.STEP_095)
  end
end

function M440:Event_720()
  if Qst.Main:Check(self.ID, self.STEP_095, self.STEP_097) and Flg.Check("FLAG_MAIN_22_320", "FLAG_MAIN_22_330") then
    Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
    local npc01_index = GetIndex(NPC, "npc0005")
    Field.ObjectLoadMotion(NPC, npc01_index, "bn01")
    Field.ObjectLoadMotion(NPC, npc01_index, "e002")
    Field.ObjectLoadMotion(NPC, npc01_index, "e012")
    Field.ObjectLoadMotion(NPC, npc01_index, "fq01")
    Field.ObjectLoadMotion(NPC, npc01_index, "fq02")
    Field.ObjectLoadMotion(NPC, npc01_index, "fe04")
    Field.ObjectLoadExpression(NPC, npc01_index, "F01_T01")
    local npc02_index = GetIndex(NPC, "npc0008")
    Field.ObjectLoadMotion(NPC, npc02_index, "bn01")
    Field.ObjectLoadMotion(NPC, npc02_index, "e002")
    Field.ObjectLoadMotion(NPC, npc02_index, "e009")
    Field.ObjectLoadMotion(NPC, npc02_index, "e534")
    Field.ObjectLoadMotion(NPC, npc02_index, "fq01")
    Field.ObjectLoadMotion(NPC, npc02_index, "fq02")
    local npc03_index = GetIndex(NPC, "npc0009")
    Field.ObjectLoadMotion(NPC, npc03_index, "fn01_01")
    Field.ObjectLoadMotion(NPC, npc03_index, "e004")
    Field.ObjectLoadMotion(NPC, npc03_index, "e012")
    Field.ObjectLoadMotion(NPC, npc03_index, "e022")
    Field.ObjectLoadMotion(NPC, npc03_index, "e030")
    Field.CancelPlayerAnywhereDigimonRide()
    WaitFrame(15)
    Cam.Inst:Set(-26.931, 3.22, -1.654, -25.698, 1.151, 8.051, default, 0)
    Flg.Set("FLAG_MAIN_22_325")
    FieldObjectSync(FOR_ALL, false)
    Obj:new(PLAYER, ""):SetPos(-26.503, 0, 6.682, true)
    Obj:new(PLAYER, ""):SetRotationY(0, 0)
    local tlk = Tlk:new("d09", 1, true)
    tlk:StartTalkAndCancelDigimonRide()
    WaitFrame(15)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    WaitFrame(15)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, npc01_index, "e002", 10, 10)
    Field.ObjectChangeExpression(NPC, npc01_index, "F01_T01", EYES_BLINK_TYPE_BLINK, true, 30, AUTO_CANCEL_NONE, 15)
    tlk:Message("f_d0904_0210_0010")
    Field.ObjectChangeExpression(NPC, npc01_index, "F01_T01", EYES_BLINK_TYPE_BLINK, false, 10, AUTO_CANCEL_NEXT_FRAME, 15)
    MessageClose()
    Field.ObjectPlayMotion(NPC, npc01_index, "bn01", 10, true)
    Cam.Inst:Set(-29.273, 11.691, -23.186, -29.682, 8.403, -13.751, default, 30)
    WaitFrame(30)
    tlk:Message("f_d0904_0210_0030")
    MessageClose()
    Cam.Inst:Set(-26.931, 3.22, -1.654, -25.698, 1.151, 8.051, default, 30)
    WaitFrame(45)
    Field.ObjectPlayMotion(NPC, npc02_index, "e534", 10, true)
    tlk:Message("f_d0904_0210_0040")
    Field.ObjectPlayMotion(NPC, npc02_index, "bn01", 10, true)
    Field.ObjectPlayMotion(NPC, npc01_index, "fq02", 10, true)
    Field.ObjectChangeExpression(NPC, npc01_index, "F01_T01", EYES_BLINK_TYPE_BLINK, true, 30, AUTO_CANCEL_NONE, 15)
    tlk:Message("f_d0904_0210_0050")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, npc01_index, "e002", 10, 10)
    tlk:Message("f_d0904_0210_0070")
    Field.ObjectPlayMotion(NPC, npc01_index, "bn01", 10, true)
    Field.ObjectChangeExpression(NPC, npc01_index, "F01_T01", EYES_BLINK_TYPE_BLINK, false, 10, AUTO_CANCEL_NEXT_FRAME, 15)
    Field.ObjectPlayMotion(NPC, npc02_index, "e009", 10, true)
    tlk:Message("f_d0904_0210_0080")
    Field.ObjectPlayMotion(NPC, npc02_index, "bn01", 10, true)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, npc01_index, "e002", 10, 10)
    Field.ObjectChangeExpression(NPC, npc01_index, "F01_T01", EYES_BLINK_TYPE_BLINK, true, 30, AUTO_CANCEL_NONE, 15)
    tlk:Message("f_d0904_0210_0090")
    Field.ObjectPlayMotion(NPC, npc01_index, "e012", 10, true)
    tlk:Message("f_d0904_0210_0110")
    Field.ObjectPlayMotion(NPC, npc01_index, "bn01", 10, true)
    Field.ObjectChangeExpression(NPC, npc01_index, "F01_T01", EYES_BLINK_TYPE_BLINK, false, 10, AUTO_CANCEL_NEXT_FRAME, 15)
    Field.ObjectPlayMotion(NPC, npc03_index, "e012", 10, true)
    tlk:Message("f_d0904_0210_0120")
    tlk:Message("f_d0904_0210_0130")
    Field.ObjectPlayMotion(NPC, npc03_index, "fn01_01", 10, true)
    Field.ObjectLookAtTheObject(NPC, npc02_index, NPC, npc03_index, 30)
    tlk:Message("f_d0904_0210_0140")
    Field.ObjectPlayMotion(NPC, npc03_index, "e022", 10, true)
    tlk:Message("f_d0904_0210_0150")
    Field.ObjectPlayMotion(NPC, npc03_index, "fn01_01", 10, true)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, npc01_index, "e002", 10, 10)
    Field.ObjectChangeExpression(NPC, npc01_index, "F01_T01", EYES_BLINK_TYPE_BLINK, true, 30, AUTO_CANCEL_NONE, 15)
    tlk:Message("f_d0904_0210_0180")
    Field.ObjectPlayMotion(NPC, npc01_index, "bn01", 10, true)
    Field.ObjectChangeExpression(NPC, npc01_index, "F01_T01", EYES_BLINK_TYPE_BLINK, false, 10, AUTO_CANCEL_NEXT_FRAME, 15)
    Field.ObjectPlayMotion(NPC, npc02_index, "e002", 10, true)
    tlk:Message("f_d0904_0210_0190")
    Field.ObjectPlayMotion(NPC, npc02_index, "bn01", 10, true)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, npc01_index, "e002", 10, 10)
    Field.ObjectChangeExpression(NPC, npc01_index, "F01_T01", EYES_BLINK_TYPE_BLINK, true, 30, AUTO_CANCEL_NONE, 15)
    tlk:Message("f_d0904_0210_0250")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, npc01_index, "fe04", 10, 10)
    tlk:Message("f_d0904_0210_0260")
    Field.ObjectPlayMotion(NPC, npc01_index, "bn01", 10, true)
    Field.ObjectChangeExpression(NPC, npc01_index, "F01_T01", EYES_BLINK_TYPE_BLINK, false, 10, AUTO_CANCEL_NEXT_FRAME, 15)
    Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
    WaitFrame(15)
    tlk:EndTalk()
    Guest.Delete(GST_HEROINE)
    Guest.Add(GST_VENUS_Lv55)
    INFO_WINDOW(7035)
    Flg.Set("FLAG_MAIN_22_330")
    FieldObjectSync(FOR_ALL, false)
    Cam.Inst:Clear(0)
    SetFollowerCameraOperateRotation(5, Field.ObjectGetRotationY(PLAYER, 1), 0)
    WaitFrame(15)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    Qst.Main:Set(self.ID, self.STEP_097)
  end
end

function M440:Event_730()
  if Qst.Main:Check(self.ID, self.STEP_097, self.STEP_099) and Flg.Check("FLAG_MAIN_22_330", "FLAG_MAIN_22_350") then
    Flg.Set("FLAG_MAIN_22_350")
    local npc01_index = GetIndex(NPC, "npc0011")
    Field.ObjectLoadMotion(NPC, npc01_index, "bn01")
    Field.ObjectLoadMotion(NPC, npc01_index, "ba02")
    Field.ObjectLoadMotion(NPC, npc01_index, "fe04")
    local tlk = Tlk:new("d09", 1, true)
    tlk:StartTalkAndCancelDigimonRide()
    Cam.Inst:Set(-6.029, -0.175, -3.35, -4.123, 2.33, 6.14, default, 30)
    PlayerLookAtObject(NPC, "npc0011")
    Field.ObjectLookAtTheObject(NPC, GetIndex(NPC, "npc0011"), FLD_OBJ_PLAYER, 1, 10)
    WaitFrame(30)
    Field.ObjectPlayMotion(NPC, npc01_index, "ba02", 10, true)
    tlk:Message("f_d0904_0220_0010")
    Field.ObjectPlayMotion(NPC, npc01_index, "fe04", 10, true)
    tlk:Message("f_d0904_0220_0020")
    Field.ObjectPlayMotion(NPC, npc01_index, "ba02", 10, true)
    tlk:Message("f_d0904_0220_0030")
    Field.ObjectPlayMotion(NPC, npc01_index, "bn01", 10, true)
    tlk:Message("f_d0904_0220_0040")
    ObjectSetRotationY(NPC, npc01_index, 180, 20)
    Field.ObjectPlayMotion(NPC, npc01_index, "ba02", 10, true)
    tlk:Message("f_d0904_0220_0050")
    Field.ObjectPlayMotion(NPC, npc01_index, "fe04", 10, true)
    tlk:Message("f_d0904_0220_0060")
    Field.ObjectPlayMotion(NPC, npc01_index, "ba02", 10, true)
    tlk:Message("f_d0904_0220_0070")
    Field.ObjectPlayMotion(NPC, npc01_index, "fe04", 10, true)
    tlk:Message("f_d0904_0220_0080")
    Field.ObjectPlayMotion(NPC, npc01_index, "ba02", 10, true)
    tlk:Message("f_d0904_0220_0090")
    tlk:Message("f_d0904_0220_0110")
    Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
    WaitFrame(15)
    Field.ObjectPlayMotion(NPC, npc01_index, "bn01", 10, true)
    tlk:EndTalk()
    Obj:new(PLAYER, ""):SetPos(-4.88, 0, 2.151, true)
    Obj:new(PLAYER, ""):SetRotationY(75, 0)
    local rotY = Field.ObjectGetRotationY(PLAYER, 1)
    SetFollowerCameraOperateRotation(0, rotY, 0)
    Cam.Inst:Clear(0)
    ObjectResetRotation(NPC, npc01_index, 0, true)
    WaitFrame(15)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    Qst.Main:Set(self.ID, self.STEP_099)
  end
end

function M440:Event_735()
  if Qst.Main:Check(self.ID, self.STEP_099, self.STEP_101) then
    local npc01_index = GetIndex(NPC, "npc0011")
    Field.ObjectLoadMotion(NPC, npc01_index, "bn01")
    Field.ObjectLoadMotion(NPC, npc01_index, "ba02")
    local tlk = Tlk:new("d09", 1, true)
    tlk:StartTalkAndCancelDigimonRide()
    Cam.Inst:Set(1.493, -0.3, -0.509, -8.045, 1.499, 1.891, default, 30)
    WaitFrame(30)
    Field.ObjectPlayMotion(NPC, npc01_index, "ba02", 10, true)
    tlk:Message("f_d0904_0230_0010")
    Field.ObjectPlayMotion(NPC, npc01_index, "bn01", 10, true)
    tlk:EndTalk()
    Cam.Inst:Clear(30)
    WaitFrame(15)
    Qst.Main:Set(self.ID, self.STEP_101)
  end
end

function M440:Event_740()
  if Qst.Main:Check(self.ID, self.STEP_101, self.STEP_103) and Flg.Check("FLAG_MAIN_22_350", "FLAG_MAIN_22_360") then
    Field.CancelPlayerAnywhereDigimonRide()
    Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
    Execute("m440_920")
    Guest.Add(GST_WARUSEADRA)
    EncountFromField(11900700, 10974, true)
  end
end

function M440:Event_745()
  if Qst.Main:Check(self.ID, self.STEP_101, self.STEP_103) and Flg.Check("FLAG_MAIN_22_360", "FLAG_MAIN_22_370") then
    Guest.Delete(GST_WARUSEADRA)
    FollowerSync()
    FieldObjectSync(FOR_ALL, false)
    Execute("m440_921")
    Flg.Set("FLAG_MAIN_22_370")
    FieldObjectSync(FOR_ALL, false)
    WaitFrame(5)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    Qst.Main:Set(self.ID, self.STEP_103)
  end
end

function M440:Event_750()
  if Qst.Main:Check(self.ID, self.STEP_103, self.STEP_105) and Flg.Check("FLAG_MAIN_22_370", "FLAG_MAIN_22_380") then
    Flg.Set("FLAG_MAIN_22_380")
    local npc01_index = GetIndex(NPC, "npc0040")
    Field.ObjectLoadMotion(NPC, npc01_index, "bn01")
    Field.ObjectLoadMotion(NPC, npc01_index, "fe02")
    Field.ObjectLoadMotion(NPC, npc01_index, "fe04")
    Field.ObjectLoadMotion(NPC, npc01_index, "fq01")
    Field.ObjectLoadMotion(PLAYER, 1, "fn01_01")
    Field.ObjectLoadMotion(PLAYER, 1, "bc01")
    local tlk = Tlk:new("d09", 1, true)
    tlk:StartTalkAndCancelDigimonRide()
    Field.ObjectPlayMotion(NPC, npc01_index, "fe02", 10, true)
    tlk:Message("f_d0904_0260_0010")
    Cam.Inst:Set(10.148, 6.451, 9.969, 19.024, 6.668, 14.57, default, 30)
    WaitFrame(30)
    Field.ObjectPlayMotion(NPC, npc01_index, "fq01", 10, true)
    tlk:Message("f_d0904_0260_0020")
    Field.ObjectPlayMotion(NPC, npc01_index, "fe04", 10, true)
    tlk:Message("f_d0904_0260_0030")
    Field.ObjectPlayMotion(NPC, npc01_index, "fq01", 10, true)
    tlk:Message("f_d0904_0260_0040")
    Field.ObjectPlayMotion(NPC, npc01_index, "fe04", 10, true)
    tlk:Message("f_d0904_0260_0050")
    tlk:MessageClose()
    WaitFrame(15)
    Field.ObjectPlayMotionWithStartMoveMotion(PLAYER, 1, "bc01", 10, 10)
    WaitFrame(30)
    Field.ObjectPlayMotion(NPC, npc01_index, "fe02", 10, true)
    tlk:Message("f_d0904_0260_0060")
    Field.ObjectPlayMotion(NPC, npc01_index, "bn01", 10, true)
    tlk:EndTalk()
    Obj:new(NPC, "npc0040"):Invisible(15)
    Flg.Set("FLAG_GIMMICK_D09_270")
    Guest.Add(GST_SUBMARINE2)
    Qst.Main:Set(self.ID, self.STEP_105)
    Cam.Inst:Clear(30)
    WaitFrame(30)
  end
end

function M440:Event_755()
  if Qst.Main:Check(self.ID, self.STEP_105, self.STEP_107) and Flg.Check("FLAG_MAIN_22_380", "FLAG_MAIN_22_390") then
    Flg.Set("FLAG_MAIN_22_390")
    local npc01_index = GetIndex(NPC, "npc0041")
    Field.ObjectLoadMotion(NPC, npc01_index, "bn01")
    Field.ObjectLoadMotion(NPC, npc01_index, "fe02")
    Field.ObjectLoadMotion(NPC, npc01_index, "fe04")
    Field.ObjectLoadMotion(NPC, npc01_index, "fq01")
    Field.ObjectLoadMotion(PLAYER, 1, "fn01_01")
    Field.ObjectLoadMotion(PLAYER, 1, "e004")
    Field.ObjectLoadMotionBlend(PLAYER, 1, "blend01")
    local tlk = Tlk:new("d09", 1, true)
    tlk:StartTalkAndCancelDigimonRide()
    WaitFrame(30)
    Cam.Inst:Set(14.965, 5.322, -25.602, 5.043, 5.656, -24.407, default, 30)
    PlayerTurnToObject(NPC, "npc0041", true, false, 0, 0)
    WaitFrame(30)
    Field.ObjectPlayMotion(NPC, npc01_index, "fq01", 10, true)
    tlk:Message("f_d0904_0270_0010")
    Field.ObjectPlayMotion(NPC, npc01_index, "fe04", 10, true)
    tlk:Message("f_d0904_0270_0020")
    tlk:MessageClose()
    Field.ObjectPlayMotionBlend(PLAYER, 1, "blend01", 10, false)
    WaitFrame(30)
    Field.ObjectPlayMotion(NPC, npc01_index, "fq01", 10, true)
    tlk:Message("f_d0904_0270_0030")
    Field.ObjectPlayMotion(NPC, npc01_index, "fe02", 10, true)
    tlk:Message("f_d0904_0270_0050")
    tlk:MessageClose()
    Field.ObjectPlayMotion(PLAYER, 1, "e004", 10, true)
    WaitFrame(30)
    Field.ObjectPlayMotion(PLAYER, 1, "fn01_01", 10, true)
    Field.ObjectPlayMotion(NPC, npc01_index, "bn01", 10, true)
    Cam.Inst:Clear(30)
    WaitFrame(30)
    tlk:EndTalk()
    Guest.Delete(GST_SUBMARINE2)
    Qst.Main:Set(self.ID, self.STEP_107)
  end
end

function M440:Event_760()
  if Qst.Main:Check(self.ID, self.STEP_107, self.STEP_109) and Flg.Check("FLAG_MAIN_22_390", "FLAG_MAIN_22_400") then
    Field.CancelPlayerAnywhereDigimonRide()
    Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
    Execute("m440_922")
    Flg.Set("FLAG_MAIN_22_400")
    Flg.Set("FLAG_MAIN_22_401")
    Flg.Set("FLAG_MAIN_22_402")
    Flg.Set("FLAG_MAIN_22_403")
    Flg.Set("FLAG_MAIN_22_404")
    FieldObjectSync(FOR_ALL, false)
    SetFollowerCameraOperateRotation(0, 270, 0)
    Field.ObjectSetRotationY(PLAYER, 1, 270, 0)
    WaitFrame(5)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    Qst.Main:Set(self.ID, self.STEP_109)
  end
end

function M440:Event_765()
  if Qst.Main:Check(self.ID, self.STEP_109, self.STEP_111) and Flg.Check("FLAG_MAIN_22_400", "FLAG_MAIN_22_410") then
    Flg.Set("FLAG_MAIN_22_410")
    Qst.Main:Set(self.ID, self.STEP_111)
  end
end

function M440:Event_770()
  if Qst.Main:Check(self.ID, self.STEP_111, self.STEP_113) and Flg.Check("FLAG_MAIN_22_420", "FLAG_MAIN_22_423") then
    local npc01_index = GetIndex(NPC, "npc0024")
    Field.ObjectLoadMotion(NPC, npc01_index, "bn01")
    Field.ObjectLoadMotion(NPC, npc01_index, "e008")
    Field.ObjectLoadMotion(NPC, npc01_index, "e007")
    local npc02_index = GetIndex(NPC, "npc0023")
    Field.ObjectLoadMotion(NPC, npc02_index, "bn01")
    Field.ObjectLoadMotion(NPC, npc02_index, "fe02")
    Field.ObjectLoadMotion(NPC, npc02_index, "ba01")
    Field.ObjectLoadMotion(NPC, npc02_index, "bs01")
    Field.ObjectLoadMotion(NPC, npc02_index, "fq01")
    local npc03_index = GetIndex(NPC, "npc0022")
    Field.ObjectLoadMotion(NPC, npc03_index, "bn01")
    Field.ObjectLoadMotion(NPC, npc03_index, "bv01")
    Field.ObjectLoadMotion(NPC, npc03_index, "fq01")
    Field.ObjectLoadMotion(NPC, npc03_index, "fe03")
    Field.ObjectLoadMotion(NPC, npc03_index, "fe04")
    local npc04_index = GetIndex(NPC, "npc0050")
    Field.ObjectLoadMotion(NPC, npc04_index, "bn01")
    Field.ObjectLoadMotion(NPC, npc04_index, "ba01")
    Field.ObjectLoadMotion(NPC, npc04_index, "ba02")
    Field.ObjectLoadMotion(NPC, npc04_index, "bs01")
    local npc05_index = GetIndex(NPC, "npc0051")
    Field.ObjectLoadMotion(NPC, npc05_index, "bn01")
    Field.ObjectLoadMotion(NPC, npc05_index, "fe03")
    Field.ObjectLoadMotion(NPC, npc05_index, "fe04")
    Field.ObjectLoadMotion(NPC, npc05_index, "bv01")
    Field.ObjectLoadMotion(PLAYER, 1, "fn01_01")
    Field.ObjectLoadMotion(PLAYER, 1, "e018")
    Field.CancelPlayerAnywhereDigimonRide()
    FieldObjectSync(FOR_ALL, false)
    Obj:new(PLAYER, ""):SetPos(23.752, 0, -15.606, true)
    Obj:new(PLAYER, ""):SetRotationY(270, 0)
    Obj:new(ENEMY, "enemy_07"):SetPos(12.471, 0, -16.263, true)
    Obj:new(ENEMY, "enemy_07"):SetRotationY(90, 0)
    Obj:new(ENEMY, "enemy_08"):SetPos(6.858, 0, -17.413, true)
    Obj:new(ENEMY, "enemy_08"):SetRotationY(90, 0)
    Obj:new(ENEMY, "enemy_09"):SetPos(1.281, 0, -16.2503, true)
    Obj:new(ENEMY, "enemy_09"):SetRotationY(90, 0)
    Obj:new(ENEMY, "enemy_10"):SetPos(-4.302, 0, -18.107, true)
    Obj:new(ENEMY, "enemy_10"):SetRotationY(90, 0)
    Cam.Inst:Set(14.98, 1.236, -16.576, 24.969, 1.435, -16.168, default, 0)
    local tlk = Tlk:new("d09", 1, true)
    tlk:StartTalkAndCancelDigimonRide()
    WaitFrame(15)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    WaitFrame(15)
    Field.ObjectPlayMotion(NPC, npc01_index, "e008", 10, true)
    tlk:Message("f_d0904_0290_0010")
    Field.ObjectPlayMotion(NPC, npc01_index, "e007", 10, true)
    tlk:Message("f_d0904_0290_0020")
    tlk:MessageClose()
    Field.ObjectPlayMotion(PLAYER, 1, "e018", 10, true)
    WaitFrame(30)
    tlk:Message("f_d0904_0290_0030")
    tlk:MessageClose()
    Flg.Set("FLAG_MAIN_22_424")
    local pos = Field.ObjectGetPosition(NPC, npc02_index)
    local rotY = Field.ObjectGetRotationY(NPC, npc02_index)
    Field.PlayEffectScript("ef_f_enc_110_rp", pos.x, pos.y, pos.z, rotY, 1)
    local pos = Field.ObjectGetPosition(NPC, npc03_index)
    local rotY = Field.ObjectGetRotationY(NPC, npc03_index)
    Field.PlayEffectScript("ef_f_enc_110_rp", pos.x, pos.y, pos.z, rotY, 1)
    FieldObjectSync(FOR_ALL, true)
    WaitFrame(1)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, npc02_index, "ba01", 10, 10)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, npc03_index, "fe03", 10, 10)
    WaitFrame(60)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, npc02_index, "fe02", 10, 10)
    tlk:Message("f_d0904_0290_0040")
    Field.ObjectPlayMotion(NPC, npc03_index, "fq01", 10, true)
    tlk:Message("f_d0904_0290_0050")
    Field.ObjectPlayMotion(NPC, npc03_index, "fe04", 10, true)
    tlk:Message("f_d0904_0290_0060")
    Field.ObjectPlayMotion(NPC, npc03_index, "bn01", 10, true)
    Field.ObjectPlayMotion(NPC, npc02_index, "fq01", 10, true)
    tlk:Message("f_d0904_0290_0070")
    Field.ObjectPlayMotion(NPC, npc02_index, "bn01", 10, true)
    Field.ObjectPlayMotion(NPC, npc03_index, "fq01", 10, true)
    tlk:Message("f_d0904_0290_0080")
    tlk:MessageClose()
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, npc02_index, "bs01", 10, 10)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, npc03_index, "bv01", 10, 10)
    WaitFrame(15)
    SetControlScriptExternalVariable("PlayVoice_Event_770", "start")
    WaitFrame(30)
    Fade_OutNoLoadingWithWait(FADE_WHITE, FADE_TIME)
    WaitFrame(30)
    PlaySE(300201, 100)
    WaitFrame(5)
    PlaySE(300103, 100)
    WaitFrame(10)
    PlaySE(300201, 100)
    WaitFrame(5)
    PlaySE(300103, 100)
    WaitFrame(10)
    PlaySE(300201, 100)
    WaitFrame(5)
    PlaySE(300103, 100)
    WaitFrame(10)
    PlaySE(300201, 100)
    WaitFrame(5)
    PlaySE(300103, 100)
    Field.SymbolForceLeave(GetIndex(ENEMY, "enemy_07"), true, FOREVER)
    Field.SymbolForceLeave(GetIndex(ENEMY, "enemy_08"), true, FOREVER)
    Field.SymbolForceLeave(GetIndex(ENEMY, "enemy_09"), true, FOREVER)
    Field.SymbolForceLeave(GetIndex(ENEMY, "enemy_10"), true, FOREVER)
    Field.ObjectPlayMotion(NPC, npc01_index, "bn01", 10, true)
    Field.ObjectPlayMotion(PLAYER, 1, "fn01_01", 10, true)
    Flg.Set("FLAG_MAIN_22_423")
    FieldObjectSync(FOR_ALL, false)
    Cam.Inst:Clear(0)
    SetFollowerCameraOperateRotation(5, Field.ObjectGetRotationY(PLAYER, 1), 0)
    WaitFrame(30)
    FadeAllInWithWait(FADE_WHITE, FADE_TIME)
    WaitFrame(30)
    Cam.Inst:Set(-15.654, 1.1, -17.042, -5.789, 2.736, -17.042, default, 30)
    WaitFrame(30)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, npc04_index, "ba01", 10, 10)
    tlk:Message("f_d0904_0290_0090")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, npc04_index, "ba02", 10, 10)
    tlk:Message("f_d0904_0290_0100")
    Field.ObjectPlayMotion(NPC, npc05_index, "fe03", 10, true)
    tlk:Message("f_d0904_0290_0110")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, npc05_index, "fe04", 10, 10)
    tlk:Message("f_d0904_0290_0120")
    tlk:MessageClose()
    Cam.Inst:Clear(30)
    WaitFrame(30)
    tlk:EndTalk()
  end
end

function M440:Event_775()
  if Qst.Main:Check(self.ID, self.STEP_111, self.STEP_113) and Flg.Check("FLAG_MAIN_22_423", "FLAG_MAIN_22_425") then
    Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
    Execute("m440_930")
    Flg.Set("FLAG_MAIN_22_426")
    Guest.Add(GST_NEPTUNUS)
    EncountFromField(11900800, 10974, true)
  end
end

function M440:Event_777()
  if Flg.Check("FLAG_MAIN_22_430", "FLAG_MAIN_22_440") then
    local tlk = Tlk:new("d09", 1, true)
    tlk:StartTalkAndCancelDigimonRide()
    tlk:Message("f_d0904_0100_0040")
    tlk:EndTalk()
  end
end

function M440:Event_778()
  if Flg.Check("FLAG_MAIN_22_430", "FLAG_MAIN_22_440") then
    local tlk = Tlk:new("d09", 1, true)
    Cam.Inst:Set(-48.54, 5.35, -29.79, -39.11, 3.28, -27.17, default, 30)
    WaitFrame(30)
    tlk:StartTalkAndCancelDigimonRide()
    tlk:Message("f_d0904_0100_0050")
    Cam.Inst:Clear(30)
    tlk:EndTalk()
  end
end

function M440:Event_779()
  if Flg.Check("FLAG_MAIN_22_430", "FLAG_MAIN_22_440") then
    local tlk = Tlk:new("d09", 1, true)
    tlk:StartTalkAndCancelDigimonRide()
    tlk:Message("f_d0904_0100_0060")
    tlk:EndTalk()
  end
end

function M440:Event_780()
  if Qst.Main:Check(self.ID, self.STEP_111, self.STEP_113) and Flg.Check("FLAG_MAIN_22_425", "FLAG_MAIN_22_428") then
    Guest.Delete(GST_NEPTUNUS)
    Guest.Delete(GST_VENUS_Lv55)
    FollowerSync()
    WaitFrame(1)
    Execute("m440_931")
    Flg.Set("FLAG_MAIN_22_425")
    Flg.Set("FLAG_MAIN_22_427")
    Flg.Set("FLAG_MAIN_22_429")
    Flg.Set("FLAG_MAIN_22_428")
    Flg.Set("FLAG_MAIN_22_430")
    Obj:new(PLAYER, ""):SetPos(-25.882, 0, -38.821, true)
    Obj:new(PLAYER, ""):SetRotationY(0, 0)
    SetFollowerCameraOperateRotation(5, Field.ObjectGetRotationY(PLAYER, 1), 0)
    Guest.Add(GST_HEROINE)
    WaitFrame(5)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    Qst.Main:Set(self.ID, self.STEP_113)
    WaitFrame(15)
    self:Event_782()
  end
end

function M440:Event_782()
  if Qst.Main:Check(self.ID, self.STEP_113, self.STEP_125) and Flg.Check("FLAG_MAIN_22_430", "FLAG_MAIN_22_435") then
    local tlk = Tlk:new("d09", 1, true)
    tlk:StartTalkAndCancelDigimonRide()
    AnswerTheCall()
    tlk:Message("f_d0904_0610_0010")
    tlk:Message("f_d0904_0610_0020")
    tlk:EndTalk(true)
    Flg.Set("FLAG_SKIP_CHANGE_BGM")
    MapChange("e", 4, "start_00", true, FADE_BLACK, FADE_TIME)
  end
end

function M440:Event_782_2()
  if Qst.Main:Check(self.ID, self.STEP_113, self.STEP_125) and Flg.Check("FLAG_MAIN_22_430", "FLAG_MAIN_22_435") then
    Execute("m440_941")
    Flg.Set("FLAG_SKIP_AREACHANGE_MOVE")
    Flg.Set("FLAG_MAIN_22_435")
    MapChange("d", 904, "start_01", false, FADE_BLACK, FADE_TIME)
  end
end

function M440:Event_782_3()
  if Qst.Main:Check(self.ID, self.STEP_113, self.STEP_125) and Flg.Check("FLAG_MAIN_22_435", "FLAG_MAIN_22_436") then
    Flg.Set("FLAG_MAIN_22_436")
    local tlk = Tlk:new("d09", 1, true)
    tlk:StartTalkAndCancelDigimonRide()
    Motion.Player:Play("e503", 15, true)
    WaitFrame(30)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    WaitFrame(15)
    tlk:Message("f_d0904_0610_0080")
    tlk:EndTalk()
    EndTheCall()
  end
end

function M440:Event_785()
  if Qst.Main:Check(self.ID, self.STEP_113, self.STEP_125) and Flg.Check("FLAG_MAIN_22_428", "FLAG_MAIN_22_445") then
    Field.CancelPlayerAnywhereDigimonRide()
    local npc_index01 = GetIndex(NPC, "npc0014")
    local urukanu_e002 = Motion.Object:new(NPC, "npc0014", "e002")
    local urukanu_e004 = Motion.Object:new(NPC, "npc0014", "e004")
    local urukanu_e006 = Motion.Object:new(NPC, "npc0014", "e006")
    local urukanu_e013 = Motion.Object:new(NPC, "npc0014", "e013")
    local urukanu_e008 = Motion.Object:new(NPC, "npc0014", "e008")
    local urukanu_bn01 = Motion.Object:new(NPC, "npc0014", "bn01")
    local urukanu_bn02 = Motion.Object:new(NPC, "npc0014", "bn02")
    local urukanu_fe02 = Motion.Object:new(NPC, "npc0014", "fe02")
    local urukanu_fe04 = Motion.Object:new(NPC, "npc0014", "fe04")
    Field.ObjectLoadMotion(NPC, npc_index01, "fq01")
    Field.ObjectLoadMotion(NPC, npc_index01, "fq02")
    local npc_index02 = GetIndex(NPC, "npc0007")
    local kokuwa_a_fq01 = Motion.Object:new(NPC, "npc0007", "fq01")
    local kokuwa_a_fq02 = Motion.Object:new(NPC, "npc0007", "fq02")
    local kokuwa_a_bn01 = Motion.Object:new(NPC, "npc0007", "bn01")
    local kokuwa_a_bn02 = Motion.Object:new(NPC, "npc0007", "bn02")
    local kokuwa_a_fe02 = Motion.Object:new(NPC, "npc0007", "fe02")
    local npc_index03 = GetIndex(NPC, "npc0008")
    local kokuwa_un_fq01 = Motion.Object:new(NPC, "npc0008", "fq01")
    local kokuwa_un_fq02 = Motion.Object:new(NPC, "npc0008", "fq02")
    local kokuwa_un_bn02 = Motion.Object:new(NPC, "npc0008", "bn02")
    local kokuwa_un_fe02 = Motion.Object:new(NPC, "npc0008", "fe02")
    Field.ObjectLoadMotion(NPC, npc_index03, "bn01")
    local npc_index04 = GetIndex(NPC, "npc0015")
    local yuno_fq01 = Motion.Object:new(NPC, "npc0015", "fq01")
    local yuno_fq02 = Motion.Object:new(NPC, "npc0015", "fq02")
    local yuno_e002 = Motion.Object:new(NPC, "npc0015", "e002")
    Field.ObjectLoadMotion(NPC, npc_index04, "e005")
    Field.ObjectLoadMotion(NPC, npc_index04, "fq02")
    Field.ObjectLoadMotion(NPC, npc_index04, "bn01")
    Field.ObjectSetPos(FLD_OBJ_PLAYER, 1, -0.102, 1.961, -6.966)
    Field.ObjectSetRotationY(FLD_OBJ_PLAYER, 1, 40, 0)
    Cam.Inst:Set(0.917, 3.689, -15.091, 0.55, 3.639, -5.098, default, 0)
    local tlk = Tlk:new("d09", 1, true)
    tlk:StartTalkAndCancelDigimonRide()
    WaitFrame(15)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    WaitFrame(30)
    Field.ObjectPlayMotion(NPC, npc_index01, "fe04", 10, true)
    tlk:Message("f_d0905_0010_0010")
    Field.ObjectPlayMotion(NPC, npc_index04, "e002", 10, true)
    tlk:Message("f_d0905_0010_0050")
    Field.ObjectPlayMotion(NPC, npc_index04, "bn01", 10, true)
    local urukanu = Obj:new(NPC, "npc0014")
    urukanu:SetRotationYToCoordinateAndAnimRun(20, -0.102, 1.961, -6.966)
    START_TALK_ACTION_AND_ZOOM("npc0014", true, false)
    Field.ObjectPlayMotion(NPC, npc_index01, "fe04", 10, true)
    tlk:Message("f_d0905_0010_0070")
    urukanu_e004:Play(10, true)
    tlk:Message("f_d0905_0010_0080")
    Field.ObjectPlayMotion(NPC, npc_index01, "fq01", 10, true)
    tlk:Message("f_d0905_0010_0090")
    Field.ObjectPlayMotion(NPC, npc_index01, "fq02", 10, true)
    tlk:Message("f_d0905_0010_0100")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, npc_index01, "fe04", 10, 10)
    tlk:Message("f_d0905_0010_0110")
    Field.ObjectPlayMotion(NPC, npc_index01, "bn01", 10, true)
    tlk:MessageClose()
    local enemy = Obj:new(FLD_OBJ_SYMBOL_ENEMY, "enemy_01")
    local pc = Obj:new(PLAYER, "")
    local distance = 3
    local yrot_e2p = GetAngleToTarget2D(enemy.pos.x, enemy.pos.z, pc.pos.x, pc.pos.z)
    local vec = GetUnitVector2D(yrot_e2p)
    local cam_pos_x, cam_pos_z = enemy.pos.x + vec.x * distance, enemy.pos.z + vec.z * distance
    enemy:SetRotationYToPlayer(30)
    Cam.Inst:Set(enemy.pos.x, enemy.pos.y + 1, enemy.pos.z, cam_pos_x, enemy.pos.y + 1, cam_pos_z, default, 30)
    WaitFrame(30)
    local enemy01_index = GetIndex(ENEMY, "enemy_01")
    Field.ObjectLoadMotion(ENEMY, enemy01_index, "bn01")
    Field.ObjectLoadMotion(ENEMY, enemy01_index, "fe02")
    Field.ObjectPlayMotion(ENEMY, enemy01_index, "fe02", 10, true)
    WaitFrame(60)
    Cam.Inst:Set(0.5, 8.611, -18.341, 0.685, 11.702, -8.833, default, 30)
    WaitFrame(30)
    urukanu_e006:Play(10, true)
    tlk:Message("f_d0905_0010_0180")
    urukanu_fe02:Play(10, true)
    tlk:Message("f_d0905_0010_0190")
    Field.ObjectPlayMotion(NPC, npc_index01, "bn01", 10, true)
    Field.ObjectPlayMotion(NPC, npc_index01, "bn01", 10, true)
    Cam.Inst:Set(0.917, 3.689, -15.091, 0.55, 3.639, -5.098, default, 30)
    WaitFrame(30)
    Field.ObjectPlayMotion(NPC, npc_index01, "fq01", 10, true)
    tlk:Message("f_d0905_0010_0220")
    urukanu_e013:Play(10, true)
    tlk:Message("f_d0905_0010_0230")
    tlk:EndTalk()
    Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
    WaitFrame(15)
    Field.ObjectPlayMotion(NPC, npc_index01, "bn01", 10, true)
    Field.ObjectPlayMotion(ENEMY, enemy01_index, "bn01", 10, true)
    Flg.Set("FLAG_MAIN_22_445")
    Flg.Set("FLAG_FREEARENA_RELEASE_012")
    END_TALK_ACTION_AND_ZOOM("npc0004", true, false)
    Cam.Inst:Clear(0)
    FieldObjectSync(FOR_ALL, false)
    WaitFrame(15)
    Qst.Main:Set(self.ID, self.STEP_125)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
  end
end

function M440:Event_793()
  if Qst.Main:Check(self.ID, self.STEP_125, self.STEP_126) then
    local num = Flg.CheckNum({
      "FLAG_MAIN_22_451",
      "FLAG_MAIN_22_452",
      "FLAG_MAIN_22_453",
      "FLAG_MAIN_22_454",
      "FLAG_MAIN_22_455"
    })
    if num == 3 then
      if Flg.Check("FLAG_GIMMICK_D09_090") then
        FadeInWithWaitNotFlgCheck(FADE_BLACK, FADE_TIME)
        Flg.Clear("FLAG_GIMMICK_D09_090")
      end
      WaitFrame(15)
      INFO_WINDOW(7045)
      Item.Add(self.Item.SPBatteryA, 1)
      Cam.Inst:Set(-3.766, 5.352, -3.349, -3.969, 4.903, -13.336, default, 0)
      local urukanu_e007 = Motion.Object:new(NPC, "npc0001", "e007")
      local urukanu_bn01 = Motion.Object:new(NPC, "npc0001", "bn01")
      local tlk = Tlk:new("d09", 1, true)
      tlk:StartTalkAndCancelDigimonRide()
      urukanu_e007:Play(10, true)
      tlk:Message("f_d0905_0070_0010")
      tlk:EndTalk()
      Cam.Inst:Clear(0)
      urukanu_bn01:Play(10, true)
      Qst.Main:Set(self.ID, self.STEP_126)
    end
  end
end

function M440:Event_795()
  if Qst.Main:Check(self.ID, self.STEP_125, self.STEP_126) and Flg.Check("FLAG_MAIN_22_455", "FLAG_MAIN_22_460") then
    Field.CancelPlayerAnywhereDigimonRide()
    if Flg.Check("FLAG_GIMMICK_D09_090") then
      FadeInWithWaitNotFlgCheck(FADE_BLACK, FADE_TIME)
      Flg.Clear("FLAG_GIMMICK_D09_090")
    end
    WaitFrame(15)
    INFO_WINDOW(7045)
    Item.Add(self.Item.SPBatteryA, 1)
    Cam.Inst:Set(-3.766, 5.352, -3.349, -3.969, 4.903, -13.336, default, 0)
    local urukanu00_fq01 = Motion.Object:new(NPC, "npc0001", "fq01")
    local urukanu00_e007 = Motion.Object:new(NPC, "npc0001", "e007")
    local npc_index01 = GetIndex(NPC, "npc0016")
    local urukanu_e007 = Motion.Object:new(NPC, "npc0016", "e007")
    local urukanu_bn01 = Motion.Object:new(NPC, "npc0016", "bn01")
    local urukanu_fq01 = Motion.Object:new(NPC, "npc0016", "fq01")
    local urukanu_e002 = Motion.Object:new(NPC, "npc0016", "e002")
    local urukanu_e004 = Motion.Object:new(NPC, "npc0016", "e004")
    local urukanu_e006 = Motion.Object:new(NPC, "npc0016", "e006")
    local urukanu_e013 = Motion.Object:new(NPC, "npc0016", "e013")
    local urukanu_e008 = Motion.Object:new(NPC, "npc0016", "e008")
    local urukanu_bn01 = Motion.Object:new(NPC, "npc0016", "bn01")
    local urukanu_bn02 = Motion.Object:new(NPC, "npc0016", "bn02")
    local urukanu_fe02 = Motion.Object:new(NPC, "npc0016", "fe02")
    local urukanu_fe04 = Motion.Object:new(NPC, "npc0016", "fe04")
    Field.ObjectLoadMotion(NPC, npc_index01, "e004")
    local npc_index02 = GetIndex(NPC, "npc0002")
    local kokuwa_a_fq01 = Motion.Object:new(NPC, "npc0002", "fq01")
    local kokuwa_a_fq02 = Motion.Object:new(NPC, "npc0002", "fq02")
    local kokuwa_a_bn01 = Motion.Object:new(NPC, "npc0002", "bn01")
    local kokuwa_a_bn02 = Motion.Object:new(NPC, "npc0002", "bn02")
    local kokuwa_a_fe02 = Motion.Object:new(NPC, "npc0002", "fe02")
    Field.ObjectLoadMotion(NPC, npc_index02, "fe04")
    local npc_index03 = GetIndex(NPC, "npc0003")
    local kokuwa_un_fq01 = Motion.Object:new(NPC, "npc0003", "fq01")
    local kokuwa_un_fq02 = Motion.Object:new(NPC, "npc0003", "fq02")
    local kokuwa_un_bn01 = Motion.Object:new(NPC, "npc0003", "bn01")
    local kokuwa_un_fe02 = Motion.Object:new(NPC, "npc0003", "fe02")
    Field.ObjectLoadMotion(NPC, npc_index03, "fe04")
    Field.ObjectLoadMotion(PLAYER, 1, "fn01_01")
    Field.ObjectLoadMotion(PLAYER, 1, "e004")
    Field.ObjectLoadMotion(PLAYER, 1, "e018")
    local tlk = Tlk:new("d09", 1, true)
    tlk:StartTalkAndCancelDigimonRide()
    urukanu00_e007:Play(10, true)
    tlk:Message("f_d0905_0080_0020")
    tlk:EndTalk()
    Field_InvisibleFollowerAllPartyMember(0, 0, false)
    Field_InvisibleFollowerAllGuest(0, 0, false)
    Fade_OutNoLoadingWithWait(0, FADE_TIME)
    urukanu_bn01:Play(10, true)
    Flg.Clear("FLAG_GIMMICK_D09_140")
    Flg.Set("FLAG_MAIN_22_462")
    FieldObjectSync(FOR_ALL, false)
    Obj:new(PLAYER, ""):SetPosLocator("gim_0002")
    Field.SetPlayerLocator("gim_0002")
    Field.ObjectSetPos(FLD_OBJ_PLAYER, 1, -1.783, 1.961, -22.044)
    Field.ObjectSetRotationY(FLD_OBJ_PLAYER, 1, 40, 0)
    Cam.Inst:Set(0.34, 4.11, -27.123, -1.33, 3.118, -17.314, default, 0)
    WaitFrame(30)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    tlk:StartTalkAndCancelDigimonRide()
    Field.ObjectPlayMotion(NPC, npc_index01, "fq01", 10, true)
    tlk:Message("f_d0905_0080_0030")
    Field.ObjectPlayMotion(NPC, npc_index01, "bn01", 10, true)
    Field.ObjectPlayMotion(NPC, npc_index02, "fe04", 10, true)
    tlk:Message("f_d0905_0080_0050")
    Field.ObjectPlayMotion(NPC, npc_index02, "bn01", 10, true)
    Field.ObjectPlayMotion(NPC, npc_index01, "fe04", 10, true)
    tlk:Message("f_d0905_0080_0060")
    Field.ObjectPlayMotion(NPC, npc_index01, "bn01", 10, true)
    Field.ObjectPlayMotion(NPC, npc_index02, "fq02", 10, true)
    tlk:Message("f_d0905_0080_0090")
    Field.ObjectPlayMotion(NPC, npc_index02, "bn01", 10, true)
    Field.ObjectPlayMotion(NPC, npc_index03, "fe04", 10, true)
    tlk:Message("f_d0905_0080_0100")
    tlk:EndTalk()
    Field_InvisibleFollowerAllPartyMember(0, 0, false)
    Field_InvisibleFollowerAllGuest(0, 0, false)
    kokuwa_un_bn01:Play(10, true)
    require("d05_04")
    Flg.Set("FLAG_MAIN_22_461")
    FieldObjectSync(FOR_ALL, true)
    d05_04("gim_0004")
    d05_04("gim_0005")
    Item.Add(self.Item.SPBatteryA, -1)
    local luce_index01 = GetIndex(NPC, "npc0006")
    local npc_luce = "npc0006"
    local luce_pos01 = Field.ObjectGetPosition(NPC, luce_index01)
    local luce_fe02 = Motion.Object:new(NPC, "npc0006", "fe02")
    local luce_fe04 = Motion.Object:new(NPC, "npc0006", "fe04")
    local pos = Field.GetLocatorPosition("gim_0004")
    local index = GetIndex(FLD_OBJ_NPC, "npc0002")
    Field.ObjectSetRotationY(FLD_OBJ_NPC, index, 180, 0)
    Field.ObjectSetPos(FLD_OBJ_NPC, index, pos.x, pos.y, pos.z + 1.2)
    Field.ObjectLoadMotion(FLD_OBJ_NPC, index, "f001")
    Field.ObjectPlayMotion(FLD_OBJ_NPC, index, "f001", 5, true)
    pos = Field.GetLocatorPosition("gim_0005")
    index = GetIndex(FLD_OBJ_NPC, "npc0003")
    Field.ObjectSetRotationY(FLD_OBJ_NPC, index, 180, 0)
    Field.ObjectSetPos(FLD_OBJ_NPC, index, pos.x, pos.y, pos.z + 1.2)
    Field.ObjectLoadMotion(FLD_OBJ_NPC, index, "f001")
    Field.ObjectPlayMotion(FLD_OBJ_NPC, index, "f001", 5, true)
    obj_index = GetIndex(OGIM, "road01")
    Field.ObjectLoadMotion(OGIM, obj_index, "e001")
    Field.ObjectLoadMotion(OGIM, obj_index, "e002")
    Cam.Inst:Set(0.053, 2.875, -27.677, 0.066, 4.457, -17.803, default, 30)
    WaitFrame(30)
    Obj:new(NPC, npc_luce):Invisible(0)
    Obj:new(OGIM, "road01"):Invisible(0)
    Flg.Set("FLAG_MAIN_22_460")
    FieldObjectSync(FOR_ALL, false)
    WaitFrame(1)
    Field.ObjectPlayMotion(OGIM, obj_index, "e001", 5, false)
    PlaySE(404003, 100)
    Obj:new(OGIM, "road01"):CancelInvisible(0)
    local wait_f = Field.ObjectGetMotionEndFrame(OGIM, obj_index, "e001")
    WaitFrame(wait_f)
    Field.ObjectPlayMotion(OGIM, obj_index, "e002", 5, false)
    tlk:StartTalkAndCancelDigimonRide()
    Field.ObjectPlayMotion(PLAYER, 1, "e004", 10, true)
    tlk:Message("f_d0905_0080_0110")
    tlk:MessageClose()
    WaitFrame(30)
    Field.PlayEffectScript("ef_f_enc_110_rp", luce_pos01.x, luce_pos01.y + 3, luce_pos01.z, 0, 5)
    PlaySE(101017, 100)
    Obj:new(NPC, npc_luce):CancelInvisible(15)
    WaitFrame(10)
    Cam.Inst:Set(0.726, 5.46, -46.344, 0.88, 2.341, -36.844, default, 30)
    WaitFrame(30)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, luce_index01, "fe04", 10, 10)
    WaitFrame(30)
    Sound.PlayVoice("vo_mma003_Fun_001")
    WaitFrame(60)
    Field.ObjectPlayMotion(PLAYER, 1, "e018", 10, true)
    tlk:Message("f_d0905_0080_0120")
    tlk:Message("f_d0905_0080_0130")
    tlk:Message("f_d0905_0080_0140")
    tlk:Message("f_d0905_0080_0150")
    tlk:EndTalk()
    Field.ObjectPlayMotion(PLAYER, 1, "fn01_01", 10, true)
    Qst.Main:Set(self.ID, self.STEP_126)
    Guest.Add(GST_VULCANUS)
    Guest.Add(GST_JUNO)
    EncountFromField_WithNormalEffect(11900300, 10975, false)
  end
end

function M440:Event_798()
  if Qst.Main:Check(self.ID, self.STEP_126, self.STEP_132) and Flg.Check("FLAG_MAIN_22_465", "FLAG_MAIN_22_468") then
    Cam.Inst:Set(0.726, 5.46, -46.344, 0.88, 2.341, -36.844, default, 0)
    local luce_index01 = GetIndex(NPC, "npc0006")
    local npc_luce = "npc0006"
    local luce_pos01 = Field.ObjectGetPosition(NPC, luce_index01)
    local luce_fe02 = Motion.Object:new(NPC, "npc0006", "fe02")
    local luce_fe04 = Motion.Object:new(NPC, "npc0006", "fe04")
    local yuno_index01 = GetIndex(NPC, "npc0012")
    local yuno_e002 = Motion.Object:new(NPC, "npc0012", "e002")
    local yuno_e004 = Motion.Object:new(NPC, "npc0012", "e004")
    local yuno_bn01 = Motion.Object:new(NPC, "npc0012", "bn01")
    Field.ObjectLoadMotion(NPC, yuno_index01, "fq01")
    Field.ObjectLoadMotion(NPC, yuno_index01, "fe02")
    local npc02_index = GetIndex(NPC, "npc0011")
    Field.ObjectLoadMotion(NPC, npc02_index, "bn01")
    Field.ObjectLoadMotion(NPC, npc02_index, "e004")
    Field.ObjectLoadMotion(NPC, npc02_index, "fe02")
    Field.ObjectLoadMotion(NPC, npc02_index, "fe04")
    local npc03_index = GetIndex(NPC, "npc0013")
    Field.ObjectLoadMotion(NPC, npc03_index, "bn01")
    Field.ObjectLoadMotion(NPC, npc03_index, "fn01_01")
    Field.ObjectLoadMotion(NPC, npc03_index, "e004")
    Field.ObjectLoadMotion(PLAYER, 1, "fn01_01")
    Field.ObjectLoadMotion(PLAYER, 1, "e004")
    FieldObjectSync(FOR_ALL, false)
    Guest.Delete(GST_VULCANUS)
    Guest.Delete(GST_JUNO)
    FollowerSync()
    Common.SetDigimonGraspState(170, DIGIMON_GRASP_FLAG_SCAN)
    Field.ObjectSetPos(FLD_OBJ_PLAYER, 1, -0.523, 1.961, -19.937)
    Field.ObjectSetRotationY(FLD_OBJ_PLAYER, 1, 0, 0)
    local tlk = Tlk:new("d09", 1, true)
    tlk:StartTalkAndCancelDigimonRide()
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, luce_index01, "fe02", 10, 10)
    WaitFrame(40)
    Field.PlayEffectScript("ef_b_van_100", luce_pos01.x, luce_pos01.y + 3, luce_pos01.z, 0, 5)
    Obj:new(NPC, npc_luce):Invisible(15)
    WaitFrame(30)
    Cam.Inst:Set(0.438, 4.186, -24.927, 0, 3.052, -15.001, default, 30)
    WaitFrame(15)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, yuno_index01, "fe02", 10, 10)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, npc02_index, "fe02", 10, 10)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, npc03_index, "e004", 10, 10)
    Field.ObjectPlayMotionWithStartMoveMotion(PLAYER, 1, "e004", 10, 10)
    WaitFrame(45)
    Field.ObjectPlayMotion(NPC, yuno_index01, "bn01", 10, 10)
    Field.ObjectPlayMotion(NPC, npc03_index, "fn01_01", 10, 10)
    Field.ObjectPlayMotion(PLAYER, 1, "fn01_01", 10, 10)
    Field.ObjectPlayMotion(NPC, npc02_index, "fe04", 10, true)
    tlk:Message("f_d0905_0090_0010")
    Field.ObjectPlayMotion(NPC, npc02_index, "bn01", 10, true)
    Field.ObjectPlayMotion(NPC, yuno_index01, "fq01", 10, true)
    tlk:Message("f_d0905_0090_0020")
    Field.ObjectPlayMotion(NPC, yuno_index01, "fq01", 10, true)
    tlk:Message("f_d0905_0090_0040")
    tlk:EndTalk()
    yuno_bn01:Play(10, true)
    Flg.Set("FLAG_MAIN_22_468")
    FieldObjectSync(FOR_ALL, true)
    Field_CancelInvisibleFollowerAllPartyMember(1, 30, false, true)
    Field_CancelInvisibleFollowerAllGuest(1, 30, false, true)
    Field.SetProhibitAnywhereDigimonRide(false)
    Cam.Inst:Clear(30)
    WaitFrame(30)
    Qst.Main:Set(self.ID, self.STEP_132)
  end
end

function M440:Event_800()
  if Qst.Main:Check(self.ID, self.STEP_132, self.STEP_133) and Flg.Check("FLAG_MAIN_22_468", "FLAG_MAIN_22_469") then
    AnswerTheCall()
    local tlk = Tlk:new("d09", 1, true)
    tlk:StartTalkAndCancelDigimonRide()
    tlk:Message("f_d0905_0180_0010")
    tlk:Message("f_d0905_0180_0020")
    tlk:EndTalk(true)
    Flg.Set("FLAG_SKIP_CHANGE_BGM")
    MapChange("e", 4, "start_00", true, FADE_BLACK, FADE_TIME)
  end
end

function M440:Event_800_2()
  if Qst.Main:Check(self.ID, self.STEP_132, self.STEP_133) and Flg.Check("FLAG_MAIN_22_468", "FLAG_MAIN_22_469") then
    Execute("m440_942")
    Flg.Set("FLAG_SKIP_AREACHANGE_MOVE")
    Flg.Set("FLAG_MAIN_22_469")
    MapChange("d", 905, "start_12", false, FADE_BLACK, FADE_TIME)
  end
end

function M440:Event_800_3()
  if Qst.Main:Check(self.ID, self.STEP_132, self.STEP_133) and Flg.Check("FLAG_MAIN_22_469", "FLAG_MAIN_22_471") then
    Flg.Set("FLAG_MAIN_22_471")
    local tlk = Tlk:new("d09", 1, true)
    tlk:StartTalkAndCancelDigimonRide()
    Motion.Player:Play("e503", 15, true)
    WaitFrame(30)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    WaitFrame(15)
    tlk:Message("f_d0905_0180_0090")
    tlk:EndTalk()
    EndTheCall()
  end
end

function M440:Event_805()
  if Qst.Main:Check(self.ID, self.STEP_132, self.STEP_133) then
    Qst.Main:Set(self.ID, self.STEP_133)
  end
end

function M440:Event_810()
  if Qst.Main:Check(self.ID, self.STEP_132, self.STEP_135) and Flg.Check("FLAG_MAIN_22_470", "FLAG_MAIN_22_480") then
    Field.SetProhibitDigimonRide(true)
    local npc01_index = GetIndex(NPC, "npc_0013")
    Field.ObjectLoadMotion(NPC, npc01_index, "bn01")
    Field.ObjectLoadMotion(NPC, npc01_index, "e018")
    Field.ObjectLoadMotion(NPC, npc01_index, "e565")
    Field.ObjectLoadExpression(NPC, npc01_index, "F01")
    local npc02_index = GetIndex(NPC, "npc_0012")
    Field.ObjectLoadMotion(NPC, npc02_index, "fn01_01")
    Field.ObjectLoadMotion(NPC, npc02_index, "e004")
    Field.ObjectLoadExpression(NPC, npc02_index, "F01")
    Field.ObjectLoadMotion(PLAYER, 1, "fn01_01")
    Field.ObjectLoadMotion(PLAYER, 1, "bn01")
    Field.ObjectLoadMotion(PLAYER, 1, "e018")
    Field.ObjectLoadMotionBlend(PLAYER, 1, "blend01")
    local npc03_index = GetIndex(NPC, "npc_0006")
    Field.ObjectLoadExpression(NPC, npc03_index, "F01_T01")
    Sound.PlayBGM(312, 1)
    local tlk = Tlk:new("d09", 1, true)
    tlk:StartTalkAndCancelDigimonRide()
    tlk:Message("f_d0906_0010_0010")
    tlk:MessageClose()
    FadeOutWithWaitNotFlgCheck(FADE_BLACK, FADE_TIME)
    WaitFrame(15)
    Flg.Set("FLAG_MAIN_22_479")
    FieldObjectSync(FOR_ALL, false)
    Cam.Inst:Set(-0.944, 4.08, -21.301, -2.774, 5.877, -30.967, default, 0)
    Obj:new(PLAYER, ""):SetPos(0.048, 0, 0.072, true)
    Obj:new(PLAYER, ""):SetRotationY(0, 0)
    WaitFrame(15)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    tlk:Message("f_d0906_0010_0015")
    tlk:Message("f_d0906_0010_0020")
    tlk:Message("f_d0906_0010_0025")
    tlk:Message("f_d0906_0010_0030")
    Cam.Inst:Set(0.205, 1.658, -7.079, 0.904, 1.242, 2.887, default, 0)
    tlk:Message("f_d0906_0010_0040")
    tlk:Message("f_d0906_0010_0070")
    tlk:MessageClose()
    Field.ObjectPlayMotionBlend(PLAYER, 1, "blend01", 10, false)
    WaitFrame(30)
    Field.ObjectPlayMotion(PLAYER, 1, "e018", 10, true)
    WaitFrame(60)
    Obj:new(OGIM, "enemy_gate02"):CancelInvisible(15)
    tlk:Message("f_d0906_0010_0100")
    tlk:Message("f_d0906_0010_0110")
    Field.ObjectChangeExpression(NPC, npc03_index, "F01_T01", EYES_BLINK_TYPE_BLINK, false, 10, AUTO_CANCEL_NEXT_FRAME, 15)
    tlk:Message("f_d0906_0010_0120")
    tlk:Message("f_d0906_0010_0130")
    tlk:EndTalk()
    FadeOutWithWaitNotFlgCheck(FADE_BLACK, FADE_TIME)
    Flg.Set("FLAG_MAIN_22_480")
    Cam.Inst:Clear(0)
    Field_InvisibleFollowerAllPartyMember(0, 0, false)
    Field_InvisibleFollowerAllGuest(0, 0, false)
    Field.HideMinimap(true)
    Field.DisableMenu()
    Field.DisableSystemDigimonChat()
    Field.SetProhibitAnywhereDigimonRide(true)
    Field.SetProhibitDigimonRide(true)
    Common.ProhibitSave()
    Qst.Main:Set(self.ID, self.STEP_135)
  end
end

function M440:Event_815()
  if Flg.Check("FLAG_MAIN_22_480", "FLAG_MAIN_22_490") then
    Flg.Set("FLAG_MAIN_22_490")
    Field.DisableMenu()
    Field.DisableSystemDigimonChat()
    Field.SetProhibitAnywhereDigimonRide(true)
    Field.SetProhibitDigimonRide(true)
    Common.ProhibitSave()
    WaitFrame(5)
    Field.ResetPlayer(0, 0, -3.17, 0)
    Flg.Set("FLAG_GIMMICK_D09_080")
    FieldObjectSync(FOR_ALL, false)
    WaitFrame(5)
    Flg.Set("FLAG_GIMMICK_D09_040")
    FieldObjectSync(FOR_ALL, false)
    WaitFrame(5)
    Prcs_d0906_AllEnemyLeave(1, 100, 105)
    WaitFrame(10)
    SetControlScriptExternalVariable("Gim_Event_815", "start")
    FadeInWithWaitNotFlgCheck(FADE_BLACK, FADE_TIME)
  end
end

function M440:Event_816()
  Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
  WaitFrame(5)
  Field.ResetPlayer(0, 0, -3.17, 0)
  Field.DisableMenu()
  Field.DisableSystemDigimonChat()
  Field.SetProhibitAnywhereDigimonRide(true)
  Field.SetProhibitDigimonRide(true)
  Common.ProhibitSave()
  local Apollo_index = GetIndex(NPC, "npc_0001")
  Field.ObjectLoadMotion(NPC, Apollo_index, "bn01")
  Field.ObjectLoadMotion(NPC, Apollo_index, "f000")
  Field.ObjectLoadMotion(NPC, Apollo_index, "bn02")
  local Diana_index = GetIndex(NPC, "npc_0002")
  Field.ObjectLoadMotion(NPC, Diana_index, "bn01")
  Field.ObjectLoadMotion(NPC, Diana_index, "e210")
  Field.ObjectLoadMotion(NPC, Diana_index, "bn02")
  local Minerva_index = GetIndex(NPC, "npc_0003")
  Field.ObjectLoadMotion(NPC, Minerva_index, "bn01")
  Field.ObjectLoadMotion(NPC, Minerva_index, "fe02")
  Field.ObjectPlayMotion(NPC, Apollo_index, "bn02", 10, true)
  Field.ObjectPlayMotion(NPC, Diana_index, "bn02", 10, true)
  WaitFrame(10)
  Cam.Inst:Set(-1.955, 3.65, -6.681, -4.228, 5.38, -16.264, default, 0)
  FadeInWithWaitNotFlgCheck(FADE_BLACK, FADE_TIME)
  local tlk = Tlk:new("d09", 1, true)
  tlk:StartTalkAndCancelDigimonRide()
  Field.ObjectPlayMotion(NPC, Minerva_index, "fe02", 10, false)
  tlk:Message("f_d0906_0040_0030")
  Field.ObjectPlayMotion(NPC, Minerva_index, "bn01", 10, true)
  WaitFrame(15)
  Field.ObjectPlayMotion(NPC, Apollo_index, "bn01", 20, true)
  Field.ObjectPlayMotion(NPC, Diana_index, "bn01", 20, true)
  WaitFrame(30)
  SetControlScriptExternalVariable("PlayVoice_Event_816", "voice_start")
  Field.ObjectPlayMotion(NPC, Apollo_index, "f000", 20, true)
  Field.ObjectPlayMotion(NPC, Diana_index, "e210", 20, true)
  WaitFrame(30)
  Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
  WaitFrame(10)
  tlk:EndTalk()
  Field_InvisibleFollowerAllPartyMember(0, 0, false)
  Field_InvisibleFollowerAllGuest(0, 0, false)
  SetControlScriptExternalVariable("aporo_state", "charge_start")
  SetControlScriptExternalVariable("diana_state", "charge_start")
  Flg.Clear("FLAG_GIMMICK_D09_060")
  Flg.Clear("FLAG_GIMMICK_D09_070")
  Flg.Set("FLAG_GIMMICK_D09_040")
  FieldObjectSync(FOR_ALL, false)
  Cam.Inst:Clear(0)
  WaitFrame(30)
  SetControlScriptExternalVariable("Gim_Event_815", "start")
  FadeAllInWithWait(FADE_BLACK, FADE_TIME)
end

function M440:Event_817()
  Flg.Set("FLAG_GIMMICK_D09_060")
  Field.ObjectLoadMotion(PLAYER, 1, "fn01_01")
  Field.ObjectLoadMotion(PLAYER, 1, "bn01")
  Obj:new(PLAYER, ""):SetPos(0, -0.001, -4.5, true)
  Obj:new(PLAYER, ""):SetRotationY(0, 0)
  Field.ObjectPlayMotion(PLAYER, 1, "bn01", 10, true)
  local Apollo_index = GetIndex(NPC, "npc_0001")
  local Diana_index = GetIndex(NPC, "npc_0002")
  local Minerva_index = GetIndex(NPC, "npc_0003")
  local aigio_index = GetIndex(NPC, "npc_0010")
  local inori_index = GetIndex(NPC, "npc_0011")
  Field.ObjectLoadMotion(NPC, inori_index, "e018")
  Field.ObjectLookAtTheObject(NPC, Apollo_index, FLD_OBJ_NPC, GetIndex(FLD_OBJ_NPC, "npc_0011"), 30)
  Field.ObjectLookAtTheObject(NPC, Diana_index, FLD_OBJ_NPC, GetIndex(FLD_OBJ_NPC, "npc_0011"), 30)
  Field.ObjectLookAtTheObject(NPC, Minerva_index, FLD_OBJ_NPC, GetIndex(FLD_OBJ_NPC, "npc_0011"), 30)
  Field.ObjectLookAtTheObject(NPC, aigio_index, FLD_OBJ_NPC, GetIndex(FLD_OBJ_NPC, "npc_0011"), 30)
  Field.ObjectLookAtTheObject(NPC, inori_index, FLD_OBJ_NPC, GetIndex(FLD_OBJ_NPC, "npc_0011"), 30)
  Field.ObjectPlayMotion(NPC, inori_index, "e018", 10, true)
  local tlk = Tlk:new("d09", 1, true)
  tlk:StartTalkAndCancelDigimonRide()
  Cam.Inst:Set(0, 2.266, -1.171, -0.103, 1.611, 8.806, default, 0)
  tlk:Message("f_d0906_0030_0010")
  tlk:Message("f_d0906_0030_0030")
  tlk:EndTalk()
  Cam.Inst:Clear(0)
  Field.ObjectResetAim(NPC, Apollo_index, 10)
  Field.ObjectResetAim(NPC, Diana_index, 10)
  Field.ObjectResetAim(NPC, Minerva_index, 10)
  Field.ObjectResetAim(NPC, aigio_index, 10)
  Field_InvisibleFollowerAllPartyMember(0, 0, false)
  Field_InvisibleFollowerAllGuest(0, 0, false)
end

function M440:Event_818()
  Flg.Set("FLAG_GIMMICK_D09_070")
  Field.ObjectLoadMotion(PLAYER, 1, "fn01_01")
  Field.ObjectLoadMotion(PLAYER, 1, "bn01")
  Obj:new(PLAYER, ""):SetPos(0, -0.001, -4.5, true)
  Obj:new(PLAYER, ""):SetRotationY(0, 0)
  Field.ObjectPlayMotion(PLAYER, 1, "bn01", 10, true)
  local Apollo_index = GetIndex(NPC, "npc_0001")
  local Diana_index = GetIndex(NPC, "npc_0002")
  local Minerva_index = GetIndex(NPC, "npc_0003")
  local aigio_index = GetIndex(NPC, "npc_0010")
  local inori_index = GetIndex(NPC, "npc_0011")
  Field.ObjectLoadMotion(NPC, inori_index, "e018")
  Field.ObjectLookAtTheObject(NPC, Apollo_index, FLD_OBJ_NPC, GetIndex(FLD_OBJ_NPC, "npc_0011"), 30)
  Field.ObjectLookAtTheObject(NPC, Diana_index, FLD_OBJ_NPC, GetIndex(FLD_OBJ_NPC, "npc_0011"), 30)
  Field.ObjectLookAtTheObject(NPC, Minerva_index, FLD_OBJ_NPC, GetIndex(FLD_OBJ_NPC, "npc_0011"), 30)
  Field.ObjectLookAtTheObject(NPC, aigio_index, FLD_OBJ_NPC, GetIndex(FLD_OBJ_NPC, "npc_0011"), 30)
  Field.ObjectLookAtTheObject(NPC, inori_index, FLD_OBJ_NPC, GetIndex(FLD_OBJ_NPC, "npc_0011"), 30)
  Field.ObjectPlayMotion(NPC, inori_index, "e018", 10, true)
  local tlk = Tlk:new("d09", 1, true)
  tlk:StartTalkAndCancelDigimonRide()
  Cam.Inst:Set(0, 2.266, -1.171, -0.103, 1.611, 8.806, default, 0)
  tlk:Message("f_d0906_0040_0020")
  tlk:EndTalk()
  Cam.Inst:Clear(0)
  Field.ObjectResetAim(NPC, Apollo_index, 10)
  Field.ObjectResetAim(NPC, Diana_index, 10)
  Field.ObjectResetAim(NPC, Minerva_index, 10)
  Field.ObjectResetAim(NPC, aigio_index, 10)
  Field_InvisibleFollowerAllPartyMember(0, 0, false)
  Field_InvisibleFollowerAllGuest(0, 0, false)
end

function M440:Event_819()
  Flg.Set("FLAG_GIMMICK_D09_200")
  Flg.Set("FLAG_MAIN_22_491")
  FieldObjectSync(NPC, false)
  WaitFrame(5)
  Field_InvisibleNpc("npc_0018", 0, 0, false)
  Field_InvisibleNpc("npc_0015", 0, 0, false)
  Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
  WaitFrame(15)
  SetControlScriptExternalVariable("invisible_attachmen", "invisible")
  Cam.Inst:Set(0, 2.266, -1.171, -0.103, 1.611, 8.806, default, 0)
  local Apollo_index = GetIndex(NPC, "npc_0001")
  Field.ObjectLoadMotion(NPC, Apollo_index, "bn01")
  local Diana_index = GetIndex(NPC, "npc_0002")
  Field.ObjectLoadMotion(NPC, Diana_index, "bn01")
  local Minerva_index = GetIndex(NPC, "npc_0003")
  Field.ObjectLoadMotion(NPC, Minerva_index, "bn01")
  Field.ObjectLoadMotion(NPC, Minerva_index, "fq01")
  Field.ObjectLoadMotion(NPC, Minerva_index, "fq02")
  Field.ObjectLoadMotion(NPC, Minerva_index, "fe02")
  Field.ObjectLoadMotion(NPC, Minerva_index, "fe04")
  Field.ObjectLoadExpression(NPC, Minerva_index, "F01_T01")
  local aigio_index = GetIndex(NPC, "npc_0010")
  Field.ObjectLoadMotion(NPC, aigio_index, "bn01")
  Field.ObjectLoadMotion(NPC, aigio_index, "e018")
  Field.ObjectLoadExpression(NPC, aigio_index, "F01")
  local inori_index = GetIndex(NPC, "npc_0011")
  Field.ObjectLoadMotion(NPC, inori_index, "fn01_01")
  Field.ObjectLoadMotion(NPC, inori_index, "e004")
  Field.ObjectLoadMotion(NPC, inori_index, "e035")
  Field.ObjectLoadExpression(NPC, inori_index, "F01")
  Field.ObjectLoadMotion(PLAYER, 1, "fn01_01")
  Field.ObjectLoadMotion(PLAYER, 1, "bn01")
  Field.ObjectLoadMotion(PLAYER, 1, "e018")
  Field.ObjectLoadMotionBlend(PLAYER, 1, "blend01")
  Obj:new(PLAYER, ""):SetPos(0, -0.001, -3.17, true)
  Obj:new(PLAYER, ""):SetRotationY(0, 0)
  Field.ObjectLoadAttachment(NPC, Apollo_index, 3)
  Field.ObjectLoadAttachment(NPC, Diana_index, 3)
  Field.ObjectShowAttachment(NPC, Apollo_index, 3)
  Field.ObjectShowAttachment(NPC, Diana_index, 3)
  Field.ObjectLookAtTheObject(NPC, Apollo_index, FLD_OBJ_NPC, GetIndex(FLD_OBJ_NPC, "npc_0011"), 30)
  Field.ObjectLookAtTheObject(NPC, Diana_index, FLD_OBJ_NPC, GetIndex(FLD_OBJ_NPC, "npc_0011"), 30)
  Field.ObjectLookAtTheObject(NPC, Minerva_index, FLD_OBJ_NPC, GetIndex(FLD_OBJ_NPC, "npc_0011"), 30)
  Field.ObjectLookAtTheObject(NPC, aigio_index, FLD_OBJ_NPC, GetIndex(FLD_OBJ_NPC, "npc_0011"), 30)
  Obj:new(PLAYER, ""):SetPos(-1.002, -0.001, -1.783, true)
  Obj:new(PLAYER, ""):SetRotationY(0, 0)
  Field.ObjectSetPos(FLD_OBJ_NPC, inori_index, 1.846, -0.001, 0.554)
  Field.ObjectPlayMotion(PLAYER, 1, "bn01", 10, true)
  Field.ObjectPlayMotion(NPC, inori_index, "e004", 10, true)
  Field.ObjectPlayMotion(NPC, Minerva_index, "bn01", 10, true)
  Field.ObjectPlayMotion(NPC, aigio_index, "bn01", 10, true)
  WaitFrame(5)
  FadeInWithWaitNotFlgCheck(FADE_BLACK, FADE_TIME)
  local tlk = Tlk:new("d09", 1, true)
  tlk:StartTalkAndCancelDigimonRide()
  Field.ObjectChangeExpression(NPC, Minerva_index, "F01_T01", EYES_BLINK_TYPE_BLINK, true, 30, AUTO_CANCEL_NONE, 15)
  tlk:Message("f_d0906_0050_0010")
  Field.ObjectChangeExpression(NPC, Minerva_index, "F01_T01", EYES_BLINK_TYPE_BLINK, false, 10, AUTO_CANCEL_NEXT_FRAME, 15)
  tlk:Message("f_d0906_0050_0020")
  tlk:Message("f_d0906_0050_0030")
  local se_slot = Sound.PlaySE(403055, 100)
  Cam.Inst:Set(-3.719, 2.986, -6.674, -1.373, 0.794, 2.796, default, 0)
  Field.ObjectChangeExpression(NPC, Minerva_index, "F01_T01", EYES_BLINK_TYPE_BLINK, true, 30, AUTO_CANCEL_NONE, 15)
  tlk:Message("f_d0906_0050_0040")
  Field.ObjectChangeExpression(NPC, Minerva_index, "F01_T01", EYES_BLINK_TYPE_BLINK, false, 10, AUTO_CANCEL_NEXT_FRAME, 15)
  Cam.Inst:Set(-13.588, 6.1, -0.676, -4.642, 4.781, -4.94, default, 0)
  Field.ObjectResetAim(NPC, Apollo_index, 10)
  Field.ObjectResetAim(NPC, Diana_index, 10)
  tlk:Message("f_d0906_0050_0050")
  Cam.Inst:Set(10.323, 4, 5.33, 5.34, 4.529, -3.323, default, 0)
  tlk:Message("f_d0906_0050_0060")
  tlk:MessageClose()
  Cam.Inst:Set(-0.834, 3.5, -6.421, -2.743, 3.749, -16.234, default, 0)
  WaitFrame(70)
  Field.ObjectPlayMotion(NPC, inori_index, "e035", 10, true)
  Field.ObjectChangeExpression(NPC, inori_index, "F01", EYES_BLINK_TYPE_BLINK, true, 30, AUTO_CANCEL_NONE, 15)
  tlk:Message("f_d0906_0050_0070")
  Field.ObjectChangeExpression(NPC, inori_index, "F01", EYES_BLINK_TYPE_BLINK, false, 10, AUTO_CANCEL_NONE, 15)
  tlk:MessageClose()
  Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
  WaitFrame(15)
  local beelze_index = GetIndex(NPC, "npc_0018")
  Field_InvisibleNpc("npc_0018", 0, 0, false)
  Field_CancelInvisibleNpc("npc_0015", 0, 0, true, false)
  Obj:new(NPC, "npc_0010"):SetRotationY(0, 0)
  Obj:new(NPC, "npc_0011"):SetRotationY(0, 0)
  Obj:new(NPC, "npc_0003"):SetRotationY(0, 0)
  Sound.StopSE(se_slot, 1)
  local se_slot2 = Sound.PlaySE(403057, 100)
  Cam.Inst:Set(0.079, 0.949, -45.497, 2.46, 4.212, -36.349, default, 0)
  WaitFrame(15)
  FadeAllInWithWait(FADE_BLACK, FADE_TIME)
  WaitFrame(30)
  Field.ObjectChangeExpression(NPC, Minerva_index, "F01_T01", EYES_BLINK_TYPE_BLINK, true, 30, AUTO_CANCEL_NONE, 15)
  tlk:Message("f_d0906_0050_0080")
  tlk:MessageClose()
  Field.ObjectChangeExpression(NPC, Minerva_index, "F01_T01", EYES_BLINK_TYPE_BLINK, false, 10, AUTO_CANCEL_NEXT_FRAME, 15)
  Field.ObjectResetAim(NPC, Apollo_index, 10)
  Field.ObjectResetAim(NPC, Diana_index, 10)
  Field.ObjectResetAim(NPC, Minerva_index, 10)
  Field.ObjectResetAim(NPC, aigio_index, 10)
  SetControlScriptExternalVariable("PlayVoice_Event_819", "beelze_start")
  WaitFrame(30)
  Cam.Inst:Set(0, 2.266, -1.171, -0.103, 1.611, 8.806, default, 30)
  WaitFrame(30)
  tlk:Message("f_d0906_0050_0090")
  tlk:Message("f_d0906_0050_0100")
  Field.ObjectChangeExpression(NPC, Minerva_index, "F01_T01", EYES_BLINK_TYPE_BLINK, true, 30, AUTO_CANCEL_NONE, 15)
  Field.ObjectPlayMotion(NPC, Minerva_index, "fe04", 10, true)
  tlk:Message("f_d0906_0050_0110")
  Field.ObjectPlayMotion(NPC, Minerva_index, "bn01", 10, true)
  Field.ObjectChangeExpression(NPC, Minerva_index, "F01_T01", EYES_BLINK_TYPE_BLINK, false, 10, AUTO_CANCEL_NEXT_FRAME, 15)
  tlk:Message("f_d0906_0050_0120")
  Field.ObjectPlayMotion(NPC, Minerva_index, "fq02", 10, true)
  Field.ObjectChangeExpression(NPC, Minerva_index, "F01_T01", EYES_BLINK_TYPE_BLINK, true, 30, AUTO_CANCEL_NONE, 15)
  tlk:Message("f_d0906_0050_0140")
  Field.ObjectChangeExpression(NPC, Minerva_index, "F01_T01", EYES_BLINK_TYPE_BLINK, false, 10, AUTO_CANCEL_NEXT_FRAME, 15)
  tlk:MessageClose()
  Field.ObjectPlayMotion(NPC, Minerva_index, "fe02", 10, false)
  Field.ObjectPlayMotion(PLAYER, 1, "e018", 10, true)
  Field.ObjectPlayMotion(NPC, aigio_index, "e018", 10, true)
  WaitFrame(30)
  tlk:EndTalk()
  Sound.StopSE(se_slot2, 1)
  Guest.Add(GST_MINERVAMON_3)
  EncountFromField_WithNormalEffect(4264003, 10976, true)
end

function M440:Event_820()
  if Qst.Main:Check(self.ID, self.STEP_135, self.STEP_140) and Flg.Check("FLAG_MAIN_22_495", "FLAG_MAIN_22_500") then
    Flg.Set("FLAG_GIMMICK_D09_050")
    SetControlScriptExternalVariable("Gim_Event_815", "end")
    Prcs_d0906_AllEnemyLeave(1, 100, 105)
    Prcs_d0906_AllEnemyLeave(1, 200, 203)
    Guest.Delete(GST_MINERVAMON_3)
    Field_InvisibleFollowerAllPartyMember(0, 0, false)
    Field_InvisibleFollowerAllGuest(0, 0, false)
    FieldObjectSync(NPC, false)
    WaitFrame(5)
    Obj:new(PLAYER, ""):SetPos(1.625, 0, -1.618, true)
    Obj:new(PLAYER, ""):SetRotationY(0, 0)
    Obj:new(NPC, "npc_0010"):SetPos(0.454, 0, 0.488, true)
    Obj:new(NPC, "npc_0010"):SetRotationY(0, 0)
    Obj:new(NPC, "npc_0011"):SetPos(2.127, 0, 0.323, true)
    Obj:new(NPC, "npc_0011"):SetRotationY(0, 0)
    Obj:new(NPC, "npc_0003"):SetPos(-2.062, 0, -1.052, true)
    Obj:new(NPC, "npc_0003"):SetRotationY(0, 0)
    Field.ObjectShowAttachment(NPC, GetIndex(NPC, "npc_0001"), 3)
    Field.ObjectShowAttachment(NPC, GetIndex(NPC, "npc_0002"), 3)
    local apro = Obj:new(NPC, "npc_0001")
    local diana = Obj:new(NPC, "npc_0002")
    diana:DisableCulling()
    Field.ObjectLoadMotion(NPC, apro.index, "bs02")
    Field.ObjectLoadMotion(NPC, diana.index, "bs02")
    Field.ObjectLoadMotion(NPC, apro.index, "f001")
    Field.ObjectLoadMotion(NPC, diana.index, "f001")
    Field.ObjectLoadMotion(NPC, apro.index, "f002")
    Field.ObjectLoadMotion(NPC, diana.index, "f002")
    Field.ObjectLoadAttachment(NPC, apro.index, 3)
    Field.ObjectLoadAttachment(NPC, diana.index, 3)
    Field.ObjectShowAttachment(NPC, apro.index, 3)
    Field.ObjectShowAttachment(NPC, diana.index, 3)
    local Minerva_index = GetIndex(NPC, "npc_0003")
    Field.ObjectLoadMotion(NPC, Minerva_index, "bn01")
    Field.ObjectLoadMotion(NPC, Minerva_index, "bv01")
    Field.ObjectLoadMotion(NPC, Minerva_index, "fq01")
    Field.ObjectLoadMotion(NPC, Minerva_index, "fq02")
    Field.ObjectLoadMotion(NPC, Minerva_index, "fe02")
    Field.ObjectLoadMotion(NPC, Minerva_index, "fe04")
    Field.ObjectLoadMotion(NPC, Minerva_index, "fn01_01")
    local aigio_index = GetIndex(NPC, "npc_0010")
    Field.ObjectLoadMotion(NPC, aigio_index, "bn01")
    Field.ObjectLoadMotion(NPC, aigio_index, "fn01_01")
    Field.ObjectLoadMotion(NPC, aigio_index, "e018")
    Field.ObjectLoadMotion(NPC, aigio_index, "e004")
    local inori_index = GetIndex(NPC, "npc_0011")
    Field.ObjectLoadMotion(NPC, inori_index, "fn01_01")
    Field.ObjectLoadMotion(NPC, inori_index, "e004")
    Field.ObjectLoadMotion(NPC, inori_index, "e035")
    Field.ObjectLoadMotion(NPC, inori_index, "e022")
    Field.ObjectLoadMotion(PLAYER, 1, "fn01_01")
    Field.ObjectLoadMotion(PLAYER, 1, "bn01")
    Field.ObjectLoadMotion(PLAYER, 1, "e018")
    Field.ObjectLoadMotion(PLAYER, 1, "e004")
    Field.ObjectLoadMotionBlend(PLAYER, 1, "blend01")
    Field.LoadEffectScript("ef_b_chr733_bs02", 1)
    Field.LoadEffectScript("ef_b_chr173_bs02", 1)
    WaitFrame(15)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    local tlk = Tlk:new("d09", 1, true)
    tlk:StartTalkAndCancelDigimonRide()
    Field.ObjectPlayMotion(NPC, Minerva_index, "fe02", 10, true)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, aigio_index, "e004", 10, 10)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, inori_index, "e022", 10, 10)
    Field.ObjectPlayMotionWithStartMoveMotion(PLAYER, 1, "e004", 10, 10)
    WaitFrame(30)
    Field.ObjectPlayMotion(NPC, Minerva_index, "fq01", 10, true)
    tlk:Message("f_d0906_0060_0020")
    Cam.Inst:Set(11.051, 5.199, 3.65, 4.441, 3.993, -3.755, default, 0)
    tlk:Message("f_d0906_0060_0030")
    Cam.Inst:Set(-12.548, 4.899, 0.337, -4.279, 4.964, -5.284, default, 0)
    tlk:Message("f_d0906_0060_0040")
    Cam.Inst:Set(0, 2.266, -1.171, -0.103, 1.611, 8.806, default, 0)
    Field.ObjectPlayMotion(NPC, Minerva_index, "fq01", 10, true)
    tlk:Message("f_d0906_0060_0050")
    tlk:Message("f_d0906_0060_0060")
    tlk:Message("f_d0906_0060_0070")
    Field.ObjectHideAttachment(NPC, diana.index, 3)
    Field.ObjectHideAttachment(NPC, apro.index, 3)
    SetControlScriptExternalVariable("PlayVoice_Event_820", "diana_start")
    tlk:MessageAuto("f_d0906_0060_0080", 0)
    local d_vec = GetUnitVector2D(diana.rot_y)
    local d_vec_x, d_vec_z = d_vec.x * -3.9, d_vec.z * -3.9
    Field.PlayEffectScript("ef_b_chr733_bs02", diana.pos.x + d_vec_x, diana.pos.y + 4.95, diana.pos.z + d_vec_z, diana.rot_y, 2.16)
    PlaySE(201024, 100)
    Field.ObjectPlayMotion(NPC, diana.index, "bs02", 0, false)
    Cam.Inst:Set(7.235, 21.393, 17.444, 11.511, 18.05, 9.045, default, 0)
    WaitFrame(15)
    Cam.Inst:Set(7.796, 21.036, 18.704, 10.755, 19.048, 9.361, 30, 35)
    WaitFrame(40)
    tlk:MessageClose()
    Cam.Inst:Set(7.978, 20.861, 17.147, 10.401, 18.437, 7.752, 40, 10)
    WaitFrame(38)
    Cam.Inst:Set(8.024, 19.357, 13.74, 9.122, 17.326, 4.011, 60, 5)
    WaitFrame(35)
    Cam.Inst:Set(5.994, 17.507, 6.811, 7.169, 15.127, -2.83, 60, 20)
    WaitFrame(20)
    Fade_OutNoLoadingWithWait(FADE_WHITE, FADE_TIME)
    WaitFrame(15)
    Field.ObjectHideAttachment(NPC, diana.index, 3)
    SetControlScriptExternalVariable("PlayVoice_Event_820", "aporo_start")
    tlk:MessageAuto("f_d0906_0060_0090", 0)
    local a_vec = GetUnitVector2D(apro.rot_y)
    local a_vec_x, a_vec_z = a_vec.x * 1, a_vec.z * 1
    Cam.Inst:Set(-11.358, 5.665, 7.752, -8.156, 6.045, -1.713, 30, 0)
    Field.PlayEffectScript("ef_b_chr173_bs02", apro.pos.x + a_vec_x, apro.pos.y, apro.pos.z + a_vec_z, apro.rot_y, 2.4424)
    PlaySE(201022, 100)
    Field.ObjectPlayMotion(NPC, apro.index, "bs02", 0, false)
    FadeInWithWaitNotFlgCheck(FADE_WHITE, 0)
    WaitFrame(30)
    Cam.Inst:Set(-11.959, 5.839, 9.454, -8.467, 5.995, 0.08, 30, 15)
    WaitFrame(33)
    tlk:MessageClose()
    Cam.Inst:Set(-4.638, 3.491, -13.193, -3.253, 1.603, -22.915, 60, 45)
    WaitFrame(45)
    Cam.Inst:Set(-5.306, 8.214, -0.53, -6.552, 6.268, -10.254, 30, 5)
    WaitFrame(10)
    Cam.Inst:Set(11.312, 8.606, -37.716, 18.448, 10.714, -44, 397, 60, 5)
    WaitFrame(25)
    Fade_OutNoLoadingWithWait(FADE_WHITE, FADE_TIME)
    WaitFrame(15)
    Cam.Inst:Set(0.06, 4.15, -40.51, 0.04, 5.92, -30.67, default, 0)
    Flg.Set("FLAG_MAIN_22_500")
    Field.ObjectInvisible(OGIM, GetIndex(OGIM, "enemy_gate01"), 0, 60, true)
    Field.PlayEffectScript("ef_f_com_300_sm", -0.272, 0, -48.689999, 0, 5)
    PlaySE(300103, 100)
    WaitFrame(10)
    FadeInWithWaitNotFlgCheck(FADE_WHITE, FADE_TIME)
    Quake.Start(0, 0.5, 30)
    WaitFrame(15)
    FieldObjectSync(FOR_ALL, false)
    WaitFrame(15)
    local Apollo_index = GetIndex(NPC, "npc_0007")
    local a_e013 = Motion.Object:new(NPC, "npc_0007", "bn01")
    local a_e004 = Motion.Object:new(NPC, "npc_0007", "e004")
    local a_e007 = Motion.Object:new(NPC, "npc_0007", "e007")
    local a_e013 = Motion.Object:new(NPC, "npc_0007", "e013")
    local a_fq01 = Motion.Object:new(NPC, "npc_0007", "fq01")
    local a_fq02 = Motion.Object:new(NPC, "npc_0007", "fq02")
    local Diana_index = GetIndex(NPC, "npc_0008")
    local d_e006 = Motion.Object:new(NPC, "npc_0008", "e006")
    local d_e007 = Motion.Object:new(NPC, "npc_0008", "e007")
    local d_e012 = Motion.Object:new(NPC, "npc_0008", "e012")
    local d_e013 = Motion.Object:new(NPC, "npc_0008", "e013")
    local d_bn01 = Motion.Object:new(NPC, "npc_0008", "bn01")
    local d_fq01 = Motion.Object:new(NPC, "npc_0008", "fq01")
    local Minerva_index = GetIndex(NPC, "npc_0009")
    local m_bn01 = Motion.Object:new(NPC, "npc_0009", "bn01")
    local m_e013 = Motion.Object:new(NPC, "npc_0009", "e013")
    local m_e023 = Motion.Object:new(NPC, "npc_0009", "e023")
    local m_e031 = Motion.Object:new(NPC, "npc_0009", "e031")
    local m_e033 = Motion.Object:new(NPC, "npc_0009", "e033")
    local m_fn01_01 = Motion.Object:new(NPC, "npc_0009", "fn01_01")
    local aigio_index = GetIndex(NPC, "npc_0020")
    Field.ObjectLoadMotion(NPC, aigio_index, "bn01")
    Field.ObjectLoadMotion(NPC, aigio_index, "e004")
    Field.ObjectLoadMotion(NPC, aigio_index, "fn01_01")
    local inori_index = GetIndex(NPC, "npc_0019")
    Field.ObjectLoadMotion(NPC, inori_index, "fn01_01")
    Field.ObjectLoadMotion(NPC, inori_index, "e013")
    Field.ObjectPlayMotion(NPC, Apollo_index, "bn01", 10, true)
    Field.ObjectPlayMotion(NPC, Diana_index, "bn01", 10, true)
    Field.ObjectPlayMotion(NPC, Minerva_index, "bn01", 10, true)
    Cam.Inst:Set(0.083, 3.999, 2.544, 0.083, 4.167, 12.542, default, 0)
    Field.ObjectPlayMotion(NPC, aigio_index, "e004", 10, true)
    tlk:Message("f_d0906_0060_0100")
    Field.ObjectPlayMotion(NPC, aigio_index, "fn01_01", 10, true)
    Field.ObjectPlayMotion(NPC, inori_index, "e013", 10, true)
    tlk:Message("f_d0906_0060_0110")
    Field.ObjectPlayMotion(NPC, inori_index, "fn01_01", 10, true)
    Field.ObjectLookAtTheObject(NPC, Diana_index, FLD_OBJ_NPC, GetIndex(FLD_OBJ_NPC, "npc_0007"), 30)
    d_e012:Play(10, true)
    tlk:Message("f_d0906_0060_0120")
    Field.ObjectLookAtTheObject(NPC, Apollo_index, FLD_OBJ_NPC, GetIndex(FLD_OBJ_NPC, "npc_0008"), 30)
    a_e013:Play(10, true)
    tlk:Message("f_d0906_0060_0130")
    a_e007:Play(10, true)
    tlk:Message("f_d0906_0060_0150")
    d_e007:Play(10, true)
    tlk:Message("f_d0906_0060_0160")
    m_e033:Play(10, true)
    tlk:Message("f_d0906_0060_0170")
    m_fn01_01:Play(10, true)
    tlk:Message("f_d0906_0060_0180")
    Cam.Inst:Set(0.512, 8.75, -103.366, 0.721, 9.839, -93.428, default, 30)
    WaitFrame(30)
    tlk:Message("f_d0906_0060_0190")
    tlk:Message("f_d0906_0060_0200")
    a_e013:Play(10, true)
    d_e013:Play(10, true)
    m_e013:Play(10, true)
    Cam.Inst:Set(0.083, 3.999, 2.544, 0.083, 4.167, 12.542, default, 0)
    Field.ObjectResetAim(NPC, Apollo_index, 10)
    Field.ObjectResetAim(NPC, Diana_index, 10)
    WaitFrame(30)
    m_e031:Play(10, true)
    tlk:Message("f_d0906_0060_0210")
    a_e007:Play(10, true)
    tlk:Message("f_d0906_0060_0220")
    d_e007:Play(10, true)
    tlk:Message("f_d0906_0060_0230")
    m_e013:Play(10, true)
    tlk:Message("f_d0906_0060_0240")
    Fade_OutNoLoadingWithWait(FADE_WHITE, FADE_TIME)
    tlk:EndTalk()
    Field.HideMinimap(false)
    a_e013:Play(10, true)
    d_e013:Play(10, true)
    Field.CancelDisableMenu()
    Field.CancelDisableSystemDigimonChat()
    Field.SetProhibitAnywhereDigimonRide(false)
    Field.SetProhibitDigimonRide(false)
    Common.CancelProhibitSave()
    Obj:new(NPC, "npc_0020"):Invisible()
    Obj:new(NPC, "npc_0019"):Invisible()
    Flg.Set("FLAG_MAIN_22_501")
    Cam.Inst:Clear(0)
    WaitFrame(10)
    FadeInWithWaitNotFlgCheck(FADE_WHITE, FADE_TIME)
    Qst.Main:Set(self.ID, self.STEP_140)
  end
end

function M440:Event_825()
  if Qst.Main:Check(self.ID, self.STEP_140, self.STEP_150) and Flg.Check("FLAG_MAIN_22_500", "FLAG_MAIN_22_505") then
    AnswerTheCall()
    local tlk = Tlk:new("d09", 1, true)
    tlk:StartTalkAndCancelDigimonRide()
    tlk:Message("f_d0906_0090_0010")
    tlk:EndTalk(true)
    Flg.Set("FLAG_SKIP_CHANGE_BGM")
    MapChange("e", 4, "start_00", true, FADE_BLACK, FADE_TIME)
  end
end

function M440:Event_825_2()
  if Qst.Main:Check(self.ID, self.STEP_140, self.STEP_150) and Flg.Check("FLAG_MAIN_22_500", "FLAG_MAIN_22_505") then
    Execute("m440_943")
    Flg.Set("FLAG_SKIP_AREACHANGE_MOVE")
    Flg.Set("FLAG_MAIN_22_505")
    MapChange("d", 906, "start_02", false, FADE_BLACK, FADE_TIME)
  end
end

function M440:Event_825_3()
  if Qst.Main:Check(self.ID, self.STEP_140, self.STEP_150) and Flg.Check("FLAG_MAIN_22_505", "FLAG_MAIN_22_506") then
    Flg.Set("FLAG_MAIN_22_506")
    local tlk = Tlk:new("d09", 1, true)
    tlk:StartTalkAndCancelDigimonRide()
    Motion.Player:Play("e503", 15, true)
    WaitFrame(30)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    WaitFrame(15)
    tlk:Message("f_d0906_0090_0070")
    tlk:Message("f_d0906_0090_0080")
    tlk:EndTalk()
    EndTheCall()
  end
end

function M440:Event_827()
  if Flg.Check("FLAG_MAIN_22_469", "FLAG_MAIN_22_510") then
    local tlk = Tlk:new("d09", 1, true)
    tlk:StartTalkAndCancelDigimonRide()
    tlk:Message("f_d0906_0100_0010")
    tlk:MessageClose()
    Field.MovePlayerToRelativePosFrame(0, -1.5, 30)
    WaitFrame(30)
    tlk:EndTalk()
  end
end

function M440:Event_830()
  if Qst.Main:Check(self.ID, self.STEP_140, self.STEP_150) and Flg.Check("FLAG_MAIN_22_500", "FLAG_MAIN_22_510") then
    Flg.Set("FLAG_MAIN_22_510")
    Digimon.RestoreAllParty()
    SetControlScriptExternalVariable("player_walk", "start")
    Field.ObjectFrameMoveToTarget2D(PLAYER, 1, 0, -130, 6.5, 60)
    PlaySE(200006, 100)
    Fade_OutNoLoadingWithWait(FADE_WHITE, FADE_TIME)
    WaitFrame(15)
    Common.SetExistPartyAegiomon(false)
    Guest.Delete(GST_HEROINE)
    WaitFrame(1)
    Qst.Main:Set(self.ID, self.STEP_150)
    MapChangeWithTimeTravel("d", 201, "start_02", AXIS_ORIGINAL, "P2028_daft_446", NOON)
  end
end

function M440:Event_830_ArrivalEvent()
  if Qst.Main:Check(self.ID, self.STEP_150, self.STEP_185) and Flg.Check("FLAG_MAIN_22_510", "FLAG_MAIN_22_519") then
    Flg.Set("FLAG_MAIN_22_519")
    Field.ObjectLoadMotion(PLAYER, 1, "fn01_01")
    Field.ObjectLoadMotion(PLAYER, 1, "e201")
    WaitFrame(30)
    local tlk = Tlk:new("d02", 1, true)
    tlk:StartTalkAndCancelDigimonRide()
    local result = tlk:Select(3, "f_d0201_1250_0010")
    if result == RESULT_TALK00 then
    end
    Field.ObjectPlayMotionWithStartMoveMotion(PLAYER, 1, "e201", 10, 10)
    WaitFrame(90)
    tlk:EndTalk()
  end
end

function M440:Event_831()
  if Flg.Check("FLAG_MAIN_22_510", "FLAG_MAIN_22_550") then
    Fade_OutNoLoadingWithWait(FADE_WHITE, FADE_TIME)
    Flg.Clear("FLAG_MAIN_22_517")
    MapChangeWithTimePasses("t", 403, "start_00", NIGHT)
  end
end

function M440:Event_832()
  if Flg.Check("FLAG_MAIN_22_510", "FLAG_MAIN_22_550") then
    Flg.Clear("FLAG_MAIN_22_517")
    Fade_OutNoLoadingWithWait(FADE_WHITE, FADE_TIME)
    MapChangeWithTimePasses("d", 501, "start_12", NOON)
  end
end

function M440:Event_833()
  if Flg.Check("FLAG_MAIN_22_510", "FLAG_MAIN_22_550") then
    Flg.Clear("FLAG_MAIN_22_517")
    Fade_OutNoLoadingWithWait(FADE_WHITE, FADE_TIME)
    MapChangeWithTimePasses("t", 401, "start_09", EVENING)
  end
end

function M440:Event_834()
  if Flg.Check("FLAG_MAIN_22_510", "FLAG_MAIN_22_550") then
    if Flg.Check("FLAG_MAIN_22_544") then
      Flg.Clear("FLAG_MAIN_22_545")
      Flg.Clear("FLAG_MAIN_22_546")
      Flg.Clear("FLAG_MAIN_22_547")
    end
    if Flg.Check("FLAG_MAIN_22_540") then
      Flg.Set("FLAG_MAIN_22_544")
    end
    if Flg.Check("FLAG_MAIN_22_530") then
      Flg.Set("FLAG_MAIN_22_540")
    end
    if Flg.Check("FLAG_MAIN_22_520") then
      Flg.Set("FLAG_MAIN_22_530")
    end
    if Flg.Check("FLAG_MAIN_22_510") then
      Flg.Set("FLAG_MAIN_22_520")
    end
    Flg.Clear("FLAG_MAIN_22_517")
    Fade_OutNoLoadingWithWait(FADE_WHITE, FADE_TIME)
    MapChangeWithTimePasses("d", 201, "start_02", NOON)
  end
end

function M440:Event_835()
  if Flg.Check("FLAG_MAIN_22_510", "FLAG_MAIN_22_550") then
    Flg.Set("FLAG_MAIN_22_545")
    Flg.Set("FLAG_MAIN_22_546")
    Flg.Set("FLAG_MAIN_22_547")
    Fade_OutNoLoadingWithWait(FADE_WHITE, FADE_TIME)
    MapChangeWithTimePasses("d", 204, "start_00", NOON)
  end
end

function M440:Event_836()
  if Flg.Check("FLAG_MAIN_22_540", "FLAG_MAIN_22_550") then
    Digitter.Send(1440010110)
  elseif Flg.Check("FLAG_MAIN_22_530", "FLAG_MAIN_22_540") then
    Digitter.Send(1440010090)
  elseif Flg.Check("FLAG_MAIN_22_520", "FLAG_MAIN_22_530") then
    Digitter.Send(1440010070)
  end
end

function M440:Event_837()
  if Flg.Check("FLAG_MAIN_22_540", "FLAG_MAIN_22_550") then
    Digitter.Send(1440010115)
  elseif Flg.Check("FLAG_MAIN_22_530", "FLAG_MAIN_22_540") then
    Digitter.Send(1440010095)
  elseif Flg.Check("FLAG_MAIN_22_520", "FLAG_MAIN_22_530") then
    Digitter.Send(1440010075)
  end
end

function M440:Event_838()
  if Flg.Check("FLAG_MAIN_22_540", "FLAG_MAIN_22_550") then
    Digitter.Send(1440010120)
  elseif Flg.Check("FLAG_MAIN_22_530", "FLAG_MAIN_22_540") then
    Digitter.Send(1440010100)
  elseif Flg.Check("FLAG_MAIN_22_520", "FLAG_MAIN_22_530") then
    Digitter.Send(1440010080)
  end
end

function M440:Event_839()
  if Flg.Check("FLAG_MAIN_22_540", "FLAG_MAIN_22_550") then
    Digitter.Send(1440010125)
  elseif Flg.Check("FLAG_MAIN_22_530", "FLAG_MAIN_22_540") then
    Digitter.Send(1440010105)
  elseif Flg.Check("FLAG_MAIN_22_520", "FLAG_MAIN_22_530") then
    Digitter.Send(1440010085)
  end
end

function M440:Event_841()
  if Qst.Main:Check(self.ID, self.STEP_150, self.STEP_185) and Flg.Check("FLAG_MAIN_22_540", "FLAG_MAIN_22_551") then
    Flg.Set("FLAG_MAIN_22_551")
    local tlk = Tlk:new("d02", 1, true)
    tlk:StartTalkAndCancelDigimonRide()
    Cam.Inst:Set(0.12, 1.6, -49.53, 0.12, 3.31, -39.68, default, 15)
    WaitFrame(15)
    tlk:Message("f_d0204_0570_0010")
    tlk:EndTalk()
    Cam.Inst:Clear(15)
    WaitFrame(10)
    FieldObjectSync(NPC, false)
    WaitFrame(15)
  end
end

function M440:Event_842()
  if Qst.Main:Check(self.ID, self.STEP_150, self.STEP_185) and Flg.Check("FLAG_MAIN_22_551", "FLAG_MAIN_22_552") then
    Flg.Set("FLAG_MAIN_22_552")
    local fe02 = Motion.Object:new(NPC, "npc_900", "fe02")
    local fe04 = Motion.Object:new(NPC, "npc_900", "fe04")
    local tlk = Tlk:new("d02", 1, true)
    tlk:StartTalkAndCancelDigimonRide()
    Cam.Inst:Set(0.12, 1.6, -49.53, 0.12, 3.31, -39.68, default, 15)
    WaitFrame(15)
    fe02:Play(10, true)
    tlk:Message("f_d0204_0580_0010")
    fe04:Play(10, true)
    tlk:EndTalk()
    Cam.Inst:Clear(15)
    WaitFrame(10)
    FieldObjectSync(NPC, false)
    WaitFrame(15)
  end
end

function M440:Event_843()
  if Qst.Main:Check(self.ID, self.STEP_150, self.STEP_185) and Flg.Check("FLAG_MAIN_22_552", "FLAG_MAIN_22_553") then
    Flg.Set("FLAG_MAIN_22_553")
    local nani00_fe02 = Motion.Object:new(NPC, "npc_900", "fe02")
    local nani00_fe04 = Motion.Object:new(NPC, "npc_900", "fe04")
    local tlk = Tlk:new("d02", 1, true)
    tlk:StartTalkAndCancelDigimonRide()
    Cam.Inst:Set(0.12, 1.6, -49.53, 0.12, 3.31, -39.68, default, 15)
    WaitFrame(15)
    nani00_fe02:Play(10, true)
    tlk:Message("f_d0204_0590_0010")
    tlk:EndTalk()
    SetControlScriptExternalVariable("berufe_state", "move")
    WaitFrame(90)
    nani00_fe04:Play(10, true)
    Guest.Add(GST_NANIMON)
    Flg.Set("FLAG_MAIN_22_550")
    EncountFromField_WithNormalEffect(11901200, 10980, false)
  end
end

function M440:Event_845()
  if Flg.Check("FLAG_MAIN_22_516", "FLAG_MAIN_22_555") then
    Cam.Inst:Clear(0)
    FieldObjectSync(FOR_ALL, false)
    Obj:new(PLAYER, ""):SetPos(-0.284, 0.054, -29.799, true)
    Obj:new(PLAYER, ""):SetRotationY(0, 0)
    Cam.Inst:Set(-0.63, 2.82, -38.21, 0.45, 1.25, -28.4, default, 1)
    WaitFrame(3)
    Guest.Delete(GST_NANIMON)
    Common.SetDigimonGraspState(375, DIGIMON_GRASP_FLAG_SCAN)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    local npc_index01 = GetIndex(NPC, "npc_901")
    local merukuri_e013 = Motion.Object:new(NPC, "npc_901", "e013")
    local merukuri_e012 = Motion.Object:new(NPC, "npc_901", "e012")
    local merukuri_e008 = Motion.Object:new(NPC, "npc_901", "e008")
    local merukuri_fn01_01 = Motion.Object:new(NPC, "npc_901", "fn01_01")
    local npc_index02 = GetIndex(NPC, "npc_902")
    local nani_fe02 = Motion.Object:new(NPC, "npc_902", "fe02")
    local nani_fe03 = Motion.Object:new(NPC, "npc_902", "fe03")
    local nani_fe04 = Motion.Object:new(NPC, "npc_902", "fe04")
    local nani_bn01 = Motion.Object:new(NPC, "npc_902", "bn01")
    local tlk = Tlk:new("d02", 1, true)
    tlk:StartTalkAndCancelDigimonRide()
    tlk:Message("f_d0204_0600_0010")
    merukuri_fn01_01:Play(15, true)
    nani_fe04:Play(10, true)
    tlk:Message("f_d0204_0600_0020")
    merukuri_e013:Play(15, true)
    Field.ObjectLookAtTheObject(NPC, npc_index01, FLD_OBJ_GIMMICK, GetIndex(FLD_OBJ_GIMMICK, "lookat_01"), 15)
    tlk:Message("f_d0204_0600_0030")
    nani_bn01:Play(10, true)
    Field.ObjectLookAtTheObject(NPC, npc_index02, FLD_OBJ_NPC, GetIndex(FLD_OBJ_NPC, "npc_901"), 15)
    tlk:Message("f_d0204_0600_0040")
    Field.ObjectResetAim(NPC, npc_index02, 15)
    merukuri_fn01_01:Play(25, true)
    Field.ObjectResetAim(NPC, npc_index01, 15)
    tlk:Message("f_d0204_0600_0050")
    merukuri_e013:Play(15, true)
    tlk:Message("f_d0204_0600_0070")
    nani_fe03:Play(10, true)
    tlk:Message("f_d0204_0600_0080")
    Field.ObjectLookAtTheObject(NPC, npc_index01, FLD_OBJ_GIMMICK, GetIndex(FLD_OBJ_GIMMICK, "lookat_01"), 15)
    tlk:Message("f_d0204_0600_0090")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, npc_index02, "fe02", 5, 10)
    Field.ObjectLookAtTheObject(NPC, npc_index02, FLD_OBJ_NPC, GetIndex(FLD_OBJ_NPC, "npc_901"), 15)
    tlk:Message("f_d0204_0600_0100")
    Field.ObjectResetAim(NPC, npc_index01, 15)
    Flg.Set("FLAG_MAIN_22_543")
    Flg.Set("FLAG_MAIN_22_555")
    tlk:EndTalk()
    Flg.Set("FLAG_SKIP_PLAYBGM_MAPCHANGE")
    Execute("m440_018")
    Flg.Clear("FLAG_IS_DISPLAYED_MAP_NAME_UI")
    MapChangeWithTimeTravel("d", 907, "start_00", AXIS_ORIGINAL, "P2028_daft_447", NOON)
  end
end

function M440:Event_850()
  if Flg.Check("FLAG_MAIN_22_555", "FLAG_MAIN_22_560") then
    Flg.Set("FLAG_MAIN_22_560")
    Common.SetExistPartyAegiomon(true)
    Guest.Add(GST_HEROINE)
    Obj:new(FLD_OBJ_LOCATOR, "theater_0001"):Invisible()
    Execute("m440_020")
    Obj:new(PLAYER, ""):SetPos(10.385, 0, -0.956, true)
    Obj:new(PLAYER, ""):SetRotationYToObject(NPC, "npc_0010", 0)
    SetFollowerCameraOperateRotation(0, 20)
    Obj:new(FLD_OBJ_LOCATOR, "theater_0001"):CancelInvisible()
    PlayDungeonBGM()
    Digimon.RestoreAllParty()
    if Flg.Check("FLAG_IS_GAME_CLEAR") then
      Quest.Receive(self.ID)
    end
    Qst.Main:Set(self.ID, self.STEP_185)
  end
end

function M440:Event_860()
  if Qst.Main:Check(self.ID, self.STEP_185, self.STEP_190) then
    local npc_0013 = Obj:new(NPC, "npc_0013")
    local npc_index01 = GetIndex(NPC, "npc_0013")
    Field.ObjectLoadMotion(NPC, npc_index01, "fn01_01")
    Field.ObjectLoadMotion(NPC, npc_index01, "ft02_02")
    Field.ObjectLoadMotion(NPC, npc_index01, "e004_01")
    Field.ObjectLoadMotion(NPC, npc_index01, "e216")
    Field.ObjectLoadMotionBlend(NPC, npc_index01, "blend01")
    Field.ObjectLoadMotionBlend(NPC, npc_index01, "blend02")
    Field.ObjectLoadExpression(NPC, npc_index01, "F01")
    Field.ObjectLoadMotion(PLAYER, 1, "fg07_m02")
    Field.ObjectLoadMotion(PLAYER, 1, "e216")
    Field.ObjectLoadMotionBlend(PLAYER, 1, "blend01")
    local player_e002_01 = Motion.Object:new(PLAYER, "", "e002_01")
    local player_fn01_01 = Motion.Object:new(PLAYER, "", "fn01_01")
    local npc_index02 = GetIndex(NPC, "npc_0014")
    Field.ObjectLoadMotion(NPC, npc_index02, "e004")
    Field.ObjectSuspendAutoTransparent(NPC, npc_index02, AUTO_TRANSPARENT_TYPE_ALL)
    Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
    WaitFrame(15)
    Cam.Inst:Set(7.797, -0, -18.289, 7.318, 1.605, -8.431, default, 0)
    SetControlScriptExternalVariable("PlayerMove_Event_860", "start")
    WaitFrame(5)
    Field.ObjectSetPos(FLD_OBJ_PLAYER, 1, 5.593, 0, -7.712)
    Field.ObjectSetRotationY(FLD_OBJ_PLAYER, 1, 0, 0)
    WaitFrame(5)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    Field.ObjectFrameMoveToTarget2D(PLAYER, 1, 6.51, -10.641, 1.5, 60)
    WaitFrame(30)
    Field.ObjectLookAtTheObject(NPC, npc_index02, PLAYER, 1, 30, 2)
    WaitFrame(45)
    local tlk = Tlk:new("d09", 1, true)
    tlk:StartTalkAndCancelDigimonRide()
    Field.ObjectLookAtTheObject(NPC, npc_index02, NPC, npc_index01, 30, 2)
    if not Flg.Check("FLAG_MAIN_22_570") then
      Flg.Set("FLAG_MAIN_22_570")
      tlk:Message("f_d0907_0110_0010")
      tlk:Message("f_d0907_0110_0020")
    end
    tlk:Message("f_d0907_0110_0030")
    tlk:MessageClose()
    Field.ObjectPlayMotion(NPC, npc_index01, "ft02_02", 15, true)
    npc_0013:SetRotationYToPlayer(60)
    WaitFrame(60)
    Field.ObjectPlayMotion(NPC, npc_index01, "fn01_01", 15, true)
    Field.ObjectLookAtTheObject(NPC, npc_index01, PLAYER, 1, 30, 2)
    Field.ObjectLookAtTheObject(NPC, npc_index02, PLAYER, 1, 30, 2)
    local result = tlk:Select(2, "f_d0907_0110_0040")
    if result == RESULT_TALK00 then
      WaitFrame(15)
      local pos = Field.ObjectGetPosition(NPC, npc_index01)
      Field.ObjectLookAt(PLAYER, 1, pos.x, pos.y + 1.5, pos.z, 30, 2)
      Field.ObjectPlayMotionBlend(PLAYER, 1, "blend01", 10, false)
      WaitFrame(30)
      Field.ObjectLookAtTheObject(NPC, npc_index02, NPC, npc_index01, 30, 2)
      WaitFrame(15)
      Field.ObjectPlayMotionBlend(NPC, npc_index01, "blend02", 10, false)
      tlk:Message("f_d0907_0110_0050")
      Field.ObjectPlayMotionBlend(NPC, npc_index01, "blend01", 10, false)
      tlk:Message("f_d0907_0110_0060")
      Field.ObjectEndPlayingMotionBlend(NPC, npc_index01)
      Field.ObjectPlayMotion(NPC, npc_index01, "e004_01", 10, true)
      tlk:Message("f_d0907_0110_0070")
      Field.ObjectPlayMotion(NPC, npc_index01, "e216", 10, true)
      tlk:Message("f_d0907_0110_0080")
      tlk:MessageClose()
      Field.ObjectFrameMoveToTarget2D(PLAYER, 1, 6.58, -11.342, 1.5, 30)
      WaitFrame(45)
      Field.ObjectPlayMotion(PLAYER, 1, "e216", 10, true)
      WaitFrame(15)
      Field.ObjectPlayMotion(NPC, npc_index02, "e004", 10, true)
      WaitFrame(15)
      Qst.Main:Set(self.ID, self.STEP_190)
      Fade_OutNoLoadingWithWait(FADE_WHITE, FADE_TIME)
      PlaySE(404003, 100)
      WaitFrame(10)
      tlk:EndTalk()
      EncountFromField(12000200, 10990, true)
    elseif result == RESULT_TALK01 then
      Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
      WaitFrame(15)
      Field.ObjectPlayMotion(NPC, npc_index01, "fn01_01", 10, true)
      Field.ObjectSetRotationY(NPC, npc_index01, 0, 0)
      Field.ObjectSetPos(FLD_OBJ_PLAYER, 1, 6.694, 0, -0.822)
      Field.ObjectSetRotationY(FLD_OBJ_PLAYER, 1, 0, 0)
      SetControlScriptExternalVariable("PlayerMove_Event_860", "end")
      WaitFrame(15)
      tlk:EndTalk()
      Cam.Inst:Clear(0)
      FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    end
  end
end

function M440:Event_865()
  if Qst.Main:Check(self.ID, self.STEP_190, self.STEP_255) and Flg.Check("FLAG_MAIN_22_565", "FLAG_MAIN_22_580") then
    Qst.Main:End(self.ID, self.STEP_255)
    Flg.Set("FLAG_SKIP_PLAYBGM_MAPCHANGE")
    Flg.Set("FLAG_IS_NOT_MAP_NAME_DISP")
    Digimon.RestoreAllParty()
    MapChange("e", 7, "start_00", false, FADE_WHITE, FADE_TIME)
  end
end

function M440:Event_867()
  if Flg.Check("FLAG_MAIN_22_565", "FLAG_MAIN_22_590") then
    Execute("m440_130")
    Execute("m440_150")
    Flg.Set("FLAG_SKIP_PLAYBGM_MAPCHANGE")
    MapChangeWithTimeTravel("e", 8, "start_00", AXIS_ORIGINAL, "P2020_dbef_450", NOON)
  end
end

function M440:Event_880()
  if Flg.Check("FLAG_MAIN_22_565", "FLAG_MAIN_22_590") then
    Execute("m450_020")
    Flg.Set("FLAG_MAIN_22_590")
    self.Event_870()
  end
end

function M440:Event_870()
  if Flg.Check("FLAG_MAIN_22_590", "FLAG_MAIN_22_580") then
    Flg.Set("FLAG_MAIN_22_580")
    Flg.Set("FLAG_SKIP_PLAYBGM_MAPCHANGE")
    Flg.Clear("FLAG_FIELD_D406_CORELIGHTOFF")
    Flg.Clear("FLAG_FIELD_D406_CORESLOW")
    MapChange("d", 406, "start_00", false, FADE_WHITE, FADE_TIME)
  end
end

function M440:Event_890()
  if Flg.Check("FLAG_MAIN_22_580", "FLAG_MAIN_22_600") then
    Execute("m450_010")
    Flg.Set("FLAG_MAIN_22_600")
    Flg.Set("FLAG_SKIP_PLAYBGM_MAPCHANGE")
    MapChangeWithTimeTravel("d", 907, "start_00", AXIS_ORIGINAL, "P2028_daft_447", NOON)
  end
end

function M440:Event_900()
  if Flg.Check("FLAG_MAIN_22_600") then
    HideMinimap(true)
    HideGuide(true)
    Story.OpenGameClearBG()
    WaitFrame(10)
    Fade_In(FADE_WHITE, 10)
    WaitFrame(10)
    Flg.Set("FLAG_IS_GAME_CLEAR")
    Flg.Set("FLAG_IS_RELEASE_THEMESONG")
    Flg.Clear("FLAG_MAIN_22_560")
    Flg.Clear("FLAG_MAIN_22_565")
    Flg.Clear("FLAG_MAIN_22_570")
    Flg.Clear("FLAG_MAIN_22_580")
    Flg.Clear("FLAG_MAIN_22_590")
    Flg.Clear("FLAG_MAIN_22_600")
    Flg.Clear("QUEST_M440_CLEAR")
    Flg.Set("FLAG_FIELD_D406_CORELIGHTOFF")
    Flg.Set("FLAG_FIELD_D406_CORESLOW")
    Flg.Clear("FLAG_IS_NOT_MAP_NAME_DISP")
    Quest.ClearMainFlag(self.ID, self.STEP_190)
    Quest.ClearMainFlag(self.ID, self.STEP_255)
    Qst.Main:Set(self.ID, self.STEP_185)
    Quest.Retreat(QUEST_GUIDE_MAIN, self.ID, 390, true)
    Field.StartAutoSave(true)
    while Save.IsOpenEnable() == false do
      WaitFrame(1)
    end
    Save.Open(1)
    WaitFrame(1)
    while not Save.IsClosed() do
      WaitFrame(1)
    end
    Fade_OutNoLoadingWithWait(FADE_WHITE, FADE_TIME)
    WaitFrame(15)
    Story.CloseGameClearBG()
    WaitFrame(1)
    Field.ToTitle()
  end
end

function M440:ChapterFlagSet(progress)
  local step = {}
  if 30 <= progress then
    step[#step + 1] = self.STEP_001
    step[#step + 1] = self.STEP_002
    step[#step + 1] = self.STEP_003
  end
  if 50 <= progress then
    step[#step + 1] = self.STEP_004
    step[#step + 1] = self.STEP_005
    step[#step + 1] = self.STEP_006
    step[#step + 1] = self.STEP_010
    step[#step + 1] = self.STEP_012
  end
  if 70 <= progress then
    step[#step + 1] = self.STEP_013
    step[#step + 1] = self.STEP_015
  end
  if 80 <= progress then
    step[#step + 1] = self.STEP_020
    step[#step + 1] = self.STEP_022
    step[#step + 1] = self.STEP_025
    step[#step + 1] = self.STEP_035
    step[#step + 1] = self.STEP_040
    step[#step + 1] = self.STEP_045
    step[#step + 1] = self.STEP_050
    step[#step + 1] = self.STEP_055
    step[#step + 1] = self.STEP_057
    step[#step + 1] = self.STEP_058
    step[#step + 1] = self.STEP_075
  end
  if 90 <= progress then
    step[#step + 1] = self.STEP_080
  end
  if 110 <= progress then
    step[#step + 1] = self.STEP_095
    step[#step + 1] = self.STEP_097
    step[#step + 1] = self.STEP_099
    step[#step + 1] = self.STEP_101
    step[#step + 1] = self.STEP_103
    step[#step + 1] = self.STEP_105
    step[#step + 1] = self.STEP_107
    step[#step + 1] = self.STEP_109
    step[#step + 1] = self.STEP_111
    step[#step + 1] = self.STEP_113
  end
  if 130 <= progress then
    step[#step + 1] = self.STEP_125
    step[#step + 1] = self.STEP_126
    step[#step + 1] = self.STEP_127
    step[#step + 1] = self.STEP_132
  end
  if 150 <= progress then
    step[#step + 1] = self.STEP_133
    step[#step + 1] = self.STEP_135
    step[#step + 1] = self.STEP_140
  end
  if 170 <= progress then
    step[#step + 1] = self.STEP_150
    step[#step + 1] = self.STEP_185
  end
  if 180 <= progress then
    step[#step + 1] = self.STEP_190
    Flg.Set("FLAG_MAIN_22_565")
    Flg.Set("FLAG_MAIN_22_570")
  end
  Qst.Main:Chapter(step, self.ID)
end

require("include")

function m260_040()
  Fade_Out(0, 0)
  EVENT_BEGIN()
  Talk.Load("m260")
  SetEventCutNo(3)
  if Debug.IsEventView() then
    SetTimeZone("Noon")
    SetTimeAxis("A2028_daft_260")
    SetMapStatus("Disable")
    LoadMap("d0306")
  end
  LoadModel("HERO_01", "Player")
  LoadModel("HEROINE_01", "char_HEROINE")
  LoadModel("AEGIOMON_01", "char_AEGIOMON")
  LoadModel("chr162_01", "char_RANAMON")
  Vista.LoadAnimation("HERO_01", "e503")
  Vista.LoadAnimationFace("HERO_01", "e15", "m15")
  LoadSceneViewerResource("c1.0", "d0306f_sa")
  LoadSceneViewerResource("c2.0", "d0306f_sa")
  LoadSceneViewerResource("c3.0", "d0306f_sa")
  LoadSceneViewerResource("c4.0", "d0306f_sa")
  LoadEnvironmentFile("c1.0", "es_m260_040_c1.0")
  LoadEnvironmentFile("c2.0", "es_m260_040_c2.0")
  LoadEnvironmentFile("c3.0", "es_m260_040_c3.0")
  LoadEnvironmentFile("c4.0", "es_m260_040_c4.0")
  WaitVistaLoad()
  Event_StopBGM(BGM_FADE_TIME, 0)
  SetPosition("HERO_01", 1.168, 80.7, -14.947, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 201, 0, "LINEAR", 0, 0)
  SetPosition("HEROINE_01", -1.172, 80.7, -14.947, "LINEAR", 0, 0)
  SetRotation("HEROINE_01", 0, 156.5, 0, "LINEAR", 0, 0)
  SetPosition("AEGIOMON_01", -0.107, 80.7, -14.616, "LINEAR", 0, 0)
  SetRotation("AEGIOMON_01", 0, 180, 0, "LINEAR", 0, 0)
  SetPosition("chr162_01", 0.022, 80.7, -16.706, "LINEAR", 0, 0)
  SetRotation("chr162_01", 0, -165, 0, "LINEAR", 0, 0)
  PlayMotion("HERO_01", "fn01_01", 0, true, 0)
  SetFace("HERO_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  PlayMotion("HEROINE_01", "fn01_01", 0, true, 0)
  SetFace("HEROINE_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  PlayMotion("AEGIOMON_01", "fn01_01", 0, true, 0)
  SetFace("AEGIOMON_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  PlayMotion("chr162_01", "e008", 0, true, 0)
  ChangeDigimonFace("chr162_01", EYE_EXPRESSION_NORMAL, 0)
  SetMouth("chr162_01", 1, 0, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", -70, 0, 0, true, "SCURVE", 0, 0)
  BlendEye("HEROINE_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HEROINE_01", -73, 0, 0, true, "SCURVE", 0, 0)
  BlendEye("AEGIOMON_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("AEGIOMON_01", -81, 0, 0, true, "SCURVE", 0, 0)
  BlendFaceDigi("chr162_01", -39, 0, 0, "SCURVE", 0, 0)
  SetEnv_All("c1.0", 0)
  SetCamera(3.439, 83.457, -7.941, 0, 38, "LINEAR", 0, false, 0, false)
  SetCameraTarget(1.285, 85.075, -18.289, "LINEAR", 0, false, 0, false)
  FIELD_SET()
  Field_InvisibleMob(FOR_ALL, INVISIBLE_KEY_EVENT, 0, false)
  EVENT_START()
  CUT("1.0")
  EndMotion("chr162_01", 0)
  PlayMotion("chr162_01", "fq01", 0, false, 40)
  SetFace("chr162_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  SetCamera(1.852, 81.126, -8.493, 0, 38, "LINEAR", 110, true, 0, false)
  SetCameraTarget(-0.168, 82.577, -18.147, "LINEAR", 110, true, 0, false)
  SetMobTransparentRange(2000, 1000, 2000)
  local slot_01 = Event_PlaySE(403054, 100, false, 1, 0)
  Fade_In(0, 45)
  WaitFrame(90)
  Event_Quake_Start(0.5, 0.5, 10, 0)
  Event_Quake_Start(0.5, 0, 30, 15)
  WaitFrame(65)
  PlayMotion("chr162_01", "e004", 0, false, 0)
  PlayMotion("chr162_01", "bn01", 0, true, 120)
  BlendFace("HERO_01", 9, 15, 0, true, "SCURVE", 40, 20)
  BlendFace("HEROINE_01", 13, -10, 0, true, "SCURVE", 45, 25)
  BlendFace("AEGIOMON_01", -28, 0, 0, true, "SCURVE", 35, 20)
  MessageTalk("m260_040_010")
  MessageClose()
  Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
  CUT("2.0")
  SetEnv_All("c2.0", 0)
  SetPosition("HERO_01", -6.79, 80.7, -6.468, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, -15.5, 0, "LINEAR", 0, 0)
  SetPosition("HEROINE_01", -7.418, 80.7, -0.762, "LINEAR", 0, 0)
  SetRotation("HEROINE_01", 0, -24.5, 0, "LINEAR", 0, 0)
  SetPosition("AEGIOMON_01", -6.256, 80.7, -1.923, "LINEAR", 0, 0)
  SetRotation("AEGIOMON_01", 0, -33, 0, "LINEAR", 0, 0)
  SetPosition("chr162_01", -8.313, 80.584, 1.223, "LINEAR", 0, 0)
  SetRotation("chr162_01", 0, -15.5, 0, "LINEAR", 0, 0)
  SetFace("AEGIOMON_01", "F02", 0, 1, FACE_BLENDTIME, 0)
  PlayMotion("chr162_01", "fw01_01", 0, true, 0)
  SetFace("chr162_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", 0, 0, 0, false, "SCURVE", 0, 0)
  BlendEye("HEROINE_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HEROINE_01", 0, 0, 0, false, "SCURVE", 0, 0)
  BlendEye("AEGIOMON_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("AEGIOMON_01", 0, 0, 0, false, "SCURVE", 0, 0)
  BlendFaceDigi("chr162_01", 0, 0, 0, "SCURVE", 0, 0)
  SetCamera(-8.487, 81.652, 3.881, 0, 27, "LINEAR", 0, false, 0, false)
  SetCameraTarget(-6.912, 81.498, -6.408, "LINEAR", 0, false, 0, false)
  SetMobTransparentRange(2000, 500, 2000)
  SetCamera(-7.427, 81.312, 3.881, 0, 27, "LINEAR", 120, true, 0, false)
  SetCameraTarget(-8.792, 81.838, -6.408, "LINEAR", 120, true, 0, false)
  SetMobTransparentRange(2000, 500, 2000)
  Fade_In(FADE_BLACK, FADE_TIME)
  SetPosition("chr162_01", -10.156, 80.584, 4.383, "LINEAR", 100, 0)
  SetRotation("chr162_01", 0, -15.5, 0, "LINEAR", 100, 0)
  MovePosition("HEROINE_01", -9.872, 80.7, 4.043, true, 1.2, 0)
  MoveRotation("HEROINE_01", 0, -24.5, 0, "LINEAR", 1.2, true, 0)
  MovePosition("AEGIOMON_01", -9.907, 80.7, 4.585, true, 1.2, 0)
  MoveRotation("AEGIOMON_01", 0, -33, 0, "LINEAR", 1.2, true, 0)
  MovePosition("HERO_01", -7.534, 80.7, -3.378, false, 1.1, 0)
  MoveRotation("HERO_01", 0, -13.43, 0, "LINEAR", 1.1, true, 0)
  WaitFrame(90)
  Event_PlaySE(500006, 100, false, 0, 0)
  MOVE_WAIT("HERO_01")
  CAM_POS_WAIT(0)
  CUT("3.0")
  SetEnv_All("c3.0", 0)
  SetCamera(-7.17, 81.999, -0.456, 0, 23, "LINEAR", 0, false, 0)
  SetCameraTarget(-7.775, 82.165, -2.073, "LINEAR", 0, false, 0)
  SetMobTransparentRange(2000, 1000, 2000)
  ModelVisible("HIROINE_01", false, 0, 0)
  ModelVisible("AEGIOMON_01", false, 0, 0)
  ModelVisible("chr162_01", false, 0, 0)
  SetPosition("HERO_01", -7.59, 80.7, -1.938, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, -13, 0, "LINEAR", 0, 0)
  BlendEye("HERO_01", 20, -30, "SCURVE", 8, 10)
  PlayMotion("HERO_01", "e503", 4, true, 0)
  WaitFrame(40)
  Event_PlaySE(402002, 100, false, 0, 0)
  WaitFrame(15)
  MessageTalk("m260_040_020")
  MessageClose()
  WaitFrame(10)
  CUT("4.0")
  SetFace("HERO_01", "F15", 0, 1, 6, 30)
  MessageTalk("m260_040_030")
  MessageTalk("m260_040_040")
  MessageClose()
  WaitFrame(10)
  Fade_OutNoLoadingWithWait(0, 30)
  EVENT_END()
end

function CUT(cut_no)
  CUT_START(cut_no)
end

function main()
  m260_040()
end

require("include")

function m340_021()
  Fade_Out(0, 0)
  EVENT_BEGIN()
  Talk.Load("m340")
  SetEventCutNo(5)
  if Debug.IsEventView() then
    SetTimeZone("Night")
    SetTimeAxis("A2028_daft_340")
    SetMapStatus("Disable")
    LoadMap("t0304")
  end
  LoadModel("HERO_01", "Player")
  LoadModel("chr020_01", "char_TYUMON")
  Load_DigiviceHologram()
  LoadSceneViewerResource("c1.0", "t0304f_cn")
  LoadSceneViewerResource("c2.0", "t0304f_cn")
  LoadSceneViewerResource("c3.0", "t0304f_cn")
  LoadSceneViewerResource("c4.0", "t0304f_cn")
  LoadSceneViewerResource("c5.0", "t0304f_cn")
  LoadEnvironmentFile("c1.0", "es_m340_021_c1.0")
  LoadEnvironmentFile("c2.0", "es_m340_021_c2.0")
  LoadEnvironmentFile("c3.0", "es_m340_021_c3.0")
  LoadEnvironmentFile("c4.0", "es_m340_021_c4.0")
  LoadEnvironmentFile("c5.0", "es_m340_021_c5.0")
  WaitVistaLoad()
  Set_DigiviceHologram()
  NpcInvisible(FOR_ALL)
  SetMobTransparentRange(1000, 1000, 1000)
  SetPosition("HERO_01", -11.147, 0.002, 67.449, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, -129.5, 0, "LINEAR", 0, 0)
  SetPosition("chr020_01", -12.824, 1.221, 66.061, "LINEAR", 0, 0)
  SetRotation("chr020_01", 0, 70, 0, "LINEAR", 0, 0)
  PlayMotion("HERO_01", "fn01_01", 0, true, 0)
  SetFace("HERO_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  PlayMotion("chr020_01", "bn01", 0, true, 0)
  SetFace("chr020_01", "F03_M01", 0, 2, FACE_BLENDTIME, 0)
  SetMouth("chr020_01", 2, 0, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", -12, 0, 0, true, "SCURVE", 0, 0)
  BlendFaceDigi("chr020_01", 0, 0, 0, "SCURVE", 0, 0)
  FIELD_SET()
  EVENT_START()
  CUT("1.0")
  SetEnv_All("c1.0", 0)
  SetCamera(-10.482, 1.55, 69.55, 0, 27, "LINEAR", 0, false, 0)
  SetCameraTarget(-11.58, 1.359, 67.125, "LINEAR", 0, false, 0)
  Fade_In(FADE_BLACK, FADE_TIME)
  WaitFrame(10)
  PlayMotion("chr020_01", "fq01", 3, false, 0)
  PlayMotion("chr020_01", "bn01", 1, true, 60)
  MessageTalk("m340_021_010")
  MessageClose()
  WaitFrame(10)
  CUT("2.0")
  SetEnv_All("c2.0", 0)
  SetCamera(-12.191, 1.567, 67.422, 0, 27, "LINEAR", 0, false, 0)
  SetCameraTarget(-12.821, 1.458, 66.04, "LINEAR", 0, false, 0)
  WaitFrame(10)
  MessageTalk("m340_021_020")
  MessageClose()
  WaitFrame(10)
  CUT("3.0")
  SetEnv_All("c3.0", 0)
  SetFace("HERO_01", "E15_M16", 0, 1, 0, 0)
  BlendEye("HERO_01", 0, 9, "SCURVE", 10, 10)
  BlendFace("HERO_01", -1, -5, 0, true, "SCURVE", 30, 0)
  SetCamera(-14.31, 1.696, 65.764, 0, 27, "SCURVE", 0, false, 0)
  SetCameraTarget(-11.438, 1.27, 66.665, "SCURVE", 0, false, 0)
  WaitFrame(30)
  PlayMotion("chr020_01", "fq02", 3, false, 0)
  PlayMotion("chr020_01", "bn01", 1, true, 60)
  MessageTalk("m340_021_030")
  BlendEye("HERO_01", 0, 0, "SCURVE", 10, 30)
  BlendFace("HERO_01", -12, 0, 0, true, "SCURVE", 50, 10)
  SetFace("HERO_01", "F15", 0, 1, FACE_BLENDTIME, 30)
  MessageTalk("m340_021_040")
  MessageClose()
  WaitFrame(10)
  CUT("4.0")
  SetEnv_All("c4.0", 0)
  SetCamera(-10.482, 1.55, 69.55, 0, 27, "LINEAR", 0, false, 0)
  SetCameraTarget(-11.58, 1.359, 67.125, "LINEAR", 0, false, 0)
  WaitFrame(10)
  MessageTalk("m340_021_050")
  MessageClose()
  WaitFrame(30)
  Fade_OutNoLoadingWithWait(FADE_BLACK, 30)
  WaitFrame(30)
  local SE_01 = Event_PlaySE(500006, 100, true, 0, 0)
  WaitFrame(30)
  CUT("5.0")
  SetEnv_All("c5.0", 0)
  BlendEye("HERO_01", 13, 0, "SCURVE", 10, 10)
  BlendFace("HERO_01", 0, 0, 0, true, "SCURVE", 50, 0)
  SetCamera(-12.705, 1.374, 67.066, 0, 23, "LINEAR", 0, false, 0)
  SetCameraTarget(-10.542, 1.495, 67.434, "LINEAR", 0, false, 0)
  Event_StopSE(SE_01, 0.2, 3)
  Fade_In(FADE_BLACK, 30)
  local slot_02 = Event_PlaySE(402002, 100, false, 0, 3)
  Play_DigiviceHologram()
  WaitFrame(30)
  PlayMotion("Horo_AGENT", "e002", 8, true, 0)
  MessageTalk("m340_021_060")
  MessageTalk("m340_021_070")
  PlayMotionBlend("Horo_AGENT", "blend05", 3, false, 0)
  MessageTalk("m340_021_080")
  MessageClose()
  WaitFrame(30)
  Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
  Event_StopSE(SE_01, 0, 0)
  Vista.SetKeepBGM()
  EVENT_END()
end

function CUT(cut_no)
  CUT_START(cut_no)
end

function main()
  m340_021()
end

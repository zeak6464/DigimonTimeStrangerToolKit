require("include")

function m040_100()
  Fade_Out(0, 0)
  EVENT_BEGIN()
  Talk.Load("m040")
  SetEventCutNo(11)
  if Debug.IsEventView() then
    SetTimeZone("Night")
    SetTimeAxis("A2020_dbef_40")
    LoadMap("d1102")
  end
  LoadModel("HERO_01", "Player")
  LoadModel("TAKEMIYA_01", "char_HEROINES_FATHER")
  LoadModel("HEROINE_01", "char_HEROINE")
  LoadSceneViewerResource("c1.0", "d1102f_ca")
  LoadSceneViewerResource("c2.0", "d1102f_ca")
  LoadSceneViewerResource("c3.0", "d1102f_ca")
  LoadSceneViewerResource("c4.0", "d1102f_ca")
  LoadSceneViewerResource("c5.0", "d1102f_ca")
  LoadSceneViewerResource("c6.0", "d1102f_ca")
  LoadSceneViewerResource("c7.0", "d1102f_ca")
  LoadSceneViewerResource("c8.0", "d1102f_ca")
  LoadSceneViewerResource("c9.0", "d1102f_ca")
  LoadSceneViewerResource("c10.0", "d1102f_ca")
  LoadSceneViewerResource("c11.0", "d1102f_ca")
  LoadEnvironmentFile("c1.0", "es_m040_100_c1.0")
  LoadEnvironmentFile("c2.0", "es_m040_100_c2.0")
  LoadEnvironmentFile("c3.0", "es_m040_100_c3.0")
  LoadEnvironmentFile("c4.0", "es_m040_100_c4.0")
  LoadEnvironmentFile("c5.0", "es_m040_100_c5.0")
  LoadEnvironmentFile("c6.0", "es_m040_100_c6.0")
  LoadEnvironmentFile("c7.0", "es_m040_100_c7.0")
  LoadEnvironmentFile("c8.0", "es_m040_100_c8.0")
  LoadEnvironmentFile("c9.0", "es_m040_100_c9.0")
  LoadEnvironmentFile("c10.0", "es_m040_100_c10.0")
  LoadEnvironmentFile("c11.0", "es_m040_100_c11.0")
  WaitVistaLoad()
  SetPosition("HERO_01", 73.557, 2.987, 40.02, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 281.599, 0, "LINEAR", 0, 0)
  SetScale("HERO_01", 1, 1, 1)
  SetPosition("TAKEMIYA_01", 73.217, 2.987, 38.376, "LINEAR", 0, 0)
  SetRotation("TAKEMIYA_01", 0, -17, 0, "LINEAR", 0, 0)
  SetPosition("HEROINE_01", 72.708, 2.987, 40.78, "LINEAR", 0, 0)
  SetRotation("HEROINE_01", 0, -211.5, 0, "LINEAR", 0, 0)
  SetScale("HEROINE_01", 1, 1, 1)
  PlayMotion("HERO_01", "fn01_01", 0, true, 0)
  SetStartFrame("HERO_01", "fn01_01", 0, 0)
  PlayMotion("TAKEMIYA_01", "fw01_01", 0, true, 0)
  SetFace("TAKEMIYA_01", "E15_M01", 0, 1, 0, 0)
  PlayMotion("HEROINE_01", "fn01_01", 0, true, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", 29, -52, 0, true, "SCURVE", 0, 0)
  BlendEye("TAKEMIYA_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("TAKEMIYA_01", 0, 0, 0, true, "SCURVE", 0, 0)
  BlendEye("HEROINE_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HEROINE_01", 27, 10, 0, false, "SCURVE", 0, 0)
  SetCamera(70.697, 4.714, 41.394, 0, 29, "LINEAR", 0, false, 0)
  SetCameraTarget(72.908, 4.218, 40.122, "LINEAR", 0, false, 0)
  Event_StopBGM(0.3, 0)
  FIELD_SET()
  EVENT_START()
  CUT("1.0")
  SetEnv_All("c1.0", 0)
  SetPosition("TAKEMIYA_01", 73.007, 2.987, 39.246, "DECEL", 30, 0)
  SetRotation("TAKEMIYA_01", 0, -17, 0, "DECEL", 30, 0)
  Fade_In(0, FADE_TIME)
  PlayMotion("TAKEMIYA_01", "fn01_01", 15, true, 25)
  Event_PlaySE(210025, 100, false, 0, 0)
  Event_PlaySE(210025, 100, false, 0, 0.6)
  BlendFace("HERO_01", 0, -78, 0, true, "SCURVE", 30, 0)
  BlendFace("HEROINE_01", 0, 10, 0, true, "SCURVE", 30, 0)
  WaitFrame(10)
  MessageTalk("m040_100_010")
  MessageClose()
  WaitFrame(10)
  CUT("2.0")
  SetEnv_All("c2.0", 0)
  SetCamera(72.563, 4.659, 40.116, 0, 22, "LINEAR", 0, false, 0)
  SetCameraTarget(72.694, 4.425, 37.517, "LINEAR", 0, false, 0)
  SetCamera(72.563, 4.659, 40.116, 0, 24, "LINEAR", 80, true, 5)
  SetCameraTarget(72.694, 4.425, 37.517, "LINEAR", 80, true, 5)
  BlendEye("TAKEMIYA_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("TAKEMIYA_01", 0, -100, 0, true, "SCURVE", 30, 5)
  Vista.ApplyVoiceSnapshot(SOUND_SNAPSHOT_REVL)
  MessageTalk("m040_100_020")
  MessageClose()
  WaitFrame(10)
  SetCamera(72.563, 4.659, 40.116, 0, 30, "SCURVE", 60, true, 0)
  SetCameraTarget(73.464, 4.425, 37.517, "SCURVE", 60, true, 0)
  BlendEye("TAKEMIYA_01", 0, 0, "SCURVE", 30, 30)
  BlendFace("TAKEMIYA_01", 0, 23, 0, true, "SCURVE", 30, 30)
  SetFace("TAKEMIYA_01", "E15_M06", 0, 1, FACE_BLENDTIME, 0)
  MessageTalk("m040_100_030")
  MessageClose()
  WaitFrame(10)
  CUT("3.0")
  SetEnv_All("c3.0", 0)
  BlendEye("HEROINE_01", 4, 26, "SCURVE", 20, 0)
  BlendFace("HEROINE_01", 40, 44, 0, false, "SCURVE", 20, 0)
  Vista.SetCharCamera("HEROINE_01", "npc001a_cam_B.S_Right", "LINEAR", 0, false, 0)
  SetFace("HEROINE_01", "F11", 0, 1, 3, 0)
  MessageTalk("m040_100_040")
  MessageClose()
  WaitFrame(10)
  CUT("4.0")
  SetEnv_All("c4.0", 0)
  BlendEye("HEROINE_01", 0, 0, "SCURVE", 20, 0)
  BlendFace("HEROINE_01", 0, 22, 0, false, "SCURVE", 20, 0)
  BlendEye("TAKEMIYA_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("TAKEMIYA_01", 0, 0, 0, false, "SCURVE", 0, 0)
  SetFace("HEROINE_01", "F01", 0, 1, 5, 0)
  SetFace("TAKEMIYA_01", "F01", 0, 1, 0, 0)
  Vista.SetCharCamera("TAKEMIYA_01", "npc002a_cam_B.S_Left", "LINEAR", 0, false, 0)
  MessageTalk("m040_100_050")
  MessageClose()
  WaitFrame(10)
  CUT("5.0")
  SetEnv_All("c5.0", 0)
  BlendEye("HEROINE_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HEROINE_01", 0, 22, 0, false, "SCURVE", 0, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", 0, 46, 0, true, "SCURVE", 0, 0)
  BlendEye("TAKEMIYA_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("TAKEMIYA_01", 0, 0, 0, true, "SCURVE", 0, 0)
  SetPosition("HERO_01", 73.557, 2.987, 40.02, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 320.599, 0, "LINEAR", 0, 0)
  SetPosition("TAKEMIYA_01", 73.007, 2.987, 39.246, "LINEAR", 0, 0)
  SetRotation("TAKEMIYA_01", 0, -27, 0, "LINEAR", 0, 0)
  SetPosition("HEROINE_01", 72.641, 2.987, 40.713, "LINEAR", 0, 0)
  SetRotation("HEROINE_01", 0, -211.5, 0, "LINEAR", 0, 0)
  SetCamera(72.713, 4.549, 38.479, 0, 29, "LINEAR", 0, false, 0)
  SetCameraTarget(73.172, 4.329, 40.84, "LINEAR", 0, false, 0)
  PlayMotion("HEROINE_01", "e002", 5, true, 0)
  MessageTalk("m040_100_060")
  MessageClose()
  WaitFrame(10)
  CUT("6.0")
  SetEnv_All("c6.0", 0)
  Vista.SetCharCamera("TAKEMIYA_01", "npc002a_cam_B.S_Left", "LINEAR", 0, false, 0)
  PlayMotion("TAKEMIYA_01", "e002", 5, true, 0)
  SetFace("TAKEMIYA_01", "F03", 0, 1, 0, 0)
  SetFace("TAKEMIYA_01", "E03_M15", 0, 1, FACE_BLENDTIME, 45)
  MessageTalk("m040_100_070")
  MessageClose()
  WaitFrame(10)
  CUT("7.0")
  SetEnv_All("c7.0", 0)
  Vista.SetCharCamera("HEROINE_01", "npc001a_cam_B.S_Right", "LINEAR", 0, false, 0)
  PlayMotionBlend("HEROINE_01", "blend01", 0, false, 5)
  SetFace("HEROINE_01", "F16", 0, 2, 0, 0)
  BlendEye("HEROINE_01", 4, -44, "SCURVE", 30, 0)
  BlendFace("HEROINE_01", 0, -28, 0, true, "SCURVE", 30, 0)
  MessageTalk("m040_100_080")
  MessageClose()
  WaitFrame(10)
  CUT("8.0")
  SetEnv_All("c8.0", 0)
  SetPosition("HERO_01", 74.849, 2.979, 40.471, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 23.599, 0, "LINEAR", 0, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", 0, 0, 0, true, "SCURVE", 0, 0)
  SetPosition("HEROINE_01", 74.235, 2.979, 40.935, "LINEAR", 0, 0)
  SetRotation("HEROINE_01", 0, 58.5, 0, "LINEAR", 0, 0)
  BlendEye("HEROINE_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HEROINE_01", 0, 0, 0, true, "SCURVE", 0, 0)
  SetPosition("TAKEMIYA_01", 76.334, 3, 42.76, "LINEAR", 0, 0)
  SetRotation("TAKEMIYA_01", 0, -68, 0, "LINEAR", 0, 0)
  BlendEye("TAKEMIYA_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("TAKEMIYA_01", 0, -100, 0, true, "SCURVE", 0, 0)
  SetCamera(74.004, 4.452, 40.111, 0, 40, "LINEAR", 0, false, 0)
  SetCameraTarget(77.474, 4.263, 44.626, "LINEAR", 0, false, 0)
  PlayMotion("TAKEMIYA_01", "e013", 5, true, 0)
  SetFace("TAKEMIYA_01", "F01", 0, 1, 0, 0)
  MessageTalk("m040_100_090")
  MessageClose()
  WaitFrame(10)
  BlendEye("HEROINE_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HEROINE_01", -23, 70, 0, true, "SCURVE", 20, 0)
  SetFace("HEROINE_01", "F16", 0, 1, 5, 10)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", 0, -100, 0, true, "SCURVE", 20, 20)
  SetFace("HERO_01", "E16_M15", 0, 1, 5, 10)
  MessageTalk("m040_100_100")
  MessageClose()
  WaitFrame(10)
  CUT("9.0")
  SetEnv_All("c9.0", 0)
  BlendEye("TAKEMIYA_01", 0, -16, "SCURVE", 0, 0)
  BlendFace("TAKEMIYA_01", 0, -100, 0, true, "SCURVE", 20, 0)
  SetCamera(75.762, 4.569, 41.88, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(76.851, 4.568, 43.326, "LINEAR", 0, false, 0)
  SetFace("TAKEMIYA_01", "F15", 0, 1, 0, 0)
  MessageTalk("m040_100_110")
  MessageClose()
  WaitFrame(10)
  EndMotion("TAKEMIYA_01", 0)
  PlayMotionBlend("TAKEMIYA_01", "blend02", 0, false, 0)
  SetFace("TAKEMIYA_01", "F15", 2, 1, 5, 0)
  SetBlink("TAKEMIYA_01", 0, 0.5, 45)
  MessageTalk("m040_100_120")
  MessageClose()
  WaitFrame(10)
  CUT("10.0")
  SetEnv_All("c10.0", 0)
  SetPosition("HERO_01", 76.082, 3, 43.353, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 23.599, 0, "LINEAR", 0, 0)
  SetFace("HERO_01", "E01_M15", 0, 1, 0, 0)
  BlendEye("HERO_01", 0, 15, "SCURVE", 0, 0)
  BlendFace("HERO_01", 0, 0, 0, false, "SCURVE", 0, 0)
  SetPosition("HEROINE_01", 75.599, 3, 43.754, "LINEAR", 0, 0)
  SetRotation("HEROINE_01", 0, 56, 0, "LINEAR", 0, 0)
  SetFace("HEROINE_01", "F15", 0, 1, 0, 0)
  BlendEye("HEROINE_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HEROINE_01", 0, 0, 0, false, "SCURVE", 0, 0)
  SetCamera(77.027, 4.73, 44.296, 0, 29, "LINEAR", 0, false, 0)
  SetCameraTarget(75.26, 4.318, 43.297, "LINEAR", 0, false, 0)
  PlayMotionBlend("HEROINE_01", "blend01", 0, false, 0)
  SetFace("HEROINE_01", "F11", 0, 1, 3, 0)
  MessageTalk("m040_100_130")
  MessageClose()
  WaitFrame(10)
  CUT("11.0")
  SetEnv_All("c11.0", 0)
  SetPosition("TAKEMIYA_01", 78.983, 3, 50.346, "LINEAR", 0, 0)
  SetRotation("TAKEMIYA_01", 0, 90, 0, "LINEAR", 0, 0)
  SetPosition("HERO_01", 77.527, 3, 49.86, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 90, 0, "LINEAR", 0, 0)
  SetPosition("HEROINE_01", 78.085, 3, 50.987, "LINEAR", 0, 0)
  SetRotation("HEROINE_01", 0, 90, 0, "LINEAR", 0, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", 0, 0, 0, false, "SCURVE", 0, 0)
  BlendEye("TAKEMIYA_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("TAKEMIYA_01", 0, 0, 0, false, "SCURVE", 0, 0)
  MovePosition("TAKEMIYA_01", 91.063, 2.979, 50.346, false, 5, 0)
  MovePosition("HERO_01", 91.397, 2.979, 49.86, false, 5, 12)
  MovePosition("HEROINE_01", 91.785, 2.979, 50.987, false, 5, 5)
  SetCamera(69.534, 4.928, 50, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(86.059, 4.626, 50.27, "LINEAR", 0, false, 0)
  SetCamera(69.534, 4.828, 50, 0, 30, "LINEAR", 130, false, 0)
  SetCameraTarget(86.059, 4.806, 50.27, "LINEAR", 130, false, 0)
  WaitFrame(60)
  Vista.SetKeepBGM()
  Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
  WaitFrame(60)
  EVENT_END()
end

function CUT(cut_no)
  CUT_START(cut_no)
end

function main()
  m040_100()
end

require("include")

function m420_030()
  EVENT_BEGIN()
  Talk.Load("m420")
  SetEventCutNo(6)
  if Debug.IsEventView() then
    SetTimeAxis("P2028_daft_420")
    LoadMap("e0007")
  end
  LoadModel("HERO_01", "Player")
  Load_DigiviceHologram()
  LoadSceneViewerResource("c1.0", "e0007f_pa")
  LoadSceneViewerResource("c2.0", "e0007f_pa")
  LoadSceneViewerResource("c3.0", "e0007f_pa")
  LoadSceneViewerResource("c4.0", "e0007f_pa")
  LoadSceneViewerResource("c5.0", "e0007f_pa")
  LoadSceneViewerResource("c6.0", "e0007f_pa")
  LoadEnvironmentFile("c1.0", "es_m420_030_c1.0")
  LoadEnvironmentFile("c2.0", "es_m420_030_c2.0")
  LoadEnvironmentFile("c3.0", "es_m420_030_c3.0")
  LoadEnvironmentFile("c4.0", "es_m420_030_c4.0")
  LoadEnvironmentFile("c5.0", "es_m420_030_c5.0")
  LoadEnvironmentFile("c6.0", "es_m420_030_c6.0")
  WaitVistaLoad()
  Event_StopBGM(0.3, 0)
  Set_DigiviceHologram()
  SetPosition("HERO_01", 0.07, 0.506, -0.524, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 222.5, 0, "LINEAR", 0, 0)
  PlayMotion("HERO_01", "fd01_02", 0, true, 0)
  SetFace("HERO_01", "F04", 2, 1, FACE_BLENDTIME, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", 0, 0, 0, false, "SCURVE", 0, 0)
  SetCamera(0.657, 1.419, -0.397, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(0.804, 0.423, 0.361, "LINEAR", 0, false, 0)
  SetCamera(0.699, 1.136, -0.181, 0, 30, "LINEAR", 110, true, 0)
  SetCameraTarget(0.804, 0.423, 0.361, "LINEAR", 110, true, 0)
  FIELD_SET()
  EVENT_START()
  CUT("1.0")
  Event_PlayBGM(112, 0, 0.5)
  SetEnv_All("c1.0", 0)
  Fade_In(FADE_WHITE, 90)
  WaitFrame(75)
  SetFace("HERO_01", "F16", 0, 1, FACE_BLENDTIME, 0)
  WaitFrame(45)
  CUT("2.0")
  SetEnv_All("c2.0", 0)
  PlayMotion("HERO_01", "e076", 0, false, 0)
  PlayMotion("HERO_01", "fn01_01", 3, true, 187)
  SetFace("HERO_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  SetCamera(0.549, 1.249, 3.184, 0, 40, "LINEAR", 0, false, 0)
  SetCameraTarget(0.002, 1.65, -0.257, "LINEAR", 0, false, 0)
  WaitFrame(190)
  PlayMotion("HERO_01", "e013_01", 5, true, 0)
  SetFace("HERO_01", "F15", 0, 1, FACE_BLENDTIME, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", 0, -90, 0, true, "SCURVE", 40, 0)
  WaitFrame(50)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", 0, 87, 0, true, "SCURVE", 40, 0)
  WaitFrame(80)
  CUT("3.0")
  SetEnv_All("c3.0", 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 30, 0)
  BlendFace("HERO_01", 0, 0, 0, true, "SCURVE", 30, 0)
  SetPosition("HERO_01", 0, 0.506, 0, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 180, 0, "LINEAR", 0, 0)
  SetCamera(0.431, 1.889, -0.846, 0, 40, "LINEAR", 0, false, 0)
  SetCameraTarget(0.066, 1.964, -0.12, "LINEAR", 0, false, 0)
  WaitFrame(30)
  EndMotion("HERO_01", 0)
  BlendEye("HERO_01", 33, 31, "SCURVE", 30, 0)
  BlendFace("HERO_01", 26, 17, 0, true, "SCURVE", 30, 0)
  SetFace("HERO_01", "E01_M15", 0, 1, FACE_BLENDTIME, 0)
  local slot_id = Event_PlaySE(500006, 100, true, 0, 0)
  WaitFrame(35)
  SetFace("HERO_01", "E03_M15", 0, 1, FACE_BLENDTIME, 0)
  BlendEye("HERO_01", 39, 0, "SCURVE", 20, 0)
  BlendFace("HERO_01", 0, 0, 0, true, "SCURVE", 30, 0)
  Event_StopSE(slot_id, 0.2, 3)
  local slot_id = Event_PlaySE(402002, 100, false, 0, 3)
  Play_DigiviceHologram()
  SetFace("HERO_01", "F16", 0, 1, FACE_BLENDTIME, 10)
  WaitFrame(10)
  MessageTalk("m420_030_010")
  MessageClose()
  WaitFrame(10)
  SetFace("HERO_01", "F15", 0, 1, FACE_BLENDTIME, 40)
  CUT("4.0")
  SetEnv_All("c4.0", 0)
  SetCamera(0.91, 2.301, 0.389, 0, 25, "LINEAR", 0, false, 0)
  SetCameraTarget(-0.003, 1.889, -0.251, "LINEAR", 0, false, 0)
  MessageTalk("m420_030_020")
  MessageClose()
  WaitFrame(10)
  PlayMotion("Horo_AGENT", "e002", 5, true, 0)
  MessageTalk("m420_030_030")
  MessageClose()
  WaitFrame(10)
  CUT("5.0")
  SetEnv_All("c5.0", 0)
  SetCamera(0.218, 1.672, -0.794, 0, 40, "LINEAR", 0, false, 0)
  SetCameraTarget(-0.018, 1.982, -0.034, "LINEAR", 0, false, 0)
  WaitFrame(10)
  SetFace("HERO_01", "E03_M15", 0, 1, FACE_BLENDTIME, 40)
  MessageTalk("m420_030_040")
  PlayMotion("Horo_AGENT", "e013_01", 8, true, 0)
  MessageTalk("m420_030_050")
  MessageClose()
  WaitFrame(10)
  MessageTalk("m420_030_060")
  MessageClose()
  EndMotion("Horo_AGENT", 0)
  WaitFrame(10)
  CUT("6.0")
  SetEnv_All("c6.0", 0)
  SetCamera(0.91, 2.301, 0.389, 0, 25, "LINEAR", 0, false, 0)
  SetCameraTarget(-0.003, 1.889, -0.251, "LINEAR", 0, false, 0)
  PlayMotion("Horo_AGENT", "e002", 8, true, 0)
  MessageTalk("m420_030_070")
  MessageClose()
  WaitFrame(10)
  PlayMotionBlend("Horo_AGENT", "blend01", 3, false, 0)
  MessageTalk("m420_030_080")
  MessageClose()
  WaitFrame(10)
  SetCamera(0.382, 1.954, 0.845, 0, 40, "LINEAR", 0, false, 0)
  SetCameraTarget(0.195, 1.981, -0.188, "LINEAR", 0, false, 0)
  SetCamera(0.51, 1.936, 1.55, 0, 40, "LINEAR", 240, false, 0)
  SetCameraTarget(0.195, 1.981, -0.188, "LINEAR", 240, false, 0)
  Close_DigiviceHologram()
  WaitFrame(45)
  Fade_OutNoLoadingWithWait(FADE_WHITE, 75)
  if Debug.IsEventView() then
    Event_StopBGM(0, 0)
  end
  Vista.SetKeepBGM()
  Vista.SetKeepBGMWithMapChange()
  EVENT_END(1)
end

function CUT(cut_no)
  CUT_START(cut_no)
end

function main()
  m420_030()
end

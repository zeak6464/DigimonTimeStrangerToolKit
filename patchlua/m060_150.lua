require("include")

function m060_150()
  Fade_Out(0, 0)
  EVENT_BEGIN()
  Talk.Load("m060")
  SetEventCutNo(10)
  if Debug.IsEventView() then
    SetTimeZone("Noon")
    SetTimeAxis("A2020_dbef_60")
    LoadMap("d1103")
  end
  LoadModel("HERO_01", "Player")
  LoadModel("HEROINE_01", "char_HEROINE")
  LoadModel("HIROKO_01", "char_HIROKO")
  LoadModel("AEGIOMON_01", "char_AEGIOMON")
  LoadModel("CYCLONEMON_01", "char_CYCLONEMON_BIG")
  LoadEffectScript("ef_e_com_011_01", "ef_e_com_011")
  LoadDissolve("CYCLONEMON_01", 602)
  LoadSceneViewerResource("c1.0", "d1103f_ca")
  LoadSceneViewerResource("c1.5", "d1103f_ca")
  LoadSceneViewerResource("c2.0", "d1103f_ca")
  LoadSceneViewerResource("c3.0", "d1103f_ca")
  LoadSceneViewerResource("c4.0", "m060_150_c4.0")
  LoadSceneViewerResource("c5.0", "d1103f_ca")
  LoadSceneViewerResource("c6.0", "m060_150_c4.0")
  LoadSceneViewerResource("c7.0", "d1103f_ca")
  LoadSceneViewerResource("c8.0", "m060_150_c4.0")
  LoadSceneViewerResource("c9.0", "d1103f_ca")
  LoadSceneViewerResource("c10.0", "d1103f_ca")
  LoadEnvironmentFile("c1.0", "es_m060_150_c1.0")
  LoadEnvironmentFile("c1.5", "es_m060_150_c1.5")
  LoadEnvironmentFile("c2.0", "es_m060_150_c2.0")
  LoadEnvironmentFile("c3.0", "es_m060_150_c3.0")
  LoadEnvironmentFile("c4.0", "es_m060_150_c4.0")
  LoadEnvironmentFile("c5.0", "es_m060_150_c5.0")
  LoadEnvironmentFile("c6.0", "es_m060_150_c6.0")
  LoadEnvironmentFile("c7.0", "es_m060_150_c7.0")
  LoadEnvironmentFile("c8.0", "es_m060_150_c8.0")
  LoadEnvironmentFile("c9.0", "es_m060_150_c9.0")
  LoadEnvironmentFile("c10.0", "es_m060_150_c10.0")
  WaitVistaLoad()
  Event_StopBGM(2, 0)
  SetPosition("HERO_01", 2.486, 0, 8.37, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 209, 0, "LINEAR", 0, 0)
  SetPosition("HEROINE_01", 0.809, 0, 7.559, "LINEAR", 0, 0)
  SetRotation("HEROINE_01", 0, 178, 0, "LINEAR", 0, 0)
  SetPosition("HIROKO_01", 0.218, 0, 8.534, "LINEAR", 0, 0)
  SetRotation("HIROKO_01", 0, -181, 0, "LINEAR", 0, 0)
  SetPosition("AEGIOMON_01", 0.174, -0, 3.824, "LINEAR", 0, 0)
  SetRotation("AEGIOMON_01", 0, 180, 0, "LINEAR", 0, 0)
  SetPosition("CYCLONEMON_01", -0.418, 0, -4.061, "LINEAR", 0, 0)
  SetRotation("CYCLONEMON_01", 0, 0, 0, "LINEAR", 0, 0)
  SetPosition("ef_e_com_011_01", -1.381, 0, -0.255, "LINEAR", 0, 0)
  SetRotation("ef_e_com_011_01", 0, 0, 0, "LINEAR", 0, 0)
  SetScale("ef_e_com_011_01", 0.6, 0.6, 0.6)
  PlayMotion("HERO_01", "fn01_01", 0, true, 0)
  SetFace("HERO_01", "E03_M04", 0, 1, 0, 0)
  PlayMotion("HEROINE_01", "fn01_01", 0, true, 0)
  SetFace("HEROINE_01", "E05_M04", 0, 1, 0, 0)
  PlayMotion("HIROKO_01", "fn01_01", 0, true, 0)
  SetFace("HIROKO_01", "E05_M04", 0, 1, 0, 0)
  PlayMotion("AEGIOMON_01", "e018", 0, true, 0)
  SetFace("AEGIOMON_01", "F09", 0, 1, 0, 0)
  PlayMotion("CYCLONEMON_01", "bn02", 0, true, 0)
  ChangeDigimonFace("CYCLONEMON_01", EYE_EXPRESSION_CLOSE, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", 26, 0, 0, false, "SCURVE", 0, 0)
  BlendEye("HEROINE_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HEROINE_01", 28, 0, 0, false, "SCURVE", 0, 0)
  BlendEye("HIROKO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HIROKO_01", 0, 0, 0, true, "SCURVE", 0, 0)
  BlendEye("AEGIOMON_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("AEGIOMON_01", -29, 0, 0, false, "SCURVE", 0, 0)
  FIELD_SET()
  EVENT_START()
  CUT("1.0")
  SetEnv_All("c1.0", 0)
  SetCamera(-0.436, 3.477, 0.336, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(-0.124, 8, -14.043, "LINEAR", 0, false, 0)
  SetCamera(-0.436, 3.477, 0.336, 0, 52, "DECEL", 5, true, 3)
  SetCameraTarget(-0.124, 13.859, -14.043, "DECEL", 5, true, 3)
  PlayMotion("CYCLONEMON_01", "e214", 0, false, 0)
  SetFace("chr938_01", "F02", 0, 1, 0, 0)
  Event_Quake_Start(9, 1, 30, 0)
  Event_Quake_Stop(30)
  local SE_01 = Event_PlaySE(300104, 100, true, 0, 0)
  Event_PlaySE(300202, 80, true, 0, 0)
  Event_StopSE(SE_01, 0.8, 1.3)
  Fade_In(1, 3)
  WaitFrame(45)
  CUT("1.5")
  SetEnv_All("c1.5", 0)
  SetCamera(-6.123, 0.799, 2.518, 14, 40, "LINEAR", 0, false, 0, false)
  SetCameraTarget(7.789, 13.298, -15.839, "LINEAR", 0, false, 0, false)
  SetCamera(5.868, 1.092, 2.774, 0, 40, "SCURVE", 180, true, 0, false)
  SetCameraTarget(-10.194, 11.228, -14.047, "SCURVE", 180, true, 0, false)
  Event_PlaySE(404030, 100, false, 0, 0)
  Event_Quake_Start(4, 3, 170, 0)
  WaitFrame(20)
  Vista.PlayDissolve("CYCLONEMON_01", 602)
  PlayEffect("ef_e_com_011_01", false, 0)
  Event_Quake_Stop(200)
  WaitFrame(175)
  Event_PlayBGM(306, 0, 1)
  WaitFrame(45)
  ModelVisible("CYCLONEMON_01", false, 0, 0)
  CUT("2.0")
  SetEnv_All("c2.0", 0)
  PlayMotion("HERO_01", "e004", 0, true, 0)
  SetFace("HERO_01", "E03_M10", 0, 1, 0, 0)
  PlayMotion("HEROINE_01", "e004", 0, true, 0)
  SetFace("HEROINE_01", "E05_M07", 0, 1, 0, 0)
  PlayMotion("HIROKO_01", "e008", 0, true, 0)
  SetFace("HIROKO_01", "F05", 0, 1, 0, 0)
  SetCamera(-0.739, 0.937, 2.329, 0, 25, "LINEAR", 0, false, 0)
  SetCameraTarget(0.124, 0.974, 4.412, "LINEAR", 0, false, 0)
  SetCamera(-0.939, 0.946, 2.424, 0, 25, "LINEAR", 180, true, 0)
  SetCameraTarget(0.124, 0.974, 4.412, "LINEAR", 180, true, 0)
  WaitFrame(30)
  EndMotion("AEGIOMON_01", 0)
  WaitFrame(30)
  EndMotion("HERO_01", 0)
  SetFace("AEGIOMON_01", "E01_M07", 2, 1, 0, 0)
  BlendFace("AEGIOMON_01", 24, 0, 0, false, "SCURVE", 60, 0)
  WaitFrame(100)
  CUT("3.0")
  SetEnv_All("c3.0", 0)
  ModelVisible("HERO_01", false, 0, 0)
  ModelVisible("HIROKO_01", false, 0, 0)
  EndMotion("HEROINE_01", 0)
  SetFace("AEGIOMON_01", "F01", 0, 1, 3, 20)
  BlendEye("HEROINE_01", 19, 0, "SCURVE", 0, 0)
  BlendFace("HEROINE_01", 16, 0, 0, false, "SCURVE", 0, 0)
  SetCamera(0.395, 1.396, 6.589, 0, 25, "LINEAR", 0, false, 0)
  SetCameraTarget(0.859, 1.479, 7.667, "LINEAR", 0, false, 0)
  SetFace("HEROINE_01", "F16", 0, 1, 0, 0)
  MessageTalk("m060_150_010")
  MessageClose()
  WaitFrame(10)
  CUT("4.0")
  SetEnv_All("c4.0", 0)
  BlendFace("AEGIOMON_01", -24, 0, 0, false, "SCURVE", 0, 0)
  ModelVisible("HERO_01", false, 0, 0)
  ModelVisible("HIROKO_01", true, 0, 0)
  SetFace("HEROINE_01", "F01", 0, 1, 0, 0)
  SetPosition("AEGIOMON_01", 0.81, 0, 6.126, "LINEAR", 0, 0)
  SetRotation("AEGIOMON_01", 0, 270, 0, "LINEAR", 0, 0)
  SetRotation("AEGIOMON_01", 0, 0, 0, "LINEAR", 30, 0)
  PlayMotion("AEGIOMON_01", "ft02_02", 0, false, 0)
  SetStartFrame("AEGIOMON_01", "ft02_02", 30, 0)
  PlayMotion("AEGIOMON_01", "fn01_01", 3, true, 30)
  SetPosition("HEROINE_01", 0.809, 0, 7.559, "LINEAR", 0, 0)
  SetRotation("HEROINE_01", 0, 180, 0, "LINEAR", 0, 0)
  SetCamera(0.326, 1.844, 8.367, 0, 25, "LINEAR", 0, false, 0)
  SetCameraTarget(0.758, 1.364, 7.222, "LINEAR", 0, false, 0)
  WaitFrame(30)
  SetFace("AEGIOMON_01", "F01", 0, 1, 3, 0)
  MessageTalk("m060_150_020")
  MessageClose()
  WaitFrame(10)
  CUT("5.0")
  SetEnv_All("c5.0", 0)
  SetPosition("HERO_01", 3.211, -0, 8.37, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 203.5, 0, "LINEAR", 0, 0)
  SetPosition("HIROKO_01", -0.75, 0, 8.534, "LINEAR", 0, 0)
  SetRotation("HIROKO_01", 0, -185.5, 0, "LINEAR", 0, 0)
  SetCamera(0.251, 1.405, 6.409, 0, 25, "LINEAR", 0, false, 0)
  SetCameraTarget(0.823, 1.438, 7.598, "LINEAR", 0, false, 0)
  WaitFrame(10)
  PlayMotion("HEROINE_01", "e002", 5, true, 0)
  SetFace("HEROINE_01", "E02_M01", 0, 1, 3, 0)
  MessageTalk("m060_150_030")
  MessageClose()
  WaitFrame(10)
  CUT("6.0")
  SetEnv_All("c6.0", 0)
  SetCamera(0.326, 1.844, 8.367, 0, 25, "LINEAR", 0, false, 0)
  SetCameraTarget(0.758, 1.364, 7.222, "LINEAR", 0, false, 0)
  WaitFrame(10)
  SetFace("AEGIOMON_01", "E02_M01", 0, 1, 3, 0)
  PlayMotionBlend("AEGIOMON_01", "blend01", 0, false, 0)
  MessageTalk("m060_150_040")
  MessageClose()
  WaitFrame(10)
  SetFace("AEGIOMON_01", "F02", 0, 1, 3, 0)
  SetFace("HEROINE_01", "E01_M02", 0, 1, 3, 0)
  MessageTalk("m060_150_060")
  MessageClose()
  WaitFrame(10)
  CUT("7.0")
  SetEnv_All("c7.0", 0)
  Vista.SetCharCamera("HEROINE_01", "npc001a_cam_B.S_Right", "LINEAR", 0, false, 0)
  PlayMotion("HEROINE_01", "e030", 3, true, 0)
  SetFace("HEROINE_01", "E01_M02", 2, 1, 3, 15)
  SetFace("HEROINE_01", "E01_M02", 1, 1, 3, 30)
  WaitFrame(15)
  PlayMotionBlend("HEROINE_01", "blend01", 2, false, 0)
  WaitFrame(45)
  CUT("8.0")
  SetEnv_All("c8.0", 0)
  Vista.SetCharCamera("AEGIOMON_01", "chr183a_cam_B.S_Left", "LINEAR", 0, false, 0)
  WaitFrame(20)
  SetFace("AEGIOMON_01", "E12_M02", 0, 1, 30, 0)
  MessageTalk("m060_150_070")
  MessageClose()
  WaitFrame(10)
  PlayMotion("AEGIOMON_01", "e516", 5, true, 0)
  SetFace("AEGIOMON_01", "E12_M08", 0, 1, 30, 0)
  SetFace("AEGIOMON_01", "E12_M08", 0, 2, 30, 30)
  WaitFrame(40)
  local SE_01 = Event_PlaySE(400007, 100, false, 0, 0)
  WaitFrame(5)
  CUT("9.0")
  SetEnv_All("c9.0", 0)
  ModelVisible("HERO_01", true, 0, 0)
  PlayMotion("AEGIOMON_01", "fd01_01", 0, true, 0)
  SetFace("AEGIOMON_01", "E04_M15", 2, 1, FACE_BLENDTIME, 0)
  SetPosition("HERO_01", 1.653, -0, 7.355, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 203.5, 0, "LINEAR", 0, 0)
  SetPosition("HEROINE_01", 0.809, 0, 7.559, "LINEAR", 0, 0)
  SetRotation("HEROINE_01", 0, 180, 0, "LINEAR", 0, 0)
  SetPosition("HIROKO_01", -0.196, 0, 7.491, "LINEAR", 0, 0)
  SetRotation("HIROKO_01", 0, -197, 0, "LINEAR", 0, 0)
  SetPosition("AEGIOMON_01", 1.419, 0, 5.898, "LINEAR", 0, 0)
  SetRotation("AEGIOMON_01", 0, 54.5, 0, "LINEAR", 0, 0)
  BlendEye("AEGIOMON_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("AEGIOMON_01", 0, 0, 0, false, "SCURVE", 0, 0)
  SetCamera(0.531, 0.979, 7.189, 0, 25, "LINEAR", 0, false, 0)
  SetCameraTarget(0.836, 0.038, 5.425, "LINEAR", 0, false, 0)
  SetCamera(-0.084, 2.776, 9.675, 0, 25, "LINEAR", 10, true, 0)
  SetCameraTarget(0.851, 0.679, 6.35, "LINEAR", 10, true, 0)
  PlayMotion("HIROKO_01", "e010", 5, true, 0)
  SetFace("HIROKO_01", "F01", 0, 1, 0, 0)
  PlayMotion("HERO_01", "e005", 5, true, 0)
  SetStartFrame("HERO_01", "e005", 21, 0)
  SetFace("HERO_01", "F01", 0, 1, 0, 0)
  BlendFace("HERO_01", -35, 9, 0, true, "SCURVE", 0, 0)
  PlayMotion("HEROINE_01", "e017", 0, true, 0)
  SetFace("HEROINE_01", "F01", 0, 1, 0, 0)
  WaitFrame(10)
  MessageTalk("m060_150_080")
  MessageClose()
  WaitFrame(10)
  CUT("10.0")
  SetEnv_All("c10.0", 0)
  PlayMotion("HEROINE_01", "fn01_01", 0, true, 0)
  Vista.SetCharCamera("HERO_01", "player_cam_B.S_Right", "LINEAR", 0, false, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", 0, 0, 0, false, "SCURVE", 0, 0)
  EndMotion("HERO_01", 0)
  PlayMotion("HERO_01", "e503", 0, true, 0)
  SetFace("HERO_01", "E03_M04", 0, 1, 0, 0)
  WaitFrame(40)
  local slot_id = Event_PlaySE(402002, 100, false, 0, 0)
  WaitFrame(20)
  MessageTalk("m060_150_090")
  MessageClose()
  WaitFrame(10)
  correct = false
  while not Vista.IsSkipping() and not correct do
    MessageTalkSel(3, "m060_150_100")
    result = Talk.GetResultSelectedNum()
    if result == RESULT_TALK00 then
      SetFace("HERO_01", "E03_M04", 0, 1, 3, 0)
      SetMouth("HERO_01", 0, 6, 0)
      SetMouth("HERO_01", 1, 0, 60)
      WaitFrame(70)
      MessageTalk("m060_150_110")
      MessageTalk("m060_150_120")
      MessageClose()
      WaitFrame(10)
      correct = true
    elseif result == RESULT_TALK01 then
      SetMouth("HERO_01", 0, 6, 0)
      SetMouth("HERO_01", 1, 0, 60)
      WaitFrame(70)
      MessageTalk("m060_150_130")
      MessageClose()
      WaitFrame(10)
    elseif result == RESULT_TALK02 then
      SetFace("HERO_01", "E03_M04", 0, 1, 3, 0)
      SetMouth("HERO_01", 0, 6, 0)
      SetMouth("HERO_01", 1, 0, 60)
      WaitFrame(70)
      MessageTalk("m060_150_140")
      MessageClose()
      WaitFrame(10)
    end
  end
  Event_StopBGM(2, 0)
  Fade_OutNoLoadingWithWait(FADE_BLACK, 30)
  WaitFrame(60)
  if Debug.IsEventView() then
    Event_StopBGM(0, 0)
  end
  Vista.SetKeepBGM()
  EVENT_END()
end

function CUT(cut_no)
  CUT_START(cut_no)
end

function main()
  m060_150()
end

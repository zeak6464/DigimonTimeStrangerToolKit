require("include")

function m170_060()
  Fade_Out(0, 0)
  EVENT_BEGIN()
  Talk.Load("m170")
  SetEventCutNo(7)
  if Debug.IsEventView() then
    SetTimeZone("Noon")
    SetTimeAxis("A2020_dbef_170")
    LoadMap("d0301")
  end
  LoadModel("HERO_01", "Player")
  LoadModel("HEROINE_01", "char_HEROINE")
  LoadModel("AEGIOMON_01", "char_AEGIOMON")
  LoadSceneViewerResource("c1.0", "d0301f_sa")
  LoadSceneViewerResource("c2.0", "d0301f_sa")
  LoadSceneViewerResource("c3.0", "d0301f_sa")
  LoadSceneViewerResource("c4.0", "d0301f_sa")
  LoadSceneViewerResource("c5.0", "d0301f_sa")
  LoadSceneViewerResource("c6.0", "d0301f_sa")
  LoadSceneViewerResource("c7.0", "d0301f_sa")
  LoadEnvironmentFile("c1.0", "es_m170_060_c1.0")
  LoadEnvironmentFile("c2.0", "es_m170_060_c2.0")
  LoadEnvironmentFile("c3.0", "es_m170_060_c3.0")
  LoadEnvironmentFile("c4.0", "es_m170_060_c4.0")
  LoadEnvironmentFile("c5.0", "es_m170_060_c5.0")
  LoadEnvironmentFile("c6.0", "es_m170_060_c6.0")
  LoadEnvironmentFile("c7.0", "es_m170_060_c7.0")
  WaitVistaLoad()
  Event_StopBGM(1, 0)
  SetPosition("HERO_01", 91.03, 2.933, -35.8, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 90, 0, "LINEAR", 0, 0)
  SetPosition("HEROINE_01", 90, 2.933, -35.34, "LINEAR", 0, 0)
  SetRotation("HEROINE_01", 0, 90, 0, "LINEAR", 0, 0)
  SetPosition("AEGIOMON_01", 91.5, 2.93, -35, "LINEAR", 0, 0)
  SetRotation("AEGIOMON_01", 0, 100, 0, "LINEAR", 0, 0)
  PlayMotion("HERO_01", "fn01_01", 0, true, 0)
  SetFace("HERO_01", "F15", 0, 1, 0, 0)
  PlayMotion("HEROINE_01", "fn01_01", 0, true, 0)
  SetFace("HEROINE_01", "F04", 0, 1, 0, 0)
  PlayMotion("AEGIOMON_01", "fn01_01", 0, true, 0)
  SetFace("AEGIOMON_01", "E04_M01", 0, 1, 0, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", -12, 0, 0, true, "SCURVE", 0, 0)
  BlendEye("HEROINE_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HEROINE_01", -12, 0, 0, true, "SCURVE", 0, 0)
  BlendEye("AEGIOMON_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("AEGIOMON_01", -17, 0, 0, true, "SCURVE", 0, 0)
  SetEnv_All("c1.0", 0)
  SetCamera(89.814, 5.368, -29.935, 0, 40, "LINEAR", 0, false, 0)
  SetCameraTarget(93.876, 3.442, -39.235, "LINEAR", 0, false, 0)
  FIELD_SET()
  EVENT_START()
  CUT("1.0")
  SetCamera(89.814, 5.368, -29.935, 0, 40, "LINEAR", 75, true, 0)
  SetCameraTarget(94.306, 3.442, -39.235, "LINEAR", 75, true, 0)
  Fade_In(0, FADE_TIME)
  WaitFrame(75)
  CUT("2.0")
  SetEnv_All("c2.0", 0)
  SetCamera(92.958, 3.841, -35.212, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(90.047, 4.37, -35.382, "LINEAR", 0, false, 0)
  PlayMotion("HEROINE_01", "e022", 2, false, 0)
  PlayMotion("HEROINE_01", "fn01_01", 2, true, 138)
  SetFace("HEROINE_01", "F04", 0, 1, FACE_BLENDTIME, 0)
  PlayMotionBlend("HEROINE_01", "blend03", 0, false, 0)
  MessageTalk("m170_060_010")
  MessageClose()
  WaitFrame(10)
  SetFace("AEGIOMON_01", "F04", 0, 1, 6, 0)
  PlayMotionBlend("AEGIOMON_01", "blend01", 0, false, 0)
  MessageTalk("m170_060_020")
  WaitFrame(10)
  PlayMotionBlend("HERO_01", "blend01", 0, false, 40)
  PlayMotion("AEGIOMON_01", "e004", 4, true, 0)
  SetFace("AEGIOMON_01", "E15_M02", 0, 1, FACE_BLENDTIME, 0)
  MessageTalk("m170_060_030")
  MessageClose()
  WaitFrame(10)
  CUT("3.0")
  SetEnv_All("c3.0", 0)
  SetPosition("AEGIOMON_01", 91.47, 2.93, -34.79, "LINEAR", 0, 0)
  SetRotation("AEGIOMON_01", 0, 100, 0, "LINEAR", 0, 0)
  SetCamera(89.445, 4.026, -34.634, 0, 40, "LINEAR", 0, false, 0)
  SetCameraTarget(95.521, 4.626, -36.773, "LINEAR", 0, false, 0)
  EndMotion("AEGIOMON_01", 10)
  Event_PlayBGM(402, 1.5, 0)
  Vista.ApplyVoiceSnapshot(SOUND_SNAPSHOT_DOOR)
  MessageTalk("m170_060_040")
  WaitFrame(12)
  Vista.ApplyVoiceSnapshot(SOUND_SNAPSHOT_DOOR)
  MessageTalk("m170_060_050")
  MessageClose()
  WaitFrame(10)
  CUT("4.0")
  SetEnv_All("c4.0", 0)
  SetPosition("AEGIOMON_01", 91.5, 2.93, -35, "LINEAR", 0, 0)
  SetRotation("AEGIOMON_01", 0, 100, 0, "LINEAR", 0, 0)
  SetCamera(91.062, 4.36, -35.056, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(90.05, 4.357, -35.343, "LINEAR", 0, false, 0)
  SetFace("HEROINE_01", "F02", 2, 1, 0, 0)
  SetBlink("HEROINE_01", 0, 0.5, 45)
  PlayMotionBlend("HEROINE_01", "blend02", 0, false, 0)
  WaitFrame(10)
  MessageTalk("m170_060_060")
  WaitFrame(10)
  PlayMotion("HEROINE_01", "e002", 4, true, 0)
  SetFace("HEROINE_01", "E08_M01", 0, 1, FACE_BLENDTIME, 15)
  MessageTalk("m170_060_070")
  MessageClose()
  WaitFrame(10)
  CUT("5.0")
  SetEnv_All("c5.0", 0)
  SetCamera(89.814, 5.368, -29.935, 0, 40, "LINEAR", 0, false, 0)
  SetCameraTarget(94.306, 3.442, -39.235, "LINEAR", 0, false, 0)
  SetFace("HERO_01", "F01", 0, 1, 0, 0)
  SetFace("HEROINE_01", "F01", 0, 1, 0, 0)
  SetFace("AEGIOMON_01", "F01", 0, 1, 0, 0)
  WaitFrame(10)
  Vista.ApplyVoiceSnapshot(SOUND_SNAPSHOT_DOOR)
  MessageTalk("m170_060_080")
  WaitFrame(10)
  Vista.ApplyVoiceSnapshot(SOUND_SNAPSHOT_DOOR)
  MessageTalk("m170_060_090")
  MessageClose()
  WaitFrame(10)
  CUT("6.0")
  SetEnv_All("c6.0", 0)
  SetCamera(91.285, 5.409, -32.23, 0, 40, "LINEAR", 0, false, 0)
  SetCameraTarget(95.354, 4.626, -36.425, "LINEAR", 0, false, 0)
  SetCamera(91.565, 5.355, -32.519, 0, 40, "LINEAR", 180, true, 0)
  SetCameraTarget(95.354, 4.626, -36.425, "LINEAR", 180, true, 0)
  WaitFrame(8)
  Vista.ApplyVoiceSnapshot(SOUND_SNAPSHOT_DOOR)
  MessageTalk("m170_060_100")
  MessageClose()
  WaitFrame(10)
  CUT("7.0")
  SetEnv_All("c7.0", 0)
  SetCamera(92.958, 3.841, -35.213, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(90.047, 4.37, -35.382, "LINEAR", 0, false, 0)
  SetFace("HERO_01", "F02", 0, 1, 0, 0)
  SetFace("AEGIOMON_01", "F02", 0, 1, 0, 0)
  PlayMotion("HEROINE_01", "e022", 0, false, 0)
  BlendEye("HERO_01", 15, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", 67.193, -64.03, 0, true, "SCURVE", 32, 0)
  BlendEye("HEROINE_01", 10, 0, "SCURVE", 0, 0)
  BlendFace("HEROINE_01", 15, -15, 0, true, "SCURVE", 30, 0)
  BlendEye("AEGIOMON_01", 0, 58, "SCURVE", 6, 10)
  BlendFace("AEGIOMON_01", -30, 83, -98, true, "SCURVE", 40, 0)
  WaitFrame(30)
  PlayMotionBlend("HERO_01", "blend01", 0, false, 5)
  PlayMotionBlend("HEROINE_01", "blend01", 0, false, 0)
  SetFace("HEROINE_01", "E08_M02", 0, 1, FACE_BLENDTIME, 0)
  PlayMotionBlend("AEGIOMON_01", "blend01", 0, false, 10)
  Event_StopBGM(2.5, 0)
  WaitFrame(60)
  Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
  Vista.SetKeepBGM()
  Vista.SetKeepBGMWithMapChange()
  EVENT_END()
end

function CUT(cut_no)
  CUT_START(cut_no)
end

function main()
  m170_060()
end

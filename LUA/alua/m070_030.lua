require("include")

function m070_030()
  Fade_Out(0, 0)
  EVENT_BEGIN()
  Talk.Load("m070")
  SetEventCutNo(11)
  if Debug.IsEventView() then
    SetTimeZone("Noon")
    SetTimeAxis("A2020_dbef_70")
    LoadMap("t0302")
  end
  LoadModel("HERO_01", "Player")
  LoadModel("KUREMI_01", "char_KUREMI")
  LoadModel("TAKEMIYA_01", "char_TAKEMIYA")
  LoadModel("AEGIOMON_01", "char_AEGIOMON_PLAIN_CLOTHES")
  LoadModel("npc006aa010101_01", "char_SUMERAGI")
  LoadSceneViewerResource("c1.0", "t0302f_pa")
  LoadSceneViewerResource("c2.0", "t0302f_pa")
  LoadSceneViewerResource("c3.0", "t0302f_pa")
  LoadSceneViewerResource("c4.0", "t0302f_pa")
  LoadSceneViewerResource("c5.0", "t0302f_pa")
  LoadSceneViewerResource("c6.0", "t0302f_pa")
  LoadSceneViewerResource("c7.0", "t0302f_pa")
  LoadSceneViewerResource("c8.0", "t0302f_pa")
  LoadSceneViewerResource("c9.0", "t0302f_pa")
  LoadSceneViewerResource("c10.0", "t0302f_pa")
  LoadSceneViewerResource("c11.0", "t0302f_pa")
  LoadEnvironmentFile("c1.0", "es_m070_030_c1.0")
  LoadEnvironmentFile("c2.0", "es_m070_030_c2.0")
  LoadEnvironmentFile("c3.0", "es_m070_030_c3.0")
  LoadEnvironmentFile("c4.0", "es_m070_030_c4.0")
  LoadEnvironmentFile("c5.0", "es_m070_030_c5.0")
  LoadEnvironmentFile("c6.0", "es_m070_030_c6.0")
  LoadEnvironmentFile("c7.0", "es_m070_030_c7.0")
  LoadEnvironmentFile("c8.0", "es_m070_030_c8.0")
  LoadEnvironmentFile("c9.0", "es_m070_030_c9.0")
  LoadEnvironmentFile("c10.0", "es_m070_030_c10.0")
  LoadEnvironmentFile("c11.0", "es_m070_030_c11.0")
  WaitVistaLoad()
  SetPosition("HERO_01", 0.747, 0, 2.896, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, -79.09, 0, "LINEAR", 0, 0)
  SetPosition("AEGIOMON_01", 0.403, 0, 3.238, "LINEAR", 0, 0)
  SetRotation("AEGIOMON_01", 0, 208, 0, "LINEAR", 0, 0)
  SetPosition("KUREMI_01", 0.025, 0, 1.583, "LINEAR", 0, 0)
  SetRotation("KUREMI_01", 0, -43.654, 0, "LINEAR", 0, 0)
  SetPosition("TAKEMIYA_01", -0.782, 0, 2.789, "LINEAR", 0, 0)
  SetRotation("TAKEMIYA_01", 0, 161, 0, "LINEAR", 0, 0)
  SetPosition("npc006aa010101_01", -2.893, 0, -4.549, "LINEAR", 0, 0)
  SetRotation("npc006aa010101_01", 0, 0, 0, "LINEAR", 0, 0)
  BlendEye("HERO_01", 7, -8, "SCURVE", 0, 0)
  BlendFace("HERO_01", -22, -80, 14, true, "SCURVE", 0, 0)
  BlendEye("AEGIOMON_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("AEGIOMON_01", -53, -32, 0, true, "SCURVE", 0, 0)
  BlendEye("KUREMI_01", -10, 0, "SCURVE", 0, 0)
  BlendFace("KUREMI_01", -25, 16, 0, true, "SCURVE", 0, 0)
  BlendEye("TAKEMIYA_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("TAKEMIYA_01", 0, -20, 0, true, "SCURVE", 0, 0)
  PlayMotion("HERO_01", "fn01_01", 0, true, 0)
  SetFace("HERO_01", "E01_M01", 0, 1, FACE_BLENDTIME, 0)
  PlayMotion("KUREMI_01", "e012", 0, true, 0)
  SetStartFrame("KUREMI_01", "e012", 3, 0)
  SetFace("KUREMI_01", "E01_M01", 0, 1, FACE_BLENDTIME, 0)
  PlayMotion("TAKEMIYA_01", "fn01_01", 0, true, 0)
  SetFace("TAKEMIYA_01", "E01_M01", 0, 1, FACE_BLENDTIME, 0)
  PlayMotion("AEGIOMON_01", "fn01_01", 0, true, 0)
  SetFace("AEGIOMON_01", "E01_M01", 0, 1, FACE_BLENDTIME, 0)
  PlayMotion("npc006aa010101_01", "e500", 0, true, 0)
  SetFace("npc006aa010101_01", "E01_M01", 0, 1, FACE_BLENDTIME, 0)
  SetCamera(-0.863, 1.425, 2.524, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(0.011, 1.432, 1.635, "LINEAR", 0, false, 0)
  SetCamera(-0.863, 1.515, 2.524, 0, 30, "LINEAR", 90, true, 0)
  SetCameraTarget(0.011, 1.522, 1.635, "LINEAR", 90, true, 0)
  SetEnv_All("c1.0", 0)
  Event_Stop_Play_BGM(940, 0, 0, 0, BGM_FADE_TIME)
  FIELD_SET()
  EVENT_START()
  SetMobTransparentRange(11.3, 5, 8.4)
  Field_InvisibleMob("mob_0030", INVISIBLE_KEY_EVENT, 0, true)
  Field_InvisibleMob("mob_0028", INVISIBLE_KEY_EVENT, 0, true)
  CUT("1.0")
  Fade_In(0, FADE_TIME)
  WaitFrame(FADE_TIME)
  WaitFrame(10)
  local slot_01 = Event_PlaySE(404037, 100, false, 0.3, 0)
  Story.OpenCharacterEntry("char_KUREMI")
  WaitFrame(70)
  Story.IsClosedCharacterEntry()
  WaitFrame(85)
  CUT("2.0")
  SetEnv_All("c2.0", 0)
  ModelVisible("AEGIOMON_01", false, 0, 0)
  SetCamera(-1.903, 1.567, 3.29, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(1.134, 1.431, 1.632, "LINEAR", 0, false, 0)
  SetFace("KUREMI_01", "E02_M01", 0, 1, FACE_BLENDTIME, 0)
  WaitFrame(10)
  MessageTalk("m070_030_010")
  PlayMotion("TAKEMIYA_01", "e002", 2, true, 0)
  MessageTalk("m070_030_020")
  PlayMotionBlend("TAKEMIYA_01", "blend05", 3, false, 0)
  MessageTalk("m070_030_025")
  MessageClose()
  WaitFrame(10)
  BlendEye("KUREMI_01", 39, 40, "SCURVE", 10, 0)
  BlendFace("KUREMI_01", 37, 39, 0, true, "SCURVE", 30, 0)
  WaitFrame(20)
  ResetBlend("TAKEMIYA_01", "blend05")
  CUT("3.0")
  SetEnv_All("c3.0", 0)
  ModelVisible("AEGIOMON_01", true, 0, 0)
  SetPosition("HERO_01", 0.231, -0.031, 2.599, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, -99.59, 0, "LINEAR", 0, 0)
  SetPosition("AEGIOMON_01", -0.087, 0, 2.997, "LINEAR", 0, 0)
  SetRotation("AEGIOMON_01", 0, 199, 0, "LINEAR", 0, 0)
  SetFace("KUREMI_01", "E06_M01", 0, 1, FACE_BLENDTIME, 0)
  EndMotion("KUREMI_01", 0, 0)
  SetCamera(-1.005, 1.94, 0.409, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(-0.021, 1.247, 2.593, "LINEAR", 0, false, 0)
  WaitFrame(15)
  MessageTalk("m070_030_030")
  MessageClose()
  PlayMotion("TAKEMIYA_01", "e021", 2, true, 0)
  PlayMotion("TAKEMIYA_01", "fn01_01", 3, true, 128)
  BlendEye("AEGIOMON_01", -17, 0, "SCURVE", 10, 0)
  BlendFace("AEGIOMON_01", -58, -29, 0, true, "SCURVE", 20, 0)
  BlendEye("TAKEMIYA_01", 0, -42, "SCURVE", 10, 80)
  BlendFace("TAKEMIYA_01", 0, -52, 0, true, "SCURVE", 25, 80)
  BlendEye("HERO_01", -17, 5, "SCURVE", 10, 10)
  BlendFace("HERO_01", -10, 15, 0, true, "SCURVE", 30, 10)
  BlendEye("KUREMI_01", 0, 0, "SCURVE", 20, 0)
  BlendFace("KUREMI_01", -13, 4, 0, true, "SCURVE", 20, 0)
  BlendEye("KUREMI_01", 30, 40, "SCURVE", 15, 90)
  BlendFace("KUREMI_01", -11, 57, -17, true, "SCURVE", 30, 100)
  MessageTalk("m070_030_040")
  MessageClose()
  WaitFrame(15)
  BlendEye("HERO_01", 0, 0, "SCURVE", 10, 0)
  BlendFace("HERO_01", -27, -90, 9, true, "SCURVE", 30, 0)
  BlendEye("TAKEMIYA_01", 0, 0, "SCURVE", 10, 5)
  BlendFace("TAKEMIYA_01", 0, -20, 0, true, "SCURVE", 20, 10)
  PlayMotion("KUREMI_01", "e013", 5, true, 0)
  SetFace("KUREMI_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  WaitFrame(45)
  CUT("4.0")
  SetEnv_All("c4.0", 0)
  SetCamera(-0.651, 1.64, 2.563, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(0.063, 1.537, 1.614, "LINEAR", 0, false, 0)
  CameraOffsetMove(0.05, 0, 0, "LINEAR", false, true, 90, 0)
  BlendEye("KUREMI_01", 10, 40, "SCURVE", 0, 0)
  BlendFace("KUREMI_01", -11, 69, 0, true, "SCURVE", 0, 0)
  BlendEye("KUREMI_01", 0, 0, "SCURVE", 20, 30)
  BlendFace("KUREMI_01", -19, 18, 0, true, "SCURVE", 25, 30)
  WaitFrame(30)
  MessageTalk("m070_030_050")
  MessageTalk("m070_030_060")
  MessageClose()
  WaitFrame(10)
  CUT("5.0")
  SetEnv_All("c5.0", 0)
  SetPosition("HERO_01", 0.747, 0, 2.715, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, -79.09, 0, "LINEAR", 0, 0)
  SetPosition("AEGIOMON_01", 0.403, 0, 3.057, "LINEAR", 0, 0)
  SetRotation("AEGIOMON_01", 0, 208, 0, "LINEAR", 0, 0)
  SetPosition("TAKEMIYA_01", -0.782, 0, 2.789, "LINEAR", 0, 0)
  SetRotation("TAKEMIYA_01", 0, 133, 0, "LINEAR", 0, 0)
  BlendEye("TAKEMIYA_01", 0, 0, "SCURVE", 20, 0)
  BlendFace("TAKEMIYA_01", 0, -48, 0, true, "SCURVE", 20, 0)
  BlendEye("AEGIOMON_01", -20, 0, "SCURVE", 5, 0)
  BlendFace("AEGIOMON_01", -69, 66, -36, true, "SCURVE", 30, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 10, 10)
  BlendFace("HERO_01", -2, -7, 0, true, "SCURVE", 25, 10)
  SetCamera(-1.744, 1.784, 2.025, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(0.244, 1.301, 3.076, "LINEAR", 0, false, 0)
  WaitFrame(10)
  PlayMotion("TAKEMIYA_01", "e013", 3, true, 0)
  MessageTalk("m070_030_070")
  MessageClose()
  WaitFrame(10)
  CUT("6.0")
  SetEnv_All("c6.0", 0)
  ModelVisible("AEGIOMON_01", false, 0, 0)
  SetPosition("HERO_01", 0.747, 0, 2.896, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, -79.09, 0, "LINEAR", 0, 0)
  SetPosition("AEGIOMON_01", 0.403, 0, 3.238, "LINEAR", 0, 0)
  SetRotation("AEGIOMON_01", 0, 208, 0, "LINEAR", 0, 0)
  SetRotation("TAKEMIYA_01", 0, 161, 0, "LINEAR", 0, 0)
  BlendEye("HERO_01", -10, -2, "SCURVE", 0, 0)
  BlendFace("HERO_01", -9, -24, 0, true, "SCURVE", 0, 0)
  BlendEye("HERO_01", -12, -10, "SCURVE", 10, 15)
  BlendFace("HERO_01", -22, -89, 14, true, "SCURVE", 30, 15)
  BlendEye("TAKEMIYA_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("TAKEMIYA_01", 0, -76, 0, true, "SCURVE", 0, 0)
  BlendEye("TAKEMIYA_01", 0, 0, "SCURVE", 15, 0)
  BlendFace("TAKEMIYA_01", 0, 0, 0, true, "SCURVE", 30, 0)
  PlayMotionBlend("KUREMI_01", "blend02", 0, false, 25)
  SetFace("KUREMI_01", "E07_M01", 0, 1, FACE_BLENDTIME, 0)
  EndMotion("KUREMI_01", 0)
  SetCamera(-1.903, 1.567, 3.29, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(1.134, 1.431, 1.632, "LINEAR", 0, false, 0)
  WaitFrame(10)
  MessageTalk("m070_030_090")
  MessageTalk("m070_030_100")
  EndMotion("TAKEMIYA_01", 0)
  PlayMotionBlend("TAKEMIYA_01", "blend05", 3, false, 0)
  MessageTalk("m070_030_110")
  MessageTalk("m070_030_120")
  MessageClose()
  WaitFrame(10)
  ResetBlend("TAKEMIYA_01", "blend05")
  CUT("7.0")
  SetEnv_All("c7.0", 0)
  ModelVisible("AEGIOMON_01", true, 0, 0)
  ModelVisible("HERO_01", false, 0, 0)
  SetPosition("HERO_01", 0.504, 0, 2.626, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, -79.09, 0, "LINEAR", 0, 0)
  SetPosition("AEGIOMON_01", 0.16, 0, 3.057, "LINEAR", 0, 0)
  SetRotation("AEGIOMON_01", 0, 208, 0, "LINEAR", 0, 0)
  BlendEye("TAKEMIYA_01", 39, -14, "SCURVE", 10, 0)
  BlendFace("TAKEMIYA_01", 48, -63, 0, true, "SCURVE", 30, 0)
  BlendEye("AEGIOMON_01", -19, 0, "SCURVE", 0, 0)
  BlendFace("AEGIOMON_01", -60, 58, -44, true, "SCURVE", 0, 0)
  SetCamera(-1.444, 2.139, 1.701, 0, 20, "LINEAR", 0, false, 0)
  SetCameraTarget(-0.051, 1.107, 3.343, "LINEAR", 0, false, 0)
  WaitFrame(10)
  SetFace("TAKEMIYA_01", "E07_M01", 0, 1, FACE_BLENDTIME, 0)
  MessageTalk("m070_030_130")
  PlayMotionBlend("TAKEMIYA_01", "blend02", 2, false, 0)
  MessageTalk("m070_030_140")
  MessageTalk("m070_030_150")
  MessageClose()
  WaitFrame(10)
  CUT("8.0")
  SetEnv_All("c8.0", 0)
  PlayMotion("AEGIOMON_01", "fn01_01", 0, true, 0)
  SetFace("AEGIOMON_01", "E16_M01", 0, 1, FACE_BLENDTIME, 0)
  BlendEye("AEGIOMON_01", 18, -4, "SCURVE", 10, 0)
  BlendFace("AEGIOMON_01", -29, 43, -16, true, "SCURVE", 30, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", 0, -74, 0, true, "SCURVE", 0, 0)
  SetCamera(-0.588, 1.621, 2.314, 0, 20, "LINEAR", 0, false, 0)
  SetCameraTarget(0.129, 1.062, 3.047, "LINEAR", 0, false, 0)
  WaitFrame(10)
  MessageTalk("m070_030_160")
  BlendEye("AEGIOMON_01", -19, 0, "SCURVE", 25, 0)
  BlendFace("AEGIOMON_01", -60, 58, -44, true, "SCURVE", 30, 0)
  PlayMotionBlend("AEGIOMON_01", "blend01", 3, false, 30)
  SetFace("AEGIOMON_01", "E01_M01", 0, 1, FACE_BLENDTIME, 0)
  MessageTalk("m070_030_170")
  MessageClose()
  WaitFrame(10)
  CUT("9.0")
  SetEnv_All("c9.0", 0)
  ModelVisible("HERO_01", true, 0, 0)
  SetPosition("KUREMI_01", -0.337, 0, 1.583, "LINEAR", 0, 0)
  SetRotation("KUREMI_01", 0, -15.154, 0, "LINEAR", 0, 0)
  PlayMotionBlend("TAKEMIYA_01", "blend01", 3, false, 20)
  SetFace("KUREMI_01", "F01", 0, 1, 0, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", 0, -74, 0, true, "SCURVE", 0, 0)
  BlendEye("TAKEMIYA_01", 0, 0, "SCURVE", 10, 0)
  BlendFace("TAKEMIYA_01", 0, 0, 0, true, "SCURVE", 30, 0)
  BlendEye("AEGIOMON_01", -24, -4, "SCURVE", 10, 20)
  BlendFace("AEGIOMON_01", -35, -16, 0, true, "SCURVE", 30, 20)
  SetCamera(0.45, 1.336, 5.323, 0, 25, "LINEAR", 0, false, 0)
  SetCameraTarget(-1.893, 1.21, -4.947, "LINEAR", 0, false, 0)
  WaitFrame(10)
  MessageTalk("m070_030_180")
  MessageClose()
  WaitFrame(10)
  PlayMotion("KUREMI_01", "e012", 0, true, 0)
  SetFace("KUREMI_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  MessageTalk("m070_030_190")
  MessageClose()
  WaitFrame(10)
  CUT("10.0")
  SetEnv_All("c10.0", 0)
  BlendEye("KUREMI_01", 0, -50, "SCURVE", 20, 0)
  BlendFace("KUREMI_01", -10, -100, 0, true, "SCURVE", 30, 0)
  BlendEye("HERO_01", 0, 14, "SCURVE", 15, 0)
  BlendFace("HERO_01", -15, -77, 0, true, "SCURVE", 35, 0)
  SetCamera(-0.156, 1.6, 3.148, 0, 25, "LINEAR", 0, false, 0)
  SetCameraTarget(-0.484, 1.516, 1.603, "LINEAR", 0, false, 0)
  WaitFrame(10)
  BlendEye("npc006aa010101_01", 0, 20, "SCURVE", 10, 30)
  BlendFace("npc006aa010101_01", 0, 37, 0, true, "SCURVE", 20, 30)
  MessageTalk("m070_030_200")
  MessageClose()
  WaitFrame(30)
  CUT("11.0")
  SetEnv_All("c11.0", 0)
  SetMobTransparentRange(8.9, 2.9, 12.9)
  BlendEye("npc006aa010101_01", -20, -47, "SCURVE", 10, 0)
  BlendFace("npc006aa010101_01", -18, -73, 0, true, "SCURVE", 30, 0)
  SetCamera(-2.984, 1.121, -2.298, 0, 40, "LINEAR", 0, false, 0)
  SetCameraTarget(-3.232, 1.462, -4.137, "LINEAR", 0, false, 0)
  SetMobTransparentRange(9.9, 5.8, 12.9)
  WaitFrame(10)
  SetCamera(-2.984, 1.121, -2.298, 0, 40, "LINEAR", 90, true, 0)
  SetCameraTarget(-3.352, 1.472, -4.137, "LINEAR", 90, true, 0)
  WaitFrame(10)
  MessageTalk("m070_030_210")
  MessageClose()
  CAM_POS_WAIT(0)
  MessageTalk("m070_030_220")
  MessageClose()
  WaitFrame(30)
  Field_CancelInvisibleMob("mob_0030", INVISIBLE_KEY_EVENT, 0, true, true)
  Field_CancelInvisibleMob("mob_0028", INVISIBLE_KEY_EVENT, 0, true, true)
  Event_StopBGM(2, 0)
  Fade_OutNoLoadingWithWait(0, FADE_TIME)
  Vista.SetKeepBGM()
  if Debug.IsEventView() then
    Event_StopBGM(0, 0)
  end
  EVENT_END()
end

function CUT(cut_no)
  CUT_START(cut_no)
end

function main()
  m070_030()
end

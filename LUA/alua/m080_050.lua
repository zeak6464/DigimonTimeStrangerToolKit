require("include")

function m080_050()
  EVENT_BEGIN()
  Talk.Load("m080")
  SetEventCutNo(6)
  if Debug.IsEventView() then
    SetTimeZone("Noon")
    SetTimeAxis("A2020_dbef_80")
    LoadMap("d1102")
    LoadObject("ef_f_mov_121_ga_01", "ef_f_mov_121_ga")
  end
  LoadModel("HERO_01", "Player")
  LoadModel("HEROINE_01", "char_HEROINE")
  LoadModel("AEGIOMON_B_01", "char_AEGIOMON_PLAIN_CLOTHES")
  Vista.LoadAnimationFace("HERO_01", "e01", "m01")
  Vista.LoadAnimationFace("HERO_01", "e02", "m02")
  Vista.LoadAnimationFace("HERO_01", "e03", "m03")
  Vista.LoadAnimationFace("HERO_01", "e04", "m04")
  Vista.LoadAnimationFace("HERO_01", "e05", "m05")
  Vista.LoadAnimationFace("HERO_01", "e06", "m06")
  Vista.LoadAnimationFace("HERO_01", "e07", "m07")
  Vista.LoadAnimationFace("HERO_01", "e08", "m08")
  Vista.LoadAnimationFace("HERO_01", "e09", "m09")
  Vista.LoadAnimationFace("HERO_01", "e10", "m10")
  Vista.LoadAnimationFace("HERO_01", "e11", "m11")
  Vista.LoadAnimationFace("HERO_01", "e12", "m12")
  Vista.LoadAnimationFace("HERO_01", "e13", "m13")
  Vista.LoadAnimationFace("HERO_01", "e14", "m14")
  Vista.LoadAnimationFace("HERO_01", "e15", "m15")
  Vista.LoadAnimationFace("HERO_01", "e16", "m16")
  Vista.LoadAnimationFace("AEGIOMON_B_01", "e01", "m01")
  Vista.LoadAnimationFace("AEGIOMON_B_01", "e02", "m02")
  Vista.LoadAnimationFace("AEGIOMON_B_01", "e03", "m03")
  Vista.LoadAnimationFace("AEGIOMON_B_01", "e04", "m04")
  Vista.LoadAnimationFace("AEGIOMON_B_01", "e05", "m05")
  Vista.LoadAnimationFace("AEGIOMON_B_01", "e06", "m06")
  Vista.LoadAnimationFace("AEGIOMON_B_01", "e07", "m07")
  Vista.LoadAnimationFace("AEGIOMON_B_01", "e08", "m08")
  Vista.LoadAnimationFace("AEGIOMON_B_01", "e09", "m09")
  Vista.LoadAnimationFace("AEGIOMON_B_01", "e10", "m10")
  Vista.LoadAnimationFace("AEGIOMON_B_01", "e11", "m11")
  Vista.LoadAnimationFace("AEGIOMON_B_01", "e12", "m12")
  Vista.LoadAnimationFace("AEGIOMON_B_01", "e13", "m13")
  Vista.LoadAnimationFace("AEGIOMON_B_01", "e14", "m14")
  Vista.LoadAnimationFace("AEGIOMON_B_01", "e15", "m15")
  Vista.LoadAnimationFace("AEGIOMON_B_01", "e16", "m16")
  Vista.LoadAnimationFace("HEROINE_01", "e01", "m01")
  Vista.LoadAnimationFace("HEROINE_01", "e02", "m02")
  Vista.LoadAnimationFace("HEROINE_01", "e03", "m03")
  Vista.LoadAnimationFace("HEROINE_01", "e04", "m04")
  Vista.LoadAnimationFace("HEROINE_01", "e05", "m05")
  Vista.LoadAnimationFace("HEROINE_01", "e06", "m06")
  Vista.LoadAnimationFace("HEROINE_01", "e07", "m07")
  Vista.LoadAnimationFace("HEROINE_01", "e08", "m08")
  Vista.LoadAnimationFace("HEROINE_01", "e09", "m09")
  Vista.LoadAnimationFace("HEROINE_01", "e10", "m10")
  Vista.LoadAnimationFace("HEROINE_01", "e11", "m11")
  Vista.LoadAnimationFace("HEROINE_01", "e12", "m12")
  Vista.LoadAnimationFace("HEROINE_01", "e13", "m13")
  Vista.LoadAnimationFace("HEROINE_01", "e14", "m14")
  Vista.LoadAnimationFace("HEROINE_01", "e15", "m15")
  Vista.LoadAnimationFace("HEROINE_01", "e16", "m16")
  if Common.IsVoiceJapanese() then
    Vista.LoadAnimationFaceBlend("HEROINE_01", "m080_050_c05")
  else
    Vista.LoadAnimationFaceBlend("HEROINE_01", "m080_050_EN_c05")
  end
  LoadSceneViewerResource("c1.0", "d1102f_ca")
  LoadSceneViewerResource("c2.0", "d1102f_ca")
  LoadSceneViewerResource("c3.0", "d1102f_ca")
  LoadSceneViewerResource("c4.0", "d1102f_ca")
  LoadSceneViewerResource("c5.0", "d1102f_ca")
  LoadSceneViewerResource("c6.0", "d1102f_ca")
  LoadEnvironmentFile("c1.0", "es_m080_050_c1.0")
  LoadEnvironmentFile("c2.0", "es_m080_050_c2.0")
  LoadEnvironmentFile("c3.0", "es_m080_050_c3.0")
  LoadEnvironmentFile("c4.0", "es_m080_050_c4.0")
  LoadEnvironmentFile("c5.0", "es_m080_050_c5.0")
  LoadEnvironmentFile("c6.0", "es_m080_050_c6.0")
  WaitVistaLoad()
  SetPosition("HERO_01", -48.196, 3.006, -46.733, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 17.099, 0, "LINEAR", 0, 0)
  SetPosition("AEGIOMON_B_01", -49.255, 3.006, -46.113, "LINEAR", 0, 0)
  SetRotation("AEGIOMON_B_01", 0, 29.5, 0, "LINEAR", 0, 0)
  SetPosition("HEROINE_01", -46.786, 3.006, -46.173, "LINEAR", 0, 0)
  SetRotation("HEROINE_01", 0, -40, 0, "LINEAR", 0, 0)
  SetPosition("ef_f_mov_121_ga_01", -47.79, 3.062, -43.88, "LINEAR", 0, 0)
  SetRotation("ef_f_mov_121_ga_01", 0, 180, 0, "LINEAR", 0, 0)
  MovePosition("AEGIOMON_B_01", -48.861, 3.006, -45.417, false, 3, 0)
  MoveRotation("AEGIOMON_B_01", 0, 29.5, 0, "LINEAR", 3, true, 0)
  MovePosition("HEROINE_01", -47.087, 3.006, -45.777, false, 0.9, 10)
  MoveRotation("HEROINE_01", 0, -25.5, 0, "LINEAR", 0.9, true, 10)
  MovePosition("HERO_01", -47.873, 3.006, -45.682, false, 1.5, 0)
  MoveRotation("HERO_01", 0, 17.099, 0, "LINEAR", 1.5, true, 0)
  BlendEye("HERO_01", 5, 0, "SCURVE", 10, 0)
  BlendFace("HERO_01", -24, -11, 0, true, "SCURVE", 30, 0)
  BlendEye("HEROINE_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HEROINE_01", -20, 10, 0, true, "SCURVE", 0, 0)
  BlendEye("HEROINE_01", 13, 0, "SCURVE", 10, 0)
  BlendFace("HEROINE_01", -26, 24, 0, true, "SCURVE", 30, 0)
  BlendEye("AEGIOMON_B_01", -5, 0, "SCURVE", 0, 0)
  BlendFace("AEGIOMON_B_01", -53, 0, 0, true, "SCURVE", 0, 0)
  PlayMotion("ef_f_mov_121_ga_01", "", 0, false, 0)
  SetFace("ef_f_mov_121_ga_01", "F01", 0, 1, 0, 0)
  SetCamera(-49.168, 4.34, -47.733, 0, 40, "LINEAR", 0, false, 0)
  SetCameraTarget(-48.222, 4.415, -44.868, "LINEAR", 0, false, 0)
  SetCamera(-49.028, 4.195, -48.303, 0, 40, "LINEAR", 90, true, 0)
  SetCameraTarget(-47.877, 4.287, -44.819, "LINEAR", 90, true, 0)
  SetEnv_All("c1.0", 0)
  FIELD_SET()
  EVENT_START()
  CUT("1.0")
  WaitFrame(90)
  PlayMotion("HERO_01", "fn01_01", 5, true, 0)
  SetFace("HERO_01", "F15", 0, 1, 0, 0)
  PlayMotion("HEROINE_01", "fn01_01", 5, true, 30)
  SetFace("HEROINE_01", "F16", 0, 1, 0, 0)
  PlayMotion("AEGIOMON_B_01", "fn01_01", 5, true, 0)
  SetFace("AEGIOMON_B_01", "F15", 0, 1, 0, 0)
  CUT("2.0")
  SetEnv_All("c2.0", 0)
  SetPosition("HEROINE_01", -47.365, 3.006, -45.484, "LINEAR", 0, 0)
  SetRotation("HEROINE_01", 0, -40, 0, "LINEAR", 0, 0)
  SetCamera(-46.331, 5.094, -43.181, 0, 40, "LINEAR", 0, false, 0)
  SetCameraTarget(-48.532, 3.798, -45.378, "LINEAR", 0, false, 0)
  WaitFrame(10)
  MessageTalk("m080_050_010")
  MessageClose()
  WaitFrame(10)
  CUT("3.0")
  SetEnv_All("c3.0", 0)
  SetCamera(-48.241, 4.382, -45.011, 0, 29, "LINEAR", 0, false, 0)
  SetCameraTarget(-48.875, 4.03, -45.47, "LINEAR", 0, false, 0)
  SetCamera(-48.269, 4.38, -44.971, 0, 29, "LINEAR", 0, false, 0)
  SetCameraTarget(-48.902, 4.029, -45.431, "LINEAR", 0, false, 0)
  WaitFrame(10)
  SetFace("AEGIOMON_B_01", "F01", 2, 1, FACE_BLENDTIME, 0)
  WaitFrame(20)
  MessageTalk("m080_050_020")
  SetFace("AEGIOMON_B_01", "E15_M01", 0, 1, 0, 0)
  SetBlink("AEGIOMON_B_01", 0, 0.5, 0)
  WaitFrame(1)
  MessageTalk("m080_050_030")
  MessageClose()
  WaitFrame(10)
  CUT("4.0")
  SetEnv_All("c4.0", 0)
  SetCamera(-46.769, 5.011, -43.466, 0, 40, "LINEAR", 0, false, 0)
  SetCameraTarget(-48.236, 3.901, -45.654, "LINEAR", 0, false, 0)
  SetPosition("AEGIOMON_B_01", -48.74, 3.006, -45.604, "LINEAR", 0, 0)
  SetRotation("AEGIOMON_B_01", 0, 15, 0, "LINEAR", 0, 0)
  BlendEye("AEGIOMON_B_01", -5, 0, "SCURVE", 10, 0)
  BlendFace("AEGIOMON_B_01", -53, 0, 0, true, "SCURVE", 30, 0)
  WaitFrame(10)
  MessageTalk("m080_050_040")
  MessageClose()
  MovePosition("AEGIOMON_B_01", -48.222, 3.006, -43.672, false, 4, 0)
  MoveRotation("AEGIOMON_B_01", 0, 15, 0, "LINEAR", 4, true, 0)
  BlendEye("HERO_01", 16, 0, "SCURVE", 10, 0)
  BlendFace("HERO_01", 6, -26, 0, true, "SCURVE", 30, 10)
  BlendEye("HEROINE_01", 23, 0, "SCURVE", 10, 10)
  BlendFace("HEROINE_01", 7, 17, 0, true, "SCURVE", 25, 10)
  WaitFrame(15)
  CUT("5.0")
  SetEnv_All("c5.0", 0)
  ModelVisible("HERO_01", false, 0, 0)
  SetPosition("HEROINE_01", -47.365, 3.006, -45.484, "LINEAR", 0, 0)
  SetRotation("HEROINE_01", 0, -11.5, 0, "LINEAR", 0, 0)
  BlendEye("HEROINE_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HEROINE_01", -14, 0, 0, true, "SCURVE", 0, 0)
  Vista.SetEnableLipSyncsAnimation("HEROINE_01", false)
  PlayMotion("HEROINE_01", "e009", 2, true, 0)
  SetFace("HEROINE_01", "E05_M01", 0, 1, 0, 0)
  if Common.IsVoiceJapanese() then
    Vista.PlayModelAnimationFaceBlend("HEROINE_01", "m080_050_c05", 0, false, 0)
  else
    Vista.PlayModelAnimationFaceBlend("HEROINE_01", "m080_050_EN_c05", 0, false, 0)
  end
  Vista.PlayModelAnimationFaceBlend("HEROINE_01", "m01", 0, false, 30)
  SetFace("HEROINE_01", "E05_M09", 0, 1, 0, 30)
  SetCamera(-47.038, 4.412, -44.232, 0, 20, "LINEAR", 0, false, 0)
  SetCameraTarget(-47.597, 4.485, -45.279, "LINEAR", 0, false, 0)
  MessageTalk("m080_050_050")
  MessageClose()
  local slot_id = Event_PlaySE(404038, 50, true, 0, 0)
  WaitFrame(30)
  Vista.SetEnableLipSyncsAnimation("HEROINE_01", true)
  CUT("6.0")
  SetEnv_All("c6.0", 0)
  ModelVisible("HERO_01", true, 0, 0)
  SetPosition("HERO_01", -47.873, 3.006, -45.682, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 17.099, 0, "LINEAR", 0, 0)
  SetPosition("HEROINE_01", -47.365, 3.006, -45.484, "LINEAR", 0, 0)
  BlendEye("HEROINE_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HEROINE_01", -13, -13, 0, true, "SCURVE", 30, 0)
  EndMotion("HEROINE_01", 0)
  SetCamera(-46.969, 4.598, -44.078, 0, 30, "SCURVE", 0, false, 0)
  SetCameraTarget(-47.559, 4.389, -45.424, "SCURVE", 0, false, 0)
  SetFace("HEROINE_01", "E11_M15", 0, 1, FACE_BLENDTIME, 0)
  WaitFrame(15)
  BlendEye("HERO_01", 33, 23, "SCURVE", 15, 0)
  BlendFace("HERO_01", -5, 34, 0, true, "SCURVE", 30, 0)
  WaitFrame(30)
  BlendEye("HEROINE_01", 11, -29, "SCURVE", 10, 0)
  BlendFace("HEROINE_01", -5, -100, 0, true, "SCURVE", 30, 0)
  WaitFrame(20)
  PlayMotionBlend("HERO_01", "blend01", 3, false, 0)
  SetFace("HERO_01", "F15", 0, 1, FACE_BLENDTIME, 0)
  WaitFrame(30)
  BlendEye("HERO_01", 0, 0, "SCURVE", 20, 0)
  BlendFace("HERO_01", 0, 0, 0, true, "SCURVE", 30, 0)
  BlendEye("HEROINE_01", 11, 0, "SCURVE", 25, 0)
  BlendFace("HEROINE_01", -13, -13, 0, true, "SCURVE", 30, 0)
  MovePosition("HERO_01", -47.928, 3.006, -43.873, false, 1.5, 0)
  MoveRotation("HERO_01", 0, 0.099, 0, "LINEAR", 1.5, true, 0)
  WaitFrame(10)
  WaitFrame(30)
  BlendEye("HEROINE_01", 11, 0, "SCURVE", 25, 0)
  MovePosition("HEROINE_01", -47.684, 3.006, -43.916, false, 1.5, 0)
  MoveRotation("HEROINE_01", 0, -11.5, 0, "LINEAR", 1.5, true, 0)
  WaitFrame(15)
  Event_StopBGM(2, 0)
  Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
  WaitFrame(30)
  local slot_id = Event_PlaySE(404038, 100, true, 0, 0)
  WaitFrame(60)
  Vista.SetKeepBGM()
  Vista.SetKeepBGMWithMapChange()
  EVENT_END()
end

function CUT(cut_no)
  CUT_START(cut_no)
end

function main()
  m080_050()
end

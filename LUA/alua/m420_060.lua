require("include")

function m420_060()
  Fade_Out(1, 0)
  EVENT_BEGIN()
  Talk.Load("m420")
  SetEventCutNo(6)
  if Debug.IsEventView() then
    SetTimeAxis("P2028_daft_441")
    LoadMap("h0701")
  end
  LoadModel("HERO_01", "Player")
  LoadModel("chr805_01", "char_BLACKSHADOW")
  local gender = GetGender()
  if gender == HERO then
    LoadObject("m420060movie01a_01", "m420060movie01ma")
    LoadObject("m420060movie01b_01", "m420060movie01mb")
    LoadObject("m420060movie01c_01", "m420060movie01mc")
  elseif gender == HEROINE then
    LoadObject("m420060movie01a_01", "m420060movie01fa")
    LoadObject("m420060movie01b_01", "m420060movie01fb")
    LoadObject("m420060movie01c_01", "m420060movie01fc")
  end
  Vista.LoadAnimation("m420060movie01a_01", "e001")
  Vista.LoadAnimation("m420060movie01a_01", "e002")
  Vista.LoadAnimation("m420060movie01b_01", "e001")
  Vista.LoadAnimation("m420060movie01b_01", "e002")
  Vista.LoadAnimation("m420060movie01c_01", "e001")
  Vista.LoadAnimation("m420060movie01c_01", "e002")
  LoadSceneViewerResource("c1.0", "h0701f_za")
  LoadSceneViewerResource("c2.0", "h0701f_za")
  LoadSceneViewerResource("c3.0", "h0701f_za")
  LoadSceneViewerResource("c4.0", "h0701f_za")
  LoadSceneViewerResource("c5.0", "h0701f_za")
  LoadSceneViewerResource("c6.0", "h0701f_za")
  LoadEnvironmentFile("c1.0", "es_m420_060_c1.0")
  LoadEnvironmentFile("c2.0", "es_m420_060_c2.0")
  LoadEnvironmentFile("c3.0", "es_m420_060_c3.0")
  LoadEnvironmentFile("c4.0", "es_m420_060_c4.0")
  LoadEnvironmentFile("c5.0", "es_m420_060_c5.0")
  LoadEnvironmentFile("c6.0", "es_m420_060_c6.0")
  WaitVistaLoad()
  SetPosition("HERO_01", 0.359, 0.506, -49.863, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 180, 0, "LINEAR", 0, 0)
  SetScale("HERO_01", 1, 1, 1)
  SetPosition("chr805_01", 0.359, 0.506, -55.788, "LINEAR", 0, 0)
  SetRotation("chr805_01", 0, 0, 0, "LINEAR", 0, 0)
  SetScale("chr805_01", 2, 2, 2)
  SetPosition("m420060movie01a_01", 0.359, 17.29, 25, "LINEAR", 0, 0)
  SetRotation("m420060movie01a_01", 0, 180, 0, "LINEAR", 0, 0)
  SetScale("m420060movie01a_01", 1, 1, 1)
  SetPosition("m420060movie01b_01", 0.359, 18.494, 25, "LINEAR", 0, 0)
  SetRotation("m420060movie01b_01", 0, 180, 0, "LINEAR", 0, 0)
  SetScale("m420060movie01b_01", 1, 1, 1)
  SetPosition("m420060movie01c_01", 0.359, 20.059, 25, "LINEAR", 0, 0)
  SetRotation("m420060movie01c_01", 0, 180, 0, "LINEAR", 0, 0)
  SetScale("m420060movie01c_01", 1, 1, 1)
  PlayMotion("HERO_01", "fn01_01", 0, true, 0)
  SetFace("HERO_01", "F15", 0, 1, FACE_BLENDTIME, 0)
  PlayMotion("chr805_01", "bn01", 0, true, 0)
  ChangeDigimonFace("chr805_01", EYE_EXPRESSION_NORMAL, 0)
  SetMouth("chr805_01", 1, 0, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", 0, 0, 0, false, "SCURVE", 0, 0)
  BlendFaceDigi("chr805_01", 0, 0, 0, "SCURVE", 0, 0)
  SetCamera(1.276, 0.812, -48.962, 0, 40, "LINEAR", 0, false, 0)
  SetCameraTarget(-0.1, 1.803, -55.171, "LINEAR", 0, false, 0)
  SetCamera(1.158, 0.897, -49.494, 0, 40, "LINEAR", 150, true, 0)
  SetCameraTarget(-0.1, 1.803, -55.171, "LINEAR", 150, true, 0)
  MovePosition("HERO_01", 0.359, 0.506, -53.363, false, 1, 0)
  MoveRotation("HERO_01", 0, 180, 0, "LINEAR", 1, true, 0)
  ModelVisible("m420060movie01a_01", false, 0, 0)
  ModelVisible("m420060movie01b_01", false, 0, 0)
  ModelVisible("m420060movie01c_01", false, 0, 0)
  FIELD_SET()
  EVENT_START()
  CUT("1.0")
  SetEnv_All("c1.0", 0)
  Fade_In(1, 30)
  WaitFrame(90)
  CUT("2.0")
  SetEnv_All("c2.0", 0)
  SetCamera(6.325, 1.337, -54.311, 0, 40, "LINEAR", 0, false, 0)
  SetCameraTarget(0.382, 2.127, -54.341, "LINEAR", 0, false, 0)
  MessageTalk("m420_060_010")
  MessageClose()
  WaitFrame(10)
  CUT("3.0")
  SetEnv_All("c3.0", 0)
  SetCamera(0.421, 1.872, -54.018, 0, 40, "LINEAR", 0, false, 0)
  SetCameraTarget(0.404, 2.036, -53.194, "LINEAR", 0, false, 0)
  ModelVisible("chr805_01", false, 0, 0)
  ModelVisible("m420060movie01a_01", true, 0, 0)
  ModelVisible("m420060movie01b_01", true, 0, 0)
  ModelVisible("m420060movie01c_01", true, 0, 0)
  SetPosition("m420060movie01a_01", 0.359, 17.29, -65.93, "DECEL", 950, 0)
  SetRotation("m420060movie01a_01", 0, 180, 0, "LINEAR", 0, 0)
  SetScale("m420060movie01ma_01", 1, 1, 1)
  SetPosition("m420060movie01b_01", 0.359, 18.494, -55.13, "DECEL", 1050, 0)
  SetRotation("m420060movie01b_01", 0, 180, 0, "LINEAR", 0, 0)
  SetScale("m420060movie01b_01", 1, 1, 1)
  SetPosition("m420060movie01c_01", 0.359, 20.059, -45.42, "DECEL", 1150, 0)
  SetRotation("m420060movie01c_01", 0, 180, 0, "LINEAR", 0, 0)
  SetScale("m420060movie01c_01", 1, 1, 1)
  PlayMotion("m420060movie01a_01", "e001", 0, false, 0)
  PlayMotion("m420060movie01a_01", "e002", 0, true, 60)
  SetFace("m420060movie01a_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  PlayMotion("m420060movie01b_01", "e001", 0, false, 0)
  PlayMotion("m420060movie01b_01", "e002", 0, true, 90)
  SetFace("m420060movie01b_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  PlayMotion("m420060movie01c_01", "e001", 0, false, 0)
  PlayMotion("m420060movie01c_01", "e002", 0, true, 90)
  SetFace("m420060movie01c_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  WaitFrame(10)
  SetCamera(0.41, 1.193, -54.795, 0, 70, "SCURVE", 150, false, 0)
  SetCameraTarget(0.402, 1.947, -53.159, "SCURVE", 150, false, 0)
  SetFace("HERO_01", "E16_M10", 0, 1, FACE_BLENDTIME, 0)
  BlendEye("HERO_01", -22, -29, "SCURVE", 30, 20)
  BlendFace("HERO_01", -14, -28, 0, true, "SCURVE", 30, 20)
  MessageTalk("m420_060_020")
  MessageClose()
  WaitFrame(5)
  SetFace("HERO_01", "F16", 0, 1, FACE_BLENDTIME, 0)
  BlendEye("HERO_01", -22, 39, "SCURVE", 30, 40)
  BlendFace("HERO_01", -14, 38, 0, true, "SCURVE", 30, 40)
  MessageTalk("m420_060_030")
  MessageClose()
  WaitFrame(5)
  MessageTalk("m420_060_040")
  MessageClose()
  WaitFrame(5)
  MessageTalk("m420_060_050")
  MessageClose()
  WaitFrame(10)
  CUT("4.0")
  SetEnv_All("c4.0", 0)
  SetFace("HERO_01", "F15", 0, 1, FACE_BLENDTIME, 0)
  ModelVisible("m420060movie01a_01", false, 0, 0)
  ModelVisible("m420060movie01b_01", false, 0, 0)
  ModelVisible("m420060movie01c_01", false, 0, 0)
  ModelVisible("chr805_01", true, 0, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", -30, 0, 0, false, "SCURVE", 0, 0)
  SetCamera(5.97, 1.359, -54.388, 0, 40, "LINEAR", 0, false, 0)
  SetCameraTarget(0.027, 2.149, -54.418, "LINEAR", 0, false, 0)
  SetCamera(5.241, 1.456, -54.392, 0, 40, "LINEAR", 120, true, 0)
  SetCameraTarget(0.027, 2.149, -54.418, "LINEAR", 120, true, 0)
  WaitFrame(15)
  SetPosition("chr805_01", 0, 0.506, -52.787, "LINEAR", 300, 0)
  SetRotation("chr805_01", 0, 0, 0, "LINEAR", 300, 0)
  WaitFrame(40)
  SetFace("HERO_01", "E16_M10", 0, 1, FACE_BLENDTIME, 0)
  WaitFrame(60)
  CUT("5.0")
  SetEnv_All("c5.0", 0)
  SetCamera(2.316, 1.912, -53.566, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(0.337, 1.922, -53.624, "LINEAR", 0, false, 0)
  WaitFrame(110)
  ModelVisible("chr805_01", false, 30, 0)
  WaitFrame(70)
  CUT("6.0")
  SetEnv_All("c6.0", 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", 0, 0, 0, false, "SCURVE", 0, 0)
  SetCamera(0.393, 2.024, -54.364, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(0.401, 2.015, -53.404, "LINEAR", 0, false, 0)
  SetCamera(0.32, 2.104, -62.662, 120, 30, "LINEAR", 600, true, 0)
  SetCameraTarget(0.401, 2.015, -53.404, "LINEAR", 600, true, 0)
  CtrVibration(0.8, 0, 30, 0)
  CtrVibration(0, 0, 0, 30)
  PostEffect.SetGlitch(true, 5.0E-5, 20, 0.005, 0.005, 0)
  WaitFrame(25)
  PostEffect.SetGlitch(false, 0, 0, 0, 0, 0)
  SetFace("HERO_01", "F15", 0, 1, FACE_BLENDTIME, 90)
  MessageTalkAuto("m420_060_060", -1, true)
  WaitMessage()
  MessageClose()
  Fade_OutNoLoadingWithWait(1, 120)
  Vista.SetKeepBGM()
  Vista.SetKeepBGMWithMapChange()
  EVENT_END(1)
end

function CUT(cut_no)
  CUT_START(cut_no)
end

function main()
  m420_060()
end

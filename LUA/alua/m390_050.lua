require("include")

function m390_050()
  Fade_Out(1, 0)
  EVENT_BEGIN()
  Talk.Load("m390")
  SetEventCutNo(2)
  if Debug.IsEventView() then
    SetTimeZone("Noon")
    SetTimeAxis("Z2028_daft_390")
    LoadMap("d1303")
  end
  LoadModel("HERO_01", "Player")
  LoadModel("SIMONS_01", "char_SIMMONS")
  LoadModel("npc057aa010101_01", "npc057aa010101")
  LoadModel("chr178_01", "char_VULCANUSMON")
  LoadSceneViewerResource("c1.0", "m390_050_c1.0")
  LoadSceneViewerResource("c2.0", "m390_050_c2.0")
  LoadEnvironmentFile("c1.0", "es_m390_050_c1.0")
  LoadEnvironmentFile("c2.0", "es_m390_050_c2.0")
  WaitVistaLoad()
  SetPosition("HERO_01", -6.76, 0, -2.026, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 21, 0, "LINEAR", 0, 0)
  SetPosition("SIMONS_01", -8.719, 0, -0.263, "LINEAR", 0, 0)
  SetRotation("SIMONS_01", 0, -275, 0, "LINEAR", 0, 0)
  SetPosition("npc057aa010101_01", -7.058, 0, 1.428, "LINEAR", 0, 0)
  SetRotation("npc057aa010101_01", 0, 124, 0, "LINEAR", 0, 0)
  SetPosition("chr178_01", -6.945, 0.041, -0.619, "LINEAR", 0, 0)
  SetRotation("chr178_01", 0, -110, 0, "LINEAR", 0, 0)
  SetScale("chr178_01", 1.36, 1.36, 1.36)
  PlayMotion("HERO_01", "fn01_01", 0, true, 0)
  SetFace("HERO_01", "F10", 0, 1, 0, 0)
  PlayMotion("SIMONS_01", "fn01_01", 0, true, 0)
  SetFace("SIMONS_01", "E03_M04", 1, 1, 0, 0)
  PlayMotion("npc057aa010101_01", "fn01_01", 0, true, 0)
  SetFace("npc057aa010101_01", "E04_M01", 0, 1, 0, 0)
  PlayMotion("chr178_01", "bd02", 0, false, 0)
  SetStartFrame("chr178_01", "bd02", 33, 0)
  SetFace("chr178_01", "F01", 2, 1, 0, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", 31, 14, 0, true, "SCURVE", 0, 0)
  BlendEye("SIMONS_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("SIMONS_01", 0, -5, 0, true, "SCURVE", 0, 0)
  BlendEye("npc057aa010101_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("npc057aa010101_01", 18, 0, 0, true, "SCURVE", 0, 0)
  SetCamera(0.695, 1.842, 4.837, 0, 23, "LINEAR", 0, false, 0)
  SetCameraTarget(-3.864, 1.114, 1.554, "LINEAR", 0, false, 0)
  Event_PlayBGM(906, 3, 0)
  FIELD_SET()
  NpcInvisible(FOR_ALL)
  EVENT_START()
  CUT("1.0")
  SetEnv_All("c1.0", 0)
  Fade_In(FADE_WHITE, 60)
  WaitFrame(75)
  MessageTalk("m390_050_010")
  PlayMotion("SIMONS_01", "e005", 0, true, 0)
  SetFace("SIMONS_01", "E03_M04", 2, 1, 0, 10)
  BlendFace("SIMONS_01", 0, -29, 0, true, "SCURVE", 30, 0)
  MessageClose()
  WaitFrame(10)
  MessageTalk("m390_050_020")
  MessageClose()
  WaitFrame(10)
  CUT("2.0")
  SetEnv_All("c2.0", 0)
  SetPosition("HERO_01", -6.76, 0, -2.026, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 21, 0, "LINEAR", 0, 0)
  SetPosition("SIMONS_01", -8.719, 0, -0.263, "LINEAR", 0, 0)
  SetRotation("SIMONS_01", 0, -275, 0, "LINEAR", 0, 0)
  SetPosition("npc057aa010101_01", -7.058, 0, 1.428, "LINEAR", 0, 0)
  SetRotation("npc057aa010101_01", 0, 155, 0, "LINEAR", 0, 0)
  SetPosition("chr178_01", -6.945, 0.041, -0.619, "LINEAR", 0, 0)
  SetRotation("chr178_01", 0, -110, 0, "LINEAR", 0, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", 31, 14, 0, true, "SCURVE", 0, 0)
  BlendEye("SIMONS_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("SIMONS_01", 29, -17, 0, true, "SCURVE", 0, 0)
  BlendEye("npc057aa010101_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("npc057aa010101_01", 68, 0, 0, true, "SCURVE", 0, 0)
  SetCamera(-4.953, 0.588, 6.971, 0, 17, "LINEAR", 0, false, 0)
  SetCameraTarget(-7.581, 1.352, -0.619, "LINEAR", 0, false, 0)
  WaitFrame(10)
  PlayMotion("HERO_01", "e008", 4, true, 0)
  SetFace("HERO_01", "F06", 0, 1, FACE_BLENDTIME, 0)
  MessageTalkSel(1, "m390_050_025")
  result = Talk.GetResultSelectedNum()
  if result == RESULT_TALK00 then
  end
  WaitFrame(30)
  Event_Quake_Start(0.5, 0.5, 60, 0)
  WaitFrame(10)
  EndMotion("HERO_01", 2)
  EndMotion("SIMONS_01", 5)
  SetFace("HERO_01", "F15", 0, 1, FACE_BLENDTIME, 5)
  SetFace("SIMONS_01", "E03_M01", 0, 1, FACE_BLENDTIME, 10)
  SetFace("npc057aa010101_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  BlendFace("HERO_01", -56, -4, 0, true, "SCURVE", 30, 5)
  BlendFace("SIMONS_01", -61, -41, 0, true, "SCURVE", 30, 10)
  BlendFace("npc057aa010101_01", -48, -40, 0, true, "SCURVE", 30, 0)
  WaitFrame(70)
  MessageTalk("m390_050_030")
  BlendFace("npc057aa010101_01", 47, 96, 0, true, "SCURVE", 40, 0)
  MessageClose()
  WaitFrame(20)
  BlendFace("HERO_01", -4, -27, 0, true, "SCURVE", 40, 5)
  BlendFace("SIMONS_01", -14, -65, 0, true, "SCURVE", 40, 10)
  MessageTalk("m390_050_040")
  BlendFace("SIMONS_01", 29, -17, 0, true, "SCURVE", 50, 0)
  SetFace("SIMONS_01", "E03_M04", 2, 1, FACE_BLENDTIME, 20)
  MessageClose()
  WaitFrame(20)
  BlendFace("HERO_01", -6, -62, 0, true, "SCURVE", 30, 5)
  MessageTalk("m390_050_045")
  MessageClose()
  Event_Quake_Start(0.5, 0.5, 60, 0)
  BlendFace("HERO_01", -56, -4, 0, true, "SCURVE", 40, 2)
  BlendFace("SIMONS_01", -61, -41, 0, true, "SCURVE", 40, 5)
  BlendFace("npc057aa010101_01", -48, -40, 0, true, "SCURVE", 50, 0)
  SetFace("SIMONS_01", "E03_M01", 0, 1, FACE_BLENDTIME, 5)
  WaitFrame(70)
  MessageTalkSel(3, "m390_050_050")
  result = Talk.GetResultSelectedNum()
  BlendFace("HERO_01", -15, -57, 0, true, "SCURVE", 30, 0)
  if result == RESULT_TALK00 then
    PlayMotion("HERO_01", "e007", 10, true, 10)
    SetFace("HERO_01", "F15", 0, 0, FACE_BLENDTIME, 15)
    SetFace("HERO_01", "F15", 0, 1, FACE_BLENDTIME, 45)
    BlendFace("SIMONS_01", -14, 22, 0, true, "SCURVE", 45, 5)
    BlendFace("SIMONS_01", 7, 22, 0, true, "SCURVE", 15, 65)
    BlendFace("SIMONS_01", -14, 22, 0, true, "SCURVE", 30, 80)
    BlendFace("npc057aa010101_01", 27, 3, 0, true, "SCURVE", 40, 0)
    BlendFace("npc057aa010101_01", 57, 3, 0, true, "SCURVE", 15, 60)
    BlendFace("npc057aa010101_01", 27, 3, 0, true, "SCURVE", 25, 75)
    WaitFrame(90)
    PlayMotion("SIMONS_01", "e030", 10, true, 0)
    WaitFrame(20)
    MessageTalk("m390_050_060")
  elseif result == RESULT_TALK01 then
    PlayMotion("HERO_01", "e002", 10, true, 10)
    SetFace("HERO_01", "F15", 0, 0, FACE_BLENDTIME, 15)
    SetFace("HERO_01", "F15", 0, 1, FACE_BLENDTIME, 45)
    WaitFrame(20)
    BlendFace("SIMONS_01", -14, 22, 0, true, "SCURVE", 45, 5)
    BlendFace("SIMONS_01", 7, 22, 0, true, "SCURVE", 15, 65)
    BlendFace("SIMONS_01", -14, 22, 0, true, "SCURVE", 30, 80)
    BlendFace("npc057aa010101_01", 27, 3, 0, true, "SCURVE", 40, 0)
    BlendFace("npc057aa010101_01", 57, 3, 0, true, "SCURVE", 15, 60)
    BlendFace("npc057aa010101_01", 27, 3, 0, true, "SCURVE", 25, 75)
    WaitFrame(100)
    PlayMotion("SIMONS_01", "e002", 10, false, 0)
    PlayMotion("SIMONS_01", "fn01_01", 0, true, 199)
    MessageTalk("m390_050_070")
  elseif result == RESULT_TALK02 then
    PlayMotion("HERO_01", "e002", 10, true, 10)
    SetFace("HERO_01", "F15", 0, 0, FACE_BLENDTIME, 15)
    SetFace("HERO_01", "F15", 0, 1, FACE_BLENDTIME, 65)
    WaitFrame(20)
    BlendFace("SIMONS_01", -14, 22, 0, true, "SCURVE", 45, 5)
    BlendFace("SIMONS_01", 7, 22, 0, true, "SCURVE", 15, 65)
    BlendFace("SIMONS_01", -14, 22, 0, true, "SCURVE", 30, 80)
    BlendFace("npc057aa010101_01", 27, 3, 0, true, "SCURVE", 40, 0)
    BlendFace("npc057aa010101_01", 57, 3, 0, true, "SCURVE", 15, 60)
    BlendFace("npc057aa010101_01", 27, 3, 0, true, "SCURVE", 25, 75)
    WaitFrame(100)
    PlayMotion("SIMONS_01", "e013", 10, true, 0)
    WaitFrame(20)
    MessageTalk("m390_050_080")
  end
  MessageClose()
  WaitFrame(10)
  Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
  EVENT_END()
end

function CUT(cut_no)
  CUT_START(cut_no)
end

function main()
  m390_050()
end

require("include")

function m440_090()
  Fade_Out(0, 0)
  EVENT_BEGIN()
  Talk.Load("m440")
  SetEventCutNo(9)
  if Debug.IsEventView() then
    SetTimeZone("Noon")
    SetTimeAxis("P2028_daft_440")
    LoadMap("d0990b")
  end
  LoadModel("DIGI_MINERVAMON_01", "char_MINERVAMON")
  LoadModel("CHRONOMON_01", "char_CHRONOMON_BOSS_EVENT")
  LoadModel("MERVAMON_01", "char_MERVAMON")
  Vista.BindSpeaker("MERVAMON_01", "char_MINERVAMON")
  if Debug.IsEventView() then
    LoadObject("d0990floor99_01", "d0990floor99")
  end
  LoadEffectScript("ef_e_com_310_01", "ef_e_com_310")
  LoadEffectScript("ef_e_com_311_01", "ef_e_com_311")
  LoadEffectScript("ef_e_com_315_01", "ef_e_com_315")
  LoadEffectScript("ef_e_com_316_01", "ef_e_com_316")
  LoadSceneViewerResource("c1.0", "d0990b_ta")
  LoadSceneViewerResource("c2.0", "d0990b_ta")
  LoadSceneViewerResource("c3.0", "d0990b_ta")
  LoadSceneViewerResource("c4.0", "d0990b_ta")
  LoadSceneViewerResource("c5.0", "d0990b_ta")
  LoadSceneViewerResource("c6.0", "d0990b_ta")
  LoadSceneViewerResource("c7.0", "d0990b_ta")
  LoadSceneViewerResource("c8.0", "d0990b_ta")
  LoadSceneViewerResource("c9.0", "d0990b_ta")
  LoadEnvironmentFile("c1.0", "es_m440_090_c1.0")
  LoadEnvironmentFile("c2.0", "es_m440_090_c2.0")
  LoadEnvironmentFile("c3.0", "es_m440_090_c3.0")
  LoadEnvironmentFile("c4.0", "es_m440_090_c4.0")
  LoadEnvironmentFile("c5.0", "es_m440_090_c5.0")
  LoadEnvironmentFile("c6.0", "es_m440_090_c6.0")
  LoadEnvironmentFile("c7.0", "es_m440_090_c7.0")
  LoadEnvironmentFile("c8.0", "es_m440_090_c8.0")
  LoadEnvironmentFile("c9.0", "es_m440_090_c9.0")
  WaitVistaLoad()
  if Debug.IsEventView() then
    SetPosition("d0990floor99_01", 0, 0, 0, "LINEAR", 0, 0)
    SetRotation("d0990floor99_01", 0, 0, 0, "LINEAR", 0, 0)
  end
  SetPosition("DIGI_MINERVAMON_01", 1.239, 0, 7.803, "LINEAR", 0, 0)
  SetRotation("DIGI_MINERVAMON_01", 0, 190, 0, "LINEAR", 0, 0)
  SetScale("DIGI_MINERVAMON_01", 0.73, 0.73, 0.73)
  SetPosition("CHRONOMON_01", -7.69, -58.136, -172.169, "LINEAR", 0, 0)
  SetRotation("CHRONOMON_01", 8, 7.5, 0, "LINEAR", 0, 0)
  SetScale("CHRONOMON_01", 1, 1, 1)
  SetPosition("MERVAMON_01", 1.239, 0, 7.803, "LINEAR", 0, 0)
  SetRotation("MERVAMON_01", 0, 189.5, 0, "LINEAR", 0, 0)
  SetScale("MERVAMON_01", 1, 1, 1)
  PlayMotion("DIGI_MINERVAMON_01", "bn02", 0, true, 0)
  SetFace("DIGI_MINERVAMON_01", "F01_M04", 0, 2, 0, 0)
  PlayMotion("CHRONOMON_01", "bn01", 0, true, 0)
  ChangeDigimonFace("CHRONOMON_01", EYE_EXPRESSION_NORMAL, 0)
  SetMouth("CHRONOMON_01", 1, 0, 0)
  PlayMotion("MERVAMON_01", "e500", 0, true, 0)
  ChangeDigimonFace("MERVAMON_01", EYE_EXPRESSION_NORMAL, 0)
  SetMouth("MERVAMON_01", 1, 0, 0)
  BlendFaceDigi("DIGI_MINERVAMON_01", -0, 0, 0, "SCURVE", 0, 0)
  BlendFaceDigi("CHRONOMON_01", 0, 0, 0, "SCURVE", 0, 0)
  SetCamera(0.296, 0.584, 8.419, 0, 60, "LINEAR", 0, false, 0, false)
  SetCameraTarget(0.664, 0.912, 7.352, "LINEAR", 0, false, 0, false)
  SetCamera(-0.063, 0.262, 9.465, 0, 60, "SCURVE", 120, true, 0, false)
  SetCameraTarget(0.664, 0.912, 7.352, "SCURVE", 120, true, 0, false)
  ModelVisible("MERVAMON_01", false, 0, 0)
  SetEnv_All("c1.0", 0)
  FIELD_SET()
  EVENT_START()
  CUT("1.0")
  Fade_In(0, FADE_TIME)
  WaitFrame(FADE_TIME)
  WaitFrame(120)
  CUT("2.0")
  SetEnv_All("c2.0", 0)
  SetCamera(1.186, 0.237, 5.84, 0, 40, "SCURVE", 0, false, 0)
  SetCameraTarget(1.423, 1.053, 8.847, "SCURVE", 0, false, 0)
  CameraOffsetTurn(5, "LINEAR", true, true, 300, 0)
  SetFace("DIGI_MINERVAMON_01", "F03_M03", 0, 2, FACE_BLENDTIME, 0)
  WaitFrame(10)
  MessageTalk("m440_090_010")
  PlayMotionBlend("DIGI_MINERVAMON_01", "blend02", 0, false, 0)
  SetFace("DIGI_MINERVAMON_01", "F03_M04", 0, 2, FACE_BLENDTIME, 0)
  MessageTalk("m440_090_020")
  MessageClose()
  WaitFrame(10)
  CUT("3.0")
  SetEnv_All("c3.0", 0)
  PlayMotion("DIGI_MINERVAMON_01", "e014", 0, false, 0)
  PlayMotion("DIGI_MINERVAMON_01", "fn01_01", 5, true, 105)
  SetFace("DIGI_MINERVAMON_01", "F02_M01", 0, 1, 0, 0)
  BlendFaceDigi("DIGI_MINERVAMON_01", 0, 0, 0, "SCURVE", 0, 0)
  SetCamera(0.955, 1.198, 7.297, -10, 35, "SCURVE", 0, false, 0)
  SetCameraTarget(1.238, 1.265, 7.76, "SCURVE", 0, false, 0)
  WaitFrame(10)
  MessageTalk("m440_090_030")
  MessageTalk("m440_090_040")
  MessageClose()
  BlendFaceDigi("DIGI_MINERVAMON_01", -15, 0, 0, "SCURVE", 30, 0)
  PlayMotion("DIGI_MINERVAMON_01", "fn01_01", 10, true, 0)
  PlayMotionBlend("DIGI_MINERVAMON_01", "blend01", 0, false, 0)
  SetFace("DIGI_MINERVAMON_01", "F01_M02", 0, 2, FACE_BLENDTIME, 0)
  MessageTalk("m440_090_050")
  MessageClose()
  WaitFrame(10)
  CUT("4.0")
  SetEnv_All("c4.0", 0)
  PlayMotion("DIGI_MINERVAMON_01", "bn01", 0, true, 0)
  SetFace("DIGI_MINERVAMON_01", "F02_M02", 0, 1, FACE_BLENDTIME, 0)
  BlendFaceDigi("DIGI_MINERVAMON_01", -31, 0, 0, "SCURVE", 0, 0)
  SetCamera(1.174, 1.42, 7.114, 4, 45, "LINEAR", 0, false, 0, false)
  SetCameraTarget(1.294, 1.035, 7.849, "LINEAR", 0, false, 0, false)
  SetCamera(1.074, 1.675, 5.857, 4, 45, "SCURVE", 120, true, 0, false)
  SetCameraTarget(1.371, 0.723, 7.673, "SCURVE", 120, true, 0, false)
  WaitFrame(10)
  MessageTalk("m440_090_060")
  MessageClose()
  WaitFrame(10)
  CUT("5.0")
  SetEnv_All("c5.0", 0)
  BlendFaceDigi("DIGI_MINERVAMON_01", 0, 0, 0, "SCURVE", 0, 0)
  PlayMotion("DIGI_MINERVAMON_01", "bn01", 0, true, 0)
  SetFace("DIGI_MINERVAMON_01", "F02_M02", 0, 2, FACE_BLENDTIME, 0)
  SetCamera(0.07, 0.392, 9.14, 0, 50, "LINEAR", 0, false, 0, false)
  SetCameraTarget(0.61, 1.011, 7.672, "LINEAR", 0, false, 0, false)
  CameraOffsetTurn(5, "LINEAR", true, true, 300, 0)
  WaitFrame(10)
  MessageTalk("m440_090_070")
  MessageClose()
  WaitFrame(10)
  CUT("6.0")
  SetEnv_All("c6.0", 0)
  SetFace("DIGI_MINERVAMON_01", "F02_M02", 0, 1, FACE_BLENDTIME, 0)
  BlendFaceDigi("DIGI_MINERVAMON_01", -7, 0, 0, "SCURVE", 0, 0)
  SetCamera(1.101, 1.159, 7.49, -19, 60, "LINEAR", 0, false, 0, false)
  SetCameraTarget(1.41, 1.069, 7.963, "LINEAR", 0, false, 0, false)
  SetCamera(1.025, 1.182, 7.374, -19, 60, "LINEAR", 150, true, 0, false)
  SetCameraTarget(1.41, 1.069, 7.963, "LINEAR", 150, true, 0, false)
  WaitFrame(10)
  MessageTalk("m440_090_080")
  local slot_01 = Event_PlaySE(404084, 100, false, 0.3, 1.6)
  PlayMotion("DIGI_MINERVAMON_01", "e512", 3, true, 50)
  SetCamera(0.752, 1.193, 6.477, -19, 60, "SCURVE", 15, true, 0, false)
  SetCameraTarget(1.618, 0.94, 7.802, "SCURVE", 15, true, 0, false)
  local slot_02 = Event_PlaySE(404032, 100, false, 0.3, 2.3)
  PlayEffect("ef_e_com_310_01", false, 70)
  Vista.AttachEffectToModel("ef_e_com_310_01", "DIGI_MINERVAMON_01", "J_root")
  Vista.SetAttachEffectPos("ef_e_com_310_01", -0.12, 0.1, 0.1)
  Vista.SetAttachEffectRot("ef_e_com_310_01", 0, 0, 0)
  Vista.SetAttachEffectScale("ef_e_com_310_01", 1, false)
  SetFace("DIGI_MINERVAMON_01", "F02_M01", 0, 2, FACE_BLENDTIME, 0)
  MessageTalkAuto("m440_090_090", -1, true)
  WaitFrame(110)
  BackFade_OutNoLoadingWithWait(1, 5)
  WaitMessage()
  MessageClose()
  WaitFrame(40)
  Event_StopSE(slot_01, 0.3, 0)
  ModelVisible("ef_e_com_310_01", false, 0, 0)
  CUT("7.0")
  SetEnv_All("c7.0", 0)
  ModelVisible("DIGI_MINERVAMON_01", false, 0, 0)
  ModelVisible("ef_e_com_310_01", false, 0, 0)
  ModelVisible("MERVAMON_01", true, 0, 0)
  PlayEffect("ef_e_com_311_01", false, 0)
  Vista.AttachEffectToModel("ef_e_com_311_01", "MERVAMON_01", "J_root")
  Vista.SetAttachEffectPos("ef_e_com_311_01", 0, 0, 0)
  Vista.SetAttachEffectRot("ef_e_com_311_01", 0, 0, 0)
  Vista.SetAttachEffectScale("ef_e_com_311_01", 1, false)
  PlayMotion("MERVAMON_01", "e500", 3, true, 0)
  SetCamera(0.714, 1.535, 6.568, -19, 60, "LINEAR", 0, false, 0, false)
  SetCameraTarget(1.58, 1.281, 7.893, "LINEAR", 0, false, 0, false)
  SetCamera(0.383, 1.647, 5.334, -19, 60, "SCURVE", 90, true, 0, false)
  SetCameraTarget(1.683, 1.287, 7.84, "SCURVE", 90, true, 0, false)
  BackFade_In(1, 40)
  SetFace("DIGI_MINERVAMON_01", "F01", 0, 2, FACE_BLENDTIME, 0)
  WaitFrame(120)
  local slot_02 = Event_PlaySE(404085, 100, false, 0.3, 0)
  PlayMotion("MERVAMON_01", "e501", 3, true, 0)
  PlayEffect("ef_e_com_315_01", false, 0)
  Vista.AttachEffectToModel("ef_e_com_315_01", "MERVAMON_01", "J_root")
  Vista.SetAttachEffectPos("ef_e_com_315_01", 0, 0, 0)
  Vista.SetAttachEffectRot("ef_e_com_315_01", 0, 0, 0)
  Vista.SetAttachEffectScale("ef_e_com_315_01", 1, false)
  PlayEffect("ef_e_com_316_01", false, 45)
  Vista.AttachEffectToModel("ef_e_com_316_01", "MERVAMON_01", "J_root")
  Vista.SetAttachEffectPos("ef_e_com_316_01", -0.06, 1.08, 0.1)
  Vista.SetAttachEffectRot("ef_e_com_316_01", 25, -33, -31)
  Vista.SetAttachEffectScale("ef_e_com_316_01", 0.9, false)
  WaitFrame(10)
  CUT("8.0")
  SetEnv_All("c8.0", 0)
  SetPosition("MERVAMON_01", 1.239, 0, 7.803, "LINEAR", 0, 0)
  SetRotation("MERVAMON_01", 0, 180, 0, "LINEAR", 0, 0)
  SetScale("MERVAMON_01", 1, 1, 1)
  SetCamera(1.05, 3.885, 7.559, -80, 50, "LINEAR", 0, false, 0, false)
  SetCameraTarget(1.564, 2.761, 7.488, "LINEAR", 0, false, 0, false)
  SetCamera(0.67, 3.885, 7.559, -80, 50, "SCURVE", 10, true, 0, false)
  SetCameraTarget(1.724, 2.761, 7.488, "SCURVE", 10, true, 0, false)
  WaitFrame(25)
  CUT("9.0")
  SetEnv_All("c9.0", 0)
  SetEyeUVOffsetDigi("MERVAMON_01", -0.024, 0, "SCURVE", 0, 0)
  BlendFaceDigi("MERVAMON_01", 0, 5, 0, "SCURVE", 0, 0)
  SetCamera(0.605, 0.66, 6.836, 0, 30, "LINEAR", 0, false, 0, false)
  SetCameraTarget(-0.079, 0.431, 8.855, "LINEAR", 0, false, 0, false)
  SetCamera(1.19, 0.606, 5.869, 0, 40, "SCURVE", 7, true, 3, false)
  SetCameraTarget(1.035, 1.108, 8.276, "SCURVE", 7, true, 3, false)
  Event_Quake_Start(3, 1, 12, 0)
  WaitFrame(70)
  Fade_OutNoLoading(1, 5)
  WaitFrame(10)
  Vista.SetKeepBGM()
  EVENT_END()
end

function CUT(cut_no)
  CUT_START(cut_no)
end

function main()
  m440_090()
end

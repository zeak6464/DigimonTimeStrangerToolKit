require("include")

function m280_020()
  Fade_Out(0, 0)
  EVENT_BEGIN()
  Talk.Load("m280")
  SetEventCutNo(4)
  if Debug.IsEventView() then
    SetTimeZone("Noon")
    SetTimeAxis("P2028_daft_280")
    SetMapStatus("Disable")
    LoadMap("d0302")
  end
  LoadModel("HERO_01", "Player")
  LoadModel("HEROINE_01", "char_HEROINE")
  LoadModel("AEGIOMON_01", "char_AEGIOMON")
  LoadModel("chr923_01", "char_MASTERBLIMPMON_RAMP")
  LoadModel("chr172_01", "char_VENUSMON")
  LoadSceneViewerResource("c1.0", "d0302f_ta")
  LoadSceneViewerResource("c2.0", "d0302f_ta")
  LoadSceneViewerResource("c3.0", "d0302f_ta")
  LoadSceneViewerResource("c4.0", "d0302f_ta")
  LoadEnvironmentFile("c1.0", "es_m280_020_c1.0")
  LoadEnvironmentFile("c2.0", "es_m280_020_c2.0")
  LoadEnvironmentFile("c3.0", "es_m280_020_c3.0")
  LoadEnvironmentFile("c4.0", "es_m280_020_c4.0")
  WaitVistaLoad()
  SetPosition("HERO_01", -48.856, 1.675, 85.025, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, -133.5, 0, "LINEAR", 0, 0)
  SetScale("HERO_01", 1, 1, 1)
  SetPosition("HEROINE_01", -49.218, 1.675, 83.895, "LINEAR", 0, 0)
  SetRotation("HEROINE_01", 0, -0.5, 0, "LINEAR", 0, 0)
  SetScale("HEROINE_01", 1, 1, 1)
  SetPosition("AEGIOMON_01", -49.641, 1.675, 84.762, "LINEAR", 0, 0)
  SetRotation("AEGIOMON_01", 0, 106, 0, "LINEAR", 0, 0)
  SetScale("AEGIOMON_01", 1, 1, 1)
  SetPosition("chr923_01", -37.669, 2.493, 101.752, "LINEAR", 0, 0)
  SetRotation("chr923_01", 0, 109.315, 0, "LINEAR", 0, 0)
  SetScale("chr923_01", 3.015, 3.015, 3.015)
  SetPosition("chr172_01", -48.373, 1.675, 83.659, "LINEAR", 0, 0)
  SetRotation("chr172_01", 0, -49, 0, "LINEAR", 0, 0)
  SetScale("chr172_01", 1.1, 1.1, 1.1)
  PlayMotion("HERO_01", "fn01_01", 0, true, 0)
  SetFace("HERO_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  PlayMotion("HEROINE_01", "fn01_01", 0, true, 0)
  SetFace("HEROINE_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  PlayMotion("AEGIOMON_01", "fn01_01", 0, true, 0)
  SetFace("AEGIOMON_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  PlayMotion("chr923_01", "fn01_02", 0, true, 0)
  ChangeDigimonFace("chr923_01", EYE_EXPRESSION_NORMAL, 0)
  SetMouth("chr923_01", 1, 0, 0)
  PlayMotion("chr172_01", "bn01", 0, true, 0)
  ChangeDigimonFace("chr172_01", EYE_EXPRESSION_NORMAL, 0)
  SetMouth("chr172_01", 1, 0, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", 52, 35, 0, false, "SCURVE", 0, 0)
  BlendEye("HEROINE_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HEROINE_01", 45, -23, 0, true, "SCURVE", 0, 0)
  BlendEye("AEGIOMON_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("AEGIOMON_01", -55, 21, 0, false, "SCURVE", 0, 0)
  BlendFaceDigi("chr923_01", 0, 0, 0, "SCURVE", 0, 0)
  BlendFaceDigi("chr172_01", 18, 0, 0, "SCURVE", 0, 0)
  SetCamera(-45.236, 3.181, 84.632, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(-49.244, 2.904, 84.293, "LINEAR", 0, false, 0)
  FIELD_SET()
  EVENT_START()
  SetMobTransparentRange(200, 200, 200)
  NpcInvisible(FOR_ALL)
  CUT("1.0")
  SetEnv_All("c1.0", 0)
  Fade_In(0, FADE_TIME)
  WaitFrame(10)
  MessageTalk("m280_020_010")
  MessageClose()
  WaitFrame(10)
  PlayMotion("chr172_01", "e002", 5, false, 0)
  PlayMotion("chr172_01", "bn01", 3, true, 72)
  SetFace("chr172_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  MessageTalk("m280_020_015")
  MessageClose()
  WaitFrame(10)
  CUT("2.0")
  SetEnv_All("c2.0", 0)
  PlayMotion("chr923_01", "e535", 0, true, 0)
  SetCamera(-48.768, 2.202, 78.083, 0, 40, "LINEAR", 0, false, 0)
  SetCameraTarget(-47.577, 5.449, 89.659, "LINEAR", 0, false, 0)
  SetCamera(-47.875, 2.571, 77.93, 0, 40, "LINEAR", 180, false, 0)
  SetCameraTarget(-45.353, 5.61, 89.348, "LINEAR", 180, false, 0)
  WaitFrame(120)
  CUT("3.0")
  SetEnv_All("c3.0", 0)
  local slot_id = Event_PlaySE(403037, 100, false, 0, 0)
  SetCamera(-34.716, 9.357, 86.982, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(-42.297, 7.89, 94.838, "LINEAR", 0, false, 0)
  WaitFrame(90)
  CUT("4.0")
  SetEnv_All("c4.0", 0)
  SetPosition("HERO_01", -48.73, 1.592, 84.063, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 28.5, 0, "LINEAR", 0, 0)
  SetPosition("HEROINE_01", -49.801, 1.592, 83.78, "LINEAR", 0, 0)
  SetRotation("HEROINE_01", 0, 32, 0, "LINEAR", 0, 0)
  SetPosition("AEGIOMON_01", -49.722, 1.592, 84.521, "LINEAR", 0, 0)
  SetRotation("AEGIOMON_01", 0, 41.5, 0, "LINEAR", 0, 0)
  SetPosition("chr172_01", -49.09, 1.592, 82.61, "LINEAR", 0, 0)
  SetRotation("chr172_01", 0, 19.5, 0, "LINEAR", 0, 0)
  BlendFaceDigi("chr172_01", -9, 0, 0, "SCURVE", 0, 0)
  SetCamera(-47.311, 2.451, 85.757, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(-48.675, 2.793, 84.548, "LINEAR", 0, false, 0)
  Event_SetSEVolume(slot_id, 50, 1, 0)
  PlayMotion("AEGIOMON_01", "e009", 0, true, 0)
  SetFace("AEGIOMON_01", "E16_M05", 0, 1, FACE_BLENDTIME, 0)
  PlayMotion("HEROINE_01", "fn01_01", 0, true, 0)
  SetFace("HEROINE_01", "F16", 0, 1, FACE_BLENDTIME, 0)
  PlayMotion("HERO_01", "e007", 0, true, 0)
  SetFace("HERO_01", "F16", 0, 1, FACE_BLENDTIME, 0)
  BlendEye("HERO_01", -13, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", -7, 0, 0, false, "SCURVE", 0, 0)
  BlendEye("HEROINE_01", -17, 0, "SCURVE", 0, 0)
  BlendFace("HEROINE_01", -15, 0, 0, true, "SCURVE", 0, 0)
  BlendEye("AEGIOMON_01", -15, 0, "SCURVE", 0, 0)
  BlendFace("AEGIOMON_01", -9, 0, 0, false, "SCURVE", 0, 0)
  MessageTalk("m280_020_020")
  MessageClose()
  WaitFrame(10)
  PlayMotion("HEROINE_01", "e007_01", 5, true, 0)
  SetFace("HEROINE_01", "E16_M15", 0, 1, FACE_BLENDTIME, 0)
  MessageTalk("m280_020_030")
  MessageClose()
  WaitFrame(10)
  MovePosition("HERO_01", -46.392, 1.592, 88.369, false, 6, 0)
  WaitFrame(5)
  MovePosition("HEROINE_01", -46.568, 1.592, 88.953, false, 6, 0)
  WaitFrame(5)
  MovePosition("AEGIOMON_01", -47.337, 1.592, 87.217, false, 6, 0)
  WaitFrame(5)
  MovePosition("chr172_01", -46.687, 1.592, 89.397, false, 6, 0)
  WaitFrame(30)
  Event_StopAllSE(1, 0)
  Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
  WaitFrame(30)
  EVENT_END()
end

function CUT(cut_no)
  CUT_START(cut_no)
end

function main()
  m280_020()
end

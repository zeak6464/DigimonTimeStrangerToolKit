require("include")

function m010_010()
  Fade_Out(1, 0)
  EVENT_BEGIN()
  EventRankSet("S")
  Talk.Load("m010")
  if Debug.IsEventView() then
    LoadMap("t3002")
  end
  LoadModel("MIREI_01", "char_MIREI_CHILD")
  LoadObject("OBJ_01", "t3002screen01")
  Vista.BindSpeaker("MIREI_01", "char_MIREI")
  Vista.LoadMovie("CountMovie", "m010_001")
  Vista.LoadMovie("MainMovie", "m010_010")
  LoadCamera("Camera01", "Cam_m010_001_c06")
  LoadCamera("Camera02", "Cam_m010_001_c09")
  LoadSceneViewerResource("c1.0", "t3002f_pa")
  LoadSceneViewerResource("c2.0", "t3002f_pa")
  LoadSceneViewerResource("c3.0", "t3002f_pa")
  LoadSceneViewerResource("c4.0", "t3002f_pa")
  LoadSceneViewerResource("c5.0", "t3002f_pa")
  LoadEnvironmentFile("c1.0", "es_m010_010_c1.0")
  LoadEnvironmentFile("c2.0", "es_m010_010_c2.0")
  LoadEnvironmentFile("c3.0", "es_m010_010_c3.0")
  LoadEnvironmentFile("c4.0", "es_m010_010_c4.0")
  LoadEnvironmentFile("c5.0", "es_m010_010_c5.0")
  WaitVistaLoad()
  Sound.StopBGM(0)
  Sound.PlayBGM(114, 0)
  SetCamera(3.5, 5.37, 1656.905, 0, 20, "LINEAR", 0, false, 0)
  SetCameraTarget(0, 5.37, 400, "LINEAR", 0, false, 0)
  SetPosition("MIREI_01", -1.08, 0, -4.19, "LINEAR", 0, 0)
  SetRotation("MIREI_01", 0, 98.5, 0, "LINEAR", 0, 0)
  PlayMotion("MIREI_01", "fn01_01", 0, false, 0)
  SetFace("MIREI_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  BlendEye("MIREI_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("MIREI_01", 0, 0, 0, false, "SCURVE", 0, 0)
  FIELD_SET()
  Vista.Play()
  CUT("1.0")
  SetEnv_All("c1.0", 0)
  Vista.SetSkip(false, true)
  Fade_In(1, 30)
  PlayCamera("Camera01")
  WaitFrame(115)
  Fade_OutNoLoading(0, 10)
  WaitFrame(40)
  CUT("2.0")
  SetEnv_All("c2.0", 0)
  SetCamera(0, 1.37, -4.81, 0, 40, "LINEAR", 0, false, 0, false)
  SetCameraTarget(-2.26, 1.08, -0.7, "LINEAR", 0, false, 0, false)
  SetCamera(0, 1.37, -4.81, 0, 40, "DECEL", 70, false, 0, false)
  SetCameraTarget(-4.93, 0.41, -1.51, "DECEL", 70, false, 0, false)
  BlendEye("MIREI_01", 0, 27, "SCURVE", 20, 0)
  BlendFace("MIREI_01", -28, 16, -37, false, "SCURVE", 20, 0)
  Fade_In(0, 10)
  WaitFrame(10)
  BlendFace("MIREI_01", -12, 16, -37, false, "SCURVE", 20, 60)
  BlendFace("MIREI_01", -28, 16, -37, false, "SCURVE", 30, 80)
  SetFace("MIREI_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  PlayMotion("MIREI_01", "e550", 0, false, 140)
  MessageTalkAuto("m010_001_050", -1, false)
  MESSAGE_WAIT()
  SetCamera(0, 1.37, -4.03, 0, 40, "SCURVE", 50, false, 0, false)
  SetCameraTarget(-0.06, 1.11, -1.51, "SCURVE", 50, false, 0, false)
  BlendEye("MIREI_01", 0, -27, "SCURVE", 30, 10)
  BlendFace("MIREI_01", -28, -16, 0, false, "SCURVE", 30, 10)
  WaitFrame(50)
  SetCamera(0, 1.65, -3.15, 0, 40, "SCURVE", 60, false, 0)
  SetCameraTarget(-0.03, 1.11, -0.45, "SCURVE", 60, false, 0)
  SetCamera(0, 1.65, -3.15, 0, 35, "LINEAR", 60, true, 50)
  SetCameraTarget(-0.03, 1.13, -0.45, "LINEAR", 60, true, 50)
  WaitFrame(70)
  if Debug.IsEventView() then
  else
    Field.ObjectPlayMotion(OGIM, GetIndex(OGIM, "obj_movechair02"), "e001", 0, false)
  end
  WaitFrame(20)
  Event_PlaySE(404059, 100, false, 0, 0)
  Fade_OutNoLoadingWithWait(0, 3)
  CUT("3.0")
  SetEnv_All("c3.0", 0)
  ModelVisible("MIREI_01", false, 0, 0)
  PlayCamera("Camera02")
  Fade_In(0, 10)
  WaitFrame(100)
  Fade_OutNoLoadingWithWait(0, 3)
  CUT("4.0")
  SetEnv_All("c4.0", 0)
  SetCamera(0, 5.37, -9.3, 0, 60, "LINEAR", 0, false, 0)
  SetCameraTarget(0, 5.37, -14.5, "LINEAR", 0, false, 0)
  SetCamera(0, 5.37, -9.3, 0, 50, "LINEAR", 300, false, 0)
  SetCameraTarget(0, 5.37, -14.5, "LINEAR", 300, false, 0)
  Fade_In(0, 10)
  Sound.StopBGM(3)
  WaitFrame(30)
  Vista.PlayMovieToMaterial("CountMovie", "t3002screen01_mt", false)
  Event_PlaySE(404060, 100, false, 0, 0)
  WaitFrame(90)
  SetCamera(0, 5.37, -10.754, 0, 50, "LINEAR", 0, false, 0)
  SetCameraTarget(0, 5.37, -14.5, "LINEAR", 0, false, 0)
  WaitFrame(90)
  CUT("5.0")
  SetEnv_All("c5.0", 0)
  Vista.SetSkip(true)
  Sound.StopAmbientSE(3)
  Sound.PlayBGM(3, 0)
  if Common.GetSettingLanguage() ~= LANGUAGE_JAPANESE then
    Vista.SetMessageTalkAuto("m010_010_010", 260, false, 2060)
  end
  Vista.PlayMovie("MainMovie")
  Vista.MovieCaptureFade("MainMovie", 1.5)
  while not Vista.IsPlayEndMovie("MainMovie") do
    WaitFrame(1)
  end
  WaitFrame(30)
  Sound.StopBGM(0.8)
  if type == 0 then
    Vista.SetSkip(false, false)
  else
    Vista.SetSkip(false, true)
  end
  TalkExit()
  VistaExit()
end

function CUT(cut_no)
  CUT_START(cut_no)
end

function main()
  m010_010()
end

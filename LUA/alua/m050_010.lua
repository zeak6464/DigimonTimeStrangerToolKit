require("include")

function m050_010()
  Fade_Out(0, 0)
  EVENT_BEGIN()
  Talk.Load("m050")
  SetEventCutNo(15)
  if Debug.IsEventView() then
    SetTimeZone("Morning")
    SetTimeAxis("A2020_dbef_50")
    LoadMap("t0404")
  end
  LoadModel("HERO_01", "Player")
  LoadModel("HEROINE_01", "char_HEROINE")
  Vista.LoadAnimationFace("HEROINE_01", "e04", "m04")
  Load_DigiviceHologram()
  LoadSceneViewerResource("c1.0", "t0404f_pa")
  LoadSceneViewerResource("c2.0", "m050_010_c2.0")
  LoadSceneViewerResource("c3.0", "t0404f_pa")
  LoadSceneViewerResource("c4.0", "t0404f_pa")
  LoadSceneViewerResource("c5.0", "t0404f_pa")
  LoadSceneViewerResource("c5.0_A1", "t0404f_pa")
  LoadSceneViewerResource("c5.0_B1", "t0404f_pa")
  LoadSceneViewerResource("c5.0_C1", "t0404f_pa")
  LoadSceneViewerResource("c6.0", "t0404f_pa")
  LoadSceneViewerResource("c7.0", "t0404f_pa")
  LoadSceneViewerResource("c8.0", "t0404f_pa")
  LoadSceneViewerResource("c9.0", "t0404f_pa")
  LoadSceneViewerResource("c10.0", "t0404f_pa")
  LoadSceneViewerResource("c11.0", "t0404f_pa")
  LoadSceneViewerResource("c12.0", "t0404f_pa")
  LoadEnvironmentFile("c1.0", "es_m050_010_c1.0")
  LoadEnvironmentFile("c2.0", "es_m050_010_c2.0")
  LoadEnvironmentFile("c3.0", "es_m050_010_c3.0")
  LoadEnvironmentFile("c4.0", "es_m050_010_c4.0")
  LoadEnvironmentFile("c5.0", "es_m050_010_c5.0")
  LoadEnvironmentFile("c5.0_A1", "es_m050_010_c5.0_A1")
  LoadEnvironmentFile("c5.0_B1", "es_m050_010_c5.0_B1")
  LoadEnvironmentFile("c5.0_C1", "es_m050_010_c5.0_C1")
  LoadEnvironmentFile("c6.0", "es_m050_010_c6.0")
  LoadEnvironmentFile("c7.0", "es_m050_010_c7.0")
  LoadEnvironmentFile("c8.0", "es_m050_010_c8.0")
  LoadEnvironmentFile("c9.0", "es_m050_010_c9.0")
  LoadEnvironmentFile("c10.0", "es_m050_010_c10.0")
  LoadEnvironmentFile("c11.0", "es_m050_010_c11.0")
  LoadEnvironmentFile("c12.0", "es_m050_010_c12.0")
  WaitVistaLoad()
  SetPosition("HERO_01", -2.29, 0.01, 0, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 76, 0, "LINEAR", 0, 0)
  SetPosition("HEROINE_01", 2, 0, 1.1, "LINEAR", 0, 0)
  SetRotation("HEROINE_01", 0, -105, 0, "LINEAR", 0, 0)
  PlayMotion("HERO_01", "fs01_01", 0, true, 0)
  SetFace("HERO_01", "F01", 0, 1, 0, 0)
  PlayMotion("HEROINE_01", "fn01_01", 0, true, 0)
  SetFace("HEROINE_01", "F01", 0, 1, 0, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", 0, 0, 0, false, "SCURVE", 0, 0)
  BlendEye("HEROINE_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HEROINE_01", 0, 0, 0, false, "SCURVE", 0, 0)
  Set_DigiviceHologram()
  SetEnv_All("c1.0", 0)
  SetCamera(-1.416, 1.613, 1.009, 0, 27, "LINEAR", 0, false, 0)
  SetCameraTarget(-5.24, 1.82, 0, "LINEAR", 0, false, 0)
  Event_StopBGM(0)
  FIELD_SET()
  EVENT_START()
  CUT("1.0")
  BackFade_OutNoLoading(0, 0)
  Fade_In(0, 30)
  WaitFrame(30)
  correct = false
  while not Vista.IsSkipping() and not correct do
    MessageTalk("m050_010_010", false)
    MessageClose()
    WaitFrame(10)
    do
      local slot_01 = Event_PlaySE(401035, 100, false, 0, 0)
      MessageTalk("m050_010_020", false)
      MessageClose()
      WaitFrame(10)
      MessageTalk("m050_010_030", false)
      MessageClose()
      WaitFrame(10)
    end
    MessageTalkSel(3, "m050_010_040")
    result = Talk.GetResultSelectedNum()
    if result == RESULT_TALK00 then
      WaitFrame(5)
      correct = true
    elseif result == RESULT_TALK01 then
      WaitFrame(5)
    elseif result == RESULT_TALK02 then
      WaitFrame(5)
    end
  end
  CUT("2.0")
  SetEnv_All("c2.0", 0)
  SetCamera(-1.416, 1.613, 1.009, 0, 30, "SCURVE", 90, true, 0)
  SetCameraTarget(-2.29, 1.46, 0, "SCURVE", 90, true, 0)
  ModelVisible("HEROINE_01", false, 0, 0)
  WaitFrame(10)
  PlayMotion("HERO_01", "e051", 0, false, 30)
  PlayMotion("HERO_01", "fn01_01", 4, true, 138)
  SetFace("HERO_01", "E01_M15", 0, 1, 6, 20)
  BackFade_In(0, 30)
  MOTION_WAIT("HERO_01", 10, 0)
  WaitFrame(130)
  CUT("3.0")
  SetEnv_All("c3.0", 0)
  SetCamera(-2.515, 1.549, -0.231, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(1.979, 1.417, 1.826, "LINEAR", 0, false, 0)
  SetCamera(-2.515, 1.549, -0.231, 0, 30, "DECEL", 40, false, 0)
  SetCameraTarget(1.979, 1.417, 2.136, "DECEL", 40, false, 0)
  SetPosition("HERO_01", -1.489, 0, 0, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 70, 0, "LINEAR", 0, 0)
  SetFace("HERO_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", 0, -45, 0, false, "SCURVE", 30, 0)
  Vista.ApplyVoiceSnapshot(SOUND_SNAPSHOT_DOOR)
  MessageTalk("m050_010_050")
  MessageClose()
  WaitFrame(10)
  CAM_POS_WAIT(10)
  Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
  WaitFrame(10)
  local slot_02 = Event_PlaySE(401002, 100, false, 0, 0)
  WaitFrame(50)
  local slot_03 = Event_PlaySE(401003, 100, false, 0, 0)
  WaitFrame(20)
  SetPosition("HEROINE_01", 2, 0, 1.1, "LINEAR", 0, 0)
  SetRotation("HEROINE_01", 0, -105, 0, "LINEAR", 0, 0)
  MovePosition("HEROINE_01", 0.068, 0, 0.582, true, 1.2, 0)
  MoveRotation("HEROINE_01", 0, -110, 0, "LINEAR", 1.2, false, 0)
  CUT("4.0")
  SetEnv_All("c4.0", 0)
  SetCamera(-2.438, 1.617, 0.286, 0, 35, "LINEAR", 0, false, 0)
  SetCameraTarget(-1.577, 1.503, 0.222, "LINEAR", 0, false, 0)
  Event_PlayBGM(301, 0, 0)
  SetPosition("HERO_01", -1.489, 0, 0, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 70, 0, "LINEAR", 0, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", 0, 0, 0, false, "SCURVE", 0, 0)
  ModelVisible("HEROINE_01", true, 0, 0)
  WaitFrame(10)
  Fade_In(0, 30)
  WaitFrame(30)
  MessageTalk("m050_010_060")
  MessageClose()
  WaitFrame(10)
  MOTION_WAIT("HEROINE_01", 10, 0)
  CUT("5.0")
  SetEnv_All("c5.0", 0)
  Vista.SetCharCamera("HERO_01", "player_cam_B.S_Left", "LINEAR", 0, false, 0)
  MessageTalkSel(3, "m050_010_070")
  result = Talk.GetResultSelectedNum()
  if result == RESULT_TALK00 then
    SetFace("HERO_01", "E02_M02", 1, 0, FACE_BLENDTIME, 0)
    SetFace("HERO_01", "E02_M02", 1, 1, FACE_BLENDTIME, 45)
    PlayMotionBlend("HERO_01", "blend01", 0, false, 0)
    WaitFrame(50)
    CUT("5.0_A1")
    SetEnv_All("c5.0_A1", 0)
    SetCamera(-0.989, 1.428, 0.522, 0, 30, "LINEAR", 0, false, 0)
    SetCameraTarget(0.39, 1.428, 0.592, "LINEAR", 0, false, 0)
    PlayMotion("HEROINE_01", "e022", 4, false, 0)
    PlayMotion("HEROINE_01", "fn01_01", 2, true, 138)
    SetFace("HEROINE_01", "E16_M01", 0, 1, 6, 0)
    MessageTalk("m050_010_080")
    MessageClose()
    WaitFrame(10)
  elseif result == RESULT_TALK01 then
    SetFace("HERO_01", "E04_M10", 1, 0, FACE_BLENDTIME, 0)
    SetFace("HERO_01", "E04_M01", 1, 1, FACE_BLENDTIME, 50)
    PlayMotionBlend("HERO_01", "blend02", 0, false, 0)
    WaitFrame(55)
    CUT("5.0_B1")
    SetEnv_All("c5.0_B1", 0)
    SetCamera(-0.989, 1.428, 0.522, 0, 30, "LINEAR", 0, false, 0)
    SetCameraTarget(0.39, 1.428, 0.592, "LINEAR", 0, false, 0)
    PlayMotion("HEROINE_01", "e033", 4, true, 0)
    PlayMotionBlend("HEROINE_01", "blend03", 0, false, 40)
    SetFace("HEROINE_01", "F04", 0, 1, FACE_BLENDTIME, 0)
    MessageTalk("m050_010_090")
    MessageClose()
    WaitFrame(10)
  elseif result == RESULT_TALK02 then
    SetFace("HERO_01", "F08", 0, 0, FACE_BLENDTIME, 0)
    SetFace("HERO_01", "E02_M02", 1, 1, FACE_BLENDTIME, 40)
    PlayMotionBlend("HERO_01", "blend01", 0, false, 0)
    WaitFrame(60)
    CUT("5.0_C1")
    SetEnv_All("c5.0_C1", 0)
    SetCamera(-0.989, 1.428, 0.522, 0, 30, "LINEAR", 0, false, 0)
    SetCameraTarget(0.39, 1.428, 0.592, "LINEAR", 0, false, 0)
    PlayMotion("HEROINE_01", "e020", 4, false, 0)
    PlayMotion("HEROINE_01", "fn01_01", 4, true, 105)
    SetFace("HEROINE_01", "E04_M01", 2, 1, FACE_BLENDTIME, 0)
    SetFace("HEROINE_01", "E01_M01", 0, 1, FACE_BLENDTIME, 60)
    SetBlink("HEROINE_01", 0, 0.5, 60)
    MessageTalk("m050_010_100")
    MessageClose()
    WaitFrame(10)
  end
  CUT("6.0")
  SetEnv_All("c6.0", 0)
  SetCamera(-0.722, 1.318, 0.38, 0, 40, "LINEAR", 0, false, 0)
  SetCameraTarget(0.107, 0.968, 0.503, "LINEAR", 0, false, 0)
  SetCamera(-0.722, 1.475, 0.38, 0, 40, "SCURVE_B", 100, false, 0)
  SetCameraTarget(0.107, 1.408, 0.503, "SCURVE_B", 100, false, 0)
  SetPosition("HEROINE_01", 0.107, 0, 0.593, "LINEAR", 0, 0)
  SetRotation("HEROINE_01", 0, -95, 0, "LINEAR", 0, 0)
  PlayMotion("HEROINE_01", "e206", 0, true, 0)
  SetFace("HEROINE_01", "F08", 2, 1, 0, 0)
  SetFace("HEROINE_01", "F02", 1, 1, 6, 78)
  SetBlink("HEROINE_01", 0, 0.5, 78)
  BlendEye("HEROINE_01", 9, 5, "SCURVE", 0, 0)
  BlendFace("HEROINE_01", 0, -3, 0, true, "SCURVE", 0, 0)
  MessageTalkAuto("m050_010_110", 130, true)
  MESSAGE_WAIT()
  CAM_POS_WAIT(0)
  local slot_04 = Event_PlaySE(404037, 100, false, 0, 0)
  Story.OpenCharacterEntry("char_INORI")
  WaitFrame(140)
  Story.IsClosedCharacterEntry()
  WaitFrame(30)
  CUT("7.0")
  SetEnv_All("c7.0", 0)
  SetCamera(-2.438, 1.617, 0.286, 0, 35, "LINEAR", 0, false, 0)
  SetCameraTarget(-1.577, 1.503, 0.222, "LINEAR", 0, false, 0)
  SetRotation("HEROINE_01", 0, -110, 0, "LINEAR", 0, 0)
  EndMotion("HEROINE_01", 0)
  ENDMOTION_WAIT("HEROINE_01", 0)
  PlayMotion("HEROINE_01", "e002", 0, true, 0)
  SetFace("HEROINE_01", "E16_M15", 0, 1, FACE_BLENDTIME, 0)
  BlendFace("HEROINE_01", 0, 0, 10, true, "SCURVE", 0, 0)
  WaitFrame(15)
  MessageTalk("m050_010_120")
  WaitFrame(10)
  PlayMotion("HEROINE_01", "e511", 4, true, 0)
  PlayMotionBlend("HEROINE_01", "blend01", 0, false, 0)
  SetFace("HEROINE_01", "F08", 0, 1, FACE_BLENDTIME, 0)
  SetFace("HEROINE_01", "F02", 1, 1, FACE_BLENDTIME, 60)
  SetBlink("HEROINE_01", 0, 0.5, 60)
  MessageTalk("m050_010_130")
  MessageClose()
  WaitFrame(10)
  BLEND_WAIT("HEROINE_01", 0)
  EndMotion("HEROINE_01", 0)
  WaitFrame(15)
  BlendEye("HEROINE_01", 0, 20, "SCURVE", 6, 0)
  BlendFace("HEROINE_01", 30, 60, 0, true, "SCURVE", 20, 0)
  SetFace("HEROINE_01", "F02", 2, 1, FACE_BLENDTIME, 8)
  SetFace("HEROINE_01", "F02", 1, 1, 2, 20)
  WaitFrame(5)
  SetRotation("HERO_01", 0, 70, 0, "LINEAR", 40, 0)
  MovePosition("HEROINE_01", 2.926, 0, 1.619, false, 0.6, 0)
  MoveRotation("HEROINE_01", 0, 70, 0, "LINEAR", 0.6, true, 0)
  WaitFrame(10)
  CUT("8.0")
  SetEnv_All("c8.0", 0)
  SetCamera(0.739, 1.528, 1.312, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(-1.505, 1.383, -0.358, "LINEAR", 0, false, 0)
  BlendEye("HEROINE_01", 0, 30, "SCURVE", 4, 0)
  BlendFace("HEROINE_01", 20, 70, 0, true, "SCURVE", 4, 0)
  SetFace("HERO_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  WaitFrame(50)
  CUT("9.0")
  SetEnv_All("c9.0", 0)
  SetCamera(-0.557, 1.4, 0.822, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(-1.475, 1.473, 0.04, "LINEAR", 0, false, 0)
  ModelVisible("HEROINE_01", false, 0, 0)
  local slot_05 = Event_PlaySE(500006, 100, true, 0, 0)
  WaitFrame(30)
  SetFace("HERO_01", "F15", 0, 1, FACE_BLENDTIME, 15)
  BlendEye("HERO_01", 22, 0, "SCURVE", 6, 15)
  Event_StopBGM(1, 2.3)
  Event_StopSE(slot_05, 0.2, 3)
  local slot_06 = Event_PlaySE(402002, 100, false, 0, 3)
  Play_DigiviceHologram()
  WaitFrame(10)
  PlayMotion("Horo_AGENT", "e012_01", 8, true, 0)
  WaitFrame(15)
  MessageTalk("m050_010_140")
  WaitFrame(6)
  MessageTalk("m050_010_150")
  WaitFrame(10)
  EndMotion("Horo_AGENT", 0)
  MessageTalk("m050_010_160")
  MessageClose()
  WaitFrame(6)
  CUT("10.0")
  SetEnv_All("c10.0", 0)
  SetCamera(-2.007, 1.667, 0.564, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(-1.283, 1.44, 0.151, "LINEAR", 0, false, 0)
  PlayMotion("Horo_AGENT", "e033_01", 8, true, 60)
  Event_PlayBGM(701, 0.5, 0.4)
  MessageTalk("m050_010_170")
  WaitFrame(10)
  MessageTalk("m050_010_180")
  WaitFrame(10)
  EndMotion("Horo_AGENT", 0)
  SetFace("HERO_01", "F16", 0, 1, FACE_BLENDTIME, 0)
  MessageTalk("m050_010_190")
  MessageClose()
  WaitFrame(10)
  CUT("11.0")
  SetEnv_All("c11.0", 0)
  SetCamera(-0.557, 1.475, 0.822, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(-1.475, 1.473, 0.04, "LINEAR", 0, false, 0)
  MessageTalk("m050_010_200")
  MessageClose()
  WaitFrame(5)
  SetFace("HERO_01", "E03_M11", 0, 1, FACE_BLENDTIME, 0)
  PlayMotion("Horo_AGENT", "e021_01", 8, false, 0)
  MessageTalk("m050_010_210")
  WaitFrame(6)
  PlayMotionBlend("Horo_AGENT", "blend02", 5, false, 15)
  MessageTalk("m050_010_220")
  MessageClose()
  WaitFrame(6)
  CUT("12.0")
  SetEnv_All("c12.0", 0)
  SetCamera(-2.007, 1.667, 0.564, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(-1.283, 1.44, 0.151, "LINEAR", 0, false, 0)
  MessageTalkSel(3, "m050_010_230")
  result = Talk.GetResultSelectedNum()
  if result == RESULT_TALK00 then
    PlayMotionBlend("HERO_01", "blend02", 0, false, 0)
    BLEND_WAIT("HERO_01", 0)
  elseif result == RESULT_TALK01 then
    PlayMotionBlend("HERO_01", "blend03", 0, false, 0)
    BLEND_WAIT("HERO_01", 0)
  elseif result == RESULT_TALK02 then
    PlayMotionBlend("HERO_01", "blend03", 0, false, 0)
    BLEND_WAIT("HERO_01", 0)
  end
  PlayMotion("Horo_AGENT", "e023", 8, false, 0)
  EndMotion("Horo_AGENT", 100)
  MessageTalk("m050_010_250")
  WaitFrame(6)
  MessageTalk("m050_010_260")
  WaitFrame(10)
  PlayMotionBlend("Horo_AGENT", "blend05", 3, false, 0)
  MessageTalk("m050_010_270")
  WaitFrame(10)
  MessageTalk("m050_010_280")
  MessageClose()
  WaitFrame(5)
  PlayMotionBlend("HERO_01", "blend01", 0, false, 0)
  BLEND_WAIT("HERO_01", 0)
  SetFace("HERO_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  Vista.PlayDissolve("Horo_AGENT", 402)
  WaitFrame(5)
  EndMotion("HERO_01", 0)
  EndMotion("ATCdigivice00_01", 0)
  WaitFrame(10)
  Event_PlaySE(401053, 100, false, 0, 0)
  ModelVisible("Horo_Effect", false, 15, 0)
  WaitFrame(15)
  Event_StopBGM(1.5, 1)
  SetCamera(-2.88, 1.49, 0.16, 0, 40, "SCURVE", 90, true, 0)
  SetCameraTarget(-1.283, 1.47, 0.151, "SCURVE", 90, true, 0)
  ModelVisible("ATCdigivice00_01", false, 0, 0)
  WaitFrame(80)
  if Debug.IsEventView() then
    EVENT_END()
  else
    EVENT_END_SEAMLESS(80)
  end
end

function CUT(cut_no)
  CUT_START(cut_no)
end

function main()
  m050_010()
end

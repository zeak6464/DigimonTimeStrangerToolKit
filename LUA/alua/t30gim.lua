gGimText = "field_text"

function LoadGimmickData(load_map_num)
  for i = 1, #PC_GENERAL_MOTION do
    Motion.Object:Load(FLD_OBJ_PLAYER, "", PC_GENERAL_MOTION[i])
  end
  if load_map_num == 3001 then
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_movewall00"), "e001")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_movewall00"), "e002")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_reliefparts01"), "e001")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_reliefparts01"), "e002")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_reliefparts02"), "e001")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_reliefparts02"), "e002")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_reliefparts03"), "e001")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_reliefparts03"), "e002")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_reliefparts04"), "e001")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_reliefparts04"), "e002")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_reliefparts05"), "e001")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_reliefparts05"), "e002")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_reliefparts06"), "e001")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_reliefparts06"), "e002")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_reliefparts07"), "e001")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_reliefparts07"), "e002")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_reliefparts08"), "e001")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_reliefparts08"), "e002")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_reliefparts09"), "e001")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_reliefparts09"), "e002")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_reliefparts10"), "e001")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_reliefparts10"), "e002")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_reliefparts11"), "e001")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_reliefparts11"), "e002")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_reliefparts12"), "e001")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_reliefparts12"), "e002")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_jewel01"), "e001")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_jewel01"), "e002")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_jewel02"), "e001")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_jewel02"), "e002")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_jewel03"), "e001")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_jewel03"), "e002")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_jewel04"), "e001")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_jewel04"), "e002")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_jewel05"), "e001")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_jewel05"), "e002")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_jewel06"), "e001")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_jewel06"), "e002")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_jewel07"), "e001")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_jewel07"), "e002")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_jewel08"), "e001")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_jewel08"), "e002")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_jewel09"), "e001")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_jewel09"), "e002")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_jewel10"), "e001")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_jewel10"), "e002")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_jewel11"), "e001")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_jewel11"), "e002")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_jewel12"), "e001")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_jewel12"), "e002")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_digi01"), "e001")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_digi01"), "e002")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_digi02"), "e001")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_digi02"), "e002")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_digi03"), "e001")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_digi03"), "e002")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_digi04"), "e001")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_digi04"), "e002")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_digi05"), "e001")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_digi05"), "e002")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_digi06"), "e001")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_digi06"), "e002")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_digi07"), "e001")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_digi07"), "e002")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_digi08"), "e001")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_digi08"), "e002")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_digi09"), "e001")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_digi09"), "e002")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_digi10"), "e001")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_digi10"), "e002")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_digi11"), "e001")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_digi11"), "e002")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_digi12"), "e001")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_digi12"), "e002")
  elseif load_map_num == 3002 then
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_movechair01"), "e001")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_movechair02"), "e001")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_movechair03"), "e001")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_movechair01"), "e002")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_movechair02"), "e002")
    Field.ObjectLoadMotion(OGIM, GetIndex(OGIM, "obj_movechair03"), "e002")
  end
end

function InitializeObject()
  print("##### InitializeObject #####")
  print("##### map_prefix = ", gMapPrefix, " ##### map_num = ", gMapNum, " #####")
  PlayerObjectResetAim()
  if gMapNum == 3001 then
    if Flg.Check("FLAG_MAIN_07_069") and not Flg.Check("FLAG_MAIN_07_080") then
      Prcs_t3001_UnmannedAndObjectAccessOff(false, true, false)
    end
    if Flg.Check("FLAG_MAIN_09_050") and not Flg.Check("FLAG_MAIN_09_060") then
      Prcs_t3001_UnmannedAndObjectAccessOff(false, false, true, true)
    end
    if Flg.Check("FLAG_MAIN_09_070") and not Flg.Check("FLAG_MAIN_09_080") then
      Prcs_t3001_UnmannedAndObjectAccessOff(false, false, true)
    end
    if Flg.Check("FLAG_MAIN_10_005") and not Flg.Check("FLAG_MAIN_10_015") then
      Prcs_t3001_UnmannedAndObjectAccessOff(true, false, false)
    end
    if Flg.Check("FLAG_MAIN_10_050") and not Flg.Check("FLAG_MAIN_10_055") then
      Prcs_t3001_UnmannedAndObjectAccessOff(false, false, true)
    end
    if Flg.Check("FLAG_MAIN_11_060") and not Flg.Check("FLAG_MAIN_11_080") then
      Prcs_t3001_UnmannedAndObjectAccessOff(true, false, false, true)
    end
    if Flg.Check("FLAG_MAIN_12_050") and not Flg.Check("FLAG_MAIN_12_055") then
      Prcs_t3001_UnmannedAndObjectAccessOff(false, false, true)
    end
    if Flg.Check("QUEST_M340_CLEAR") and not Flg.Check("FLAG_MAIN_13_080") then
      Prcs_t3001_UnmannedAndObjectAccessOff(true, false, false)
    end
    if Flg.Check("FLAG_MAIN_13_080") and not Flg.Check("FLAG_MAIN_13_090") then
      Prcs_t3001_UnmannedAndObjectAccessOff(false, false, true)
    end
    if Flg.Check("FLAG_MAIN_13_160") and not Flg.Check("FLAG_MAIN_13_171") then
      Prcs_t3001_UnmannedAndObjectAccessOff(false, false, true)
    end
    if Flg.Check("FLAG_MAIN_15_010") and not Flg.Check("FLAG_MAIN_15_040") then
      Prcs_t3001_UnmannedAndObjectAccessOff(false, false, true)
    end
    if Flg.Check("FLAG_MAIN_17_050") and not Flg.Check("FLAG_MAIN_17_061") then
      Prcs_t3001_UnmannedAndObjectAccessOff(false, false, true)
    end
    if Flg.Check("FLAG_MAIN_17_090") and not Flg.Check("FLAG_MAIN_18_010") then
      Prcs_t3001_UnmannedAndObjectAccessOff(false, false, true)
    end
    if Flg.Check("FLAG_MAIN_19_065") and not Flg.Check("FLAG_MAIN_20_010") then
      Prcs_t3001_UnmannedAndObjectAccessOff(false, false, true)
    end
    if Flg.Check("FLAG_MAIN_20_080") and not Flg.Check("FLAG_MAIN_20_085") then
      Prcs_t3001_UnmannedAndObjectAccessOff(false, false, true)
    end
    Field.ObjectDisableCulling(OGIM, GetIndex(OGIM, "obj_movewall00"))
    Field.ObjectDisableCulling(OGIM, GetIndex(OGIM, "obj_reliefparts01"))
    Field.ObjectDisableCulling(OGIM, GetIndex(OGIM, "obj_reliefparts02"))
    Field.ObjectDisableCulling(OGIM, GetIndex(OGIM, "obj_reliefparts03"))
    Field.ObjectDisableCulling(OGIM, GetIndex(OGIM, "obj_reliefparts04"))
    Field.ObjectDisableCulling(OGIM, GetIndex(OGIM, "obj_reliefparts05"))
    Field.ObjectDisableCulling(OGIM, GetIndex(OGIM, "obj_reliefparts06"))
    Field.ObjectDisableCulling(OGIM, GetIndex(OGIM, "obj_reliefparts07"))
    Field.ObjectDisableCulling(OGIM, GetIndex(OGIM, "obj_reliefparts08"))
    Field.ObjectDisableCulling(OGIM, GetIndex(OGIM, "obj_reliefparts09"))
    Field.ObjectDisableCulling(OGIM, GetIndex(OGIM, "obj_reliefparts10"))
    Field.ObjectDisableCulling(OGIM, GetIndex(OGIM, "obj_reliefparts11"))
    Field.ObjectDisableCulling(OGIM, GetIndex(OGIM, "obj_reliefparts12"))
    Field.ObjectDisableCulling(OGIM, GetIndex(OGIM, "obj_jewel01"))
    Field.ObjectDisableCulling(OGIM, GetIndex(OGIM, "obj_jewel02"))
    Field.ObjectDisableCulling(OGIM, GetIndex(OGIM, "obj_jewel03"))
    Field.ObjectDisableCulling(OGIM, GetIndex(OGIM, "obj_jewel04"))
    Field.ObjectDisableCulling(OGIM, GetIndex(OGIM, "obj_jewel05"))
    Field.ObjectDisableCulling(OGIM, GetIndex(OGIM, "obj_jewel06"))
    Field.ObjectDisableCulling(OGIM, GetIndex(OGIM, "obj_jewel07"))
    Field.ObjectDisableCulling(OGIM, GetIndex(OGIM, "obj_jewel08"))
    Field.ObjectDisableCulling(OGIM, GetIndex(OGIM, "obj_jewel09"))
    Field.ObjectDisableCulling(OGIM, GetIndex(OGIM, "obj_jewel10"))
    Field.ObjectDisableCulling(OGIM, GetIndex(OGIM, "obj_jewel11"))
    Field.ObjectDisableCulling(OGIM, GetIndex(OGIM, "obj_jewel12"))
    Field.ObjectDisableCulling(OGIM, GetIndex(OGIM, "obj_digi01"))
    Field.ObjectDisableCulling(OGIM, GetIndex(OGIM, "obj_digi02"))
    Field.ObjectDisableCulling(OGIM, GetIndex(OGIM, "obj_digi03"))
    Field.ObjectDisableCulling(OGIM, GetIndex(OGIM, "obj_digi04"))
    Field.ObjectDisableCulling(OGIM, GetIndex(OGIM, "obj_digi05"))
    Field.ObjectDisableCulling(OGIM, GetIndex(OGIM, "obj_digi06"))
    Field.ObjectDisableCulling(OGIM, GetIndex(OGIM, "obj_digi07"))
    Field.ObjectDisableCulling(OGIM, GetIndex(OGIM, "obj_digi08"))
    Field.ObjectDisableCulling(OGIM, GetIndex(OGIM, "obj_digi09"))
    Field.ObjectDisableCulling(OGIM, GetIndex(OGIM, "obj_digi10"))
    Field.ObjectDisableCulling(OGIM, GetIndex(OGIM, "obj_digi11"))
    Field.ObjectDisableCulling(OGIM, GetIndex(OGIM, "obj_digi12"))
    Prcs_t3001_12GodsReliefSeting()
    if Common.CheckTimeAxis("P2028_daft_430") then
      Motion.Object:PlayFinishedAnim(OGIM, GetIndex(OGIM, "obj_movewall00"), 0, "e002")
      Motion.Object:PlayFinishedAnim(OGIM, GetIndex(OGIM, "obj_reliefparts01"), 0, "e002")
      Motion.Object:PlayFinishedAnim(OGIM, GetIndex(OGIM, "obj_reliefparts02"), 0, "e002")
      Motion.Object:PlayFinishedAnim(OGIM, GetIndex(OGIM, "obj_reliefparts03"), 0, "e002")
      Motion.Object:PlayFinishedAnim(OGIM, GetIndex(OGIM, "obj_reliefparts04"), 0, "e002")
      Motion.Object:PlayFinishedAnim(OGIM, GetIndex(OGIM, "obj_reliefparts05"), 0, "e002")
      Motion.Object:PlayFinishedAnim(OGIM, GetIndex(OGIM, "obj_reliefparts06"), 0, "e002")
      Motion.Object:PlayFinishedAnim(OGIM, GetIndex(OGIM, "obj_reliefparts07"), 0, "e002")
      Motion.Object:PlayFinishedAnim(OGIM, GetIndex(OGIM, "obj_reliefparts08"), 0, "e002")
      Motion.Object:PlayFinishedAnim(OGIM, GetIndex(OGIM, "obj_reliefparts09"), 0, "e002")
      Motion.Object:PlayFinishedAnim(OGIM, GetIndex(OGIM, "obj_reliefparts10"), 0, "e002")
      Motion.Object:PlayFinishedAnim(OGIM, GetIndex(OGIM, "obj_reliefparts11"), 0, "e002")
      Motion.Object:PlayFinishedAnim(OGIM, GetIndex(OGIM, "obj_reliefparts12"), 0, "e002")
      Motion.Object:PlayFinishedAnim(OGIM, GetIndex(OGIM, "obj_jewel01"), 0, "e002")
      Motion.Object:PlayFinishedAnim(OGIM, GetIndex(OGIM, "obj_jewel02"), 0, "e002")
      Motion.Object:PlayFinishedAnim(OGIM, GetIndex(OGIM, "obj_jewel03"), 0, "e002")
      Motion.Object:PlayFinishedAnim(OGIM, GetIndex(OGIM, "obj_jewel04"), 0, "e002")
      Motion.Object:PlayFinishedAnim(OGIM, GetIndex(OGIM, "obj_jewel05"), 0, "e002")
      Motion.Object:PlayFinishedAnim(OGIM, GetIndex(OGIM, "obj_jewel06"), 0, "e002")
      Motion.Object:PlayFinishedAnim(OGIM, GetIndex(OGIM, "obj_jewel07"), 0, "e002")
      Motion.Object:PlayFinishedAnim(OGIM, GetIndex(OGIM, "obj_jewel08"), 0, "e002")
      Motion.Object:PlayFinishedAnim(OGIM, GetIndex(OGIM, "obj_jewel09"), 0, "e002")
      Motion.Object:PlayFinishedAnim(OGIM, GetIndex(OGIM, "obj_jewel10"), 0, "e002")
      Motion.Object:PlayFinishedAnim(OGIM, GetIndex(OGIM, "obj_jewel11"), 0, "e002")
      Motion.Object:PlayFinishedAnim(OGIM, GetIndex(OGIM, "obj_jewel12"), 0, "e002")
      Motion.Object:PlayFinishedAnim(OGIM, GetIndex(OGIM, "obj_digi01"), 0, "e002")
      Motion.Object:PlayFinishedAnim(OGIM, GetIndex(OGIM, "obj_digi02"), 0, "e002")
      Motion.Object:PlayFinishedAnim(OGIM, GetIndex(OGIM, "obj_digi03"), 0, "e002")
      Motion.Object:PlayFinishedAnim(OGIM, GetIndex(OGIM, "obj_digi04"), 0, "e002")
      Motion.Object:PlayFinishedAnim(OGIM, GetIndex(OGIM, "obj_digi05"), 0, "e002")
      Motion.Object:PlayFinishedAnim(OGIM, GetIndex(OGIM, "obj_digi06"), 0, "e002")
      Motion.Object:PlayFinishedAnim(OGIM, GetIndex(OGIM, "obj_digi07"), 0, "e002")
      Motion.Object:PlayFinishedAnim(OGIM, GetIndex(OGIM, "obj_digi08"), 0, "e002")
      Motion.Object:PlayFinishedAnim(OGIM, GetIndex(OGIM, "obj_digi09"), 0, "e002")
      Motion.Object:PlayFinishedAnim(OGIM, GetIndex(OGIM, "obj_digi10"), 0, "e002")
      Motion.Object:PlayFinishedAnim(OGIM, GetIndex(OGIM, "obj_digi11"), 0, "e002")
      Motion.Object:PlayFinishedAnim(OGIM, GetIndex(OGIM, "obj_digi12"), 0, "e002")
    end
    if Flg.Check("FLAG_MAIN_03_620") and Flg.Check("FLAG_IS_MIREI_ADULT") then
      Obj:new(NPC, "farm_0001"):Invisible()
    else
    end
  elseif gMapNum == 3002 then
  elseif gMapNum == 3003 then
    Field.PlayerFixedMaxSpeed(MOVE_SPEED_WALK)
  end
end

function OnTriggerEnter(col)
  local col_name = col.name
  print("##### col_name = ", col_name, " ##### map_prefix = ", gMapPrefix, " ##### map_num = ", gMapNum, " #####")
  if gMapNum == 3001 then
  end
end

function OnCheckLocatorObject(gim)
  local gim_id, gim_loc = gim.check_id, gim.locator
  local gim_name = gim.unique_name
  print("##### gimID = ", gim_id, " ##### locator = ", gim_loc, " #####")
  print("##### gim_unique_name = ", gim_name)
  if gMapNum == 3001 then
    if gim_id == 400 then
      if Flg.Check("FLAG_MAIN_01_000", "FLAG_MAIN_07_069") then
        PlayerLookAtGimmickObject("lookat_03")
        Field_Talk_Start_Not_LetterBox(gGimText, 1)
        Message("g_t3001_0030_0010")
        Field_Talk_End_Not_LetterBox()
        Prcs_t30_InvisibleFollower()
      elseif Flg.Check("FLAG_MAIN_07_070") then
        Motion.Player:ChangeMoveAnim("door", 0.75)
        MovePlayerFrame(0, 0.25, 30)
        WaitFrame(10)
        PlaySE(200001, 100)
        MapChange("t", 3002, "start_00", true, FADE_BLACK, FADE_TIME)
      end
    elseif gim_id == 402 or gim_id == 403 then
      if Flg.Check("FLAG_MAIN_09_058", "FLAG_MAIN_09_060") then
        Fade_OutNoLoadingWithWait(FADE_WHITE, FADE_TIME)
        Qst.Main:End(M260.ID, M260.STEP_255)
        Flg.Clear("FLAG_IS_NOT_MAP_NAME_DISP")
        MapChangeWithTimeTravel("d", 302, "start_20", AXIS_ORIGINAL, "P2028_daft_280", MORNING)
      else
        PlayerLookAtGimmickObject("lookat_01")
        Prcs_t3001_TheaterEntrance()
      end
    end
    if gim_name == "change_0002" then
      if not Qst.Sub:IsCompleted(178) then
        require("S100_178")
        S100_178:Event_010()
      end
      if Flg.Check("FLAG_MAIN_07_069", "FLAG_MAIN_07_080") or Flg.Check("FLAG_MAIN_22_010") then
        PlayerLookAtGimmickObject("lookat_02")
        OpenDoor(gim_name, "", "gim_7000")
        Flg.Set("FLAG_SKIP_AREACHANGE_MOVE")
        DoorMapChange("t", 3003, "start_00")
      else
        PlayerLookAtGimmickObject("lookat_02")
        Field_Talk_Start_Not_LetterBox(gGimText, 1)
        Message("g_t3001_0030_0010")
        Field_Talk_End_Not_LetterBox()
        Prcs_t30_InvisibleFollower()
      end
    end
  elseif gMapNum == 3002 then
    if gim_id == 400 then
      Motion.Player:ChangeMoveAnim("door", 0.75)
      MovePlayerFrame(180, 0.25, 30)
      WaitFrame(10)
      PlaySE(200001, 100)
      Flg.Set("FLAG_SKIP_AREACHANGE_MOVE")
      MapChange("t", 3001, "start_01", true, FADE_BLACK, FADE_TIME)
    end
  elseif gMapNum == 3003 then
  end
end

function OnCheckGimmick(gim)
  local gim_name, gim_index, gim_tag, gim_type = gim.unique_name, gim.obj_index, gim.tag, gim.obj_type
  local gim_id, gim_loc = gim.check_id, gim.locator
  print("##### gim_name = ", gim_name, " ##### gim_index = ", gim_index, " ##### gim_tag = ", gim_tag, " ##### gim_type = ", gim_type, " #####")
  if gMapNum == 3001 then
    if gim_name == "DLC_elv" then
      if Flg.Check("FLAG_DLC_PATCH001_IS_INDICATIONS") and Flg.Check("FLAG_DLC_EP00_001") then
        require("dpt01m010")
        DLCPATCH0001:Event_010()
        Prcs_t3001_GetOnElv_Fade("elv_obj", "DLC_elv", "t", 3004, "start_00")
      else
        local tlk = Tlk:new("t30", 1, false)
        tlk:StartTalk()
        SetFollowerCameraOperateRotation(0, -30, 30)
        WaitFrame(15)
        Field.ObjectLookAtTheObject(MOB, GetIndex(MOB, "disapeear_mob_45"), FLD_OBJ_PLAYER, 1, 30, 10)
        WaitFrame(15)
        tlk:Message("f_t3001_0190_0010")
        tlk:EndTalk()
        Field.ObjectResetAim(MOB, GetIndex(MOB, "disapeear_mob_45"), 30)
        Prcs_t30_InvisibleFollower()
      end
    end
  elseif gMapNum == 3002 then
  elseif gMapNum == 3003 then
    if gim_name == "door" then
      PlaySE(200001, 100)
      if Qst.Sub:Check(87, 4, 5) then
        require("S100_087")
        S100_087:Event_012()
      else
        MapChange("t", 3001, "start_02", true, FADE_BLACK, FADE_TIME)
      end
    end
  elseif gMapNum == 3004 and gim_name == "elv_icon_001" then
    Prcs_t3004_GetOnElv_Fade_01("elv_001", "elv_icon_001", "t", 3001, "start_04")
  end
end

function OnCheckActModel(act)
end

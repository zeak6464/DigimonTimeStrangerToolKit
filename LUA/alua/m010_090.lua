require("include")

function m010_090()
  Fade_Out(0, 0)
  EVENT_BEGIN()
  Talk.Load("m010")
  LOAD_VOICE()
  SetEventCutNo(9)
  if Debug.IsEventView() then
    SetTimeZone("Noon")
    SetTimeAxis("X2028_daft_10")
    LoadMap("d1003")
  end
  LoadModel("HERO_01", "Player")
  LoadModel("chr458_01", "char_MONODRAMON")
  LoadModel("chr595_01", "char_GOTTSUMON")
  LoadModel("chr081_01", "char_IMPMON")
  LoadSceneViewerResource("c1.0", "d1003f_ca")
  LoadSceneViewerResource("c2.0", "m010_090_c2.0")
  LoadSceneViewerResource("c3.0", "d1003f_ca")
  LoadSceneViewerResource("c4.0", "d1003f_ca")
  LoadSceneViewerResource("c5.0", "d1003f_ca")
  LoadSceneViewerResource("c6.0", "m010_090_c2.0")
  LoadSceneViewerResource("c7.0", "d1003f_ca")
  LoadSceneViewerResource("c8.0", "m010_090_c2.0")
  LoadSceneViewerResource("c9.0", "m010_090_c2.0")
  LoadEnvironmentFile("c1.0", "es_m010_090_c1.0")
  LoadEnvironmentFile("c2.0", "es_m010_090_c2.0")
  LoadEnvironmentFile("c3.0", "es_m010_090_c3.0")
  LoadEnvironmentFile("c4.0", "es_m010_090_c4.0")
  LoadEnvironmentFile("c5.0", "es_m010_090_c5.0")
  LoadEnvironmentFile("c6.0", "es_m010_090_c6.0")
  LoadEnvironmentFile("c7.0", "es_m010_090_c7.0")
  LoadEnvironmentFile("c8.0", "es_m010_090_c8.0")
  LoadEnvironmentFile("c9.0", "es_m010_090_c9.0")
  Load_DigiviceHologram()
  Load_PDigiSelectHologram()
  WaitVistaLoad()
  SetPosition("HERO_01", 125.716, 0.025, 37.018, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, -76.5, 0, "LINEAR", 0, 0)
  SetPosition("chr458_01", 104.771, 0.12, 27.559, "LINEAR", 0, 0)
  SetRotation("chr458_01", 0, 47.5, 0, "LINEAR", 0, 0)
  SetPosition("chr595_01", 105.808, 0.007, 26.576, "LINEAR", 0, 0)
  SetRotation("chr595_01", 0, 426, 0, "LINEAR", 0, 0)
  SetPosition("chr081_01", 104.016, 0.178, 25.813, "LINEAR", 0, 0)
  SetRotation("chr081_01", 0, 48.5, 0, "LINEAR", 0, 0)
  PlayMotion("HERO_01", "fn01_01", 0, true, 0)
  SetFace("HERO_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  SetBlink("HERO_01", 0, 1, 0)
  SetMouth("HERO_01", 1, 0, 0)
  PlayMotion("chr458_01", "fq01", 0, false, 0)
  PlayMotion("chr458_01", "fe02", 0, true, 60)
  PlayMotion("chr458_01", "bn01", 0, false, 120)
  PlayMotion("chr458_01", "fq02", 0, false, 150)
  PlayMotion("chr458_01", "bn01", 0, false, 210)
  PlayMotion("chr458_01", "fq01", 0, true, 240)
  SetFace("chr458_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  PlayMotion("chr595_01", "fe02", 0, false, 0)
  PlayMotion("chr595_01", "bv01", 7, true, 42)
  PlayMotion("chr595_01", "bn01", 12, true, 152)
  PlayMotion("chr595_01", "fe03", 7, false, 182)
  PlayMotion("chr595_01", "fe04", 0, true, 272)
  SetFace("chr595_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  PlayMotion("chr081_01", "bn01", 0, false, 0)
  PlayMotion("chr081_01", "fe04", 0, false, 60)
  PlayMotion("chr081_01", "fe02", 0, false, 126)
  PlayMotion("chr081_01", "bn01", 0, false, 186)
  PlayMotion("chr081_01", "fe04", 0, true, 216)
  SetFace("chr081_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  BlendEye("HERO_01", 5, -15, "SCURVE", 0, 0)
  BlendFace("HERO_01", -1, -45, 0, true, "SCURVE", 0, 0)
  BlendFaceDigi("chr458_01", -8, -90, 0, "SCURVE", 0, 0)
  SetEyeUVOffsetDigi("chr458_01", -0.011, 0, "SCURVE", 10, 0)
  BlendFaceDigi("chr458_01", -8, 10, 0, "SCURVE", 30, 0)
  SetEyeUVOffsetDigi("chr595_01", 0, -0, "SCURVE", 0, 0)
  BlendFaceDigi("chr595_01", 6, 29, 0, "SCURVE", 0, 0)
  SetEyeUVOffsetDigi("chr595_01", 0.012, -0.026, "SCURVE", 10, 10)
  BlendFaceDigi("chr595_01", 6, -18, 0, "SCURVE", 30, 15)
  BlendFaceDigi("chr081_01", 0, -90, 0, "SCURVE", 0, 0)
  BlendFaceDigi("chr081_01", 0, 0, 0, "SCURVE", 30, 0)
  Set_DigiviceHologram()
  Set_PDigiSelectHologram()
  SetCamera(112.235, 1.408, 30.987, 0, 30, "LINEAR", 0, false, 0, false)
  SetCameraTarget(103.88, 0.051, 25.861, "LINEAR", 0, false, 0, false)
  SetCamera(108.559, 1.341, 28.672, 0, 30, "SCURVE_B", 80, true, 0, false)
  SetCameraTarget(103.773, -0.01, 25.817, "SCURVE_B", 80, true, 0, false)
  SetEnv_All("c1.0", 0)
  FIELD_SET()
  NpcInvisible(FOR_ALL)
  Vista.GimmickObjectInvisible(FOR_ALL)
  Vista.Play()
  Vista.SetSkip(false, true)
  if not Flg.Check("FLAG_IS_LETTERBOX") then
    Talk.OpenLetterBox()
    Flg.Set("FLAG_IS_LETTERBOX")
    print("===================================")
    print("FLAG_IS_LETTERBOX_ON")
    print("===================================")
  end
  SetMobTransparentRange(20, 20, 20)
  CUT("1.0")
  Fade_In(0, FADE_TIME)
  WaitFrame(FADE_TIME)
  WaitFrame(80)
  CUT("2.0")
  SetEnv_All("c2.0", 0)
  SetCamera(125.032, 1.525, 37.146, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(125.876, 1.593, 36.906, "LINEAR", 0, false, 0)
  BlendEye("HERO_01", 9, -15, "SCURVE", 10, 0)
  BlendFace("HERO_01", -13, -45, 0, true, "SCURVE", 13, 0)
  WaitFrame(5)
  SetFace("HERO_01", "F16", 0, 1, FACE_BLENDTIME, 0)
  WaitFrame(40)
  CUT("3.0")
  SetEnv_All("c3.0", 0)
  ModelVisible("chr595_01", false, 0, 0)
  SetPosition("chr458_01", 104.771, 0.12, 27.34, "LINEAR", 0, 0)
  SetRotation("chr458_01", 0, 47.5, 0, "LINEAR", 0, 0)
  PlayMotion("chr595_01", "bn01", 0, true, 0)
  SetFace("chr595_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  PlayMotion("chr081_01", "bn01", 0, true, 0)
  SetFace("chr081_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  PlayMotion("chr458_01", "fq01", 0, false, 0)
  PlayMotion("chr458_01", "fe02", 5, true, 60)
  PlayMotion("chr458_01", "fq02", 7, false, 180)
  PlayMotion("chr458_01", "bn01", 7, false, 240)
  PlayMotion("chr458_01", "fq01", 5, true, 270)
  SetFace("chr458_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  SetCamera(106.447, 0.53, 26.871, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(103.384, 0.952, 27.906, "LINEAR", 0, false, 0)
  CameraOffsetMove(0.15, 0, 0, "LINEAR", true, true, 300, 0)
  WaitFrame(10)
  MessageTalk("m010_090_010")
  MessageClose()
  WaitFrame(10)
  CUT("4.0")
  SetEnv_All("c4.0", 0)
  PlayMotion("chr595_01", "bn01", 0, true, 0)
  SetFace("chr595_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  PlayMotion("chr081_01", "fe02", 0, false, 0)
  PlayMotion("chr081_01", "fe04", 3, false, 60)
  PlayMotion("chr081_01", "fe02", 5, true, 126)
  PlayMotion("chr081_01", "fq02", 7, true, 186)
  PlayMotion("chr081_01", "ba01", 10, true, 246)
  PlayMotion("chr081_01", "fe04", 7, true, 298)
  SetFace("chr081_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  PlayMotion("chr458_01", "bn01", 0, true, 0)
  SetCamera(105.752, 0.532, 26.693, 0, 27, "LINEAR", 0, false, 0)
  SetCameraTarget(103.716, 0.714, 25.621, "LINEAR", 0, false, 0)
  CameraOffsetMove(0.15, 0, 0, "LINEAR", true, true, 300, 0)
  WaitFrame(10)
  MessageTalk("m010_090_020")
  MessageClose()
  WaitFrame(10)
  PlayMotion("chr081_01", "bn01", 5, true, 0)
  CUT("5.0")
  SetEnv_All("c5.0", 0)
  ModelVisible("chr595_01", true, 0, 0)
  ModelVisible("chr081_01", false, 0, 0)
  SetPosition("chr595_01", 105.808, 0.007, 26.576, "LINEAR", 0, 0)
  SetRotation("chr595_01", 0, 426, 0, "LINEAR", 0, 0)
  SetScale("chr595_01", 0.9, 0.9, 0.9)
  PlayMotion("chr595_01", "fe02", 0, false, 0)
  PlayMotion("chr595_01", "bv01", 7, true, 42)
  PlayMotion("chr595_01", "bn01", 12, true, 152)
  PlayMotion("chr595_01", "fe03", 7, false, 182)
  PlayMotion("chr595_01", "fe04", 7, true, 272)
  SetFace("chr595_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  PlayMotion("chr081_01", "bn01", 0, true, 0)
  PlayMotion("chr458_01", "bn01", 0, true, 0)
  SetCamera(106.979, 0.69, 27.969, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(105.787, 0.661, 26.31, "LINEAR", 0, false, 0)
  CameraOffsetMove(0.15, 0, 0, "LINEAR", true, true, 300, 0)
  WaitFrame(10)
  MessageTalk("m010_090_030")
  MessageClose()
  PlayMotion("HERO_01", "e200", 0, true, 0)
  SetStartFrame("HERO_01", "e200", 100, 0)
  Vista.AttachModelToModel("ATCdigivice00_01", "Horo_AGENT", "holo")
  Vista.SetModelAlpha("Horo_AGENT", 0.7)
  Vista.SetModelPhantom("Horo_AGENT", 0.3, 0.9, 1)
  Vista.SetAttachModelScale("Horo_AGENT", 0.2)
  Vista.SetAttachModelPos("Horo_AGENT", 0, -0.7, -0.4)
  Vista.SetAttachModelRot("Horo_AGENT", -30, 0, 0)
  ModelVisible("ATCdigivice00_01", true, 0, 0)
  PlayMotion("ATCdigivice00_01", "e200", 0, true, 0)
  SetStartFrame("ATCdigivice00_01", "e200", 100, 0)
  SetLoopFrame("ATCdigivice00_01", "e200", 100, 200)
  Vista.AttachEffectToModel("Horo_Effect", "ATCdigivice00_01", "holo")
  PlayEffect("Horo_Effect", true, 0)
  ModelVisible("Horo_AGENT", true, 0, 0)
  Vista.PlayDissolve("Horo_AGENT", 401)
  WaitFrame(30)
  CUT("6.0")
  SetEnv_All("c6.0", 0)
  ModelVisible("chr081_01", true, 0, 0)
  SetCamera(125.023, 1.404, 37.65, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(125.615, 1.478, 37.031, "LINEAR", 0, false, 0)
  BlendEye("HERO_01", 9, -15, "SCURVE", 0, 0)
  BlendFace("HERO_01", -53, -45, 0, true, "SCURVE", 0, 0)
  BlendEye("HERO_01", 16, -5, "SCURVE", 15, 10)
  BlendFace("HERO_01", -0, -0, 0, false, "SCURVE", 30, 0)
  SetFace("HERO_01", "E01_M15", 0, 1, 0, 0)
  WaitFrame(10)
  PlayMotion("Horo_AGENT", "e023", 5, false, 0)
  EndMotion("Horo_AGENT", 100)
  MessageTalk("m010_090_040")
  MessageClose()
  WaitFrame(10)
  SetPosition("chr458_01", 104.771, 0.12, 27.49, "LINEAR", 0, 0)
  SetRotation("chr458_01", 0, 164.5, 0, "LINEAR", 0, 0)
  CUT("7.0")
  SetEnv_All("c7.0", 0)
  SetPosition("chr458_01", 104.771, 0.12, 27.559, "LINEAR", 0, 0)
  SetRotation("chr458_01", 0, 47.5, 0, "LINEAR", 0, 0)
  SetPosition("chr595_01", 105.531, 0.007, 26.487, "LINEAR", 0, 0)
  SetRotation("chr595_01", 0, 426, 0, "LINEAR", 0, 0)
  SetCamera(108.087, 1.423, 28.65, 0, 30, "LINEAR", 0, false, 0, false)
  SetCameraTarget(103.638, 0.167, 25.996, "LINEAR", 0, false, 0, false)
  SetCamera(107.76, 1.331, 28.455, 0, 30, "LINEAR", 180, true, 0, false)
  SetCameraTarget(103.638, 0.167, 25.996, "LINEAR", 180, true, 0, false)
  BlendFaceDigi("chr595_01", 0, -12, 0, "SCURVE", 0, 0)
  BlendFaceDigi("chr458_01", -8, 16, 0, "SCURVE", 0, 0)
  PlayMotion("chr458_01", "fq01", 0, false, 0)
  PlayMotion("chr458_01", "fe02", 5, true, 60)
  PlayMotion("chr458_01", "bn01", 7, false, 120)
  PlayMotion("chr458_01", "fq02", 7, false, 150)
  PlayMotion("chr458_01", "bn01", 7, false, 210)
  PlayMotion("chr458_01", "fq01", 7, true, 240)
  SetFace("chr458_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  PlayMotion("chr595_01", "fe02", 0, false, 0)
  SetStartFrame("chr595_01", "fe02", 0, 0)
  PlayMotion("chr595_01", "bv01", 7, true, 42)
  PlayMotion("chr595_01", "bn01", 12, true, 152)
  PlayMotion("chr595_01", "fe03", 0, false, 182)
  PlayMotion("chr595_01", "fe04", 0, true, 272)
  SetFace("chr595_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  PlayMotion("chr081_01", "bn01", 0, false, 0)
  PlayMotion("chr081_01", "fe04", 0, false, 60)
  PlayMotion("chr081_01", "fe02", 0, false, 126)
  PlayMotion("chr081_01", "bn01", 0, false, 186)
  PlayMotion("chr081_01", "fe04", 0, true, 216)
  SetFace("chr081_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  WaitFrame(10)
  MessageTalk("m010_090_050")
  MessageClose()
  WaitFrame(10)
  CUT("8.0")
  SetEnv_All("c8.0", 0)
  SetCamera(125.023, 1.404, 37.65, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(125.615, 1.478, 37.031, "LINEAR", 0, false, 0)
  SetFace("HERO_01", "F15", 0, 1, 0, 0)
  PlayMotion("Horo_AGENT", "e013", 5, true, 0)
  WaitFrame(10)
  if 1 <= Common.GetGameClearNum() then
    MessageTalk("m010_090_090")
    MessageTalk("m010_090_100")
    EndMotion("Horo_AGENT", 0)
    MessageClose()
    WaitFrame(10)
    Vista.PlayDissolve("Horo_AGENT", 402)
    WaitFrame(30)
  else
    MessageTalk("m010_090_060")
    EndMotion("Horo_AGENT", 0)
    MessageClose()
    WaitFrame(10)
    CUT("9.0")
    SetEnv_All("c9.0", 0)
    SetCamera(126.021, 1.603, 37.438, 0, 20, "LINEAR", 0, false, 0)
    SetCameraTarget(125.594, 1.487, 37.203, "LINEAR", 0, false, 0)
    WaitFrame(10)
    PlayMotion("Horo_AGENT", "e002", 5, true, 0)
    MessageTalk("m010_090_070")
    MessageClose()
    Talk.CloseLetterBox()
    Vista.PlayDissolve("Horo_AGENT", 402)
    WaitFrame(30)
    Vista.SetAttachEffectScale("Horo_Effect", 1.5, true)
    SetCamera(125.632, 1.436, 37.316, 0, 40, "LINEAR", 0, false, 0)
    SetCameraTarget(124.995, 1.318, 36.699, "LINEAR", 0, false, 0)
    WaitFrame(10)
    Play_PDigiSelectHologram()
    local digirotate = 0
    local padctrl = 0
    local selectpartner = 0
    local selectdigimon = ""
    Story.StartEventSelectDigimon(96, 1, 15, 74, -1)
    Event_PlaySE(102001, 100, 0, 0, 0)
    while true do
      if padctrl == 0 then
        if Work.IsPushKey("RIGHT") then
          digirotate = digirotate + 1
          Vista.PlayDissolve("Horo_chr343", 503)
          Vista.PlayDissolve("Horo_chr097", 503)
          Vista.PlayDissolve("Horo_chr096", 503)
          WaitFrame(15)
          padctrl = 1
        elseif Work.IsPushKey("LEFT") then
          digirotate = digirotate - 1
          Vista.PlayDissolve("Horo_chr343", 503)
          Vista.PlayDissolve("Horo_chr097", 503)
          Vista.PlayDissolve("Horo_chr096", 503)
          WaitFrame(15)
          padctrl = 1
        end
      end
      if padctrl == 1 then
        if digirotate < 0 then
          digirotate = 2
        elseif digirotate > 2 then
          digirotate = 0
        end
        if digirotate == 0 then
          ModelVisible("Horo_chr096", true, 0, 0)
          ModelVisible("Horo_chr097", false, 0, 0)
          ModelVisible("Horo_chr343", false, 0, 0)
          Vista.SetModelAlpha("Horo_chr096", 0.5)
          Vista.SetAttachModelScale("Horo_chr096", 0.085)
          Vista.SetAttachModelPos("Horo_chr096", 0, 0.6, 0.2)
          Vista.SetAttachModelRot("Horo_chr096", -32, -10, 10)
          selectpartner = 0
          Story.SetEventSelectDigimon(96, 1, 15, 74, -1)
        elseif digirotate == 1 then
          ModelVisible("Horo_chr096", false, 0, 0)
          ModelVisible("Horo_chr097", true, 0, 0)
          ModelVisible("Horo_chr343", false, 0, 0)
          Vista.SetModelAlpha("Horo_chr097", 0.5)
          Vista.SetAttachModelScale("Horo_chr097", 0.145)
          Vista.SetAttachModelPos("Horo_chr097", 0.1, 0.2, 0.05)
          Vista.SetAttachModelRot("Horo_chr097", -32, -10, 10)
          selectpartner = 1
          Story.SetEventSelectDigimon(97, 1, 14, 70, -1)
        elseif digirotate == 2 then
          ModelVisible("Horo_chr096", false, 0, 0)
          ModelVisible("Horo_chr097", false, 0, 0)
          ModelVisible("Horo_chr343", true, 0, 0)
          Vista.SetModelAlpha("Horo_chr343", 0.5)
          Vista.SetAttachModelScale("Horo_chr343", 0.1)
          Vista.SetAttachModelPos("Horo_chr343", 0, 0.55, 0.2)
          Vista.SetAttachModelRot("Horo_chr343", -32, -10, 10)
          selectpartner = 2
          Story.SetEventSelectDigimon(343, 1, 4, 17, -1)
        end
        Vista.PlayDissolve("Horo_chr343", 501)
        Vista.PlayDissolve("Horo_chr097", 501)
        Vista.PlayDissolve("Horo_chr096", 501)
        WaitFrame(15)
        padctrl = 0
      end
      if Work.IsPushKey("DECIDE") then
        Story.OpenDigimonYNWindow()
        local yn_result = 0
        while true do
          WaitFrame(1)
          yn_result = Story.GetResultDigimonYNWindow()
          if yn_result == 0 then
          else
            break
          end
        end
        if yn_result == 1 then
          break
        end
      end
      WaitFrame(Util.SecondFromFrame(1))
    end
    Event_PlaySE(300006, 100, 0, 0, 0)
    Vista.PlayDissolve("Horo_chr343", 503)
    Vista.PlayDissolve("Horo_chr097", 503)
    Vista.PlayDissolve("Horo_chr096", 503)
    WaitFrame(10)
    ModelVisible("Horo_chr343", false, 0, 0)
    ModelVisible("Horo_chr097", false, 0, 0)
    ModelVisible("Horo_chr096", false, 0, 0)
    if selectpartner == 0 then
      Party.Digimon.Add(96, 1, 15, 74)
      Flg.Set("FLAG_IS_SELECT_DIGIMON_DATA")
      Vista.SetAttachModelScale("DECIDE_chr096", 0.085)
      Vista.SetAttachModelPos("DECIDE_chr096", 0, 0.6, 0.2)
      Vista.SetAttachModelRot("DECIDE_chr096", -32, -10, 10)
      selectdigimon = "DECIDE_chr096"
    elseif selectpartner == 1 then
      Party.Digimon.Add(97, 1, 15, 61)
      Flg.Set("FLAG_IS_SELECT_DIGIMON_VIRUS")
      Vista.SetAttachModelScale("DECIDE_chr097", 0.145)
      Vista.SetAttachModelPos("DECIDE_chr097", 0.1, 0.2, 0.05)
      Vista.SetAttachModelRot("DECIDE_chr097", -32, -10, 10)
      selectdigimon = "DECIDE_chr097"
    elseif selectpartner == 2 then
      Party.Digimon.Add(343, 1, 4, 17)
      Flg.Set("FLAG_IS_SELECT_DIGIMON_VACCINE")
      Vista.SetAttachModelScale("DECIDE_chr343", 0.1)
      Vista.SetAttachModelPos("DECIDE_chr343", 0, 0.6, 0.2)
      Vista.SetAttachModelRot("DECIDE_chr343", -32, -10, 10)
      selectdigimon = "DECIDE_chr343"
    end
    print("=========selectdigimon===========", selectdigimon)
    WaitFrame(5)
    ModelVisible(selectdigimon, true, 0, 0)
    Vista.PlayDissolve(selectdigimon, 502)
    WaitFrame(50)
    PlayMotion("DECIDE_chr096", "fe02", 5, true, 0)
    PlayMotion("DECIDE_chr097", "fe02", 5, true, 0)
    PlayMotion("DECIDE_chr343", "fe02", 5, true, 0)
    PlayMotion("DECIDE_chr096", "bn01", 5, true, 65)
    PlayMotion("DECIDE_chr097", "bn01", 5, true, 100)
    PlayMotion("DECIDE_chr343", "bn01", 5, true, 73)
    WaitFrame(80)
    Story.EndEventSelectDigimon()
    SetCamera(126.626, 1.824, 38.052, 0, 20, "LINEAR", 0, false, 0)
    SetCameraTarget(125.594, 1.487, 37.203, "LINEAR", 0, false, 0)
    ModelVisible(selectdigimon, false, 30, 0)
    WaitFrame(40)
  end
  Close_PDigiSelectHologram()
  WaitFrame(20)
  FadeOutWithWaitNotFlgCheck(0, FADE_TIME)
  if 1 <= Common.GetGameClearNum() then
    Talk.CloseLetterBox()
  end
  Vista.SetSkip(false, true)
  Flg.Clear("FLAG_IS_LETTERBOX")
  Event_Quake_Stop(0)
  TalkExit()
  VistaExit()
  Field_CancelInvisiblePlayer(INVISIBLE_KEY_EVENT, 0, true, false)
  Field_CancelInvisibleFollowerAllGuest(INVISIBLE_KEY_EVENT, 0, true, false)
  Field_CancelInvisibleFollowerAllPartyMember(INVISIBLE_KEY_EVENT, 0, true, false)
  Field_CancelInvisibleNpc("", INVISIBLE_KEY_EVENT, 0, true, false)
  Field_CancelInvisibleAllSymbolEnemy(INVISIBLE_KEY_EVENT, 0, false, false)
  Field_CancelInvisibleRumorNpc(FOR_ALL, INVISIBLE_KEY_EVENT, 0, false, false)
  Field_CancelInvisibleMob(FOR_ALL, INVISIBLE_KEY_EVENT, 0, true, false)
  local field_player_index = Field.GetPlayerIndex()
  if field_player_index then
    Field.ObjectResetAim(FLD_OBJ_PLAYER, field_player_index, 0)
  end
end

function CUT(cut_no)
  CUT_START(cut_no)
end

function main()
  m010_090()
end

function Load_PDigiSelectHologram()
  LoadModel("Horo_chr096", "char_PATAMON")
  LoadModel("Horo_chr097", "char_PICODEVIMON")
  LoadModel("Horo_chr343", "char_GOMAMON")
  LoadModel("DECIDE_chr096", "char_PATAMON")
  LoadModel("DECIDE_chr097", "char_PICODEVIMON")
  LoadModel("DECIDE_chr343", "char_GOMAMON")
  LoadObject("ATCdigivice00_01", "ATCdigivice00")
  Vista.LoadDissolve("Horo_chr343", 501)
  Vista.LoadDissolve("Horo_chr097", 501)
  Vista.LoadDissolve("Horo_chr096", 501)
  Vista.LoadDissolve("DECIDE_chr096", 501)
  Vista.LoadDissolve("DECIDE_chr097", 501)
  Vista.LoadDissolve("DECIDE_chr343", 501)
  Vista.LoadAnimation("HERO_01", "e200")
  Vista.LoadAnimation("ATCdigivice00_01", "e200")
  Vista.LoadAnimation("DECIDE_chr096", "fq01")
  Vista.LoadAnimation("DECIDE_chr097", "fq01")
  Vista.LoadAnimation("DECIDE_chr343", "fq01")
end

function Set_PDigiSelectHologram()
  PlayMotion("Horo_chr343", "bn01", 0, true, 0)
  PlayMotion("Horo_chr097", "bn01", 0, true, 0)
  PlayMotion("Horo_chr096", "bn01", 0, true, 0)
  PlayMotion("DECIDE_chr096", "bn01", 0, true, 0)
  PlayMotion("DECIDE_chr097", "bn01", 0, true, 0)
  PlayMotion("DECIDE_chr343", "bn01", 0, true, 0)
  ModelVisible("Horo_chr343", false, 0, 0)
  ModelVisible("Horo_chr097", false, 0, 0)
  ModelVisible("Horo_chr096", false, 0, 0)
  ModelVisible("DECIDE_chr096", false, 0, 0)
  ModelVisible("DECIDE_chr097", false, 0, 0)
  ModelVisible("DECIDE_chr343", false, 0, 0)
  AttachObject("HERO_01", "ATCdigivice00_01", "9")
  ModelVisible("ATCdigivice00_01", false, 0, 0)
end

function Play_PDigiSelectHologram()
  Vista.AttachModelToModel("ATCdigivice00_01", "Horo_chr343", "holo")
  Vista.AttachModelToModel("ATCdigivice00_01", "Horo_chr097", "holo")
  Vista.AttachModelToModel("ATCdigivice00_01", "Horo_chr096", "holo")
  Vista.AttachModelToModel("ATCdigivice00_01", "DECIDE_chr096", "holo")
  Vista.AttachModelToModel("ATCdigivice00_01", "DECIDE_chr097", "holo")
  Vista.AttachModelToModel("ATCdigivice00_01", "DECIDE_chr343", "holo")
  Vista.SetModelAlpha("Horo_chr096", 0.5)
  Vista.SetModelPhantom("Horo_chr096", 0.3, 0.9, 1)
  Vista.SetAttachModelScale("Horo_chr096", 0.085)
  Vista.SetAttachModelPos("Horo_chr096", 0, 0.6, 0.2)
  Vista.SetAttachModelRot("Horo_chr096", -32, -10, 10)
  Vista.SetModelAlpha("Horo_chr097", 0.7)
  Vista.SetModelPhantom("Horo_chr097", 0.3, 0.9, 1)
  Vista.SetAttachModelScale("Horo_chr097", 0.05)
  Vista.SetAttachModelPos("Horo_chr097", 0.5, 1.3, -2.2)
  Vista.SetAttachModelRot("Horo_chr097", -30, -20, 0)
  Vista.SetModelAlpha("Horo_chr343", 0.7)
  Vista.SetModelPhantom("Horo_chr343", 0.3, 0.9, 1)
  Vista.SetAttachModelScale("Horo_chr343", 0.022)
  Vista.SetAttachModelPos("Horo_chr343", 5, -0.4, 0.1)
  Vista.SetAttachModelRot("Horo_chr343", -20, -50, 30)
  Vista.SetAttachModelScale("DECIDE_chr096", 0.07)
  Vista.SetAttachModelPos("DECIDE_chr096", 0, 0.5, 0.2)
  Vista.SetAttachModelRot("DECIDE_chr096", -30, 0, 0)
  Vista.AttachModelToModel("ATCdigivice00_01", "DECIDE_chr097", "holo")
  Vista.SetAttachModelScale("DECIDE_chr097", 0.05)
  Vista.SetAttachModelPos("DECIDE_chr097", 1.3, 0.8, -1.9)
  Vista.SetAttachModelRot("DECIDE_chr097", -30, 0, 0)
  Vista.AttachModelToModel("ATCdigivice00_01", "DECIDE_chr343", "holo")
  Vista.SetAttachModelScale("DECIDE_chr343", 0.03)
  Vista.SetAttachModelPos("DECIDE_chr343", 5.8, -0.5, 1)
  Vista.SetAttachModelRot("DECIDE_chr343", -30, 0, 0)
  Vista.PlayDissolve("Horo_chr096", 501)
  Vista.PlayDissolve("Horo_chr097", 501)
  Vista.PlayDissolve("Horo_chr343", 501)
  ModelVisible("Horo_chr096", true, 0, 0)
end

function Close_PDigiSelectHologram()
  WaitFrame(5)
  EndMotion("HERO_01", 0)
  EndMotion("ATCdigivice00_01", 0)
  WaitFrame(10)
  Event_PlaySE(401053, 100, false, 0, 0)
  ModelVisible("Horo_Effect", false, 15, 0)
  ENDMOTION_WAIT("HERO_01", 0)
  ModelVisible("ATCdigivice00_01", false, 0, 0)
end

function PositionChange(manage_name)
  local countX = 0
  local countY = 0
  local countZ = 0
  while true do
    if Work.IsPushKey("UP") then
      countX = countX + 0.1
      Vista.SetAttachModelPos(manage_name, countX, countY, countZ)
    elseif Work.IsPushKey("DOWN") then
      countX = countX - 0.1
      Vista.SetAttachModelPos(manage_name, countX, countY, countZ)
    elseif Work.IsPushKey("RIGHT") then
      countZ = countZ + 0.1
      Vista.SetAttachModelPos(manage_name, countX, countY, countZ)
    elseif Work.IsPushKey("LEFT") then
      countZ = countZ - 0.1
      Vista.SetAttachModelPos(manage_name, countX, countY, countZ)
    elseif Work.IsPushKey("DECIDE") then
      countY = countY + 0.1
      Vista.SetAttachModelPos(manage_name, countX, countY, countZ)
    elseif Work.IsPushKey("CANCEL") then
      countY = countY - 0.1
      Vista.SetAttachModelPos(manage_name, countX, countY, countZ)
    end
    print("===Xpara===", countX)
    print("===Ypara===", countY)
    print("===Zpara===", countZ)
    WaitFrame(Util.SecondFromFrame(1))
  end
end

function AngleChange(manage_name)
  local countX = 0
  local countY = 0
  local countZ = 0
  while true do
    if Work.IsPushKey("UP") then
      countX = countX + 1
      Vista.SetAttachModelRot(manage_name, countX, countY, countZ)
    elseif Work.IsPushKey("DOWN") then
      countX = countX - 1
      Vista.SetAttachModelRot(manage_name, countX, countY, countZ)
    elseif Work.IsPushKey("RIGHT") then
      countZ = countZ + 1
      Vista.SetAttachModelRot(manage_name, countX, countY, countZ)
    elseif Work.IsPushKey("LEFT") then
      countZ = countZ - 1
      Vista.SetAttachModelRot(manage_name, countX, countY, countZ)
    elseif Work.IsPushKey("DECIDE") then
      countY = countY + 1
      Vista.SetAttachModelRot(manage_name, countX, countY, countZ)
    elseif Work.IsPushKey("CANCEL") then
      countY = countY - 1
      Vista.SetAttachModelRot(manage_name, countX, countY, countZ)
    end
    print("===Xpara===", countX)
    print("===Ypara===", countY)
    print("===Zpara===", countZ)
    WaitFrame(Util.SecondFromFrame(1))
  end
end

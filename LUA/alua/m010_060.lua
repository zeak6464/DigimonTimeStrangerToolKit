require("include")

function m010_060()
  Fade_Out(0, 0)
  EVENT_BEGIN()
  Talk.Load("m010")
  SetEventCutNo(3)
  if Debug.IsEventView() then
    SetTimeZone("Noon")
    SetTimeAxis("X2028_daft_10")
    LoadMap("t0107")
    LoadObject("obj_01", "t04barricade00")
    LoadObject("obj_02", "f00barricade00")
  end
  LoadModel("HERO_01", "Player")
  LoadModel("npc105ha010101_01", "npc105ha010101")
  LoadModel("npc105ha010101_02", "npc105ha010101")
  LoadModel("mob084010101_01", "mob084010101")
  LoadSceneViewerResource("c1.0", "t0107f_cm")
  LoadSceneViewerResource("c2.0", "t0107f_cm")
  LoadSceneViewerResource("c3.0", "t0107f_cm")
  LoadEnvironmentFile("c1.0", "es_m010_060_c1.0")
  LoadEnvironmentFile("c2.0", "es_m010_060_c2.0")
  LoadEnvironmentFile("c3.0", "es_m010_060_c3.0")
  WaitVistaLoad()
  Event_PlayBGM(701, 2, 0)
  SetPosition("HERO_01", 4.56, 0, -0.995, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 100, 0, "LINEAR", 0, 0)
  SetPosition("npc105ha010101_01", 8.579, 0, -3.741, "LINEAR", 0, 0)
  SetRotation("npc105ha010101_01", 0, -84.431, 0, "LINEAR", 0, 0)
  SetPosition("npc105ha010101_02", 8.035, 0, -6.68, "LINEAR", 0, 0)
  SetRotation("npc105ha010101_02", 0, -84.431, 0, "LINEAR", 0, 0)
  SetPosition("mob084010101_01", 6.493, 0.054, -6.542, "LINEAR", 0, 0)
  SetRotation("mob084010101_01", 0, 0.942, 0, "LINEAR", 0, 0)
  if Debug.IsEventView() then
    SetPosition("obj_01", 8.867, 0.054, -6.1, "LINEAR", 0, 0)
    SetRotation("obj_01", 0, 83, 0, "LINEAR", 0, 0)
    SetPosition("obj_02", 10.103, 0.2, -2.886, "LINEAR", 0, 0)
    SetRotation("obj_02", 105, -278.42, 1, "LINEAR", 0, 0)
  end
  PlayMotion("HERO_01", "fn01_01", 0, false, 0)
  SetFace("HERO_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  PlayMotion("npc105ha010101_01", "e207", 0, true, 0)
  SetFace("npc105ha010101_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  PlayMotion("npc105ha010101_02", "e207", 0, true, 0)
  PlayMotion("mob084010101_01", "fn01", 0, true, 0)
  MovePosition("HERO_01", 6.333, 0, -1.308, true, 1, 0)
  MoveRotation("HERO_01", 0, 100, 0, "LINEAR", 1, true, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", 0, 0, 0, true, "SCURVE", 0, 0)
  BlendEye("npc105ha010101_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("npc105ha010101_01", 0, 0, 0, true, "SCURVE", 0, 0)
  BlendEye("mob084010101_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("mob084010101_01", 0, 0, 0, true, "SCURVE", 0, 0)
  SetEnv_All("c1.0", 0)
  SetCamera(4.597, 1.082, -0.616, 0, 40, "LINEAR", 0, false, 0)
  SetCameraTarget(5.816, 1.394, -1.29, "LINEAR", 0, false, 0)
  FIELD_SET()
  NpcInvisible(FOR_ALL)
  EVENT_START()
  SetMobTransparentRange(1.5, 0.5, 1.5)
  CUT("1.0")
  SetCamera(5.066, 1.082, -0.616, 0, 40, "SCURVE", 60, false, 0)
  SetCameraTarget(6.284, 1.394, -1.29, "SCURVE", 60, false, 0)
  Fade_In(0, FADE_TIME)
  local slot_id = Event_PlaySE(405002, 100, false, 1, 1.5)
  WaitFrame(62)
  Event_Quake_Start(5, 0.6, -1, 0)
  PlayMotion("HERO_01", "e514", 0, false, 0)
  PlayMotion("HERO_01", "fn01_01", 4, true, 105)
  PlayMotion("npc105ha010101_01", "fn06_01", 10, false, 0)
  PlayMotion("npc105ha010101_01", "fn01_01", 8, true, 76)
  PlayMotion("npc105ha010101_02", "fn06_01", 10, false, 10)
  PlayMotion("npc105ha010101_02", "fn01_01", 18, true, 36)
  WaitFrame(30)
  MessageTalkAuto("m010_060_010", 50, true)
  MovePosition("npc105ha010101_01", 7.047, 0, -5.027, false, 3, 40)
  MoveRotation("npc105ha010101_01", 0, -130, 0, "LINEAR", 3, true, 40)
  MovePosition("npc105ha010101_02", 6.652, 0, -7.514, false, 1.5, 20)
  MoveRotation("npc105ha010101_02", 0, 0, 0, "LINEAR", 1, true, 20)
  Event_Quake_Stop(12)
  Event_StopSE(slot_id, 5, 1)
  SetFace("HERO_01", "E03_M01", 0, 1, 6, 0)
  WaitFrame(30)
  MESSAGE_WAIT()
  BlendEye("HERO_01", 0, 0, "SCURVE", 8, 0)
  BlendFace("HERO_01", 20, 17.8, -20, true, "SCURVE", 50, 0)
  CUT("2.0")
  SetEnv_All("c2.0", 20)
  SetCamera(6.481, 1.885, -1.096, 0, 25, "LINEAR", 0, false, 20)
  SetCameraTarget(7.006, 1.214, -3.247, "LINEAR", 0, false, 20)
  SetPosition("HERO_01", 7, 0, -2.36, "LINEAR", 0, 20)
  SetRotation("HERO_01", 0, 130, 0, "LINEAR", 0, 20)
  SetPosition("npc105ha010101_01", 7.103, -0.001, -5.903, "LINEAR", 0, 20)
  SetRotation("npc105ha010101_01", 0, -138.431, 0, "LINEAR", 0, 20)
  SetPosition("mob084010101_01", 6.493, 0.054, -6.542, "LINEAR", 0, 20)
  SetRotation("mob084010101_01", 0, 0.942, 0, "LINEAR", 0, 20)
  PlayMotion("npc105ha010101_01", "e502", 0, true, 20)
  PlayMotion("mob084010101_01", "e521", 0, true, 20)
  PlayMotion("npc105ha010101_02", "e017", 0, true, 30)
  MessageTalk("m010_060_020")
  MessageClose()
  WaitFrame(30)
  CUT("3.0")
  SetEnv_All("c3.0", 0)
  SetCamera(5.946, 1.856, -1.58, -3, 35, "LINEAR", 0, false, 0, false)
  SetCameraTarget(8.7, 0.84, -2.93, "LINEAR", 0, false, 0, false)
  SetCamera(6.069, 1.81, -1.641, -3, 35, "LINEAR", 90, true, 0, false)
  SetCameraTarget(8.7, 0.84, -2.93, "LINEAR", 90, true, 0, false)
  SetPosition("HERO_01", 7, 0, -2.36, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 90, 0, "LINEAR", 0, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 4, 0)
  BlendFace("HERO_01", 45, -15, 0, true, "SCURVE", 48, 0)
  WaitFrame(92)
  Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
  StopSE(slot_id, 15)
  if Debug.IsEventView() then
    Event_StopBGM(0, 0)
    Event_StopAllSE(0, 0)
  end
  Vista.SetKeepBGM()
  EVENT_END()
end

function CUT(cut_no)
  CUT_START(cut_no)
end

function main()
  m010_060()
end

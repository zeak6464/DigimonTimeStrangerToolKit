require("include")

function m420_111()
  Fade_Out(1, 0)
  EVENT_BEGIN()
  Talk.Load("m420")
  SetEventCutNo("4.0")
  if Debug.IsEventView() then
    SetTimeZone("Night")
    SetTimeAxis("P2028_daft_420")
    LoadMap("t3001f")
  end
  Load_Relief()
  Vista.LoadAnimation("t3001reliefparts12_01", "e001")
  Vista.LoadAnimation("t3001reliefparts12_01", "e002")
  LoadEffectScript("eff_01", "ef_e_com_290")
  LoadEffectScript("eff_02", "ef_e_com_291")
  LoadEffectScript("eff_03", "ef_e_com_292")
  LoadEffectScript("ef_e_com_270_02", "ef_e_com_270")
  LoadSceneViewerResource("c0.1", "t3001f_pn")
  LoadSceneViewerResource("c0.2", "t3001f_pn")
  LoadSceneViewerResource("c1.0", "t3001f_pn")
  LoadSceneViewerResource("c2.0", "t3001f_pn")
  LoadSceneViewerResource("c3.0", "t3001f_pn")
  LoadSceneViewerResource("c4.0", "t3001f_pn")
  LoadEnvironmentFile("c0.1", "es_m300_120_c1.0")
  LoadEnvironmentFile("c0.2", "es_m300_120_c2.0")
  LoadEnvironmentFile("c1.0", "es_m420_111_c1.0")
  LoadEnvironmentFile("c2.0", "es_m420_111_c2.0")
  LoadEnvironmentFile("c3.0", "es_m420_111_c3.0")
  LoadEnvironmentFile("c4.0", "es_m420_111_c4.0")
  WaitVistaLoad()
  local slot_10 = Event_PlaySE(220006, 100, true, 0, 0)
  SetCamera(0, 1.5, 10, 0, 40, "LINEAR", 0, false, 0)
  SetCameraTarget(0, 0.35, 0, "LINEAR", 0, false, 0)
  SetPosition("eff_01", 0, 10.5, -24.3, "LINEAR", 0, 0)
  SetPosition("eff_02", 0, 12.5, -24.5, "LINEAR", 0, 0)
  SetPosition("eff_03", 0, 10.5, -24.3, "LINEAR", 0, 0)
  SetPosition("ef_e_com_270_02", 0, 12.57, -24.8, "LINEAR", 0, 0)
  SetRotation("ef_e_com_270_02", 0, 0, 65.48, "LINEAR", 0, 0)
  SetScale("ef_e_com_270_02", 1, 1, 1)
  SetPosition_Relief()
  PlayMotion_Relief()
  ModelVisible("t3001jewel11_01", false, 0, 0)
  ModelVisible("t3001digi11_01", false, 0, 0)
  ModelVisible("t3001jewel12_01", false, 0, 0)
  ModelVisible("t3001digi12_01", false, 0, 0)
  Event_StopAllSE(0, 0)
  FIELD_SET()
  EVENT_START()
  CUT("0.1")
  SetEnv_All("c0.1", 0)
  SetCamera(0.167, 12.141, -20.543, 0, 33, "LINEAR", 0, false, 0, false)
  SetCameraTarget(0.01, 12.538, -24.809, "LINEAR", 0, false, 0, false)
  SetCamera(0.26, 11.903, -17.98, 0, 33, "DECEL", 35, true, 32, false)
  SetCameraTarget(0.01, 12.538, -24.809, "DECEL", 35, true, 32, false)
  SetCamera(0.246, 11.941, -18.385, 0, 30, "LINEAR", 0, false, 77)
  SetCameraTarget(0.01, 12.538, -24.809, "LINEAR", 0, false, 77)
  SetCamera(0.26, 11.903, -17.98, 0, 33, "LINEAR", 2, true, 77, false)
  SetCameraTarget(0.01, 12.538, -24.809, "LINEAR", 2, true, 77, false)
  ModelVisible("t3001movewall00_01", false, 0, 0)
  FadeInWithWait(FADE_WHITE, 30)
  Event_PlaySE(401045, 100, false, 0, 0)
  Event_PlaySE(401046, 100, false, 0, 1.6)
  PlayEffect("ef_e_com_270_02", false, 0)
  PlayMotion("t3001jewel11_01", "e001", 0, false, 0)
  PlayMotion("t3001jewel11_01", "e002", 0, true, 60)
  ModelVisible("t3001jewel11_01", true, 0, 0)
  CtrVibration(1, 0, 3, 48)
  CtrVibration(0, 0, 0, 51)
  WaitFrame(70)
  CUT("0.2")
  SetEnv_All("c0.2", 0)
  SetCamera(0, 8.353, -17.228, 0, 40, "LINEAR", 0, false, 0, false)
  SetCameraTarget(0, 9.868, -25.908, "LINEAR", 0, false, 0, false)
  SetCamera(0, 8.282, -16.822, 0, 40, "SCURVE", 120, true, 0, false)
  SetCameraTarget(0, 9.868, -25.908, "SCURVE", 120, true, 0, false)
  Event_PlaySE(401047, 100, false, 0, 0)
  PlayMotion("t3001digi11_01", "e001", 0, false, 0)
  PlayMotion("t3001digi11_01", "e002", 0, true, 60)
  ModelVisible("t3001digi11_01", true, 0, 0)
  Event_Quake_Start(3, 3, 10, 25)
  WaitFrame(110)
  CUT("2.0")
  SetEnv_All("c2.0", 0)
  SetCamera(0, 11.873, -20.4, 0, 40, "LINEAR", 0, false, 0)
  SetCameraTarget(0, 12.3, -22.608, "LINEAR", 0, false, 0)
  WaitFrame(20)
  Event_PlaySE(401045, 100, false, 0, 0)
  Event_PlaySE(401046, 100, false, 0, 1.6)
  ModelVisible("t3001jewel12_01", true, 0, 0)
  PlayMotion("t3001jewel12_01", "e001", 0, false, 0)
  Vista.PlayEffect("eff_02", false, 18)
  CtrVibration(1, 0, 3, 48)
  CtrVibration(0, 0, 0, 51)
  WaitFrame(30)
  PlayMotion("t3001reliefparts12_01", "e002", 0, false, 25)
  SetCamera(0, 11.9, -21, 0, 37, "LINEAR", 0, false, 20, false)
  SetCameraTarget(0, 12.2, -22.608, "LINEAR", 0, false, 20, false)
  SetCamera(0, 11.873, -20.4, 0, 40, "DECEL", 8, true, 22, false)
  SetCameraTarget(0, 12.2, -22.608, "DECEL", 8, true, 22, false)
  WaitFrame(60)
  SetCamera(0, 10.243, -17.7, 0, 40, "SCURVE", 70, true, 0)
  SetCameraTarget(0, 12, -22.608, "SCURVE", 70, true, 0)
  Event_PlaySE(401047, 100, false, 0, 0)
  ModelVisible("t3001digi12_01", true, 0, 0)
  PlayMotion("t3001digi12_01", "e001", 0, false, 0)
  Event_Quake_Start(5, 5, 20, 20)
  Vista.PlayEffect("eff_03", false, 0)
  WaitFrame(150)
  CUT("3.0")
  SetEnv_All("c3.0", 0)
  Event_PlaySE(401048, 100, false, 0, 0)
  SetCamera(-5.162, 7.67, -14.465, 0, 40, "LINEAR", 0, false, 0, false)
  SetCameraTarget(-1.306, 10.45, -24.178, "LINEAR", 0, false, 0, false)
  SetCamera(4.439, 7.27, -14.262, 0, 40, "SCURVE", 140, true, 0, false)
  SetCameraTarget(0.555, 10.47, -23.698, "SCURVE", 140, true, 0, false)
  Vista.PlayEffect("eff_01", false, 0)
  WaitFrame(150)
  CUT("4.0")
  SetEnv_All("c4.0", 0)
  SetCamera(0, 8.03, -12.5, 0, 40, "LINEAR", 0, false, 0, false)
  SetCameraTarget(0, 11.07, -23.519, "LINEAR", 0, false, 0, false)
  SetCamera(0, 1.806, 4.269, 0, 62, "SCURVE", 140, false, 0, false)
  SetCameraTarget(0, 10.287, -23.55, "SCURVE", 140, false, 0, false)
  WaitFrame(100)
  Fade_OutNoLoadingWithWait(FADE_WHITE, 30)
  WaitFrame(60)
  if Debug.IsEventView() then
    Event_StopBGM(0, 0)
    Event_StopAllSE(0, 0)
  end
  Vista.SetKeepBGM()
  Vista.SetKeepBGMWithMapChange()
  EVENT_END(1)
end

function CUT(cut_no)
  CUT_START(cut_no)
end

function main()
  m420_111()
end

require("include")

function m040_090()
  Fade_Out(1, 0)
  EVENT_BEGIN()
  Talk.Load("m040")
  LOAD_VOICE()
  SetEventCutNo(9)
  if Debug.IsEventView() then
    SetTimeZone("Noon")
    SetTimeAxis("A2020_dbef_40")
    LoadMap("d1174b")
  end
  LoadModel("HERO_01", "Player")
  LoadModel("ELECMON_01", "char_ELECMON_AEGIOMON")
  LoadModel("TAKEMIYA_01", "char_HEROINES_FATHER")
  LoadModel("HEROINE_01", "char_HEROINE")
  LoadModel("RAREMON_01", "char_RAREMON_BIG")
  Vista.LoadAnimationFace("HERO_01", "e03", "m04")
  Vista.LoadAnimationFace("HEROINE_01", "e03", "m03")
  Vista.LoadAnimationFace("HEROINE_01", "e06", "m06")
  Vista.LoadAnimationFace("HEROINE_01", "e09", "m09")
  Vista.LoadAnimationFace("TAKEMIYA_01", "e05", "m05")
  LoadSceneViewerResource("c01", "d1174b_ca")
  LoadSceneViewerResource("c02", "d1174b_ca")
  LoadSceneViewerResource("c03", "d1174b_ca")
  LoadSceneViewerResource("c04", "d1174b_ca")
  LoadSceneViewerResource("c05", "d1174b_ca")
  LoadSceneViewerResource("c06", "d1174b_ca")
  LoadSceneViewerResource("c07", "d1174b_ca")
  LoadSceneViewerResource("c08", "d1174b_ca")
  LoadSceneViewerResource("c09", "d1174b_ca")
  LoadEnvironmentFile("c01", "es_m040_090_c01")
  LoadEnvironmentFile("c02", "es_m040_090_c02")
  LoadEnvironmentFile("c03", "es_m040_090_c03")
  LoadEnvironmentFile("c04", "es_m040_090_c04")
  LoadEnvironmentFile("c05", "es_m040_090_c05")
  LoadEnvironmentFile("c06", "es_m040_090_c06")
  LoadEnvironmentFile("c07", "es_m040_090_c07")
  LoadEnvironmentFile("c08", "es_m040_090_c08")
  LoadEnvironmentFile("c09", "es_m040_090_c09")
  WaitVistaLoad()
  SetPosition("HERO_01", 3, 0.007, 15, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 171, 0, "LINEAR", 0, 0)
  SetPosition("ELECMON_01", 0.739, 0.034, 14.551, "LINEAR", 0, 0)
  SetRotation("ELECMON_01", 0, 171.5, 0, "LINEAR", 0, 0)
  SetPosition("TAKEMIYA_01", -1.676, 0.007, 16.828, "LINEAR", 0, 0)
  SetRotation("TAKEMIYA_01", 0, 171, 0, "LINEAR", 0, 0)
  SetPosition("HEROINE_01", -0.919, 0.007, 16.979, "LINEAR", 0, 0)
  SetRotation("HEROINE_01", 0, 171, 0, "LINEAR", 0, 0)
  SetPosition("RAREMON_01", -0.098, 0, 3.653, "LINEAR", 0, 0)
  SetRotation("RAREMON_01", -180, 185.5, -180, "LINEAR", 0, 0)
  PlayMotion("HERO_01", "fn01_01", 0, true, 0)
  SetStartFrame("HERO_01", "fn01_01", 0, 0)
  PlayMotion("ELECMON_01", "bn01", 0, true, 0)
  ChangeDigimonFace("ELECMON_01", EYE_EXPRESSION_NORMAL, 0)
  SetMouth("ELECMON_01", 1, 0, 0)
  PlayMotion("TAKEMIYA_01", "fn01_01", 0, true, 0)
  PlayMotion("HEROINE_01", "e018", 0, true, 0)
  PlayMotion("RAREMON_01", "bn01", 0, true, 0)
  ChangeDigimonFace("RAREMON_01", EYE_EXPRESSION_NORMAL, 0)
  SetMouth("RAREMON_01", 1, 0, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", 0, 0, 0, false, "SCURVE", 0, 0)
  BlendFaceDigi("ELECMON_01", 0, 0, 0, "LINEAR", 0, 0)
  BlendEye("TAKEMIYA_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("TAKEMIYA_01", 0, 0, 0, true, "SCURVE", 0, 0)
  BlendEye("HEROINE_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HEROINE_01", 0, -20, 0, false, "SCURVE", 0, 0)
  BlendFaceDigi("RAREMON_01", 0, 0, 0, "LINEAR", 0, 0)
  SetCamera(5.2, 0.219, 17.899, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(-0.511, 1.861, 10.658, "LINEAR", 0, false, 0)
  SetCamera(3.309, 0.093, 18.927, 0, 30, "LINEAR", 100, true, 0)
  SetCameraTarget(-0.025, 1.887, 10.358, "LINEAR", 100, true, 0)
  ModelVisible("HERO_01", false, 0, 0)
  ModelVisible("HEROINE_01", false, 0, 0)
  ModelVisible("TAKEMIYA_01", false, 0, 0)
  FIELD_SET()
  EVENT_START()
  CUT("1.0")
  SetEnv_All("c01", 0)
  Fade_In(FADE_WHITE, FADE_TIME)
  WaitFrame(50)
  CUT("2.0")
  SetEnv_All("c02", 0)
  ModelVisible("ELECMON_01", false, 0, 0)
  SetPosition("ELECMON_01", 0.245, 0.007, 9.227, "LINEAR", 0, 0)
  SetRotation("ELECMON_01", 0, 1, 0, "LINEAR", 0, 0)
  SetPosition("RAREMON_01", 0.245, 0.007, 5.017, "LINEAR", 0, 0)
  SetRotation("RAREMON_01", 0, -0.1, 0, "LINEAR", 0, 0)
  SetCamera(0.299, 0.23, 14.722, 0, 40, "LINEAR", 0, false, 0, false)
  SetCameraTarget(0.359, 1.914, 10.177, "LINEAR", 0, false, 0, false)
  SetCamera(0.737, 0.605, 13.273, 5, 40, "DECEL", 10, true, 20, false)
  SetCameraTarget(0.532, 2.082, 10.29, "DECEL", 10, true, 20, false)
  Event_Quake_Start(3, 0.5, 70, 20)
  Event_PlaySE(403024, 100, false, 0, 0)
  Event_Quake_Stop(70)
  PlayMotion("RAREMON_01", "ba02", 5, false, 0)
  PlayMotion("RAREMON_01", "bn01", 2, true, 90)
  WaitFrame(80)
  CUT("3.0")
  SetEnv_All("c03", 0)
  ModelVisible("ELECMON_01", true, 0, 0)
  ModelVisible("HEROINE_01", true, 0, 0)
  ModelVisible("RAREMON_01", false, 0, 0)
  SetPosition("ELECMON_01", -2.808, 0, 12.503, "LINEAR", 0, 0)
  SetRotation("ELECMON_01", 0, 189, 0, "LINEAR", 0, 0)
  SetPosition("HEROINE_01", -3.445, 0, 11.109, "LINEAR", 0, 0)
  SetRotation("HEROINE_01", 0, 183.5, 0, "LINEAR", 0, 0)
  SetCamera(-2.031, 0.387, 10.817, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(-2.889, 0.324, 12.392, "LINEAR", 0, false, 0)
  WaitFrame(5)
  PlayMotion("ELECMON_01", "e500", 10, true, 0)
  SetFace("ELECMON_01", "F02", 0, 1, FACE_BLENDTIME, 0)
  WaitFrame(20)
  PlayMotion("HEROINE_01", "e203", 3, true, 0)
  SetFace("HEROINE_01", "E06_M03", 0, 1, 0, 0)
  BlendEye("HEROINE_01", -6, 0, "SCURVE", 0, 0)
  BlendFace("HEROINE_01", -50, 13, 9, false, "SCURVE", 0, 0)
  SetCamera(-1.204, 0.237, 8.088, 0, 30, "SCURVE", 5, false, 0)
  SetCameraTarget(-3.448, 0.908, 12.056, "SCURVE", 5, false, 0)
  MessageTalk("m040_090_010")
  MessageClose()
  WaitFrame(10)
  CUT("4.0")
  SetEnv_All("c04", 0)
  SetPosition("HERO_01", 2.47, 0.007, 14.83, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 216, 0, "LINEAR", 0, 0)
  SetPosition("ELECMON_01", -2.27, 0.034, 11.195, "LINEAR", 0, 0)
  SetRotation("ELECMON_01", 0, 216.5, 0, "LINEAR", 0, 0)
  SetPosition("TAKEMIYA_01", -0.469, 0.007, 12.822, "LINEAR", 0, 0)
  SetRotation("TAKEMIYA_01", -0, 193.5, 0, "LINEAR", 0, 0)
  SetPosition("HEROINE_01", -2.062, 0.007, 10.291, "LINEAR", 0, 0)
  SetRotation("HEROINE_01", 0, 172, 0, "LINEAR", 0, 0)
  SetPosition("RAREMON_01", -1.638, 0.007, 5.104, "LINEAR", 0, 0)
  SetRotation("RAREMON_01", 180, 199.499, 180, "LINEAR", 0, 0)
  BlendFace("TAKEMIYA_01", 0, 32, 0, true, "SCURVE", 0, 0)
  ModelVisible("TAKEMIYA_01", true, 0, 0)
  SetCamera(-2.191, 1.47, 9.254, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(-0.54, 1.426, 15.439, "LINEAR", 0, false, 0)
  PlayMotion("TAKEMIYA_01", "e009", 5, true, 0)
  SetFace("TAKEMIYA_01", "F05", 0, 1, 0, 0)
  Vista.SetLipSyncEndMouth("TAKEMIYA_01", 1, 3)
  MessageTalk("m040_090_020")
  MessageClose()
  WaitFrame(10)
  CUT("5.0")
  SetEnv_All("c05", 0)
  ModelVisible("TAKEMIYA_01", false, 0, 0)
  ModelVisible("RAREMON_01", true, 0, 0)
  SetPosition("HERO_01", 6.92, 0, 15, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 160.5, 0, "LINEAR", 0, 0)
  SetPosition("ELECMON_01", 1.381, -0.007, 12.764, "LINEAR", 0, 0)
  SetRotation("ELECMON_01", 0, 179.5, 0, "LINEAR", 0, 0)
  SetPosition("TAKEMIYA_01", -1.553, 0, 14.636, "LINEAR", 0, 0)
  SetRotation("TAKEMIYA_01", 0, 160.5, 0, "LINEAR", 0, 0)
  SetPosition("HEROINE_01", 0.972, 0, 11.286, "LINEAR", 0, 0)
  SetRotation("HEROINE_01", 0, 169.5, 0, "LINEAR", 0, 0)
  SetPosition("RAREMON_01", -3.34, 0, -1.318, "LINEAR", 0, 0)
  SetRotation("RAREMON_01", 0, 2, 0, "LINEAR", 0, 0)
  SetCamera(3.22, -0.126, 14.042, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(-3.3, 2.559, 7.856, "LINEAR", 0, false, 0)
  SetFace("HEROINE_01", "E06_M03", 0, 1, FACE_BLENDTIME, 0)
  BlendEye("HEROINE_01", 0, -48, "SCURVE", 10, 0)
  BlendFace("HEROINE_01", 35, -95, -51, true, "SCURVE", 30, 0)
  PlayMotion("ELECMON_01", "bn01", 0, true, 0)
  MessageTalk("m040_090_030")
  MessageClose()
  WaitFrame(10)
  CUT("6.0")
  SetEnv_All("c06", 0)
  BlendFaceDigi("ELECMON_01", -20, 0, 0, "LINEAR", 0, 0)
  SetFace("ELECMON_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  SetPosition("ELECMON_01", -2.808, 0, 12.503, "LINEAR", 0, 0)
  SetRotation("ELECMON_01", 0, 177, 0, "LINEAR", 0, 0)
  SetCamera(-2.089, 0.218, 11.025, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(-2.727, 0.283, 12.285, "LINEAR", 0, false, 0)
  WaitFrame(15)
  BlendFaceDigi("ELECMON_01", 20, 0, 0, "LINEAR", 30, 0)
  WaitFrame(30)
  BlendFaceDigi("ELECMON_01", -20, 0, 0, "LINEAR", 30, 0)
  WaitFrame(30)
  SetPosition("ELECMON_01", -2.808, 0, 12.893, "SCURVE", 60, 0)
  SetRotation("ELECMON_01", 0, 368, 0, "SCURVE", 12, 0)
  PlayMotion("ELECMON_01", "br01", 3, true, 0)
  local slot_id = Event_PlaySE(403012, 100, false, 0, 0)
  Event_StopBGM(2, 0)
  WaitFrame(12)
  CUT("7.0")
  SetEnv_All("c07", 0)
  SetPosition("HEROINE_01", -3.259, 0.007, 10.291, "LINEAR", 0, 0)
  SetRotation("HEROINE_01", 0, 180, 0, "LINEAR", 0, 0)
  SetPosition("ELECMON_01", -2.808, 0, 12.503, "LINEAR", 0, 0)
  SetPosition("ELECMON_01", -2.808, 0, 17.313, "LINEAR", 75, 0)
  SetCamera(0.149, 0.007, 14.591, 0, 20, "LINEAR", 0, false, 0)
  SetCameraTarget(-7.449, 1.701, 7.765, "LINEAR", 0, false, 0)
  WaitFrame(30)
  Event_StopSE(slot_id, 0.2, 0)
  WaitFrame(20)
  CUT("8.0")
  SetEnv_All("c08", 0)
  SetPosition("RAREMON_01", 0.247, 0, -2.618, "LINEAR", 0, 0)
  SetRotation("RAREMON_01", 0, 353, 0, "LINEAR", 0, 0)
  SetCamera(0.566, 0.931, 7.134, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(0.24, 2.494, 0.452, "LINEAR", 0, false, 0)
  SetCamera(-1.124, 0.931, 8.454, 0, 15, "LINEAR", 50, false, 0)
  SetCameraTarget(-1.06, 1.164, 7.642, "LINEAR", 50, false, 0)
  PlayMotion("RAREMON_01", "bv01", 0, false, 0)
  Event_PlaySE(403024, 100, false, 0, 0)
  Event_Quake_Start(3, 0.7, 40, 0)
  WaitFrame(40)
  Event_Quake_Stop(10)
  SetPosition("HERO_01", -1.69, 0.007, 7.18, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 149, 0, "LINEAR", 0, 0)
  SetPosition("HEROINE_01", 1.131, 0.007, 6.675, "LINEAR", 0, 0)
  SetRotation("HEROINE_01", 0, 193, 0, "LINEAR", 0, 0)
  SetPosition("ELECMON_01", -2.394, 0.008, 10.777, "LINEAR", 0, 0)
  SetRotation("ELECMON_01", 0, 174, 0, "LINEAR", 0, 0)
  BlendEye("HERO_01", -31, 12, "SCURVE", 0, 0)
  BlendFace("HERO_01", 0, 0, 0, false, "SCURVE", 0, 0)
  BlendEye("HEROINE_01", 0, 0, "LINEAR", 0, 0)
  BlendFace("HEROINE_01", 0, 0, 0, false, "LINEAR", 0, 0)
  PlayMotion("HEROINE_01", "e018", 0, true, 0)
  ModelVisible("HERO_01", true, 0, 0)
  ModelVisible("RAREMON_01", true, 0, 0)
  ModelVisible("HEROINE_01", true, 0, 0)
  ModelVisible("ELECMON_01", true, 0, 0)
  Event_PlayBGM(204, 0.5, 0)
  local slot_id = Event_PlaySE(400018, 50, false, 0, 0)
  local slot_id2 = Event_PlaySE(400020, 100, false, 0, 0)
  PlayMotion("HERO_01", "e203", 0, true, 0)
  SetStartFrame("HERO_01", "e203", 5, 0)
  SetFace("HERO_01", "E03_M04", 0, 1, 0, 0)
  PlayMotion("RAREMON_01", "ba02", 15, true, 5)
  WaitFrame(35)
  PlayMotion("RAREMON_01", "bn01", 2, true, 0)
  SetCamera(-0.563, 1.057, 7.352, 0, 35, "LINEAR", 10, false, 0)
  SetCameraTarget(-1.432, 1.418, 7.422, "LINEAR", 10, false, 0)
  SetCamera(-0.561, 1.08, 7.289, 0, 35, "DECEL", 30, true, 10)
  SetCameraTarget(-1.432, 1.418, 7.422, "DECEL", 30, true, 10)
  WaitFrame(50)
  CUT("9.0")
  SetEnv_All("c09", 0)
  SetPosition("HERO_01", -2.79, 0.007, 16.99, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 169.5, 0, "LINEAR", 0, 0)
  SetPosition("HEROINE_01", -0.86, 0.007, 18.842, "LINEAR", 0, 0)
  SetRotation("HEROINE_01", 0, -160.5, 0, "LINEAR", 0, 0)
  SetScale("HEROINE_01", 1, 1, 1)
  SetPosition("ELECMON_01", -2.509, 0.008, 20.588, "LINEAR", 0, 0)
  SetRotation("ELECMON_01", 0, 174, 0, "LINEAR", 0, 0)
  SetPosition("RAREMON_01", -2.454, -0.1, 6.145, "LINEAR", 0, 0)
  SetRotation("RAREMON_01", 0, -8.5, 0, "LINEAR", 0, 0)
  PlayMotion("ELECMON_01", "bn01", 0, true, 0)
  PlayMotion("RAREMON_01", "ba02", 5, true, 0)
  Event_PlaySE(403024, 100, false, 0, 0)
  SetCamera(-2.007, 1.044, 17.703, 0, 35, "LINEAR", 0, false, 0)
  SetCameraTarget(-2.091, 1.399, 16.362, "LINEAR", 0, false, 0)
  SetCamera(-1.243, 0.567, 20.519, 0, 35, "DECEL", 10, false, 0)
  SetCameraTarget(-1.725, 1.348, 16.224, "DECEL", 10, false, 0)
  SetCamera(-1.025, 0.496, 21.044, 0, 35, "LINEAR", 30, true, 0)
  SetCameraTarget(-1.565, 1.378, 16.224, "LINEAR", 30, true, 0)
  SetRotation("ELECMON_01", 0, 17.5, 0, "SCURVE", 10, 0)
  BlendFaceDigi("ELECMON_01", -24, -90, 0, "LINEAR", 30, 60)
  WaitFrame(40)
  FadeOutWithWaitNotFlgCheck(FADE_WHITE, 10)
  Vista.SetKeepBGM()
  EVENT_END()
end

function CUT(cut_no)
  CUT_START(cut_no)
end

function main()
  m040_090()
end

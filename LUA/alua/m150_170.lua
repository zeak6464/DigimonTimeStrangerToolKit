require("include")

function m150_170()
  Fade_Out(0, 0)
  EVENT_BEGIN()
  Talk.Load("m150")
  SetEventCutNo(13)
  if Debug.IsEventView() then
    SetTimeZone("Noon")
    SetTimeAxis("A2020_dbef_150")
    LoadMap("d0201")
  end
  LoadModel("chr747_01", "char_MINERVAMON")
  LoadModel("AEGIOMON_01", "char_AEGIOMON")
  LoadModel("HERO_01", "Player")
  LoadModel("HEROINE_01", "char_HEROINE")
  LoadModel("chr928_01", "char_MERCURYMON_BIG")
  LoadSceneViewerResource("c1.0", "d0201f_sa")
  LoadSceneViewerResource("c2.0", "d0201f_sa")
  LoadSceneViewerResource("c3.0", "d0201f_sa")
  LoadSceneViewerResource("c3.0_A1", "d0201f_sa")
  LoadSceneViewerResource("c3.0_B1", "d0201f_sa")
  LoadSceneViewerResource("c3.0_C1", "d0201f_sa")
  LoadSceneViewerResource("c4.0", "d0201f_sa")
  LoadSceneViewerResource("c5.0", "d0201f_sa")
  LoadSceneViewerResource("c6.0", "d0201f_sa")
  LoadSceneViewerResource("c7.0", "d0201f_sa")
  LoadSceneViewerResource("c8.0", "d0201f_sa")
  LoadSceneViewerResource("c9.0", "d0201f_sa")
  LoadSceneViewerResource("c10.0", "d0201f_sa")
  LoadSceneViewerResource("c11.0", "d0201f_sa")
  LoadEnvironmentFile("c1.0", "es_m150_170_c1.0")
  LoadEnvironmentFile("c2.0", "es_m150_170_c2.0")
  LoadEnvironmentFile("c3.0", "es_m150_170_c3.0")
  LoadEnvironmentFile("c3.0_A1", "es_m150_170_c3.0_A1")
  LoadEnvironmentFile("c3.0_B1", "es_m150_170_c3.0_B1")
  LoadEnvironmentFile("c3.0_C1", "es_m150_170_c3.0_C1")
  LoadEnvironmentFile("c4.0", "es_m150_170_c4.0")
  LoadEnvironmentFile("c5.0", "es_m150_170_c5.0")
  LoadEnvironmentFile("c6.0", "es_m150_170_c6.0")
  LoadEnvironmentFile("c7.0", "es_m150_170_c7.0")
  LoadEnvironmentFile("c8.0", "es_m150_170_c8.0")
  LoadEnvironmentFile("c9.0", "es_m150_170_c9.0")
  LoadEnvironmentFile("c10.0", "es_m150_170_c10.0")
  LoadEnvironmentFile("c11.0", "es_m150_170_c11.0")
  WaitVistaLoad()
  SetPosition("HERO_01", 1.352, 3.516, -69.561, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 0, 0, "LINEAR", 0, 0)
  SetPosition("HEROINE_01", 0.553, 3.516, -69.847, "LINEAR", 0, 0)
  SetRotation("HEROINE_01", 0, 0, 0, "LINEAR", 0, 0)
  SetPosition("AEGIOMON_01", 2.178, 3.516, -69.927, "LINEAR", 0, 0)
  SetRotation("AEGIOMON_01", 0, 0, 0, "LINEAR", 0, 0)
  SetPosition("chr747_01", -0.957, 3.516, -64.615, "LINEAR", 0, 0)
  SetRotation("chr747_01", 0, 158.5, 0, "LINEAR", 0, 0)
  SetPosition("chr928_01", 1.569, 3.516, -61.139, "LINEAR", 0, 0)
  SetRotation("chr928_01", 0, 539.915, 0, "LINEAR", 0, 0)
  PlayMotion("chr928_01", "fn01_01", 0, true, 0)
  ChangeDigimonFace("chr928_01", EYE_EXPRESSION_NORMAL, 0)
  SetFace("chr928_01", "F01_M01", 0, 1, 0, 0)
  PlayMotion("chr747_01", "fn01_01", 0, true, 0)
  ChangeDigimonFace("chr747_01", EYE_EXPRESSION_NORMAL, 0)
  SetFace("chr747_01", "F01_M01", 0, 1, 0, 0)
  PlayMotion("AEGIOMON_01", "fn01_01", 0, true, 0)
  SetFace("AEGIOMON_01", "F01", 0, 1, 0, 0)
  PlayMotion("HERO_01", "fn01_01", 0, true, 0)
  SetFace("HERO_01", "F01", 0, 1, 0, 0)
  PlayMotion("HEROINE_01", "fn01_01", 0, true, 0)
  SetFace("HEROINE_01", "F01", 0, 1, 0, 0)
  BlendFaceDigi("chr928_01", 0, 5, 0, "SCURVE", 0, 0)
  BlendFaceDigi("chr747_01", 0, 2, 0, "SCURVE", 0, 0)
  BlendEye("AEGIOMON_01", -15, 0, "SCURVE", 0, 0)
  BlendFace("AEGIOMON_01", -62, 0, 0, true, "SCURVE", 0, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", -61, 16, 0, true, "SCURVE", 0, 0)
  BlendEye("HEROINE_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HEROINE_01", -41, 34, 0, true, "SCURVE", 0, 0)
  SetCamera(2.957, 4.222, -71.766, 0, 40, "LINEAR", 0, false, 0)
  SetCameraTarget(-0.284, 5.845, -64.804, "LINEAR", 0, false, 0)
  SetEnv_All("c1.0", 0)
  FIELD_SET()
  EVENT_START()
  SetMobTransparentRange(5, 5, 8.8)
  CUT("1.0")
  Fade_In(0, FADE_TIME)
  WaitFrame(FADE_TIME)
  MessageTalk("m150_170_010")
  MessageClose()
  WaitFrame(10)
  CUT("2.0")
  SetEnv_All("c2.0", 0)
  PlayMotion("chr747_01", "e012", 3, true, 0)
  Vista.SetCharCamera("chr747_01", "chr747_cam_B.S_Left", "LINEAR", 0, false, 0)
  WaitFrame(20)
  local slot_id = Event_PlaySE(400016, 100, false, 0.3, 0)
  MessageTalk("m150_170_020")
  MessageClose()
  EndMotion("chr747_01", 0)
  WaitFrame(10)
  CUT("3.0")
  SetEnv_All("c3.0", 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 15, 0)
  BlendFace("HERO_01", 0, -35, 0, true, "SCURVE", 30, 0)
  BlendEye("HEROINE_01", 0, 0, "SCURVE", 10, 20)
  BlendFace("HEROINE_01", 0, -18, 0, true, "SCURVE", 30, 15)
  BlendEye("AEGIOMON_01", 0, 0, "SCURVE", 10, 10)
  BlendFace("AEGIOMON_01", 0, -40, 0, true, "SCURVE", 30, 10)
  SetCamera(2.957, 4.222, -71.766, 0, 40, "LINEAR", 0, false, 0)
  SetCameraTarget(-0.284, 5.845, -64.804, "LINEAR", 0, false, 0)
  MessageTalkSel(3, "m150_170_030")
  result = Talk.GetResultSelectedNum()
  if result == RESULT_TALK00 then
    PlayMotion("HERO_01", "e002", 3, true, 0)
    SetFace("HERO_01", "F01", 0, 1, FACE_BLENDTIME, 0)
    SetMouth("HERO_01", 0, 6, 0)
    SetMouth("HERO_01", 1, 6, 45)
    WaitFrame(60)
    CUT("3.0_A1")
    SetEnv_All("c3.0_A1", 0)
    Vista.SetCharCamera("chr747_01", "chr747_cam_B.S_Left", "LINEAR", 0, false, 0)
    WaitFrame(10)
    PlayMotionBlend("chr747_01", "blend01", 3, false, 0)
    MessageTalk("m150_170_040")
    MessageClose()
    WaitFrame(10)
  elseif result == RESULT_TALK01 then
    PlayMotion("HERO_01", "e013_01", 10, true, 0)
    SetFace("HERO_01", "F01", 0, 1, FACE_BLENDTIME, 0)
    BlendEye("HERO_01", 0, 0, "SCURVE", 10, 0)
    BlendFace("HERO_01", 0, -35, 35, true, "SCURVE", 20, 0)
    SetMouth("HERO_01", 0, 6, 0)
    SetMouth("HERO_01", 1, 6, 45)
    WaitFrame(60)
    EndMotion("HERO_01", 0)
    CUT("3.0_B1")
    SetEnv_All("c3.0_B1", 0)
    Vista.SetCharCamera("chr747_01", "chr747_cam_B.S_Left", "LINEAR", 0, false, 0)
    WaitFrame(10)
    PlayMotionBlend("chr747_01", "blend02", 0, false, 0)
    MessageTalk("m150_170_050")
    MessageClose()
    WaitFrame(10)
  elseif result == RESULT_TALK02 then
    PlayMotion("HERO_01", "e002", 5, true, 0)
    SetFace("HERO_01", "F01", 0, 1, FACE_BLENDTIME, 0)
    BlendEye("HERO_01", 0, 0, "SCURVE", 10, 0)
    BlendFace("HERO_01", -61, 16, 0, true, "SCURVE", 30, 0)
    SetMouth("HERO_01", 0, 6, 0)
    SetMouth("HERO_01", 1, 6, 45)
    WaitFrame(60)
    EndMotion("HERO_01", 0)
    CUT("3.0_C1")
    SetEnv_All("c3.0_C1", 0)
    SetCamera(2.071, 8.076, -62.922, 0, 45, "LINEAR", 0, false, 0)
    SetCameraTarget(1.687, 8.494, -61.663, "LINEAR", 0, false, 0)
    WaitFrame(10)
    PlayMotionBlend("chr928_01", "blend01", 3, false, 0)
    MessageTalk("m150_170_060")
    MessageClose()
    WaitFrame(10)
  end
  CUT("4.0")
  SetEnv_All("c4.0", 0)
  BlendEye("AEGIOMON_01", -15, 0, "SCURVE", 10, 0)
  BlendFace("AEGIOMON_01", -62, 0, 0, true, "SCURVE", 30, 0)
  BlendEye("HEROINE_01", 0, 0, "SCURVE", 10, 0)
  BlendFace("HEROINE_01", -41, 34, 0, true, "SCURVE", 30, 0)
  PlayMotion("chr928_01", "e002", 3, false, 0)
  PlayMotion("chr928_01", "fn01_01", 3, true, 60)
  SetFace("chr928_01", "F01", 0, 1, 0, 0)
  SetCamera(2.071, 8.076, -62.922, 0, 45, "LINEAR", 0, false, 0)
  SetCameraTarget(1.687, 8.494, -61.663, "LINEAR", 0, false, 0)
  MessageTalk("m150_170_070")
  MessageClose()
  WaitFrame(10)
  CUT("5.0")
  SetEnv_All("c5.0", 0)
  SetFace("AEGIOMON_01", "F16", 0, 1, FACE_BLENDTIME, 0)
  BlendEye("AEGIOMON_01", -15, 0, "SCURVE", 10, 0)
  BlendFace("AEGIOMON_01", -76, 6, 0, true, "SCURVE", 15, 0)
  Event_StopBGM(3, 0)
  SetCamera(2.641, 4.774, -69.163, 0, 29, "LINEAR", 0, false, 0)
  SetCameraTarget(2.216, 4.559, -69.901, "LINEAR", 0, false, 0)
  Vista.SetEnableLipSyncsAnimation("AEGIOMON_01", false)
  MessageTalk("m150_170_080")
  MessageClose()
  WaitFrame(10)
  CUT("6.0")
  SetEnv_All("c6.0", 0)
  PlayMotionBlend("chr928_01", "blend01", 3, false, 0)
  SetCamera(2.071, 8.076, -62.922, 0, 45, "LINEAR", 0, false, 0)
  SetCameraTarget(1.687, 8.494, -61.663, "LINEAR", 0, false, 0)
  WaitFrame(10)
  MessageTalk("m150_170_090")
  Event_PlayBGM(304, 2, 0)
  MessageTalk("m150_170_100")
  MessageTalk("m150_170_110")
  MessageClose()
  WaitFrame(10)
  CUT("7.0")
  SetEnv_All("c7.0", 0)
  SetFace("AEGIOMON_01", "E10_M06", 0, 1, 0, 0)
  BlendEye("AEGIOMON_01", 30, 0, "SCURVE", 15, 0)
  BlendFace("AEGIOMON_01", -15, 6, 0, true, "SCURVE", 30, 0)
  SetCamera(2.641, 4.774, -69.163, 0, 29, "LINEAR", 0, false, 0)
  SetCameraTarget(2.216, 4.559, -69.901, "LINEAR", 0, false, 0)
  MessageTalk("m150_170_120")
  MessageClose()
  WaitFrame(10)
  CUT("8.0")
  ModelVisible("HERO_01", false, 0, 0)
  SetEnv_All("c8.0", 0)
  PlayMotion("HEROINE_01", "fn01_01", 0, false, 0)
  SetFace("HEROINE_01", "E04_M16", 0, 1, FACE_BLENDTIME, 0)
  BlendEye("HEROINE_01", 38, 18, "SCURVE", 10, 0)
  BlendFace("HEROINE_01", 47, 77, 0, true, "SCURVE", 30, 0)
  SetCamera(1.342, 4.806, -69.275, 0, 29, "LINEAR", 0, false, 0)
  SetCameraTarget(0.585, 4.944, -69.815, "LINEAR", 0, false, 0)
  Vista.SetEnableLipSyncsAnimation("HEROINE_01", false)
  MessageTalk("m150_170_130")
  MessageClose()
  WaitFrame(10)
  CUT("9.0")
  SetEnv_All("c9.0", 0)
  PlayMotion("chr928_01", "fn01_01", 0, false, 0)
  PlayMotionBlend("chr928_01", "blend02", 0, false, 0)
  SetCamera(2.071, 8.076, -62.922, 0, 45, "LINEAR", 0, false, 0)
  SetCameraTarget(1.687, 8.494, -61.663, "LINEAR", 0, false, 0)
  ModelVisible("HERO_01", true, 0, 0)
  MessageTalk("m150_170_140")
  MessageClose()
  WaitFrame(10)
  CUT("10.0")
  SetEnv_All("c10.0", 0)
  EndMotion("chr747_01", 0)
  PlayMotion("chr928_01", "e012", 0, true, 0)
  BlendFaceDigi("chr928_01", 0, 5, 0, "SCURVE", 0, 0)
  Vista.SetCharCamera("chr747_01", "chr747_cam_B.S_Left", "LINEAR", 0, false, 0)
  MessageTalk("m150_170_150")
  MessageClose()
  WaitFrame(10)
  CUT("11.0")
  SetEnv_All("c11.0", 0)
  SetPosition("AEGIOMON_01", 2.178, 3.573, -69.927, "LINEAR", 0, 0)
  SetPosition("HERO_01", 1.352, 3.573, -69.561, "LINEAR", 0, 0)
  SetPosition("HEROINE_01", 0.553, 3.573, -69.847, "LINEAR", 0, 0)
  SetPosition("chr747_01", -0.957, 3.516, -64.615, "LINEAR", 0, 0)
  SetRotation("chr747_01", 0, 528.021, 0, "LINEAR", 0, 0)
  PlayMotion("chr747_01", "e013", 0, true, 0)
  SetStartFrame("chr747_01", "e013", 45, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", 0, -35, 0, true, "SCURVE", 0, 0)
  BlendEye("AEGIOMON_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("AEGIOMON_01", 0, -40, 0, true, "SCURVE", 0, 0)
  BlendEye("HEROINE_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HEROINE_01", 0, -18, 0, true, "SCURVE", 0, 0)
  PlayMotionBlend("HERO_01", "blend01", 0, false, 0)
  PlayMotionBlend("HEROINE_01", "blend01", 0, false, 0)
  SetCamera(2.957, 4.222, -71.766, 0, 40, "LINEAR", 0, false, 0)
  SetCameraTarget(-0.284, 5.845, -64.804, "LINEAR", 0, false, 0)
  Event_StopBGM(3, 0)
  WaitFrame(60)
  BlendEye("HERO_01", 0, 0, "SCURVE", 10, 0)
  BlendFace("HERO_01", 0, 0, 0, true, "SCURVE", 30, 0)
  BlendEye("AEGIOMON_01", 0, 0, "SCURVE", 10, 10)
  BlendFace("AEGIOMON_01", 0, 0, 0, true, "SCURVE", 25, 10)
  BlendEye("HEROINE_01", 0, 0, "SCURVE", 10, 10)
  BlendFace("HEROINE_01", 0, 0, 0, true, "SCURVE", 30, 10)
  BlendFaceDigi("chr747_01", 0, 0, 0, "SCURVE", 30, 0)
  BlendFaceDigi("chr928_01", 0, 0, 0, "SCURVE", 25, 0)
  WaitFrame(45)
  if Debug.IsEventView() then
    EVENT_END()
  else
    EVENT_END_SEAMLESS(60)
  end
end

function CUT(cut_no)
  CUT_START(cut_no)
end

function main()
  m150_170()
end

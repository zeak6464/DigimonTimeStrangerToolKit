require("include")

function m180_020()
  Fade_Out(0, 0)
  EVENT_BEGIN()
  Talk.Load("m180")
  SetEventCutNo(6)
  if Debug.IsEventView() then
    SetTimeZone("Noon")
    SetTimeAxis("A2020_dbef_180")
    LoadMap("d0401")
  end
  LoadModel("HERO_01", "Player")
  LoadModel("HEROINE_01", "char_HEROINE")
  LoadModel("AEGIOMON_01", "char_AEGIOMON")
  LoadModel("chr918_01", "char_LOCOMON_EVENT")
  LoadModel("chr367_01", "char_KUWAGAMON")
  LoadModel("chr367_02", "char_KUWAGAMON")
  LoadModel("chr401_01", "char_OKUWAMON")
  LoadEffectScript("ef_f_chu_015_sm_01", "ef_f_chu_015_sm")
  LoadSceneViewerResource("c0.5", "d0401f_sa")
  LoadSceneViewerResource("c1.0", "d0401f_sa")
  LoadSceneViewerResource("c2.0", "d0401f_sa")
  LoadSceneViewerResource("c3.0", "d0401f_sa")
  LoadSceneViewerResource("c4.0", "d0401f_sa")
  LoadSceneViewerResource("c5.0", "d0401f_sa")
  LoadEnvironmentFile("c0.5", "es_m180_020_c0.5")
  LoadEnvironmentFile("c1.0", "es_m180_020_c1.0")
  LoadEnvironmentFile("c2.0", "es_m180_020_c2.0")
  LoadEnvironmentFile("c3.0", "es_m180_020_c3.0")
  LoadEnvironmentFile("c4.0", "es_m180_020_c4.0")
  LoadEnvironmentFile("c5.0", "es_m180_020_c5.0")
  WaitVistaLoad()
  SetPosition("HERO_01", -32.532, -25.351, -3.442, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, -29, 0, "LINEAR", 0, 0)
  SetPosition("HEROINE_01", -33.811, -25.351, -4.136, "LINEAR", 0, 0)
  SetRotation("HEROINE_01", 0, -27, 0, "LINEAR", 0, 0)
  SetPosition("AEGIOMON_01", -33.384, -25.351, -3.367, "LINEAR", 0, 0)
  SetRotation("AEGIOMON_01", 0, -36, 0, "LINEAR", 0, 0)
  SetPosition("chr918_01", -19.118, -25.69, -26.015, "LINEAR", 0, 0)
  SetRotation("chr918_01", 0, 116.5, 0, "LINEAR", 0, 0)
  SetScale("chr918_01", 1, 1, 1)
  SetPosition("chr367_01", -362.929, -48.676, 1.484, "LINEAR", 0, 0)
  SetRotation("chr367_01", 0, 70.5, 0, "LINEAR", 0, 0)
  SetScale("chr367_01", 2.6, 2.6, 2.6)
  SetPosition("chr367_02", -365.015, -50.13, 14.502, "LINEAR", 0, 0)
  SetRotation("chr367_02", 0, 96, 0, "LINEAR", 0, 0)
  SetScale("chr367_02", 2.6, 2.6, 2.6)
  SetPosition("chr401_01", -385.384, -49.016, 23.826, "LINEAR", 0, 0)
  SetRotation("chr401_01", 0, 79.5, 0, "LINEAR", 0, 0)
  SetScale("chr401_01", 2.1, 2.1, 2.1)
  PlayMotion("HERO_01", "fn01_01", 0, true, 0)
  SetFace("HERO_01", "F01", 0, 1, 0, 0)
  PlayMotion("HEROINE_01", "fn01_01", 0, true, 0)
  SetFace("HEROINE_01", "F01", 0, 1, 0, 0)
  PlayMotion("AEGIOMON_01", "fn01_01", 0, true, 0)
  SetFace("AEGIOMON_01", "F01", 0, 1, 0, 0)
  PlayMotion("chr918_01", "br01", 0, true, 0)
  PlayMotion("chr367_01", "br01", 0, true, 0)
  PlayMotion("chr367_02", "br01", 0, true, 0)
  PlayMotion("chr401_01", "br01", 0, true, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", 0, 0, 0, false, "SCURVE", 0, 0)
  BlendEye("HEROINE_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HEROINE_01", 0, 0, 0, false, "SCURVE", 0, 0)
  BlendEye("AEGIOMON_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("AEGIOMON_01", 0, 0, 0, false, "SCURVE", 0, 0)
  ModelVisible("HERO_01", false, 0, 0)
  ModelVisible("HEROINE_01", false, 0, 0)
  ModelVisible("AEGIOMON_01", false, 0, 0)
  Vista.AttachEffectToModel("ef_f_chu_015_sm_01", "chr918_01", "J_spine")
  FIELD_SET()
  NpcInvisible(FOR_ALL)
  PlayEffect("ef_f_chu_015_sm_01", false, 0)
  EVENT_START()
  CUT("0.5")
  SetEnv_All("c0.5", 0)
  Fade_In(0, FADE_TIME)
  SetCamera(-385.164, -43.439, 28.078, 0, 40, "LINEAR", 0, false, 0)
  SetCameraTarget(-299.376, -43.389, -8.538, "LINEAR", 0, false, 0)
  local slot_01 = Event_PlaySE(403063, 100, false, 0, 0)
  local slot_02 = Event_PlaySE(403064, 100, false, 0, 0)
  MovePosition("chr401_01", -259.244, -2.122, 11.317, false, 15, 10)
  MoveRotation("chr401_01", 0, 79.5, 0, "LINEAR", 15, true, 10)
  MovePosition("chr367_02", -288.941, -19.363, 23.002, false, 15, 0)
  MoveRotation("chr367_02", 0, 96, 0, "LINEAR", 15, true, 0)
  MovePosition("chr367_01", -257.779, -12.037, -9.016, false, 20, 0)
  MoveRotation("chr367_01", 0, 70.5, 0, "LINEAR", 20, true, 0)
  WaitFrame(100)
  local slot_03 = Event_PlaySE(403066, 100, false, 0, 1)
  SetCamera(-385.164, -57.489, 28.078, 0, 40, "SCURVE", 65.5, false, 0)
  SetCameraTarget(-299.376, -76.949, -8.538, "SCURVE", 65.5, false, 0)
  SetPosition("chr918_01", -387.291, -79.805, -9.037, "LINEAR", 0, 0)
  SetRotation("chr918_01", -10.9, 70, 0, "LINEAR", 0, 0)
  SetPosition("chr918_01", -247.812, -50.106, 37.918, "LINEAR", 200, 0)
  SetRotation("chr918_01", -12, 73.5, 0, "LINEAR", 200, 0)
  WaitFrame(100)
  Event_StopSE(slot_03, 1, 1)
  BackFade_OutNoLoadingWithWait(FADE_BLACK, 50)
  WaitFrame(60)
  PlayMotion("chr918_01", "bn01", 0, true, 0)
  CUT("1.0")
  ModelVisible("ef_f_chu_015_sm_01", false, 0, 0)
  SetEnv_All("c1.0", 0)
  BackFade_In(0, FADE_TIME)
  SetCamera(-42.827, -23.569, 8.825, 0, 60, "LINEAR", 0, false, 0)
  SetCameraTarget(-35.232, -16.774, -9.119, "LINEAR", 0, false, 0)
  SetCamera(-40.007, -23.479, 10.053, 0, 60, "LINEAR", 300, false, 0)
  SetCameraTarget(-32.411, -16.683, -7.891, "LINEAR", 300, false, 0)
  WaitFrame(50)
  Story.OpenCharacterEntry("char_GEAR_FOREST")
  WaitFrame(70)
  CUT("2.0")
  SetEnv_All("c2.0", 0)
  SetCamera(-18.205, 5.308, 86.383, 0, 80, "LINEAR", 0, false, 0)
  SetCameraTarget(23.826, 57.274, 3.558, "LINEAR", 0, false, 0)
  SetCamera(-18.205, 5.308, 86.383, 0, 80, "LINEAR", 300, false, 0)
  SetCameraTarget(21.304, 68.918, 8.929, "LINEAR", 300, false, 0)
  WaitFrame(90)
  Story.IsClosedCharacterEntry()
  WaitFrame(30)
  CUT("3.0")
  SetEnv_All("c3.0", 0)
  ModelVisible("HERO_01", true, 0, 0)
  ModelVisible("HEROINE_01", true, 0, 0)
  ModelVisible("AEGIOMON_01", true, 0, 0)
  SetCamera(-31.992, -24.282, -6.767, 0, 40, "LINEAR", 0, false, 0)
  SetCameraTarget(-34.161, -23.862, -3.333, "LINEAR", 0, false, 0)
  SetCamera(-31.665, -24.271, -6.562, 0, 40, "LINEAR", 300, true, 0)
  SetCameraTarget(-33.834, -23.85, -3.128, "LINEAR", 300, true, 0)
  BlendFace("AEGIOMON_01", 0, 49, 0, true, "SCURVE", 40, 0)
  WaitFrame(20)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", -36, -59, 0, true, "SCURVE", 40, 0)
  PlayMotion("HERO_01", "e012", 5, true, 0)
  WaitFrame(20)
  WaitFrame(30)
  BlendFace("HERO_01", 0, 0, 0, true, "SCURVE", 30, 0)
  WaitFrame(20)
  PlayMotion("HEROINE_01", "e004", 5, true, 0)
  SetFace("HEROINE_01", "F16", 0, 1, 3, 0)
  BlendFace("AEGIOMON_01", 0, -67, 0, true, "SCURVE", 40, 0)
  MessageTalk("m180_020_010")
  MessageClose()
  WaitFrame(10)
  PlayMotion("AEGIOMON_01", "e013_01", 5, true, 0)
  SetFace("AEGIOMON_01", "F15", 0, 1, 3, 0)
  BlendFace("HEROINE_01", 84, 41, 0, true, "SCURVE", 30, 10)
  EndMotion("HEROINE_01", 10)
  BlendFace("HERO_01", 56, -44, 0, true, "SCURVE", 30, 15)
  BlendEye("AEGIOMON_01", 0, 0, "SCURVE", 30, 0)
  BlendFace("AEGIOMON_01", 0, 0, 0, true, "SCURVE", 30, 0)
  MessageTalk("m180_020_020")
  MessageClose()
  WaitFrame(10)
  CUT("4.0")
  SetEnv_All("c4.0", 0)
  BlendFace("AEGIOMON_01", 0, 0, 0, true, "SCURVE", 20, 0)
  SetPosition("HERO_01", -32.563, -25.351, -3.277, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, -26, 0, "LINEAR", 0, 0)
  SetPosition("HEROINE_01", -33.811, -25.351, -4.136, "LINEAR", 0, 0)
  SetRotation("HEROINE_01", 0, -27, 0, "LINEAR", 0, 0)
  SetPosition("AEGIOMON_01", -33.384, -25.351, -3.367, "LINEAR", 0, 0)
  SetRotation("AEGIOMON_01", 0, -36, 0, "LINEAR", 0, 0)
  SetCamera(-34.85, -24.635, -1.596, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(-33.264, -24.215, -3.548, "LINEAR", 0, false, 0)
  BlendEye("HEROINE_01", 35, 20, "SCURVE", 0, 0)
  BlendFace("HEROINE_01", 72, 40, 0, true, "SCURVE", 0, 0)
  BlendEye("HERO_01", 31, -17, "SCURVE", 30, 0)
  BlendFace("HERO_01", 70, -52, 0, true, "SCURVE", 30, 0)
  SetFace("AEGIOMON_01", "E03_M15", 0, 1, 3, 0)
  MessageTalk("m180_020_030")
  MessageClose()
  WaitFrame(10)
  PlayMotionBlend("HEROINE_01", "blend01", 5, false, 0)
  SetFace("HEROINE_01", "F15", 0, 1, 3, 0)
  SetFace("HERO_01", "F15", 0, 1, 3, 0)
  MessageTalk("m180_020_040")
  MessageClose()
  WaitFrame(10)
  CUT("5.0")
  SetEnv_All("c5.0", 0)
  SetPosition("HERO_01", -32.413, -25.351, -4.287, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, -28.5, 0, "LINEAR", 0, 0)
  SetPosition("AEGIOMON_01", -30.526, -25.351, -5.916, "LINEAR", 0, 0)
  SetRotation("AEGIOMON_01", 0, 8, 0, "LINEAR", 0, 0)
  SetPosition("HEROINE_01", -32.279, -25.351, -6.696, "LINEAR", 0, 0)
  SetRotation("HEROINE_01", 0, 8, 0, "LINEAR", 0, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", 0, 0, 0, true, "SCURVE", 0, 0)
  SetCamera(-31.961, -23.853, -5.594, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(-33.024, -23.814, -3.778, "LINEAR", 0, false, 0)
  EndMotion("HERO_01", 0)
  ENDMOTION_WAIT("HERO_01", 0)
  if Debug.IsEventView() then
    EVENT_END()
  else
    EVENT_END_SEAMLESS(60)
  end
end

function CUT(cut_no)
  CUT_START(cut_no)
end

function main()
  m180_020()
end

require("include")

function m170_050()
  EVENT_BEGIN()
  Talk.Load("m170")
  SetEventCutNo(17)
  if Debug.IsEventView() then
    SetTimeZone("Noon")
    SetTimeAxis("A2020_dbef_170")
    LoadMap("d0301")
  end
  LoadModel("AEGIOMON_01", "char_AEGIOMON")
  LoadModel("HERO_01", "Player")
  LoadModel("HEROINE_01", "char_HEROINE")
  LoadSceneViewerResource("c2.0", "d0301f_sa")
  LoadSceneViewerResource("c2.0_A1", "d0301f_sa")
  LoadSceneViewerResource("c2.0_B1", "d0301f_sa")
  LoadSceneViewerResource("c3.0", "d0301f_sa")
  LoadSceneViewerResource("c4.0", "d0301f_sa")
  LoadSceneViewerResource("c5.0", "d0301f_sa")
  LoadSceneViewerResource("c6.0", "d0301f_sa")
  LoadSceneViewerResource("c7.0", "d0301f_sa")
  LoadSceneViewerResource("c8.0", "d0301f_sa")
  LoadSceneViewerResource("c8.0_B1", "d0301f_sa")
  LoadSceneViewerResource("c8.0_B2", "d0301f_sa")
  LoadSceneViewerResource("c8.0_C1", "d0301f_sa")
  LoadSceneViewerResource("c8.0_C2", "d0301f_sa")
  LoadSceneViewerResource("c9.0", "d0301f_sa")
  LoadSceneViewerResource("c10.0", "d0301f_sa")
  LoadSceneViewerResource("c11.0", "d0301f_sa")
  LoadEnvironmentFile("c2.0", "es_m170_050_c2.0")
  LoadEnvironmentFile("c2.0_A1", "es_m170_050_c2.0_A1")
  LoadEnvironmentFile("c2.0_B1", "es_m170_050_c2.0_B1")
  LoadEnvironmentFile("c3.0", "es_m170_050_c3.0")
  LoadEnvironmentFile("c4.0", "es_m170_050_c4.0")
  LoadEnvironmentFile("c5.0", "es_m170_050_c5.0")
  LoadEnvironmentFile("c6.0", "es_m170_050_c6.0")
  LoadEnvironmentFile("c7.0", "es_m170_050_c7.0")
  LoadEnvironmentFile("c8.0", "es_m170_050_c8.0")
  LoadEnvironmentFile("c8.0_B1", "es_m170_050_c8.0_B1")
  LoadEnvironmentFile("c8.0_B2", "es_m170_050_c8.0_B2")
  LoadEnvironmentFile("c8.0_C1", "es_m170_050_c8.0_C1")
  LoadEnvironmentFile("c8.0_C2", "es_m170_050_c8.0_C2")
  LoadEnvironmentFile("c9.0", "es_m170_050_c9.0")
  LoadEnvironmentFile("c10.0", "es_m170_050_c10.0")
  LoadEnvironmentFile("c11.0", "es_m170_050_c11.0")
  FieldInitCancel()
  WaitVistaLoad()
  SetPosition("AEGIOMON_01", 92.389, 2.929, -37.094, "LINEAR", 0, 0)
  SetRotation("AEGIOMON_01", 0, 82.5, 0, "LINEAR", 0, 0)
  SetPosition("HEROINE_01", 92.497, 2.94, -36.229, "LINEAR", 0, 0)
  SetRotation("HEROINE_01", 0, 98.5, 0, "LINEAR", 0, 0)
  PlayMotion("AEGIOMON_01", "fn01_01", 0, true, 0)
  SetFace("AEGIOMON_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  PlayMotion("HERO_01", "fn01_01", 0, true, 0)
  SetFace("HERO_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  PlayMotion("HEROINE_01", "fn01_01", 0, true, 0)
  SetFace("HEROINE_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  BlendEye("AEGIOMON_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("AEGIOMON_01", -29, 0, 0, true, "SCURVE", 0, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", -31, 13, 0, true, "SCURVE", 0, 0)
  BlendEye("HEROINE_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HEROINE_01", -14, 5, 0, true, "SCURVE", 0, 0)
  FIELD_SET()
  EVENT_START()
  CUT("2.0")
  SetEnv_All("c2.0", 0)
  SetPosition("HERO_01", 94.21, 2.988, -35.913, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 127, 0, "LINEAR", 0, 0)
  SetCamera(88.213, 4.586, -32.618, 0, 40, "LINEAR", 0, false, 0)
  SetCameraTarget(92.357, 4.383, -35.228, "LINEAR", 0, false, 0)
  CameraOffsetTurn(5, "LINEAR", true, true, 600, 0)
  PlayMotion("HEROINE_01", "e009_01", 3, true, 15)
  SetFace("HEROINE_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  Fade_In(0, FADE_TIME)
  WaitFrame(30)
  MessageTalk("m170_050_010")
  EndMotion("HEROINE_01", 0)
  MessageTalk("m170_050_020")
  MessageClose()
  WaitFrame(10)
  Vista.SetSkip(false, true)
  MessageTalkSel(3, "m170_050_030")
  result = Talk.GetResultSelectedNum()
  CUT("2.0_A1")
  if result == RESULT_TALK00 then
    Flg.Set("FLAG_MAIN_05_080")
    SetEnv_All("c2.0_A1", 0)
    BlendEye("HERO_01", 10, 0, "SCURVE", 10, 0)
    BlendFace("HERO_01", -45, 3, 0, true, "SCURVE", 30, 0)
    PlayMotion("HERO_01", "e008_01", 0, false, 0)
    EndMotion("HERO_01", 86)
    SetCamera(93.548, 4.398, -35.144, 0, 35, "LINEAR", 0, false, 0)
    SetCameraTarget(94.393, 4.634, -35.907, "LINEAR", 0, false, 0)
    WaitFrame(20)
    Vista.SetSkip(true)
    SetFace("HERO_01", "F01", 0, 1, FACE_BLENDTIME, 0)
    local slot_id = Event_PlaySE(401001, 100, false, 0.1, 0)
    WaitFrame(50)
    Vista.SetSkip(true)
    MessageTalk("m170_050_040", false)
    MessageClose()
    WaitFrame(10)
    Flg.Set("FLAG_MAIN_05_080")
    CUT("2.0_B1")
  elseif result == RESULT_TALK01 then
    Flg.Set("FLAG_MAIN_05_080")
    SetEnv_All("c2.0_B1", 0)
    BlendEye("HERO_01", 10, 0, "SCURVE", 10, 0)
    BlendFace("HERO_01", -45, 3, 0, true, "SCURVE", 30, 0)
    SetCamera(92.256, 4.407, -34.334, 0, 30, "LINEAR", 0, false, 0)
    SetCameraTarget(94.43, 4.569, -35.878, "LINEAR", 0, false, 0)
    WaitFrame(10)
    Vista.SetSkip(true)
    PlayMotion("HERO_01", "e007", 3, true, 0)
    SetFace("HERO_01", "F01", 0, 1, FACE_BLENDTIME, 0)
    SetFace("HERO_01", "E01_M01", 0, 0, FACE_BLENDTIME, 0)
    SetFace("HERO_01", "E01_M01", 0, 1, FACE_BLENDTIME, 30)
    WaitFrame(45)
    MessageTalk("m170_050_050", false)
    MessageClose()
    WaitFrame(10)
    Flg.Set("FLAG_MAIN_05_080")
    CUT("2.0_C1")
  elseif result == RESULT_TALK02 then
    WaitFrame(10)
    goto lbl_1929
  end
  WaitFrame(10)
  Vista.ApplyVoiceSnapshot(SOUND_SNAPSHOT_DOOR)
  MessageTalk("m170_050_060")
  MessageClose()
  PlayMotion("HERO_01", "e006_01", 3, true, 0)
  SetFace("HERO_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  WaitFrame(30)
  CUT("3.0")
  SetEnv_All("c3.0", 0)
  SetCamera(88.213, 4.586, -32.618, 0, 40, "LINEAR", 0, false, 0)
  SetCameraTarget(92.357, 4.383, -35.228, "LINEAR", 0, false, 0)
  WaitFrame(10)
  Vista.ApplyVoiceSnapshot(SOUND_SNAPSHOT_DOOR)
  MessageTalk("m170_050_070")
  MessageClose()
  WaitFrame(30)
  CUT("4.0")
  SetEnv_All("c4.0", 0)
  EndMotion("HERO_01", 0)
  Vista.SetCharCamera("AEGIOMON_01", "chr183a_cam_B.S_Left", "LINEAR", 0, false, 0)
  PlayMotion("AEGIOMON_01", "e002", 3, true, 0)
  SetFace("AEGIOMON_01", "E06_M01", 0, 1, FACE_BLENDTIME, 0)
  WaitFrame(10)
  MessageTalk("m170_050_080")
  MessageClose()
  WaitFrame(10)
  CUT("5.0")
  SetEnv_All("c5.0", 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", -65, -26, 0, true, "SCURVE", 0, 0)
  SetCamera(92.626, 4.139, -34.116, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(94.539, 4.744, -35.724, "LINEAR", 0, false, 0)
  WaitFrame(10)
  Vista.ApplyVoiceSnapshot(SOUND_SNAPSHOT_DOOR)
  MessageTalk("m170_050_090")
  Vista.ApplyVoiceSnapshot(SOUND_SNAPSHOT_DOOR)
  MessageTalk("m170_050_100")
  MessageClose()
  WaitFrame(10)
  CUT("6.0")
  SetEnv_All("c6.0", 0)
  PlayMotion("HEROINE_01", "fn01_01", 0, true, 0)
  SetFace("HEROINE_01", "F11", 0, 1, FACE_BLENDTIME, 0)
  SetCamera(93.454, 4.417, -35.925, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(92.545, 4.4, -36.225, "LINEAR", 0, false, 0)
  WaitFrame(10)
  MessageTalk("m170_050_110")
  MessageClose()
  WaitFrame(10)
  CUT("7.0")
  SetEnv_All("c7.0", 0)
  EndMotion("HEROINE_01", 0)
  SetCamera(88.213, 4.586, -32.618, 0, 40, "LINEAR", 0, false, 0)
  SetCameraTarget(92.357, 4.383, -35.228, "LINEAR", 0, false, 0)
  CameraOffsetTurn(5, "LINEAR", true, true, 600, 0)
  WaitFrame(10)
  Vista.ApplyVoiceSnapshot(SOUND_SNAPSHOT_DOOR)
  MessageTalk("m170_050_120")
  Vista.ApplyVoiceSnapshot(SOUND_SNAPSHOT_DOOR)
  MessageTalk("m170_050_130")
  Vista.ApplyVoiceSnapshot(SOUND_SNAPSHOT_DOOR)
  MessageTalk("m170_050_140")
  Vista.ApplyVoiceSnapshot(SOUND_SNAPSHOT_DOOR)
  MessageTalk("m170_050_150")
  MessageClose()
  WaitFrame(10)
  CUT("8.0")
  SetEnv_All("c8.0", 0)
  SetPosition("HERO_01", 94.21, 2.988, -35.913, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 162.5, 0, "LINEAR", 0, 0)
  BlendEye("AEGIOMON_01", -5, 0, "SCURVE", 0, 0)
  BlendFace("AEGIOMON_01", -36, -30, 12, true, "SCURVE", 0, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", -65, -76, 19, true, "SCURVE", 0, 0)
  BlendEye("HEROINE_01", -29, 0, "SCURVE", 0, 0)
  BlendFace("HEROINE_01", 5, -25, 0, true, "SCURVE", 0, 0)
  PlayMotion("HEROINE_01", "e005_01", 3, true, 0)
  SetFace("HEROINE_01", "F11", 0, 1, FACE_BLENDTIME, 0)
  SetFace("HERO_01", "F15", 0, 1, FACE_BLENDTIME, 0)
  SetCamera(95.12, 4.589, -35.271, 0, 25, "LINEAR", 0, false, 0)
  SetCameraTarget(93.351, 4.415, -36.34, "LINEAR", 0, false, 0)
  WaitFrame(10)
  MessageTalk("m170_050_160")
  MessageClose()
  PlayMotion("HERO_01", "ft01_02", 3, false, 0)
  SetRotation("HERO_01", 0, 162.5, 0, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 252.5, 0, "LINEAR", ROTATION90, 0)
  SetFace("HERO_01", "E16_M04", 0, 1, FACE_BLENDTIME, 0)
  BlendEye("HERO_01", 20, 0, "SCURVE", 15, 0)
  BlendFace("HERO_01", -8, 10, 0, true, "SCURVE", 30, 0)
  WaitFrame(30)
  MessageTalkSel(3, "m170_050_170")
  result = Talk.GetResultSelectedNum()
  if result == RESULT_TALK00 then
    PlayMotionBlend("HERO_01", "blend01", 3, false, 0)
    SetFace("HERO_01", "E01_M01", 0, 0, FACE_BLENDTIME, 0)
    SetFace("HERO_01", "E01_M01", 0, 1, FACE_BLENDTIME, 30)
    WaitFrame(60)
  elseif result == RESULT_TALK01 then
    PlayMotion("HERO_01", "e002", 3, true, 0)
    SetFace("HERO_01", "F01", 0, 1, FACE_BLENDTIME, 0)
    SetFace("HERO_01", "E01_M01", 0, 0, FACE_BLENDTIME, 0)
    SetFace("HERO_01", "E01_M01", 0, 1, FACE_BLENDTIME, 30)
    WaitFrame(70)
    CUT("8.0_B1")
    SetEnv_All("c8.0_B1", 0)
    SetFace("HEROINE_01", "F04", 0, 1, FACE_BLENDTIME, 0)
    PlayMotionBlend("HEROINE_01", "blend02", 3, false, 0)
    SetCamera(93.438, 4.422, -35.882, 0, 28, "LINEAR", 0, false, 0)
    SetCameraTarget(92.546, 4.404, -36.235, "LINEAR", 0, false, 0)
    WaitFrame(10)
    MessageTalk("m170_050_180")
    BlendEye("HEROINE_01", -5, 0, "SCURVE", 10, 0)
    EndMotion("HEROINE_01", 0)
    MessageTalk("m170_050_190")
    MessageClose()
    WaitFrame(10)
    CUT("8.0_B2")
    SetEnv_All("c8.0_B2", 0)
    SetCamera(93.147, 4.42, -35.867, 0, 30, "LINEAR", 0, false, 0)
    SetCameraTarget(94.08, 4.469, -35.975, "LINEAR", 0, false, 0)
    PlayMotion("HERO_01", "fn01_01", 0, true, 0)
    SetFace("HERO_01", "F16", 0, 1, FACE_BLENDTIME, 0)
    WaitFrame(30)
    PlayMotionBlend("HERO_01", "blend02", 3, false, 0)
    SetFace("HERO_01", "E01_M01", 2, 1, FACE_BLENDTIME, 0)
    WaitFrame(60)
  elseif result == RESULT_TALK02 then
    PlayMotionBlend("HERO_01", "blend02", 3, false, 0)
    SetMouth("HERO_01", 0, 0, 0)
    SetMouth("HERO_01", 1, 0, 30)
    WaitFrame(70)
    CUT("8.0_C1")
    SetEnv_All("c8.0_C1", 0)
    SetFace("HEROINE_01", "F04", 0, 1, FACE_BLENDTIME, 0)
    SetCamera(93.438, 4.422, -35.882, 0, 28, "LINEAR", 0, false, 0)
    SetCameraTarget(92.546, 4.404, -36.235, "LINEAR", 0, false, 0)
    WaitFrame(10)
    MessageTalk("m170_050_200")
    EndMotion("HEROINE_01", 0)
    BlendEye("HEROINE_01", -5, 0, "SCURVE", 10, 0)
    MessageTalk("m170_050_210")
    MessageClose()
    WaitFrame(10)
    CUT("8.0_C2")
    SetEnv_All("c8.0_C2", 0)
    SetCamera(93.147, 4.42, -35.867, 0, 30, "LINEAR", 0, false, 0)
    SetCameraTarget(94.08, 4.469, -35.975, "LINEAR", 0, false, 0)
    PlayMotion("HERO_01", "fn01_01", 3, true, 0)
    SetFace("HERO_01", "F16", 0, 1, FACE_BLENDTIME, 0)
    WaitFrame(30)
    PlayMotionBlend("HERO_01", "blend02", 3, false, 0)
    SetFace("HERO_01", "E01_M01", 2, 1, FACE_BLENDTIME, 0)
    WaitFrame(60)
  end
  CUT("9.0")
  SetEnv_All("c9.0", 0)
  SetPosition("AEGIOMON_01", 92.389, 2.948, -37.094, "LINEAR", 0, 0)
  SetRotation("AEGIOMON_01", 0, 82.5, 0, "LINEAR", 0, 0)
  SetPosition("HEROINE_01", 92.497, 2.959, -36.229, "LINEAR", 0, 0)
  SetRotation("HEROINE_01", 0, 88, 0, "LINEAR", 0, 0)
  EndMotion("HEROINE_01", 0)
  BlendEye("AEGIOMON_01", -19, 0, "SCURVE", 0, 0)
  BlendFace("AEGIOMON_01", -40, -29, 15, true, "SCURVE", 0, 0)
  BlendEye("HEROINE_01", -16, 0, "SCURVE", 0, 0)
  BlendFace("HEROINE_01", -4, -11, 0, true, "SCURVE", 0, 0)
  SetCamera(94.812, 4.636, -35.075, 0, 40, "LINEAR", 0, false, 0)
  SetCameraTarget(94.029, 4.402, -35.867, "LINEAR", 0, false, 0)
  WaitFrame(30)
  PlayMotionBlend("AEGIOMON_01", "blend01", 3, false, 5)
  SetFace("HEROINE_01", "F15", 0, 1, FACE_BLENDTIME, 0)
  PlayMotionBlend("HEROINE_01", "blend01", 3, false, 0)
  SetFace("HEROINE_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  PlayMotionBlend("HERO_01", "blend01", 3, false, 5)
  WaitFrame(45)
  CUT("10.0")
  SetEnv_All("c10.0", 0)
  SetRotation("HERO_01", 0, 217, 0, "LINEAR", 0, 0)
  BlendEye("AEGIOMON_01", 0, 0, "SCURVE", 10, 0)
  BlendFace("AEGIOMON_01", -29, 0, 0, true, "SCURVE", 25, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", -31, 13, 0, true, "SCURVE", 0, 0)
  BlendEye("HEROINE_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HEROINE_01", -14, 5, 0, true, "SCURVE", 0, 0)
  SetFace("AEGIOMON_01", "F15", 0, 1, FACE_BLENDTIME, 0)
  SetCamera(93.085, 3.988, -36.523, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(92.459, 3.988, -37.085, "LINEAR", 0, false, 0)
  WaitFrame(10)
  MessageTalk("m170_050_220")
  MessageClose()
  WaitFrame(10)
  CUT("11.0")
  SetEnv_All("c11.0", 0)
  SetPosition("HEROINE_01", 92.497, 2.94, -36.229, "LINEAR", 0, 0)
  SetRotation("HEROINE_01", 0, 98.5, 0, "LINEAR", 0, 0)
  SetPosition("AEGIOMON_01", 92.389, 2.929, -37.094, "LINEAR", 0, 0)
  SetRotation("AEGIOMON_01", 0, 82.5, 0, "LINEAR", 0, 0)
  PlayMotion("HERO_01", "ft01_01", 3, false, 0)
  SetRotation("HERO_01", 0, 127, 0, "LINEAR", ROTATION90, 0)
  SetCamera(88.213, 4.586, -32.618, 0, 40, "LINEAR", 0, false, 0)
  SetCameraTarget(92.357, 4.383, -35.228, "LINEAR", 0, false, 0)
  SetCamera(87.752, 4.609, -32.328, 0, 40, "LINEAR", 600, true, 0)
  SetCameraTarget(92.357, 4.383, -35.228, "LINEAR", 600, true, 0)
  WaitFrame(30)
  Vista.ApplyVoiceSnapshot(SOUND_SNAPSHOT_DOOR)
  MessageTalk("m170_050_230")
  Vista.ApplyVoiceSnapshot(SOUND_SNAPSHOT_DOOR)
  MessageTalk("m170_050_240")
  Vista.ApplyVoiceSnapshot(SOUND_SNAPSHOT_DOOR)
  MessageTalk("m170_050_260")
  MessageClose()
  BlendEye("AEGIOMON_01", 0, 0, "SCURVE", 10, 0)
  BlendFace("AEGIOMON_01", -0, 0, 0, true, "SCURVE", 25, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", -0, 0, 0, true, "SCURVE", 25, 0)
  BlendEye("HEROINE_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HEROINE_01", -0, 0, 0, true, "SCURVE", 30, 0)
  WaitFrame(30)
  ::lbl_1929::
  if Debug.IsEventView() then
    EVENT_END()
  else
    EVENT_END_SEAMLESS(60)
  end
end

function CUT(cut_no)
  CUT_START(cut_no)
end

function main()
  m170_050()
end

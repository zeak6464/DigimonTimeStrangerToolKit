require("include")

function m090_020()
  Fade_Out(0, 0)
  EVENT_BEGIN()
  Talk.Load("m090")
  SetEventCutNo(8)
  if Debug.IsEventView() then
    SetTimeZone("Noon")
    SetTimeAxis("A2020_dbef_90")
    LoadMap("t0403")
  end
  LoadModel("HEROINE_01", "char_HEROINE")
  LoadModel("HERO_01", "Player")
  Vista.LoadAnimationBlend("HERO_01", "blend01")
  Vista.LoadMovieToTV("tvmovie", "tv_news_m090_020")
  Load_DigiviceHologram()
  LoadSceneViewerResource("c1.0", "t0403f_pa")
  LoadSceneViewerResource("c2.0", "t0403f_pa")
  LoadSceneViewerResource("c3.0", "t0403f_pa")
  LoadSceneViewerResource("c3.0_A1", "t0403f_pa")
  LoadSceneViewerResource("c3.0_B1", "t0403f_pa")
  LoadSceneViewerResource("c4.0", "t0403f_pa")
  LoadSceneViewerResource("c5.0", "t0403f_pa")
  LoadSceneViewerResource("c6.0", "t0403f_pa")
  LoadEnvironmentFile("c1.0", "es_m090_020_c1.0")
  LoadEnvironmentFile("c2.0", "es_m090_020_c2.0")
  LoadEnvironmentFile("c3.0", "es_m090_020_c3.0")
  LoadEnvironmentFile("c3.0_A1", "es_m090_020_c3.0_A1")
  LoadEnvironmentFile("c3.0_B1", "es_m090_020_c3.0_B1")
  LoadEnvironmentFile("c4.0", "es_m090_020_c4.0")
  LoadEnvironmentFile("c5.0", "es_m090_020_c5.0")
  LoadEnvironmentFile("c6.0", "es_m090_020_c6.0")
  WaitVistaLoad()
  SetPosition("HERO_01", 1.96, 0, 0.86, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, -90, 0, "LINEAR", 0, 0)
  SetPosition("HEROINE_01", 0.97, 0, 2.11, "LINEAR", 0, 0)
  SetRotation("HEROINE_01", 0, 150, 0, "LINEAR", 0, 0)
  PlayMotion("HERO_01", "fn01_01", 0, true, 0)
  SetStartFrame("HERO_01", "fn01_01", 0, 0)
  SetFace("HERO_01", "F01", 0, 1, 0, 0)
  PlayMotion("HEROINE_01", "fn01_01", 0, true, 0)
  SetFace("HEROINE_01", "F01", 1, 1, 0, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", 0, -100, 0, true, "SCURVE", 0, 0)
  BlendEye("HEROINE_01", 10, 0, "SCURVE", 0, 0)
  BlendFace("HEROINE_01", 0, 0, 0, true, "SCURVE", 0, 0)
  Vista.PlayMovieToTV("tvmovie", true)
  Set_DigiviceHologram()
  SetEnv_All("c1.0", 0)
  Vista.SetCharCamera("HEROINE_01", "npc001a_cam_B.S_Left", "LINEAR", 0, false, 0)
  FIELD_SET()
  EVENT_START()
  CUT("1.0")
  Fade_In(0, FADE_TIME)
  WaitFrame(FADE_TIME)
  SetFace("HEROINE_01", "E02_M16", 1, 1, FACE_BLENDTIME, 5)
  SetFace("HEROINE_01", "F02", 0, 1, FACE_BLENDTIME, 20)
  BlendEye("HEROINE_01", 15, -10, "SCURVE", 4, 6)
  BlendFace("HEROINE_01", 0, -30, 25, true, "SCURVE", 28, 0)
  WaitFrame(20)
  PlayMotion("HEROINE_01", "e511", 4, true, 0)
  SetFace("HEROINE_01", "E08_M02", 0, 2, 6, 15)
  BlendEye("HEROINE_01", 0, 0, "SCURVE", 4, 20)
  MessageTalk("m090_020_010")
  MessageClose()
  WaitFrame(10)
  EndMotion("HEROINE_01", 0)
  MovePosition("HEROINE_01", 1.02, 0, 2.023, false, 0.5, 15)
  MoveRotation("HEROINE_01", 0, 150, 0, "LINEAR", 0.5, true, 15)
  SetFace("HEROINE_01", "F02", 0, 1, 12, 6)
  BlendEye("HEROINE_01", 10, 0, "SCURVE", 4, 6)
  BlendFace("HEROINE_01", 0, 0, 0, true, "SCURVE", 30, 0)
  WaitFrame(20)
  SetFace("HEROINE_01", "F16", 0, 1, 8, 0)
  WaitFrame(10)
  Vista.SetLipSyncEndFace("HEROINE_01", "F16", 0, 2, 0)
  MessageTalk("m090_020_020")
  MessageClose()
  WaitFrame(10)
  CUT("2.0")
  SetEnv_All("c2.0", 0)
  SetCamera(0.534, 1.11, -2.674, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(0.493, 1.006, -5.012, "LINEAR", 0, false, 0)
  SetCamera(0.532, 1.105, -2.797, 0, 30, "LINEAR", 460, true, 0)
  SetCameraTarget(0.493, 1.006, -5.012, "LINEAR", 460, true, 0)
  MessageTalk("m090_020_030")
  MessageClose()
  WaitFrame(10)
  MessageTalk("m090_020_040")
  MessageClose()
  WaitFrame(10)
  MessageTalk("m090_020_050")
  MessageClose()
  WaitFrame(10)
  CUT("3.0")
  SetEnv_All("c3.0", 0)
  SetCamera(3.017, 1.52, 0.562, 0, 25, "LINEAR", 0, false, 0)
  SetCameraTarget(2.03, 1.5, 1.035, "LINEAR", 0, false, 0)
  SetRotation("HERO_01", 0, -180, 0, "LINEAR", 0, 0)
  SetFace("HERO_01", "E03_M01", 0, 1, FACE_BLENDTIME, 0)
  PlayMotion("HEROINE_01", "e005_01", 2, true, 0)
  SetFace("HEROINE_01", "F11", 0, 1, 0, 0)
  PlayMotionBlend("HEROINE_01", "blend03", 0, false, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", 0, 0, 0, true, "SCURVE", 0, 0)
  BlendEye("HEROINE_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HEROINE_01", 0, 30, 0, true, "SCURVE", 0, 0)
  MessageTalk("m090_020_060")
  MessageClose()
  WaitFrame(10)
  BlendFace("HEROINE_01", -30, -10, 0, true, "SCURVE", 30, 0)
  MessageTalk("m090_020_070")
  MessageClose()
  SetRotation("HERO_01", 0, -25, 0, "LINEAR", ROTATION180, 0)
  PlayMotion("HERO_01", "ft02_02", 6, false, 0)
  BlendEye("HERO_01", 10, 0, "SCURVE", 4, 10)
  BlendFace("HERO_01", 0, 0, 0, true, "SCURVE", 20, 0)
  WaitFrame(24)
  SetFace("HERO_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  EndMotion("HEROINE_01", 0)
  BlendEye("HEROINE_01", 0, 0, "SCURVE", 4, 0)
  BlendFace("HEROINE_01", 0, -12, 0, true, "SCURVE", 20, 0)
  WaitFrame(20)
  MessageTalkSel(2, "m090_020_080")
  result = Talk.GetResultSelectedNum()
  if result == RESULT_TALK00 then
    PlayMotion("HERO_01", "e002", 6, true, 0)
    SetFace("HERO_01", "F01", 0, 0, FACE_BLENDTIME, 0)
    SetFace("HERO_01", "F01", 0, 2, FACE_BLENDTIME, 50)
    WaitFrame(65)
    CUT("3.0_A1")
    SetEnv_All("c3.0_A1", 0)
    SetCamera(1.768, 1.425, 1.428, 0, 30, "LINEAR", 0, false, 0)
    SetCameraTarget(0.997, 1.434, 2.076, "LINEAR", 0, false, 0)
    SetPosition("HEROINE_01", 0.97, 0, 2.11, "LINEAR", 0, 0)
    SetRotation("HEROINE_01", 0, 150, 0, "LINEAR", 0, 0)
    PlayMotion("HEROINE_01", "e008_01", 2, true, 0)
    PlayMotionBlend("HEROINE_01", "blend03", 0, false, 10)
    SetFace("HEROINE_01", "F04", 1, 1, 0, 0)
    BlendEye("HEROINE_01", 0, 0, "SCURVE", 0, 0)
    BlendFace("HEROINE_01", 0, -12, 0, true, "SCURVE", 0, 0)
    MessageTalk("m090_020_090")
    MessageClose()
    WaitFrame(10)
    SetFace("HEROINE_01", "F04", 2, 1, FACE_BLENDTIME, 0)
    MessageTalk("m090_020_100")
    MessageClose()
    WaitFrame(10)
  elseif result == RESULT_TALK01 then
    PlayMotion("HERO_01", "e002", 4, true, 0)
    SetFace("HERO_01", "F01", 0, 0, FACE_BLENDTIME, 0)
    SetFace("HERO_01", "F01", 0, 2, FACE_BLENDTIME, 60)
    WaitFrame(75)
    CUT("3.0_B1")
    SetEnv_All("c3.0_B1", 0)
    SetCamera(1.768, 1.425, 1.428, 0, 30, "LINEAR", 0, false, 0)
    SetCameraTarget(0.997, 1.434, 2.076, "LINEAR", 0, false, 0)
    SetPosition("HEROINE_01", 0.97, 0, 2.11, "LINEAR", 0, 0)
    SetRotation("HEROINE_01", 0, 150, 0, "LINEAR", 0, 0)
    PlayMotion("HEROINE_01", "e008_01", 2, true, 0)
    SetFace("HEROINE_01", "F04", 2, 1, FACE_BLENDTIME, 0)
    BlendEye("HEROINE_01", 0, 0, "SCURVE", 0, 0)
    BlendFace("HEROINE_01", 0, -12, 0, true, "SCURVE", 0, 0)
    MessageTalk("m090_020_110")
    MessageClose()
    WaitFrame(10)
  end
  CUT("4.0")
  SetEnv_All("c4.0", 0)
  SetCamera(1.768, 1.425, 1.428, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(0.997, 1.434, 2.076, "LINEAR", 0, false, 0)
  SetFace("HEROINE_01", "E04_M11", 1, 1, 0, 0)
  EndMotion("HEROINE_01", 0)
  WaitFrame(15)
  PlayMotionBlend("HEROINE_01", "blend03", 2, false, 0)
  SetFace("HEROINE_01", "E04_M01", 0, 1, 3, 0)
  BlendEye("HEROINE_01", 0, 0, "SCURVE", 6, 0)
  MessageTalk("m090_020_120")
  MessageClose()
  WaitFrame(10)
  CUT("5.0")
  SetEnv_All("c5.0", 0)
  SetCamera(2.562, 1.511, 0.463, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(1.014, 1.44, 2.088, "LINEAR", 0, false, 0)
  SetPosition("HERO_01", 1.96, 0, 0.86, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, -20, 0, "LINEAR", 0, 0)
  SetFace("HEROINE_01", "E04_M04", 1, 2, 0, 0)
  SetFace("HEROINE_01", "E04_M04", 2, 2, 4, 12)
  SetFace("HEROINE_01", "E04_M04", 1, 2, 6, 18)
  MovePosition("HEROINE_01", 2.702, 0, 1.11, false, 1.2, 0)
  MoveRotation("HEROINE_01", 0, 120, 0, "LINEAR", 1.2, true, 0)
  BlendFace("HERO_01", 0, 48, 0, true, "SCURVE", 60, 0)
  BlendEye("HEROINE_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HEROINE_01", -4, -5, 0, true, "SCURVE", 0, 0)
  BlendEye("HEROINE_01", -23, 27, "SCURVE", 12, 0)
  BlendFace("HEROINE_01", 0, 0, 0, true, "SCURVE", 12, 0)
  BlendEye("HEROINE_01", 0, 0, "SCURVE", 4, 18)
  BlendFace("HEROINE_01", 0, 0, 0, true, "SCURVE", 32, 20)
  WaitFrame(60)
  CUT("6.0")
  SetEnv_All("c6.0", 0)
  SetCamera(0.955, 1.429, 1.802, 0, 40, "LINEAR", 0, false, 0)
  SetCameraTarget(0.904, 1.43, 0.994, "LINEAR", 0, false, 0)
  SetPosition("HERO_01", 1.11, 0, 0.86, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, -50, 0, "LINEAR", 0, 0)
  SetFace("HERO_01", "F15", 0, 1, 6, 10)
  BlendEye("HERO_01", 15, 40, "SCURVE", 0, 0)
  BlendFace("HERO_01", 0, 75, 0, true, "SCURVE", 0, 0)
  BlendEye("HERO_01", 15, 0, "SCURVE", 10, 10)
  BlendFace("HERO_01", 0, 0, 0, true, "SCURVE", 40, 10)
  ModelVisible("HEROINE_01", false, 0, 0)
  local slot_id = Event_PlaySE(500006, 100, true, 0, 0)
  WaitFrame(20)
  PlayMotion("HERO_01", "e200", 4, true, 0)
  WaitFrame(20)
  SetFace("HERO_01", "F15", 2, 1, FACE_BLENDTIME, 0)
  SetFace("HERO_01", "F15", 1, 1, FACE_BLENDTIME, 30)
  Event_StopSE(slot_id, 0.2, 3)
  local slot_id = Event_PlaySE(402002, 100, false, 0, 3.2)
  Play_DigiviceHologram()
  WaitFrame(20)
  PlayMotion("Horo_AGENT", "e008", 8, true, 10)
  MessageTalk("m090_020_130")
  MessageClose()
  WaitFrame(10)
  EndMotion("Horo_AGENT", 0)
  SetFace("HERO_01", "E03_M15", 0, 1, FACE_BLENDTIME, 0)
  MessageTalk("m090_020_140")
  MessageClose()
  WaitFrame(10)
  PlayMotion("Horo_AGENT", "e002", 8, true, 0)
  MessageTalk("m090_020_150")
  MessageClose()
  WaitFrame(5)
  MessageTalkSel(1, "m090_020_160")
  PlayMotionBlend("HERO_01", "blend01", 2, false, 0)
  SetMouth("HERO_01", 0, 6, 0)
  SetMouth("HERO_01", 1, 6, 30)
  WaitFrame(45)
  SetFace("HERO_01", "E03_M15", 2, 1, FACE_BLENDTIME, 24)
  SetFace("HERO_01", "E03_M15", 1, 1, FACE_BLENDTIME, 60)
  Close_DigiviceHologram()
  SetRotation("HERO_01", 0, -180, 0, "LINEAR", 60, 0)
  PlayMotion("HERO_01", "ft02_01", 2, false, 0)
  PlayMotion("HERO_01", "fn01_01", 2, true, 60)
  SetFace("HERO_01", "F01", 0, 1, FACE_BLENDTIME, 50)
  BlendEye("HERO_01", 0, 0, "SCURVE", 10, 0)
  WaitFrame(60)
  if Debug.IsEventView() then
    EVENT_END()
  else
    EVENT_END_SEAMLESS(65)
  end
end

function CUT(cut_no)
  CUT_START(cut_no)
end

function main()
  m090_020()
end

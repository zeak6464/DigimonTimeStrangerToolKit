require("include")

function m020_030()
  EVENT_BEGIN()
  EventRankSet("A")
  Vista.SetBattleSeamless()
  Talk.Load("m020")
  SetEventCutNo(15)
  LOAD_VOICE()
  if Debug.IsEventView() then
    LoadMap("d1072b")
  end
  LoadModel("HERO_01", "Player")
  LoadModel("HEROINE_01", "char_HEROINE")
  LoadModel("METALGREYMON_01", "char_METALGREYMON_BIG_BL")
  LoadModel("OMEGAMON_01", "char_OMEGAMON_BIG")
  Vista.LoadAnimation("HERO_01", "m020_030_c01")
  Vista.LoadAnimation("HERO_01", "m020_030_c02")
  Vista.LoadAnimation("HERO_01", "m020_030_c04")
  Vista.LoadAnimation("HERO_01", "m020_030_c05")
  Vista.LoadAnimation("HERO_01", "m020_030_c06")
  Vista.LoadAnimation("HERO_01", "m020_030_c07")
  Vista.LoadAnimation("HEROINE_01", "m020_030_c01")
  Vista.LoadAnimation("HEROINE_01", "m020_030_c02")
  Vista.LoadAnimation("HEROINE_01", "m020_030_c04")
  Vista.LoadAnimation("HEROINE_01", "m020_030_c05")
  Vista.LoadAnimation("HEROINE_01", "m020_030_c06")
  Vista.LoadAnimation("HEROINE_01", "m020_030_c07")
  Vista.LoadAnimation("HEROINE_01", "m020_030_c11")
  Vista.LoadAnimation("METALGREYMON_01", "m020_030_c02")
  Vista.LoadAnimation("METALGREYMON_01", "m020_030_c03")
  Vista.LoadAnimation("METALGREYMON_01", "m020_030_c04")
  Vista.LoadAnimation("METALGREYMON_01", "m020_030_c05")
  Vista.LoadAnimation("METALGREYMON_01", "m020_030_c07")
  Vista.LoadAnimation("METALGREYMON_01", "m020_030_c09")
  Vista.LoadAnimation("METALGREYMON_01", "m020_030_c13")
  Vista.LoadAnimation("OMEGAMON_01", "m020_030_c07")
  Vista.LoadAnimation("OMEGAMON_01", "m020_030_c08")
  Vista.LoadAnimation("OMEGAMON_01", "m020_030_c09")
  Vista.LoadAnimation("OMEGAMON_01", "m020_030_c10")
  Vista.LoadAnimation("OMEGAMON_01", "m020_030_c12")
  Vista.LoadAnimation("OMEGAMON_01", "m020_030_c13")
  Vista.LoadAnimationFaceBlend("HERO_01", "m020_030_c01")
  Vista.LoadAnimationFaceBlend("HERO_01", "m020_030_c02")
  Vista.LoadAnimationFaceBlend("HERO_01", "m020_030_c04")
  Vista.LoadAnimationFaceBlend("HERO_01", "m020_030_c05")
  Vista.LoadAnimationFaceBlend("HERO_01", "m020_030_c06")
  Vista.LoadAnimationFaceBlend("HERO_01", "m020_030_c07")
  Vista.LoadAnimationFaceBlend("HEROINE_01", "m020_030_c01")
  Vista.LoadAnimationFaceBlend("HEROINE_01", "m020_030_c02")
  Vista.LoadAnimationFaceBlend("HEROINE_01", "m020_030_c04")
  Vista.LoadAnimationFaceBlend("HEROINE_01", "m020_030_c05")
  Vista.LoadAnimationFaceBlend("HEROINE_01", "m020_030_c06")
  Vista.LoadAnimationFaceBlend("HEROINE_01", "m020_030_c07")
  Vista.LoadAnimationFaceBlend("HEROINE_01", "m020_030_c11")
  LoadCamera("Camera01", "Cam_m020_030_c01")
  LoadCamera("Camera02", "Cam_m020_030_c02")
  LoadCamera("Camera03", "Cam_m020_030_c03")
  LoadCamera("Camera04", "Cam_m020_030_c04")
  LoadCamera("Camera05", "Cam_m020_030_c05")
  LoadCamera("Camera06", "Cam_m020_030_c06")
  LoadCamera("Camera07", "Cam_m020_030_c07")
  LoadCamera("Camera08", "Cam_m020_030_c08")
  LoadCamera("Camera09", "Cam_m020_030_c09")
  LoadCamera("Camera10", "Cam_m020_030_c10")
  LoadCamera("Camera11", "Cam_m020_030_c11")
  LoadCamera("Camera12", "Cam_m020_030_c12")
  LoadCamera("Camera13", "Cam_m020_030_c13")
  Vista.LoadCRILipSyncsAnimationByEmotion("HEROINE_01", "m15")
  Vista.DigimonModelScaleDisable()
  LoadEffectScript("eff_01", "ef_e_m020_030_01")
  LoadEffectScript("eff_02", "ef_e_m020_030_02")
  LoadEffectScript("eff_03", "ef_e_m020_030_03")
  LoadEffectScript("eff_04", "ef_e_m020_030_04")
  LoadEffectScript("eff_05", "ef_e_m020_030_05")
  LoadEffectScript("eff_06", "ef_e_m020_030_06")
  LoadEffectScript("eff_07", "ef_e_m020_030_07")
  LoadEffectScript("eff_08", "ef_e_m020_030_08")
  LoadEffectScript("eff_09", "ef_e_m020_030_09")
  LoadEffectScript("eff_10", "ef_e_m020_030_10")
  LoadEffectScript("eff_11", "ef_e_m020_030_11")
  LoadEffectScript("eff_12", "ef_e_m020_030_12")
  LoadEffectScript("eff_13", "ef_e_m020_030_13")
  LoadSceneViewerResource("c1.0", "d1072b_ca")
  LoadSceneViewerResource("c2.0", "d1072b_ca")
  LoadSceneViewerResource("c3.0", "d1072b_ca")
  LoadSceneViewerResource("c4.0", "d1072b_ca")
  LoadSceneViewerResource("c5.0", "d1072b_ca")
  LoadSceneViewerResource("c6.0", "d1072b_ca")
  LoadSceneViewerResource("c7.0", "d1072b_ca")
  LoadSceneViewerResource("c8.0", "d1072b_ca")
  LoadSceneViewerResource("c9.0", "d1072b_ca")
  LoadSceneViewerResource("c10.0", "d1072b_ca")
  LoadSceneViewerResource("c11.0", "d1072b_ca")
  LoadSceneViewerResource("c12.0", "d1072b_ca")
  LoadSceneViewerResource("c13.0", "d1072b_ca")
  LoadSceneViewerResource("c14.0", "d1072b_ca")
  LoadSceneViewerResource("c15.0", "d1072b_ca")
  LoadEnvironmentFile("c1.0", "es_m020_030_c1.0")
  LoadEnvironmentFile("c2.0", "es_m020_030_c2.0")
  LoadEnvironmentFile("c3.0", "es_m020_030_c3.0")
  LoadEnvironmentFile("c4.0", "es_m020_030_c4.0")
  LoadEnvironmentFile("c5.0", "es_m020_030_c5.0")
  LoadEnvironmentFile("c6.0", "es_m020_030_c6.0")
  LoadEnvironmentFile("c7.0", "es_m020_030_c7.0")
  LoadEnvironmentFile("c8.0", "es_m020_030_c8.0")
  LoadEnvironmentFile("c9.0", "es_m020_030_c9.0")
  LoadEnvironmentFile("c10.0", "es_m020_030_c10.0")
  LoadEnvironmentFile("c11.0", "es_m020_030_c11.0")
  LoadEnvironmentFile("c12.0", "es_m020_030_c12.0")
  LoadEnvironmentFile("c13.0", "es_m020_030_c13.0")
  LoadEnvironmentFile("c14.0", "es_m020_030_c14.0")
  LoadEnvironmentFile("c15.0", "es_m020_030_c15.0")
  WaitVistaLoad()
  Event_PlayBGM(703, 0, 3)
  local slot_01 = Event_PlaySE(410004, 100, false, 0, 0)
  SetPosition("HERO_01", 3.259, 0.001, -7.725, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 0, 0, "LINEAR", 0, 0)
  PlayMotion("HERO_01", "fw01_01", 0, true, 0)
  SetPosition("HEROINE_01", 4.68, 0.001, -8.723, "LINEAR", 0, 0)
  SetRotation("HEROINE_01", 0, 0, 0, "LINEAR", 0, 0)
  PlayMotion("HEROINE_01", "fw01_01", 0, true, 0)
  SetPosition("OMEGAMON_01", 0, -100, 0, "LINEAR", 0, 0)
  SetRotation("OMEGAMON_01", 0, 0, 0, "LINEAR", 0, 0)
  SetPosition("METALGREYMON_01", 0, -100, 0, "LINEAR", 0, 0)
  SetRotation("METALGREYMON_01", 0, 0, 0, "LINEAR", 0, 0)
  SetCamera(2.831, 0.878, -4.536, 0, 40, "LINEAR", 0, false, 0)
  SetCameraTarget(3.728, 1.118, -6.741, "LINEAR", 0, false, 0)
  Event_PlaySE(220012, 50, false, 0.3, 0)
  FIELD_SET()
  EVENT_START()
  CUT("1.0")
  SetEnv_All("c1.0", 0)
  SetCamera(-10.378, 2.095, 25.794, 0, 40, "SCURVE", 440, true, 0)
  SetCameraTarget(7.423, 8.14, 0.834, "SCURVE", 440, true, 0)
  SetCamera(-10.378, 0.925, 25.794, 0, 40, "SCURVE", 160, true, 45)
  SetCameraTarget(7.423, 8.96, 2.494, "SCURVE", 160, true, 45)
  Fade_In(0, 40)
  BlendFace("HERO_01", 0, 82, 0, true, "SCURVE", 40, 50)
  BlendFace("HERO_01", 0, 0, 0, true, "SCURVE", 40, 120)
  BlendFace("HEROINE_01", 0, 32, 0, true, "SCURVE", 40, 20)
  BlendFace("HEROINE_01", 0, -62, 0, true, "SCURVE", 30, 70)
  BlendFace("HEROINE_01", 0, 0, 0, true, "SCURVE", 40, 140)
  SetPosition("HERO_01", 2.87, 0, 1, "SCURVE", 180, 0)
  SetPosition("HEROINE_01", 4.68, 0, 2.12, "SCURVE", 200, 0)
  WaitFrame(150)
  PlayMotion("HERO_01", "fw01_01_end01", 5, false, 0)
  PlayMotion("HERO_01", "fn01_01", 11, true, 30)
  PlayMotion("HERO_01", "e201", 5, false, 50)
  WaitFrame(40)
  CUT("2.0")
  SetEnv_All("c2.0", 0)
  SetCamera(3.4, 0.65, -1.5, 0, 40, "LINEAR", 0, false, 0)
  SetCameraTarget(10.87, 11, 23, "LINEAR", 0, false, 0)
  SetCamera(3.4, 0.65, -1.5, 0, 40, "SCURVE", 140, true, 0)
  SetCameraTarget(-2.83, 12, 23, "SCURVE", 140, true, 0)
  PlayMotion("HEROINE_01", "fw01_01_end01", 3, false, 0)
  PlayMotion("HEROINE_01", "fn01_01", 5, true, 20)
  PlayMotion("HEROINE_01", "e019", 10, false, 50)
  BlendFace("HEROINE_01", 17, -35, -16, true, "SCURVE", 50, 50)
  WaitFrame(140)
  PlayMotion("HERO_01", "fn01_01", 0, false, 0)
  PlayMotion("HEROINE_01", "fn01_01", 0, false, 0)
  BlendFace("HEROINE_01", 0, 0, 0, true, "SCURVE", 0, 0)
  CUT("3.0")
  SetEnv_All("c3.0", 0)
  Vista.PlayEffect("eff_01", false, 0)
  SetPosition("HERO_01", 0, 0, 0, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 0, 0, "LINEAR", 0, 0)
  SetPosition("HEROINE_01", 0, 0, 0, "LINEAR", 0, 0)
  SetRotation("HEROINE_01", 0, 0, 0, "LINEAR", 0, 0)
  PlayMotion("HERO_01", "m020_030_c01", 0, false, 0)
  Vista.PlayModelAnimationFaceBlend("HERO_01", "m020_030_c01", 0, false, 0)
  PlayMotion("HEROINE_01", "m020_030_c01", 0, false, 0)
  Vista.PlayModelAnimationFaceBlend("HEROINE_01", "m020_030_c01", 0, false, 0)
  PlayCamera("Camera01")
  CtrVibration(0, 0.7, 42, 56)
  Event_StopBGM(1, 0)
  CAM_WAIT(0)
  CtrVibration(0, 0, 0, 0)
  CUT("4.0")
  SetEnv_All("c4.0", 0)
  Vista.PlayEffect("eff_02", false, 0)
  PlayCamera("Camera02")
  Event_PlayBGM(804, 0, 3)
  SetPosition("METALGREYMON_01", 0, 0, 0, "LINEAR", 0, 0)
  PlayMotion("HERO_01", "m020_030_c02", 0, false, 0)
  PlayMotion("HEROINE_01", "m020_030_c02", 0, false, 0)
  PlayMotion("METALGREYMON_01", "m020_030_c02", 0, false, 0)
  Vista.PlayModelAnimationFaceBlend("HERO_01", "m020_030_c02", 0, false, 0)
  Vista.PlayModelAnimationFaceBlend("HEROINE_01", "m020_030_c02", 0, false, 0)
  WaitFrame(30)
  Event_PlayVoice("m020_030_001", 0)
  CAM_WAIT(0)
  CUT("5.0")
  SetEnv_All("c5.0", 0)
  Vista.PlayEffect("eff_03", false, 0)
  PlayMotion("METALGREYMON_01", "m020_030_c03", 0, false, 0)
  PlayCamera("Camera03")
  CtrVibration(0, 1, 5, 37)
  CtrVibration(0, 0, 0, 42)
  CtrVibration(0, 1, 5, 69)
  CtrVibration(0, 0, 0, 74)
  CAM_WAIT(0)
  CUT("6.0")
  SetEnv_All("c6.0", 0)
  Vista.PlayEffect("eff_04", false, 0)
  PlayMotion("HERO_01", "m020_030_c04", 0, false, 0)
  PlayMotion("HEROINE_01", "m020_030_c04", 0, false, 0)
  PlayMotion("METALGREYMON_01", "m020_030_c04", 0, false, 0)
  Vista.PlayModelAnimationFaceBlend("HERO_01", "m020_030_c04", 0, false, 0)
  Vista.PlayModelAnimationFaceBlend("HEROINE_01", "m020_030_c04", 0, false, 0)
  PlayCamera("Camera04")
  CtrVibration(0.5, 0.7, 45, 48)
  CtrVibration(0, 0, 0, 93)
  WaitFrame(45)
  CAM_WAIT(0)
  CUT("7.0")
  SetEnv_All("c7.0", 0)
  Vista.PlayEffect("eff_05", false, 0)
  Event_StopBGM(2.66, 0)
  PlayCamera("Camera05")
  PlayMotion("HERO_01", "m020_030_c05", 0, false, 0)
  PlayMotion("HEROINE_01", "m020_030_c05", 0, false, 0)
  PlayMotion("METALGREYMON_01", "m020_030_c05", 0, false, 0)
  Vista.PlayModelAnimationFaceBlend("HERO_01", "m020_030_c05", 0, false, 0)
  Vista.PlayModelAnimationFaceBlend("HEROINE_01", "m020_030_c05", 0, false, 0)
  CtrVibration(0.2, 0.3, 80, 0)
  WaitFrame(65)
  Fade_Out(1, 20)
  CAM_WAIT(0)
  CtrVibration(0, 0, 0, 0)
  CUT("8.0")
  SetEnv_All("c8.0", 0)
  Vista.PlayEffect("eff_06", false, 0)
  PlayCamera("Camera06")
  PlayMotion("HERO_01", "m020_030_c06", 0, false, 0)
  PlayMotion("HEROINE_01", "m020_030_c06", 0, false, 0)
  Vista.PlayModelAnimationFaceBlend("HERO_01", "m020_030_c06", 0, false, 0)
  Vista.PlayModelAnimationFaceBlend("HEROINE_01", "m020_030_c06", 0, false, 0)
  CtrVibration(0.7, 0, 80, 0)
  Fade_In(1, 10)
  CAM_WAIT(0)
  CtrVibration(0, 0, 0, 0)
  CUT("9.0")
  SetEnv_All("c9.0", 0)
  Vista.PlayEffect("eff_07", false, 0)
  PlayCamera("Camera07")
  SetPosition("OMEGAMON_01", 0, 0, 0, "LINEAR", 0, 0)
  PlayMotion("HERO_01", "m020_030_c07", 0, false, 0)
  PlayMotion("HEROINE_01", "m020_030_c07", 0, false, 0)
  PlayMotion("METALGREYMON_01", "m020_030_c07", 0, false, 0)
  PlayMotion("OMEGAMON_01", "m020_030_c07", 0, false, 0)
  Vista.PlayModelAnimationFaceBlend("HERO_01", "m020_030_c07", 0, false, 0)
  Vista.PlayModelAnimationFaceBlend("HEROINE_01", "m020_030_c07", 0, false, 0)
  CtrVibration(0, 1, 5, 105)
  CtrVibration(0, 0, 0, 110)
  Event_PlayBGM(204, 0, 2.4)
  CAM_WAIT(0)
  CUT("10.0")
  ModelVisible("HERO_01", false, 0, 0)
  SetEnv_All("c10.0", 0)
  Vista.PlayEffect("eff_08", false, 0)
  PlayCamera("Camera08")
  PlayMotion("OMEGAMON_01", "m020_030_c08", 0, false, 0)
  CtrVibration(0, 0.7, 5, 45)
  CtrVibration(0, 0, 0, 50)
  CAM_WAIT(0)
  CUT("11.0")
  SetEnv_All("c11.0", 0)
  Vista.PlayEffect("eff_09", false, 0)
  PlayCamera("Camera09")
  PlayMotion("METALGREYMON_01", "m020_030_c09", 0, false, 0)
  PlayMotion("OMEGAMON_01", "m020_030_c09", 0, false, 0)
  CtrVibration(0, 0.5, 57, 0)
  CAM_WAIT(0)
  CtrVibration(0, 0, 0, 0)
  CUT("12.0")
  SetEnv_All("c12.0", 0)
  Vista.PlayEffect("eff_10", false, 0)
  PlayCamera("Camera10")
  PlayMotion("OMEGAMON_01", "m020_030_c10", 0, false, 0)
  CtrVibration(0, 0.5, 5, 19)
  CtrVibration(0, 0, 0, 24)
  CAM_WAIT(0)
  CUT("13.0")
  SetEnv_All("c13.0", 0)
  Vista.PlayEffect("eff_11", false, 0)
  PlayCamera("Camera11")
  PlayMotion("HEROINE_01", "m020_030_c11", 0, false, 0)
  Vista.PlayModelAnimationFaceBlend("HEROINE_01", "m020_030_c11", 0, false, 0)
  WaitFrame(40)
  Vista.SetLipSyncsAnimationByEmotion("HEROINE_01", "m15")
  Vista.SetMessageTalkAuto("m020_030_010", -1, true, 0)
  Vista.SetLipSyncsAnimationByEmotion("HEROINE_01", "m01")
  CAM_WAIT(0)
  CUT("14.0")
  SetEnv_All("c14.0", 0)
  Vista.PlayEffect("eff_12", false, 0)
  PlayCamera("Camera12")
  PlayMotion("OMEGAMON_01", "m020_030_c12", 0, false, 0)
  WaitFrame(20)
  MessageClose()
  CAM_WAIT(0)
  CtrVibration(0, 0, 0, 0)
  CUT("15.0")
  SetEnv_All("c15.0", 0)
  Vista.PlayEffect("eff_13", false, 0)
  PlayCamera("Camera13")
  PlayMotion("METALGREYMON_01", "m020_030_c13", 0, false, 0)
  PlayMotion("OMEGAMON_01", "m020_030_c13", 0, false, 0)
  CtrVibration(0, 0.5, 5, 79)
  CtrVibration(0, 0, 0, 86)
  CAM_WAIT(0)
  if Debug.IsEventView() then
    Event_StopBGM(0, 0)
    Event_StopAllSE(0, 0)
  end
  Vista.SetKeepBGM()
  EVENT_END()
end

function CUT(cut_no)
  CUT_START(cut_no)
end

function main()
  m020_030()
end

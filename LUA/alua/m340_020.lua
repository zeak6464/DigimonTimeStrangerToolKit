require("include")

function m340_020()
  Fade_Out(0, 0)
  EVENT_BEGIN()
  Talk.Load("m340")
  SetEventCutNo(13)
  if Debug.IsEventView() then
    SetTimeZone("Night")
    SetTimeAxis("A2028_daft_340")
    SetMapStatus("Disable")
    LoadMap("t0304")
  end
  LoadModel("HERO_01", "Player")
  LoadModel("chr936_01", "char_METALGREYMON_BIG_BL")
  PictureLoad("m340_020_picture01")
  PictureLoad("m340_020_picture02")
  Load_DigiviceHologram()
  Vista.LoadAnimationFace("Horo_AGENT", "e01", "m01")
  Vista.LoadAnimationFace("Horo_AGENT", "e03", "m03")
  Vista.LoadAnimationFace("Horo_AGENT", "e15", "m15")
  LoadSceneViewerResource("c1.0", "t0304f_cn")
  LoadSceneViewerResource("c5.0", "t0304f_cn")
  LoadSceneViewerResource("c6.0", "t0304f_cn")
  LoadSceneViewerResource("c6.7", "t0304f_cn")
  LoadSceneViewerResource("c8.0", "t0304f_cn")
  LoadSceneViewerResource("c9.0", "t0304f_cn")
  LoadSceneViewerResource("c10.0", "t0304f_cn")
  LoadSceneViewerResource("c11.0", "t0304f_cn")
  LoadSceneViewerResource("c12.0", "t0304f_cn")
  LoadSceneViewerResource("c13.0", "t0304f_cn")
  LoadEnvironmentFile("c1.0", "es_m340_020_c1.0")
  LoadEnvironmentFile("c2.0", "es_m340_020_c2.0")
  LoadEnvironmentFile("c3.0", "es_m340_020_c3.0")
  LoadEnvironmentFile("c4.0", "es_m340_020_c4.0")
  LoadEnvironmentFile("c5.0", "es_m340_020_c5.0")
  LoadEnvironmentFile("c6.0", "es_m340_020_c6.0")
  LoadEnvironmentFile("c6.7", "es_m340_020_c6.7")
  LoadEnvironmentFile("c8.0", "es_m340_020_c8.0")
  LoadEnvironmentFile("c9.0", "es_m340_020_c9.0")
  LoadEnvironmentFile("c10.0", "es_m340_020_c10.0")
  LoadEnvironmentFile("c11.0", "es_m340_020_c11.0")
  LoadEnvironmentFile("c12.0", "es_m340_020_c12.0")
  LoadEnvironmentFile("c13.0", "es_m340_020_c13.0")
  WaitVistaLoad()
  Set_DigiviceHologram()
  SetScale("chr936_01", 15, 15, 15)
  PlayMotion("HERO_01", "fn01_01", 0, true, 0)
  SetFace("HERO_01", "E16_M04", 0, 1, FACE_BLENDTIME, 0)
  FIELD_SET()
  EVENT_START()
  CUT("1.0")
  BackFade_OutNoLoading(FADE_BLACK, 0)
  Fade_In(FADE_BLACK, FADE_TIME)
  WaitFrame(50)
  MessageTalk("m340_020_095")
  MessageClose()
  Event_PlayBGM(320, 0, 1)
  MessageTalk("m340_020_096")
  MessageClose()
  WaitFrame(70)
  SetEnv_All("c1.0", 0)
  SetMobTransparentRange(100, 100, 100)
  SetPosition("chr936_01", 42.084, 0, -10.9, "LINEAR", 0, 0)
  SetRotation("chr936_01", 0, -96, 0, "LINEAR", 0, 0)
  PlayMotion("chr936_01", "fw01_01", 0, true, 0)
  SetCamera(18.084, 8.839, 68.254, 0, 33, "LINEAR", 0, false, 0, false)
  SetCameraTarget(28.858, 29.155, -20.505, "LINEAR", 0, false, 0, false)
  SetCamera(18.084, 8.839, 68.254, 0, 33, "DECEL", 200, false, 0, false)
  SetCameraTarget(-6.952, 29.155, -20.505, "DECEL", 200, false, 0, false)
  BackFade_In(FADE_BLACK, 30)
  SetPosition("chr936_01", -48.5, 0.472, -28.296, "LINEAR", 270, 0)
  SetRotation("chr936_01", 0, -92.5, 0, "LINEAR", 270, 0)
  WaitFrame(3)
  Event_Quake_Start(6, 0, 15, 29)
  Event_Quake_Start(6, 0, 15, 67)
  Event_Quake_Start(6, 0, 15, 105)
  Event_Quake_Start(4, 0, 15, 143)
  Event_Quake_Start(2, 0, 15, 181)
  local slot_03 = Event_PlaySE(211004, 100, false, 0, 0.96)
  local slot_03 = Event_PlaySE(211004, 100, false, 0, 2.23)
  local slot_03 = Event_PlaySE(211004, 100, false, 0, 3.5)
  local slot_03 = Event_PlaySE(211004, 100, false, 0, 4.76)
  local slot_03 = Event_PlaySE(211004, 100, false, 0, 6.03)
  CAM_POS_WAIT(0)
  CUT("5.0")
  SetEnv_All("c5.0", 0)
  SetPosition("HERO_01", -16.867, 0.261, 129.073, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 162.5, 0, "LINEAR", 0, 0)
  SetPosition("AEGIOMON_01", -15.897, 0.261, 127.817, "LINEAR", 0, 0)
  SetRotation("AEGIOMON_01", 0, -60, 0, "LINEAR", 0, 0)
  BlendFace("HERO_01", -21, -29, 0, true, "SCURVE", 0, 0)
  BlendFace("AEGIOMON_01", -44, 38, 0, true, "SCURVE", 0, 0)
  SetCamera(-13.101, 5.875, 133.538, 0, 40, "LINEAR", 0, false, 0, false)
  SetCameraTarget(-15.854, 1.634, 128.97, "LINEAR", 0, false, 0, false)
  SetCamera(-13.469, 5.851, 133.783, 0, 40, "LINEAR", 300, true, 0, false)
  SetCameraTarget(-16.222, 1.609, 129.214, "LINEAR", 300, true, 0, false)
  WaitFrame(20)
  MovePosition("AEGIOMON_01", -7.698, 0.261, 128.773, false, 4, 0)
  MoveRotation("AEGIOMON_01", 0, 90, 0, "LINEAR", 4, true, 0)
  BlendFace("HERO_01", -21, -76, 0, true, "SCURVE", 50, 0)
  WaitFrame(40)
  local SE_01 = Event_PlaySE(500006, 100, true, 0, 0)
  WaitFrame(10)
  BlendEye("HERO_01", 11, 0, "SCURVE", 10, 10)
  BlendFace("HERO_01", 0, 0, 0, true, "SCURVE", 50, 0)
  WaitFrame(10)
  Event_StopSE(SE_01, 0, 2)
  local slot_02 = Event_PlaySE(402002, 100, false, 0, 2)
  Play_DigiviceHologram()
  CUT("6.0")
  SetEnv_All("c6.0", 0)
  SetPosition("HERO_01", -16.454, 0.261, 128.592, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 162.5, 0, "LINEAR", 0, 0)
  SetCamera(-15.042, 1.574, 128.415, 0, 27, "LINEAR", 0, false, 0)
  SetCameraTarget(-16.886, 1.765, 128.487, "LINEAR", 0, false, 0)
  WaitFrame(30)
  PlayMotion("Horo_AGENT", "e002", 0, true, 0)
  MessageTalk("m340_020_100")
  MessageClose()
  Fade_OutNoLoadingWithWait(1, 7)
  CUT("6.5")
  WaitFrame(5)
  PictureOpen("m340_020_picture02")
  Fade_In(1, 5)
  WaitFrame(80)
  Fade_OutNoLoadingWithWait(1, 7)
  PictureClose()
  CUT("6.7")
  SetEnv_All("c6.7", 0)
  BlendFace("Horo_AGENT", -30, 0, 0, false, "SCURVE", 25, 0)
  BlendFace("Horo_AGENT", -50, 0, 0, false, "SCURVE", 25, 30)
  SetFace("Horo_AGENT", "F15", 2, 1, FACE_BLENDTIME, 10)
  SetFace("Horo_AGENT", "F15", 0, 1, FACE_BLENDTIME, 35)
  FadeInWithWait(1, 5)
  MessageTalk("m340_020_110")
  MessageClose()
  Fade_OutNoLoadingWithWait(1, 7)
  CUT("7.0")
  WaitFrame(5)
  PictureOpen("m340_020_picture01")
  Fade_In(1, 5)
  WaitFrame(80)
  Fade_OutNoLoadingWithWait(1, 7)
  PictureClose()
  CUT("8.0")
  SetEnv_All("c8.0", 0)
  SetCamera(-16.184, 1.76, 128.688, 0, 27, "LINEAR", 0, false, 0)
  SetCameraTarget(-16.318, 1.641, 128.284, "LINEAR", 0, false, 0)
  FadeInWithWait(1, 5)
  PlayMotion("Horo_AGENT", "e013_01", 5, true, 0)
  WaitFrame(20)
  MessageTalk("m340_020_120")
  SetFace("Horo_AGENT", "F03", 2, 2, FACE_BLENDTIME, 10)
  BlendFace("Horo_AGENT", 30, 0, 0, false, "SCURVE", 50, 0)
  EndMotion("Horo_AGENT", 0)
  MessageClose()
  WaitFrame(10)
  MessageTalk("m340_020_130")
  SetFace("Horo_AGENT", "F15", 0, 1, FACE_BLENDTIME, 10)
  BlendFace("Horo_AGENT", -50, 0, 0, false, "SCURVE", 40, 0)
  MessageClose()
  WaitFrame(20)
  MessageTalk("m340_020_140")
  MessageClose()
  WaitFrame(10)
  CUT("9.0")
  SetEnv_All("c9.0", 0)
  SetFace("HERO_01", "E16_M10", 0, 1, 0, 0)
  SetCamera(-15.996, 1.526, 127.779, 0, 23, "LINEAR", 0, false, 0)
  SetCameraTarget(-16.281, 1.715, 128.312, "LINEAR", 0, false, 0)
  WaitFrame(10)
  MessageTalkSel(3, "m340_020_150")
  SetFace("HERO_01", "F15", 0, 1, FACE_BLENDTIME, 0)
  PlayMotionBlend("HERO_01", "blend02", 0, false, 0)
  SetMouth("HERO_01", 0, FACE_BLENDTIME, 0)
  SetMouth("HERO_01", 1, MOUTH_BLENDTIME, 60)
  WaitFrame(90)
  CUT("10.0")
  SetEnv_All("c10.0", 0)
  SetCamera(-15.819, 1.732, 126.958, 0, 23, "LINEAR", 0, false, 0, false)
  SetCameraTarget(-16.362, 1.694, 128.393, "LINEAR", 0, false, 0, false)
  SetCamera(-15.948, 1.632, 126.916, 0, 23, "LINEAR", 900, true, 0, false)
  SetCameraTarget(-16.362, 1.694, 128.393, "LINEAR", 900, true, 0, false)
  PlayMotion("Horo_AGENT", "e021_01", 5, false, 0)
  MessageTalk("m340_020_160")
  MessageClose()
  WaitFrame(10)
  PlayMotionBlend("HERO_01", "blend01", 0, false, 0)
  WaitFrame(60)
  CUT("11.0")
  SetEnv_All("c11.0", 0)
  SetCamera(-16.184, 1.76, 128.688, 0, 27, "LINEAR", 0, false, 0)
  SetCameraTarget(-16.318, 1.641, 128.284, "LINEAR", 0, false, 0)
  WaitFrame(30)
  MessageTalk("m340_020_170")
  SetFace("Horo_AGENT", "F01", 2, 1, FACE_BLENDTIME, 10)
  BlendFace("Horo_AGENT", 30, 0, 0, false, "SCURVE", 50, 0)
  PlayMotion("Horo_AGENT", "e012_01", 0, true, 0)
  MessageClose()
  WaitFrame(10)
  MessageTalk("m340_020_180")
  SetFace("Horo_AGENT", "F01", 0, 1, FACE_BLENDTIME, 10)
  BlendFace("Horo_AGENT", -50, 0, 0, false, "SCURVE", 40, 0)
  MessageClose()
  WaitFrame(20)
  MessageTalk("m340_020_190")
  EndMotion("Horo_AGENT", 0)
  MessageTalk("m340_020_200")
  MessageClose()
  WaitFrame(10)
  CUT("12.0")
  SetEnv_All("c12.0", 0)
  SetFace("HERO_01", "F01", 0, 1, 0, 0)
  SetCamera(-15.16, 1.572, 128.384, 0, 27, "LINEAR", 0, false, 0, false)
  SetCameraTarget(-16.398, 1.736, 128.425, "LINEAR", 0, false, 0, false)
  SetCamera(-15.178, 1.557, 128.261, 0, 27, "LINEAR", 900, true, 0, false)
  SetCameraTarget(-16.405, 1.733, 128.424, "LINEAR", 900, true, 0, false)
  WaitFrame(10)
  MessageTalk("m340_020_210")
  PlayMotion("Horo_AGENT", "e013_01", 6, true, 0)
  MessageTalk("m340_020_220")
  MessageTalk("m340_020_230")
  EndMotion("Horo_AGENT", 0)
  MessageClose()
  WaitFrame(10)
  CUT("13.0")
  SetEnv_All("c13.0", 0)
  SetCamera(-16.184, 1.76, 128.688, 0, 27, "LINEAR", 0, false, 0)
  SetCameraTarget(-16.318, 1.641, 128.284, "LINEAR", 0, false, 0)
  WaitFrame(10)
  BlendFace("Horo_AGENT", -30, 0, 0, false, "SCURVE", 25, 0)
  BlendFace("Horo_AGENT", -50, 0, 0, false, "SCURVE", 25, 30)
  SetFace("Horo_AGENT", "F15", 2, 1, FACE_BLENDTIME, 10)
  SetBlink("Horo_AGENT", 0, 0.5, 35)
  MessageTalk("m340_020_240")
  MessageTalk("m340_020_250")
  PlayMotion("Horo_AGENT", "e002", 0, true, 0)
  MessageTalk("m340_020_260")
  MessageClose()
  WaitFrame(10)
  Fade_OutNoLoadingWithWait(FADE_BLACK, 30)
  SetPosition("HERO_01", -16.867, 0.261, 129.073, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 162.5, 0, "LINEAR", 0, 0)
  WaitFrame(30)
  if Debug.IsEventView() then
    Event_StopBGM(0, 0)
    Event_StopAllSE(0, 0)
  end
  EVENT_END()
end

function CUT(cut_no)
  CUT_START(cut_no)
end

function main()
  m340_020()
end

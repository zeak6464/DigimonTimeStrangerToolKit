require("include")

function m130_040()
  Fade_Out(0, 0)
  EVENT_BEGIN()
  Talk.Load("m130")
  SetEventCutNo("7")
  if Debug.IsEventView() then
    SetTimeAxis("A2020_dbef_130")
    Vista.LoadBackGround("d0217")
  end
  LoadModel("HERO_01", "Player")
  LoadModel("AEGIOMON_01", "char_AEGIOMON")
  LoadModel("HEROINE_01", "char_HEROINE")
  LoadModel("chr925_01", "char_BEARMON_YB")
  LoadSceneViewerResource("c1.0", "d0217f_sa")
  LoadSceneViewerResource("c2.0", "d0217f_sa")
  LoadSceneViewerResource("c3.0", "d0217f_sa")
  LoadSceneViewerResource("c4.0", "d0217f_sa")
  LoadSceneViewerResource("c5.0", "d0217f_sa")
  LoadSceneViewerResource("c6.0", "d0217f_sa")
  LoadSceneViewerResource("c7.0", "d0217f_sa")
  LoadEnvironmentFile("c1.0", "es_m130_040_c1.0")
  LoadEnvironmentFile("c2.0", "es_m130_040_c2.0")
  LoadEnvironmentFile("c3.0", "es_m130_040_c3.0")
  LoadEnvironmentFile("c4.0", "es_m130_040_c4.0")
  LoadEnvironmentFile("c5.0", "es_m130_040_c5.0")
  LoadEnvironmentFile("c6.0", "es_m130_040_c6.0")
  LoadEnvironmentFile("c7.0", "es_m130_040_c7.0")
  WaitVistaLoad()
  SetPosition("HERO_01", 29.042, 7.085, -1.319, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 15.5, 0, "LINEAR", 0, 0)
  SetPosition("chr925_01", 30.11, 7.085, 0.64, "LINEAR", 0, 0)
  SetRotation("chr925_01", 0, -156.5, 0, "LINEAR", 0, 0)
  SetPosition("AEGIOMON_01", 29.411, 7.085, -1.548, "LINEAR", 0, 0)
  SetRotation("AEGIOMON_01", 0, 3, 0, "LINEAR", 0, 0)
  SetPosition("HEROINE_01", 28.284, 7.085, -1.441, "LINEAR", 0, 0)
  SetRotation("HEROINE_01", 0, 33.5, 0, "LINEAR", 0, 0)
  PlayMotion("HERO_01", "fn01_01", 0, true, 0)
  SetBlink("HERO_01", 0, 1, 0)
  SetMouth("HERO_01", 1, 0, 0)
  PlayMotion("chr925_01", "e004", 0, true, 0)
  SetStartFrame("chr925_01", "e004", 49, 0)
  SetLoopFrame("chr925_01", "e004", 49, 79)
  SetFace("chr925_01", "F01_M01", 0, 2, 0, 0)
  PlayMotion("HEROINE_01", "fn01_01", 0, true, 0)
  SetFace("HEROINE_01", "F16", 0, 1, 0, 0)
  PlayMotion("AEGIOMON_01", "fn01_01", 0, true, 0)
  SetFace("AEGIOMON_01", "F01", 0, 1, 0, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", 0, 0, 0, false, "SCURVE", 0, 0)
  BlendFaceDigi("chr925_01", 0, 0, 0, "LINEAR", 0, 0)
  BlendEye("HEROINE_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HEROINE_01", 44, 0, 0, false, "SCURVE", 0, 0)
  BlendFace("AEGIOMON_01", 34, 0, 0, false, "SCURVE", 0, 0)
  SetCamera(30.214, 8.452, -1.628, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(30.151, 7.914, -0.217, "LINEAR", 0, false, 0)
  FIELD_SET()
  EVENT_START()
  NpcInvisible(FOR_ALL)
  CUT("1.0")
  SetEnv_All("c1.0", 0)
  Fade_In(0, FADE_TIME)
  WaitFrame(FADE_TIME)
  MessageTalk("m130_040_010")
  SetMouth("chr925_01", 1, 0, 0)
  MessageClose()
  SetMouth("chr925_01", 2, 3, 0)
  WaitFrame(10)
  CUT("2.0")
  SetEnv_All("c2.0", 0)
  BlendEye("HEROINE_01", 20, 0, "SCURVE", 0, 0)
  BlendFace("HEROINE_01", 36, 0, 0, false, "SCURVE", 0, 0)
  BlendEye("AEGIOMON_01", 25, 0, "SCURVE", 0, 0)
  BlendFace("AEGIOMON_01", 18, 0, 0, false, "SCURVE", 0, 0)
  SetCamera(29.753, 7.932, 0.116, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(29.028, 8.241, -1.157, "LINEAR", 0, false, 0)
  PlayMotion("HERO_01", "e017", 0, true, 0)
  SetStartFrame("HERO_01", "e017", 60, 0)
  SetFace("HERO_01", "F15", 0, 1, 0, 0)
  WaitFrame(5)
  MessageTalkSel(3, "m130_040_020")
  result = Talk.GetResultSelectedNum()
  if result == RESULT_TALK00 then
    PlayMotion("HERO_01", "e034", 5, false, 0)
    PlayMotion("HERO_01", "e017", 5, true, 120)
    SetMouth("HERO_01", 0, 5, 0)
    SetMouth("HERO_01", 1, 5, 30)
    MoveRotation("chr925_01", 0, -156.5, 0, "LINEAR", 1, true, 0)
    BlendFaceDigi("chr925_01", -27, 0, 0, "LINEAR", 0, 0)
    WaitFrame(45)
  elseif result == RESULT_TALK01 then
    SetMouth("HERO_01", 0, 5, 0)
    SetMouth("HERO_01", 1, 5, 30)
    PlayMotionBlend("HERO_01", "blend01", 3, false, 0)
    MoveRotation("chr925_01", 0, -156.5, 0, "LINEAR", 1, true, 0)
    BlendFaceDigi("chr925_01", -27, 0, 0, "LINEAR", 0, 0)
    WaitFrame(45)
  elseif result == RESULT_TALK02 then
    SetFace("HERO_01", "E16_M01", 0, 1, 3, 0)
    SetMouth("HERO_01", 0, 5, 0)
    SetMouth("HERO_01", 1, 5, 24)
    MoveRotation("chr925_01", 0, -156.5, 0, "LINEAR", 1, true, 0)
    BlendFaceDigi("chr925_01", -27, 0, 0, "LINEAR", 0, 0)
    WaitFrame(45)
  end
  CUT("3.0")
  SetEnv_All("c3.0", 0)
  SetPosition("chr925_01", 29.684, 7.085, 0.476, "LINEAR", 0, 0)
  SetRotation("chr925_01", 0, -153, 0, "LINEAR", 0, 0)
  SetCamera(29.368, 8.534, -1.531, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(29.308, 7.907, -0.149, "LINEAR", 0, false, 0)
  PlayMotion("chr925_01", "e006", 0, true, 0)
  SetStartFrame("chr925_01", "e006", 0, 0)
  SetLoopFrame("chr925_01", "e006", 0, 12)
  PlayMotion("chr925_01", "e006", 0, true, 12)
  SetStartFrame("chr925_01", "e006", 12, 12)
  SetLoopFrame("chr925_01", "e006", 12, 72)
  MessageTalk("m130_040_030")
  MessageClose()
  SetMouth("chr925_01", 1, 0, 0)
  WaitFrame(10)
  PlayMotion("chr925_01", "e004", 10, true, 0)
  SetStartFrame("chr925_01", "e004", 20, 0)
  SetLoopFrame("chr925_01", "e004", 20, 80)
  SetMouth("chr925_01", 2, 0, 0)
  MessageTalk("m130_040_040")
  MessageTalk("m130_040_050")
  MessageClose()
  WaitFrame(10)
  PlayMotion("chr925_01", "e005", 10, true, 0)
  SetStartFrame("chr925_01", "e005", 0, 0)
  SetLoopFrame("chr925_01", "e005", 30, 90)
  CUT("4.0")
  SetEnv_All("c4.0", 0)
  SetPosition("chr925_01", 30.11, 7.085, 0.64, "LINEAR", 0, 0)
  SetRotation("chr925_01", 0, -156.5, 0, "LINEAR", 0, 0)
  SetPosition("HEROINE_01", 28.657, 7.085, -0.996, "LINEAR", 0, 0)
  SetRotation("HEROINE_01", 0, 40, 0, "LINEAR", 0, 0)
  SetPosition("HERO_01", 29.493, 7.085, -1.155, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 22, 0, "LINEAR", 0, 0)
  SetPosition("AEGIOMON_01", 30.005, 7.085, -1.384, "LINEAR", 0, 0)
  SetRotation("AEGIOMON_01", 0, 3, 0, "LINEAR", 0, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", 0, 0, 0, false, "SCURVE", 0, 0)
  SetFace("HERO_01", "F15", 0, 1, 0, 0)
  SetCamera(32.186, 7.566, 0.978, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(29.102, 7.9, -0.523, "LINEAR", 0, false, 0)
  MessageTalk("m130_040_060")
  MessageClose()
  WaitFrame(10)
  PlayMotionBlend("chr925_01", "blend02", 0, false, 0)
  MessageTalk("m130_040_070")
  MessageClose()
  WaitFrame(10)
  PlayMotion("AEGIOMON_01", "e008", 5, false, 0)
  SetFace("AEGIOMON_01", "F16", 0, 1, 3, 0)
  MessageTalk("m130_040_080")
  MessageClose()
  WaitFrame(10)
  PlayMotion("HEROINE_01", "e012", 5, true, 0)
  SetFace("HEROINE_01", "F13", 0, 1, 3, 0)
  MessageTalk("m130_040_090")
  MessageClose()
  WaitFrame(10)
  CUT("5.0")
  SetEnv_All("c5.0", 0)
  ModelVisible("HERO_01", false, 0, 0)
  SetPosition("HEROINE_01", 27.276, 7.085, -1.887, "LINEAR", 0, 0)
  SetRotation("HEROINE_01", 0, 15.5, 0, "LINEAR", 0, 0)
  SetCamera(29.834, 8.59, -1.553, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(30.026, 7.953, -0.182, "LINEAR", 0, false, 0)
  PlayMotion("chr925_01", "e007", 10, true, 0)
  SetStartFrame("chr925_01", "e007", 0, 0)
  SetLoopFrame("chr925_01", "e007", 12, 55)
  MessageTalk("m130_040_100")
  MessageTalk("m130_040_110")
  MessageClose()
  WaitFrame(10)
  CUT("6.0")
  SetEnv_All("c6.0", 0)
  ModelVisible("HERO_01", true, 0, 0)
  PlayMotion("HEROINE_01", "fn01_01", 0, true, 0)
  SetFace("HEROINE_01", "F01", 0, 1, 0, 0)
  PlayMotion("AEGIOMON_01", "fn01_01", 0, true, 0)
  SetFace("AEGIOMON_01", "F01", 0, 1, 0, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", 0, 0, 0, false, "SCURVE", 0, 0)
  SetPosition("HERO_01", 29.042, 7.085, -1.319, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 19, 0, "LINEAR", 0, 0)
  SetPosition("AEGIOMON_01", 29.483, 7.085, -1.692, "LINEAR", 0, 0)
  SetRotation("AEGIOMON_01", 0, 3, 0, "LINEAR", 0, 0)
  SetPosition("HEROINE_01", 28.429, 7.085, -1.441, "LINEAR", 0, 0)
  SetRotation("HEROINE_01", 0, 32.5, 0, "LINEAR", 0, 0)
  SetCamera(29.741, 7.999, 0.166, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(28.893, 8.295, -1.475, "LINEAR", 0, false, 0)
  PlayMotionBlend("HERO_01", "blend01", 3, false, 0)
  SetFace("HERO_01", "E01_M02", 0, 1, 5, 0)
  SetBlink("HERO_01", 0, 1, 0)
  SetMouth("HERO_01", 1, 0, 0)
  WaitFrame(60)
  CUT("7.0")
  SetEnv_All("c7.0", 0)
  SetPosition("HEROINE_01", 28.429, 7.085, -2.367, "LINEAR", 0, 0)
  SetRotation("HEROINE_01", 0, 32.5, 0, "LINEAR", 0, 0)
  SetPosition("HERO_01", 28.706, 7.085, -1.4, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 19, 0, "LINEAR", 0, 0)
  PlayMotion("HERO_01", "e017_end01", 0, false, 0)
  PlayMotion("HERO_01", "fn01_01", 3, true, 72)
  SetFace("HERO_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  SetPosition("chr925_01", 30.15, 7.085, 0.691, "LINEAR", 0, 0)
  SetRotation("chr925_01", 0, -150.446, 0, "LINEAR", 0, 0)
  PlayMotion("chr925_01", "bn01", 0, true, 0)
  BlendFaceDigi("chr925_01", 0, 0, 0, "SCURVE", 30, 0)
  SetCamera(28.97, 8.88, -2.318, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(28.887, 8.545, -1.05, "LINEAR", 0, false, 0)
  WaitFrame(50)
  if Debug.IsEventView() then
    EVENT_END()
  else
    EVENT_END_SEAMLESS(60)
  end
end

function CUT(cut_no)
  CUT_START(cut_no)
end

function main()
  m130_040()
end

S020_172 = {
  ID = 172,
  STEP_001 = 1,
  STEP_005 = 5,
  STEP_010 = 10,
  STEP_255 = 255,
  Flg001 = "FLAG_SUB_020_172_001",
  Flg002 = "FLAG_SUB_020_172_002",
  Flg003 = "FLAG_SUB_020_172_003",
  Flg004 = "FLAG_SUB_020_172_004",
  Flg005 = "FLAG_SUB_020_172_005",
  Flg006 = "FLAG_SUB_020_172_006",
  Flg007 = "FLAG_SUB_020_172_007",
  Flg008 = "FLAG_SUB_020_172_008"
}
local text_file = "s020_172"
local base = text_file .. "_"
local tlk = Tlk:new(text_file, 1, true)

function S020_172:Event_010()
  if Qst.Sub:Check(self.ID, self.STEP_001, self.STEP_005) then
    if Guest.IsExistNum(2) then
      INFO_WINDOW(10050)
      return
    end
    tlk:StartTalkActionAndZoom("s020_172_001")
    local hangyo = Obj:new(NPC, "s020_172_001")
    local hangyo_index = GetIndex(NPC, "s020_172_001")
    local h_fq01 = Motion.Object:new(NPC, "s020_172_001", "fq01")
    local h_fq02 = Motion.Object:new(NPC, "s020_172_001", "fq02")
    local h_e002 = Motion.Object:new(NPC, "s020_172_001", "e002")
    local h_fe04 = Motion.Object:new(NPC, "s020_172_001", "fe04")
    local h_bn01 = Motion.Object:new(NPC, "s020_172_001", "bn01")
    local e002 = Motion.Object:new(PLAYER, "", "e002")
    local e004 = Motion.Object:new(PLAYER, "", "e004")
    local e008 = Motion.Object:new(PLAYER, "", "e008")
    local e012 = Motion.Object:new(PLAYER, "", "e012")
    local fn01_01 = Motion.Object:new(PLAYER, "", "fn01_01")
    Field.ObjectLookAtTheObject(NPC, hangyo_index, PLAYER, 1, 30)
    Field.ObjectLookAtTheObject(PLAYER, 1, NPC, hangyo_index, 30)
    hangyo:ChangeExpression("F02_T01", EYE_BLINK, true, 10)
    h_fq01:PlayWithStartMoveMotion(10, 10)
    tlk:Message(base .. "010")
    hangyo:ChangeExpression("F02", EYE_BLINK, false, 10)
    local result = tlk:Select(3, base .. "020")
    if result == RESULT_TALK00 then
      WaitFrame(15)
      h_fq01:PlayWithStartMoveMotion(10, 10)
      hangyo:ChangeExpression("F02_T01", EYE_BLINK, true, 10)
      tlk:Message(base .. "030")
    elseif result == RESULT_TALK01 then
      WaitFrame(15)
      h_fq01:PlayWithStartMoveMotion(10, 10)
      hangyo:ChangeExpression("F01_T01", EYE_BLINK, true, 10)
      tlk:Message(base .. "040")
    else
      WaitFrame(15)
      hangyo:ChangeExpression("F01_T01", EYE_CLOSE, true, 10)
      tlk:Message(base .. "050")
    end
    hangyo:ChangeExpression("F01_T01", EYE_BLINK, true, 10)
    h_fq02:PlayWithStartMoveMotion(10, 10)
    tlk:Message(base .. "060")
    h_e002:PlayWithStartMoveMotion(10, 10)
    tlk:Message(base .. "070")
    h_fq02:PlayWithStartMoveMotion(10, 10)
    tlk:Message(base .. "090")
    hangyo:ChangeExpression("F01", EYE_BLINK, false, 10)
    result = tlk:Select(3, base .. "100")
    if result == RESULT_TALK00 then
      WaitFrame(15)
      h_fq01:PlayWithStartMoveMotion(10, 10)
      hangyo:ChangeExpression("F01_T01", EYE_BLINK, true, 10)
      tlk:Message(base .. "110")
    elseif result == RESULT_TALK01 then
      WaitFrame(15)
      h_fq02:PlayWithStartMoveMotion(10, 10)
      hangyo:ChangeExpression("F01_T01", EYE_BLINK, true, 10)
      tlk:Message(base .. "120")
    else
      WaitFrame(15)
      h_fq02:PlayWithStartMoveMotion(10, 10)
      hangyo:ChangeExpression("F01_T01", EYE_BLINK, true, 10)
      tlk:Message(base .. "130")
    end
    h_e002:PlayWithStartMoveMotion(10, 10)
    tlk:Message(base .. "140")
    h_fq02:PlayWithStartMoveMotion(10, 10)
    tlk:Message(base .. "150")
    h_e002:PlayWithStartMoveMotion(10, 10)
    hangyo:ChangeExpression("F03_T01", EYE_BLINK, true, 10)
    tlk:Message(base .. "160")
    Field.ObjectResetMotion(NPC, hangyo_index, 30)
    tlk:MessageClose()
    Talk.CloseLetterBox()
    Qst.Sub:Start(self.ID, 1, false)
    Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
    Talk.OpenLetterBox()
    tlk:EndTalkActionAndZoom()
    Flg.Set(self.Flg006)
    FieldObjectSync(FOR_ALL, true)
    Field.ResetPlayer(-68.08, 15.43, -116.41, 180)
    WaitFrame(60)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    Qst.Sub:Set(self.ID, self.STEP_005)
  end
end

function S020_172:Event_013()
  if Qst.Sub:Check(self.ID, self.STEP_005, self.STEP_010) then
    local hangyo = Obj:new(NPC, "s020_172_003")
    local hangyo_index = GetIndex(NPC, "s020_172_003")
    local h_fq01 = Motion.Object:new(NPC, "s020_172_003", "fq01")
    local h_fq02 = Motion.Object:new(NPC, "s020_172_003", "fq02")
    local h_e002 = Motion.Object:new(NPC, "s020_172_003", "e002")
    local h_fe04 = Motion.Object:new(NPC, "s020_172_003", "fe04")
    local h_bn01 = Motion.Object:new(NPC, "s020_172_003", "bn01")
    local s_index = GetIndex(NPC, "s020_172_002")
    local s_fq01 = Motion.Object:new(NPC, "s020_172_002", "fq01")
    local s_fq02 = Motion.Object:new(NPC, "s020_172_002", "fq02")
    local s_fe02 = Motion.Object:new(NPC, "s020_172_002", "fe02")
    local s_bn01 = Motion.Object:new(NPC, "s020_172_002", "bn01")
    local e002 = Motion.Object:new(PLAYER, "", "e002")
    local e004 = Motion.Object:new(PLAYER, "", "e004")
    local e008 = Motion.Object:new(PLAYER, "", "e008")
    local e012 = Motion.Object:new(PLAYER, "", "e012")
    local e033 = Motion.Object:new(PLAYER, "", "e033")
    local e201 = Motion.Object:new(PLAYER, "", "e201")
    local fn01_01 = Motion.Object:new(PLAYER, "", "fn01_01")
    Flg.Set(self.Flg007)
    tlk:StartTalkAndCancelDigimonRide()
    e201:PlayWithStartMoveMotion(10, 15)
    WaitFrame(90)
    fn01_01:Play(15, true)
    tlk:Message(base .. "162")
    tlk:Message(base .. "164")
    tlk:Message(base .. "166")
    tlk:Message(base .. "170")
    tlk:MessageClose()
    Flg.Set(self.Flg001)
    Flg.Set(self.Flg008)
    Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
    Cam.Inst:Set(-61.836, 15.41, -95.115, -67.145, 16.93, -103.45, default, 0)
    Obj:new(PLAYER, ""):SetPos(-66.409, 15.312, -100.074)
    Obj:new(PLAYER, ""):SetRotationYToObject(NPC, "s020_172_002", 0)
    FieldObjectSync(FOR_ALL, true)
    WaitFrame(30)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    s_fq01:PlayWithStartMoveMotion(10, 10)
    Field.ObjectChangeExpression(NPC, GetIndex(NPC, "s020_172_002"), "F02", EYES_BLINK_TYPE_BLINK, false, 0)
    tlk:Message(base .. "180")
    Field.ObjectLookAtTheObject(NPC, hangyo_index, NPC, s_index, 30)
    h_e002:PlayWithStartMoveMotion(10, 10)
    hangyo:ChangeExpression("F01_T01", EYE_BLINK, true, 10)
    tlk:Message(base .. "190")
    hangyo:ChangeExpression("F01", EYE_BLINK, false, 10)
    Field.ObjectResetAim(NPC, hangyo_index, 30)
    Field.ObjectChangeExpression(NPC, GetIndex(NPC, "s020_172_002"), "F01", EYES_BLINK_TYPE_BLINK, false, 0)
    tlk:Message(base .. "200")
    Field.ObjectChangeExpression(NPC, GetIndex(NPC, "s020_172_002"), "F01", EYES_BLINK_TYPE_CLOSE, false, 0)
    s_fq02:PlayWithStartMoveMotion(10, 10)
    tlk:Message(base .. "210")
    Field.ObjectChangeExpression(NPC, GetIndex(NPC, "s020_172_002"), "F01", EYES_BLINK_TYPE_BLINK, false, 0)
    result = tlk:Select(3, base .. "220")
    if result == RESULT_TALK00 then
      WaitFrame(15)
      s_fq01:PlayWithStartMoveMotion(10, 10)
      Field.ObjectChangeExpression(NPC, GetIndex(NPC, "s020_172_002"), "F02", EYES_BLINK_TYPE_BLINK, false, 0)
      tlk:Message(base .. "230")
    elseif result == RESULT_TALK01 then
      WaitFrame(15)
      s_fq01:PlayWithStartMoveMotion(10, 10)
      tlk:Message(base .. "240")
    else
      WaitFrame(15)
      Field.ObjectChangeExpression(NPC, GetIndex(NPC, "s020_172_002"), "F03", EYES_BLINK_TYPE_BLINK, false, 0)
      tlk:Message(base .. "250")
    end
    s_fq02:PlayWithStartMoveMotion(10, 10)
    Field.ObjectChangeExpression(NPC, GetIndex(NPC, "s020_172_002"), "F03", EYES_BLINK_TYPE_BLINK, false, 0)
    tlk:Message(base .. "260")
    h_e002:PlayWithStartMoveMotion(10, 10)
    hangyo:ChangeExpression("F01_T01", EYE_BLINK, true, 10)
    tlk:Message(base .. "270")
    hangyo:ChangeExpression("F01", EYE_BLINK, false, 10)
    s_fq01:PlayWithStartMoveMotion(10, 10)
    Field.ObjectChangeExpression(NPC, GetIndex(NPC, "s020_172_002"), "F02", EYES_BLINK_TYPE_BLINK, false, 0)
    tlk:Message(base .. "280")
    Field.ObjectChangeExpression(NPC, GetIndex(NPC, "s020_172_002"), "F01", EYES_BLINK_TYPE_BLINK, false, 0)
    result = tlk:Select(2, base .. "290")
    if result == RESULT_TALK00 then
      WaitFrame(15)
      s_fq01:PlayWithStartMoveMotion(10, 10)
      tlk:Message(base .. "300")
      s_fe02:PlayWithStartMoveMotion(10, 10)
      tlk:Message(base .. "320")
      tlk:MessageClose()
      Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
      tlk:EndTalk()
      Flg.Set(self.Flg002)
      Qst.Sub:Set(self.ID, self.STEP_010)
      Flg.Set("FLAG_IS_NOT_MAP_NAME_DISP")
      MapChange("d", 305, "start_00", false, FADE_BLACK, FADE_TIME)
    else
      WaitFrame(15)
      s_fq01:PlayWithStartMoveMotion(10, 10)
      tlk:Message(base .. "310")
      Field.ObjectLookAtTheObject(NPC, hangyo_index, PLAYER, 1, 30)
      hangyo:ChangeExpression("F01_T01", EYE_BLINK, true, 10)
      tlk:Message(base .. "313")
      hangyo:ChangeExpression("F01", EYE_BLINK, false, 10)
      tlk:Message(base .. "315")
      tlk:MessageClose()
      Flg.Clear(self.Flg008)
      Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
      Field.ObjectResetAim(NPC, hangyo_index, 0)
      FieldObjectSync(NPC, true)
      Cam.Inst:Clear(0)
      WaitFrame(30)
      tlk:EndTalk()
      Qst.Sub:Set(self.ID, self.STEP_010)
      FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    end
  end
end

function S020_172:Event_015()
  if Qst.Sub:Check(self.ID, self.STEP_010, self.STEP_255) then
    local hangyo = Obj:new(NPC, "s020_172_003")
    local h_fq01 = Motion.Object:new(NPC, "s020_172_003", "fq01")
    local h_fq02 = Motion.Object:new(NPC, "s020_172_003", "fq02")
    local h_e002 = Motion.Object:new(NPC, "s020_172_003", "e002")
    local h_fe04 = Motion.Object:new(NPC, "s020_172_003", "fe04")
    local h_bn01 = Motion.Object:new(NPC, "s020_172_003", "bn01")
    tlk:StartTalkActionAndZoom("s020_172_003")
    hangyo:ChangeExpression("F01_T01", EYE_BLINK, true, 10)
    tlk:Message(base .. "750")
    hangyo:ChangeExpression("F01", EYE_BLINK, false, 10)
    tlk:EndTalkActionAndZoom()
  end
end

function S020_172:Event_020()
  if Qst.Sub:Check(self.ID, self.STEP_010, self.STEP_255) then
    local hangyo = Obj:new(NPC, "s020_172_003")
    local hangyo_index = GetIndex(NPC, "s020_172_003")
    local h_fq01 = Motion.Object:new(NPC, "s020_172_003", "fq01")
    local h_fq02 = Motion.Object:new(NPC, "s020_172_003", "fq02")
    local h_e002 = Motion.Object:new(NPC, "s020_172_003", "e002")
    local h_fe04 = Motion.Object:new(NPC, "s020_172_003", "fe04")
    local h_bn01 = Motion.Object:new(NPC, "s020_172_003", "bn01")
    local s_index = GetIndex(NPC, "s020_172_002")
    local s_fq01 = Motion.Object:new(NPC, "s020_172_002", "fq01")
    local s_fq02 = Motion.Object:new(NPC, "s020_172_002", "fq02")
    local s_fe02 = Motion.Object:new(NPC, "s020_172_002", "fe02")
    local s_bn01 = Motion.Object:new(NPC, "s020_172_002", "bn01")
    local e002 = Motion.Object:new(PLAYER, "", "e002")
    local e004 = Motion.Object:new(PLAYER, "", "e004")
    local e008 = Motion.Object:new(PLAYER, "", "e008")
    local e012 = Motion.Object:new(PLAYER, "", "e012")
    local e033 = Motion.Object:new(PLAYER, "", "e033")
    local e201 = Motion.Object:new(PLAYER, "", "e201")
    local fn01_01 = Motion.Object:new(PLAYER, "", "fn01_01")
    Flg.Set(self.Flg008)
    Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
    FieldObjectSync(NPC, true)
    tlk:StartTalkAndCancelDigimonRide()
    Obj:new(PLAYER, ""):SetPos(-66.409, 15.312, -100.074)
    Obj:new(PLAYER, ""):SetRotationYToObject(NPC, "s020_172_002", 0)
    Cam.Inst:Set(-61.836, 15.41, -95.115, -67.145, 16.93, -103.45, default, 0)
    Obj:new(NPC, "s020_172_002"):SetPos(-62.221, 15.396, -99.071)
    Obj:new(NPC, "s020_172_002"):SetRotationYToObject(PLAYER, "", 0)
    WaitFrame(30)
    SetControlScriptExternalVariable("marin_state", "Initialize")
    fn01_01:Play(10, true)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    s_fq02:PlayWithStartMoveMotion(10, 10)
    tlk:Message(base .. "260")
    h_e002:PlayWithStartMoveMotion(10, 10)
    hangyo:ChangeExpression("F01_T01", EYE_BLINK, true, 10)
    tlk:Message(base .. "270")
    hangyo:ChangeExpression("F01", EYE_BLINK, false, 10)
    s_fq01:PlayWithStartMoveMotion(10, 10)
    tlk:Message(base .. "280")
    result = tlk:Select(2, base .. "290")
    if result == RESULT_TALK00 then
      WaitFrame(15)
      s_fq01:PlayWithStartMoveMotion(10, 10)
      tlk:Message(base .. "300")
      s_fe02:PlayWithStartMoveMotion(10, 10)
      tlk:Message(base .. "320")
      tlk:MessageClose()
      Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
      tlk:EndTalk()
      Flg.Set(self.Flg002)
      Qst.Sub:Set(self.ID, self.STEP_010)
      Flg.Set("FLAG_IS_NOT_MAP_NAME_DISP")
      MapChange("d", 305, "start_00", false, FADE_BLACK, FADE_TIME)
    else
      WaitFrame(15)
      s_fq01:PlayWithStartMoveMotion(10, 10)
      tlk:Message(base .. "310")
      Field.ObjectLookAtTheObject(NPC, hangyo_index, PLAYER, 1, 30)
      hangyo:ChangeExpression("F01_T01", EYE_BLINK, true, 10)
      tlk:Message(base .. "313")
      hangyo:ChangeExpression("F01", EYE_BLINK, false, 10)
      tlk:Message(base .. "315")
      tlk:MessageClose()
      Flg.Clear(self.Flg008)
      Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
      Field.ObjectResetAim(NPC, hangyo_index, 0)
      FieldObjectSync(NPC, true)
      Cam.Inst:Clear(0)
      WaitFrame(30)
      tlk:EndTalk()
      FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    end
  end
end

function S020_172:Event_030()
  if Qst.Sub:Check(self.ID, self.STEP_005, self.STEP_255) and not Flg.Check(self.Flg004) and Flg.Check(self.Flg002) then
    local hangyo = Obj:new(NPC, "s020_172_001")
    local hangyo_index = GetIndex(NPC, "s020_172_001")
    local h_fq01 = Motion.Object:new(NPC, "s020_172_001", "fq01")
    local h_fq02 = Motion.Object:new(NPC, "s020_172_001", "fq02")
    local h_e002 = Motion.Object:new(NPC, "s020_172_001", "e002")
    local h_fe04 = Motion.Object:new(NPC, "s020_172_001", "fe04")
    local h_bn01 = Motion.Object:new(NPC, "s020_172_001", "bn01")
    local s_index = GetIndex(NPC, "s020_172_002")
    local s_fq01 = Motion.Object:new(NPC, "s020_172_002", "fq01")
    local s_fq02 = Motion.Object:new(NPC, "s020_172_002", "fq02")
    local s_fe02 = Motion.Object:new(NPC, "s020_172_002", "fe02")
    local s_bn01 = Motion.Object:new(NPC, "s020_172_002", "bn01")
    local gani = Obj:new(NPC, "s020_172_003")
    local g_index = GetIndex(NPC, "s020_172_003")
    local e_fq01 = Motion.Object:new(NPC, "s020_172_003", "fq01")
    local e_fq02 = Motion.Object:new(NPC, "s020_172_003", "fq02")
    local e_fe02 = Motion.Object:new(NPC, "s020_172_003", "fe02")
    local e_ba02 = Motion.Object:new(NPC, "s020_172_003", "ba02")
    local e_bn01 = Motion.Object:new(NPC, "s020_172_003", "bn01")
    local e002 = Motion.Object:new(PLAYER, "", "e002")
    local e004 = Motion.Object:new(PLAYER, "", "e004")
    local e008 = Motion.Object:new(PLAYER, "", "e008")
    local e012 = Motion.Object:new(PLAYER, "", "e012")
    local e018 = Motion.Object:new(PLAYER, "", "e018")
    local e201 = Motion.Object:new(PLAYER, "", "e201")
    local fn01_01 = Motion.Object:new(PLAYER, "", "fn01_01")
    Obj:new(PLAYER, ""):SetPos(-1.135, 0.026, 75.852)
    Obj:new(PLAYER, ""):SetRotationY(0, 0)
    HideMinimap(true)
    HideGuide(true)
    Field_InvisibleFollowerAllPartyMember(0, 0, false)
    Cam.Inst:Set(0.257, -0.619, 70.512, -3.047, 3.536, 78.994, default, 0)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    tlk:StartTalkAndCancelDigimonRide()
    s_fq01:PlayWithStartMoveMotion(10, 10)
    tlk:Message(base .. "330")
    h_fq02:PlayWithStartMoveMotion(10, 10)
    hangyo:ChangeExpression("F01_T01", EYE_BLINK, true, 10)
    tlk:Message(base .. "340")
    Field.ObjectLookAtTheObject(PLAYER, 1, NPC, hangyo_index, 30)
    Field.ObjectLookAtTheObject(NPC, hangyo_index, PLAYER, 1, 30)
    h_e002:PlayWithStartMoveMotion(10, 10)
    tlk:Message(base .. "350")
    hangyo:ChangeExpression("F01", EYE_BLINK, false, 10)
    Field.ObjectResetAim(PLAYER, 1, 30)
    Field.ObjectResetAim(NPC, hangyo_index, 30)
    tlk:Message(base .. "360")
    tlk:MessageClose()
    e201:PlayWithStartMoveMotion(10, 10)
    WaitFrame(90)
    fn01_01:Play(15, true)
    s_fq02:PlayWithStartMoveMotion(10, 10)
    tlk:Message(base .. "370")
    tlk:MessageClose()
    Flg.Set(self.Flg003)
    Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
    FieldObjectSync(NPC, true)
    WaitFrame(5)
    Obj:new(NPC, "s020_172_001"):SetRotationYToObject(NPC, "s020_172_003", 0)
    Obj:new(NPC, "s020_172_002"):SetRotationYToObject(NPC, "s020_172_003", 0)
    Field.ObjectLookAtTheObject(PLAYER, 1, NPC, g_index, 30)
    Field.ObjectLookAtTheObject(NPC, hangyo_index, NPC, g_index, 30)
    WaitFrame(30)
    gani:ChangeExpression("F03_T01", EYE_BLINK, true, 10)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    tlk:Message(base .. "380")
    gani:ChangeExpression("F03", EYE_BLINK, false, 10)
    h_e002:PlayWithStartMoveMotion(10, 10)
    hangyo:ChangeExpression("F01_T01", EYE_BLINK, true, 10)
    tlk:Message(base .. "390")
    hangyo:ChangeExpression("F01", EYE_BLINK, false, 10)
    s_fq02:PlayWithStartMoveMotion(10, 10)
    tlk:Message(base .. "400")
    e_ba02:PlayWithStartMoveMotion(10, 10)
    gani:ChangeExpression("F03_T01", EYE_BLINK, true, 10)
    tlk:Message(base .. "410")
    gani:ChangeExpression("F03", EYE_BLINK, false, 10)
    h_fe04:PlayWithStartMoveMotion(10, 10)
    hangyo:ChangeExpression("F03_T01", EYE_BLINK, true, 10)
    tlk:Message(base .. "420")
    hangyo:ChangeExpression("F01", EYE_BLINK, false, 10)
    tlk:MessageClose()
    e018:Play(10, false)
    WaitFrame(60)
    tlk:EndTalk()
    Guest.Add(GST_HANGYO)
    EncountFromField_WithNormalEffect(20201720, 10373, false)
  end
end

function S020_172:Event_040()
  if Qst.Sub:Check(self.ID, self.STEP_005, self.STEP_255) and Flg.Check(self.Flg004) then
    local hangyo = Obj:new(NPC, "s020_172_001")
    local hangyo_index = GetIndex(NPC, "s020_172_001")
    local h_fq01 = Motion.Object:new(NPC, "s020_172_001", "fq01")
    local h_fq02 = Motion.Object:new(NPC, "s020_172_001", "fq02")
    local h_e002 = Motion.Object:new(NPC, "s020_172_001", "e002")
    local h_fe04 = Motion.Object:new(NPC, "s020_172_001", "fe04")
    local h_bn01 = Motion.Object:new(NPC, "s020_172_001", "bn01")
    local h_br01 = Motion.Object:new(NPC, "s020_172_001", "br01")
    local s_index = GetIndex(NPC, "s020_172_002")
    local s_fq01 = Motion.Object:new(NPC, "s020_172_002", "fq01")
    local s_fq02 = Motion.Object:new(NPC, "s020_172_002", "fq02")
    local s_fe02 = Motion.Object:new(NPC, "s020_172_002", "fe02")
    local s_bn01 = Motion.Object:new(NPC, "s020_172_002", "bn01")
    local s_br01 = Motion.Object:new(NPC, "s020_172_002", "br01")
    local gani = Obj:new(NPC, "s020_172_003")
    local g_index = GetIndex(NPC, "s020_172_003")
    local e_fq01 = Motion.Object:new(NPC, "s020_172_003", "fq01")
    local e_fq02 = Motion.Object:new(NPC, "s020_172_003", "fq02")
    local e_fe02 = Motion.Object:new(NPC, "s020_172_003", "fe02")
    local e_ba02 = Motion.Object:new(NPC, "s020_172_003", "ba02")
    local e_bn01 = Motion.Object:new(NPC, "s020_172_003", "bn01")
    local e002 = Motion.Object:new(PLAYER, "", "e002")
    local e004 = Motion.Object:new(PLAYER, "", "e004")
    local e008 = Motion.Object:new(PLAYER, "", "e008")
    local e012 = Motion.Object:new(PLAYER, "", "e012")
    local e015 = Motion.Object:new(PLAYER, "", "e015")
    local e033 = Motion.Object:new(PLAYER, "", "e033")
    local fn01_01 = Motion.Object:new(PLAYER, "", "fn01_01")
    e_bn01:PlayWithStartMoveMotion(10, 10)
    h_bn01:PlayWithStartMoveMotion(10, 10)
    s_bn01:PlayWithStartMoveMotion(10, 10)
    Obj:new(PLAYER, ""):SetPos(-1.135, 0.026, 75.852)
    Obj:new(PLAYER, ""):SetRotationY(0, 0)
    Field.ObjectLookAtTheObject(PLAYER, 1, NPC, g_index, 30)
    Field.ObjectLookAtTheObject(NPC, hangyo_index, NPC, g_index, 30)
    FieldObjectSync(NPC, true)
    HideMinimap(true)
    HideGuide(true)
    Field_InvisibleFollowerAllPartyMember(0, 0, false)
    tlk:StartTalkAndCancelDigimonRide()
    WaitFrame(30)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    hangyo:ChangeExpression("F01_T01", EYE_BLINK, true, 10)
    h_fq02:PlayWithStartMoveMotion(10, 10)
    tlk:Message(base .. "430")
    e_fq02:PlayWithStartMoveMotion(10, 10)
    gani:ChangeExpression("F01_T01", EYE_BLINK, true, 10)
    tlk:Message(base .. "440")
    gani:ChangeExpression("F01", EYE_BLINK, false, 10)
    h_e002:PlayWithStartMoveMotion(10, 10)
    hangyo:ChangeExpression("F01_T01", EYE_BLINK, true, 10)
    tlk:Message(base .. "450")
    hangyo:ChangeExpression("F01", EYE_BLINK, false, 10)
    e_fq01:PlayWithStartMoveMotion(10, 10)
    gani:ChangeExpression("F01_T01", EYE_BLINK, true, 10)
    tlk:Message(base .. "460")
    gani:ChangeExpression("F01", EYE_BLINK, false, 10)
    h_fe04:PlayWithStartMoveMotion(10, 10)
    hangyo:ChangeExpression("F01_T01", EYE_BLINK, true, 10)
    tlk:Message(base .. "470")
    hangyo:ChangeExpression("F01", EYE_BLINK, false, 10)
    local result = tlk:Select(3, base .. "480")
    if result == RESULT_TALK00 then
      WaitFrame(15)
      hangyo:ChangeExpression("F03_T01", EYE_BLINK, true, 10)
      h_fq01:PlayWithStartMoveMotion(10, 10)
      tlk:Message(base .. "490")
    elseif result == RESULT_TALK01 then
      WaitFrame(15)
      hangyo:ChangeExpression("F01_T01", EYE_CLOSE, true, 10)
      h_fq02:PlayWithStartMoveMotion(10, 10)
      tlk:Message(base .. "500")
    else
      WaitFrame(15)
      hangyo:ChangeExpression("F03_T01", EYE_BLINK, true, 10)
      h_fq02:PlayWithStartMoveMotion(10, 10)
      tlk:Message(base .. "510")
    end
    hangyo:ChangeExpression("F01", EYE_BLINK, false, 10)
    s_fq01:PlayWithStartMoveMotion(10, 10)
    tlk:Message(base .. "520")
    h_e002:PlayWithStartMoveMotion(10, 10)
    hangyo:ChangeExpression("F01_T01", EYE_BLINK, true, 10)
    tlk:Message(base .. "530")
    h_fq02:PlayWithStartMoveMotion(10, 10)
    tlk:Message(base .. "540")
    h_fq01:PlayWithStartMoveMotion(10, 10)
    tlk:Message(base .. "550")
    hangyo:ChangeExpression("F01", EYE_BLINK, false, 10)
    s_fq01:PlayWithStartMoveMotion(10, 10)
    tlk:Message(base .. "560")
    h_fq01:PlayWithStartMoveMotion(10, 10)
    hangyo:ChangeExpression("F01_T01", EYE_BLINK, true, 10)
    tlk:Message(base .. "570")
    hangyo:ChangeExpression("F01", EYE_BLINK, false, 10)
    e_fq02:PlayWithStartMoveMotion(10, 10)
    gani:ChangeExpression("F01_T01", EYE_CLOSE, true, 10)
    tlk:Message(base .. "580")
    gani:ChangeExpression("F01", EYE_BLINK, false, 10)
    h_e002:PlayWithStartMoveMotion(10, 10)
    hangyo:ChangeExpression("F01_T01", EYE_BLINK, true, 10)
    tlk:Message(base .. "590")
    hangyo:ChangeExpression("F01", EYE_BLINK, false, 10)
    Field.ObjectResetAim(NPC, hangyo_index, 30)
    Field.ObjectSetRotationY(FLD_OBJ_NPC, s_index, 120, 30)
    s_br01:Play(10, true)
    WaitFrame(30)
    s_fq02:PlayWithStartMoveMotion(10, 10)
    tlk:Message(base .. "600")
    Obj:new(NPC, "s020_172_001"):SetRotationYToObject(NPC, "s020_172_002", 30)
    h_br01:Play(10, true)
    WaitFrame(30)
    Field.ObjectLookAtTheObject(NPC, hangyo_index, NPC, s_index, 30)
    h_e002:PlayWithStartMoveMotion(10, 10)
    hangyo:ChangeExpression("F01_T01", EYE_BLINK, true, 10)
    tlk:Message(base .. "610")
    h_fq01:PlayWithStartMoveMotion(10, 10)
    tlk:Message(base .. "620")
    Field.ObjectResetAim(NPC, hangyo_index, 30)
    hangyo:ChangeExpression("F01", EYE_BLINK, false, 10)
    Field.ObjectLookAtTheObject(PLAYER, 1, NPC, hangyo_index, 30)
    result = tlk:Select(3, base .. "630")
    if result == RESULT_TALK00 then
      WaitFrame(15)
      Field.ObjectLookAtTheObject(NPC, hangyo_index, PLAYER, 1, 30)
      hangyo:ChangeExpression("F01_T01", EYE_BLINK, true, 10)
      h_fq02:PlayWithStartMoveMotion(10, 10)
      tlk:Message(base .. "640")
    elseif result == RESULT_TALK01 then
      WaitFrame(15)
      Field.ObjectLookAtTheObject(NPC, hangyo_index, PLAYER, 1, 30)
      hangyo:ChangeExpression("F03_T01", EYE_BLINK, true, 10)
      h_fq02:PlayWithStartMoveMotion(10, 10)
      tlk:Message(base .. "650")
    else
      WaitFrame(15)
      Field.ObjectLookAtTheObject(NPC, hangyo_index, PLAYER, 1, 30)
      hangyo:ChangeExpression("F01_T01", EYE_BLINK, true, 10)
      h_fq02:PlayWithStartMoveMotion(10, 10)
      tlk:Message(base .. "660")
    end
    hangyo:ChangeExpression("F01", EYE_BLINK, false, 10)
    h_fq01:PlayWithStartMoveMotion(10, 10)
    tlk:Message(base .. "670")
    s_fq01:PlayWithStartMoveMotion(10, 10)
    tlk:Message(base .. "680")
    h_e002:PlayWithStartMoveMotion(10, 10)
    hangyo:ChangeExpression("F01_T01", EYE_CLOSE, true, 10)
    tlk:Message(base .. "690")
    hangyo:ChangeExpression("F01", EYE_BLINK, false, 10)
    s_fq02:PlayWithStartMoveMotion(10, 10)
    tlk:Message(base .. "700")
    h_fe04:PlayWithStartMoveMotion(10, 10)
    hangyo:ChangeExpression("F01_T01", EYE_BLINK, true, 10)
    tlk:Message(base .. "710")
    tlk:MessageClose()
    hangyo:ChangeExpression("F01", EYE_BLINK, false, 10)
    Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
    tlk:EndTalk()
    Guest.Delete(GST_HANGYO)
    Flg.Set(self.Flg005)
    Flg.Set("FLAG_SKIP_AREACHANGE_MOVE")
    MapChange("d", 302, "start_03", false, FADE_BLACK, FADE_TIME)
  end
end

function S020_172:Event_050()
  if Qst.Sub:Check(self.ID, self.STEP_005, self.STEP_255) and Flg.Check(self.Flg005) then
    local hangyo = Obj:new(NPC, "s020_172_001")
    local hangyo_index = GetIndex(NPC, "s020_172_001")
    local h_fq01 = Motion.Object:new(NPC, "s020_172_001", "fq01")
    local h_fq02 = Motion.Object:new(NPC, "s020_172_001", "fq02")
    local h_e002 = Motion.Object:new(NPC, "s020_172_001", "e002")
    local h_fe04 = Motion.Object:new(NPC, "s020_172_001", "fe04")
    local h_bn01 = Motion.Object:new(NPC, "s020_172_001", "bn01")
    Obj:new(PLAYER, ""):SetPos(49.193, 3.058, 75.071)
    Obj:new(PLAYER, ""):SetRotationYToObject(NPC, "s020_172_001", 0)
    Cam.Inst:Set(48.507, 2.102, 70.831, 48.053, 6.351, 79.872, default, 0)
    tlk:StartTalkAndCancelDigimonRide()
    WaitFrame(30)
    Field.ObjectLookAtTheObject(PLAYER, 1, NPC, hangyo_index, 0)
    Field.ObjectLookAtTheObject(NPC, hangyo_index, FLD_OBJ_PLAYER, 1, 0)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    h_e002:PlayWithStartMoveMotion(10, 10)
    hangyo:ChangeExpression("F02_T01", EYE_BLINK, true, 10)
    tlk:Message(base .. "720")
    hangyo:ChangeExpression("F01_T01", EYE_BLINK, true, 10)
    h_fq02:PlayWithStartMoveMotion(10, 10)
    tlk:Message(base .. "730")
    hangyo:ChangeExpression("F02_T01", EYE_BLINK, true, 10)
    h_e002:PlayWithStartMoveMotion(10, 10)
    tlk:Message(base .. "740")
    hangyo:ChangeExpression("F01", EYE_BLINK, false, 10)
    h_bn01:PlayWithStartMoveMotion(10, 10)
    tlk:MessageClose()
    Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
    SetFollowerCameraOperateRotation(0, 0)
    tlk:EndTalk()
    Cam.Inst:Clear(0)
    FieldObjectSync(NPC, true)
    Flg.Clear("FLAG_IS_NOT_MAP_NAME_DISP")
    Field.ObjectInvisible(NPC, GetIndex(NPC, "s020_172_001"), 0, 0, true)
    WaitFrame(30)
    FadeAllInWithWait(FADE_BLACK, FADE_TIME)
    Qst.Sub:End(self.ID, self.STEP_255)
  end
end

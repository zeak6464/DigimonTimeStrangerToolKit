require("include")

function m390_090()
  Fade_Out(0, 0)
  EVENT_BEGIN()
  Talk.Load("m390")
  SetEventCutNo(7)
  if Debug.IsEventView() then
    SetTimeZone("Noon")
    SetTimeAxis("Z2028_daft_390")
    SetMapStatus("Disable")
    LoadMap("d1302")
  end
  LoadModel("HERO_01", "Player")
  LoadModel("chr178_01", "char_VULCANUSMON")
  LoadObject("d1302elvdoor00_01", "d1302elvdoor00")
  LoadModel("chr807aa010101_01", "char_PUBLICSAFETY_BATTLE")
  Vista.BindSpeaker("chr807aa010101_01", "char_DR_KUGA")
  Vista.LoadAnimation("d1302elvdoor00_01", "e001")
  LoadSceneViewerResource("c1.0", "m390_090_c1.0")
  LoadSceneViewerResource("c2.0", "m390_090_c1.0")
  LoadSceneViewerResource("c3.0", "m390_090_c1.0")
  LoadSceneViewerResource("c4.0", "m390_090_c1.0")
  LoadSceneViewerResource("c5.0", "m390_090_c1.0")
  LoadSceneViewerResource("c6.0", "m390_090_c1.0")
  LoadSceneViewerResource("c7.0", "m390_090_c1.0")
  LoadEnvironmentFile("c1.0", "es_m390_090_c1.0")
  LoadEnvironmentFile("c2.0", "es_m390_090_c2.0")
  LoadEnvironmentFile("c3.0", "es_m390_090_c3.0")
  LoadEnvironmentFile("c4.0", "es_m390_090_c4.0")
  LoadEnvironmentFile("c5.0", "es_m390_090_c5.0")
  LoadEnvironmentFile("c6.0", "es_m390_090_c6.0")
  LoadEnvironmentFile("c7.0", "es_m390_090_c7.0")
  WaitVistaLoad()
  SetPosition("HERO_01", 0.982, 0, 35.724, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 0, 0, "LINEAR", 0, 0)
  SetPosition("chr178_01", 3.417, 0, 35.299, "LINEAR", 0, 0)
  SetRotation("chr178_01", 0, 0, 0, "LINEAR", 0, 0)
  SetScale("chr178_01", 1.36, 1.36, 1.36)
  SetPosition("d1302elvdoor00_01", 2.1, 0, 53, "LINEAR", 0, 0)
  SetRotation("d1302elvdoor00_01", 0, 0, 0, "LINEAR", 0, 0)
  SetScale("d1302elvdoor00_01", 1, 1, 1)
  SetPosition("chr807aa010101_01", 2.126, -0.018, 58.415, "LINEAR", 0, 0)
  SetRotation("chr807aa010101_01", 0, 180, 0, "LINEAR", 0, 0)
  SetScale("chr807aa010101_01", 1, 1, 1)
  PlayMotion("HERO_01", "bn01", 0, true, 0)
  SetFace("HERO_01", "F16", 0, 1, FACE_BLENDTIME, 0)
  PlayMotion("chr178_01", "e007", 0, true, 0)
  SetFace("chr178_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  SetFace("chr807aa010101_01", "F09", 0, 2, FACE_BLENDTIME, 0)
  Event_StopBGM(1, 0)
  BlendEye("HERO_01", -0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", -0, 0, 0, true, "SCURVE", 0, 0)
  BlendFaceDigi("chr178_01", 0, 0, 0, "SCURVE", 0, 0)
  BlendEye("chr807aa010101_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("chr807aa010101_01", 0, 0, 0, false, "SCURVE", 0, 0)
  SetCamera(0.127, 1.136, 46.346, 0, 50, "LINEAR", 0, false, 0, false)
  SetCameraTarget(1.6, 2.361, 54.011, "LINEAR", 0, false, 0, false)
  SetEnv_All("c1.0", 0)
  FIELD_SET()
  EVENT_START()
  CUT("1.0")
  Fade_In(0, FADE_TIME)
  WaitFrame(FADE_TIME)
  SetCamera(0.127, 2.176, 46.346, 0, 50, "SCURVE", 90, true, 0, false)
  SetCameraTarget(1.6, 3.401, 54.011, "SCURVE", 90, true, 0, false)
  local slot_02 = Event_PlaySE(200023, 100, false, 0.3, 0)
  PlayMotion("d1302elvdoor00_01", "e001", 0, false, 0)
  PlayMotion("chr807aa010101_01", "e500", 0, true, 0)
  PlayMotion("chr807aa010101_01", "bn01", 3, true, 215)
  WaitFrame(100)
  CUT("2.0")
  SetEnv_All("c2.0", 0)
  local slot_01 = Event_PlaySE(401043, 100, false, 0.3, 0)
  Event_PlayBGM(204, 0, 0)
  SetCamera(-0.47, 0.921, 54.232, 0, 50, "LINEAR", 0, false, 0, false)
  SetCameraTarget(1.597, 2.079, 57.263, "LINEAR", 0, false, 0, false)
  SetCamera(-0.47, 2.681, 54.232, 0, 50, "SCURVE", 60, true, 0, false)
  SetCameraTarget(1.597, 3.839, 57.263, "SCURVE", 60, true, 0, false)
  WaitFrame(100)
  Event_StopSE(slot_01, 0.3, 0)
  Event_StopSE(slot_02, 0.3, 0)
  CUT("3.0")
  SetEnv_All("c3.0", 0)
  BlendEye("HERO_01", 4, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", -36, 13, 0, true, "SCURVE", 0, 0)
  BlendEye("HERO_01", -20, 0, "SCURVE", 10, 0)
  BlendFace("HERO_01", -80, 13, 0, true, "SCURVE", 30, 0)
  SetCamera(0.611, 1.828, 36.493, 0, 30, "LINEAR", 0, false, 0, false)
  SetCameraTarget(1.078, 1.367, 35.627, "LINEAR", 0, false, 0, false)
  SetCamera(0.527, 1.911, 36.648, 0, 30, "SCURVE", 120, true, 0, false)
  SetCameraTarget(1.078, 1.367, 35.627, "SCURVE", 120, true, 0, false)
  WaitFrame(60)
  CUT("4.0")
  SetEnv_All("c4.0", 0)
  SetFace("chr807aa010101_01", "F03", 0, 1, FACE_BLENDTIME, 0)
  SetCamera(0.773, 3.894, 56.251, 0, 40, "LINEAR", 0, false, 0)
  SetCameraTarget(1.942, 4.717, 58.065, "LINEAR", 0, false, 0)
  CameraOffsetMove(0, 0, 0.5, "LINEAR", true, true, 600, 0)
  WaitFrame(10)
  MessageTalk("m390_090_010")
  MessageClose()
  MessageTalk("m390_090_020")
  MessageClose()
  local slot_01 = Event_PlaySE(401051, 100, false, 0.3, 0)
  SetPosition("chr807aa010101_01", 2.126, -0.018, 58.415, "LINEAR", 0, 0)
  SetRotation("chr807aa010101_01", 0, 180, 0, "LINEAR", 0, 0)
  SetPosition("chr807aa010101_01", 2.126, 0, 55.875, "LINEAR", 30, 0)
  SetRotation("chr807aa010101_01", 0, 180, 0, "LINEAR", 30, 0)
  PlayMotion("chr807aa010101_01", "br01", 3, true, 0)
  WaitFrame(30)
  CUT("5.0")
  SetEnv_All("c5.0", 0)
  SetPosition("chr807aa010101_01", 2.126, 0, 51.576, "LINEAR", 0, 0)
  SetRotation("chr807aa010101_01", 0, 180, 0, "LINEAR", 0, 0)
  SetPosition("chr807aa010101_01", 2.126, -0, 41.126, "LINEAR", 52, 0)
  SetRotation("chr807aa010101_01", 0, 180, 0, "LINEAR", 52, 0)
  SetPosition("HERO_01", 0.982, 0, 31.596, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 0, 0, "LINEAR", 0, 0)
  SetPosition("chr178_01", 3.417, 0, 31.172, "LINEAR", 0, 0)
  SetRotation("chr178_01", 0, 0, 0, "LINEAR", 0, 0)
  PlayMotion("chr807aa010101_01", "br01", 3, true, 0)
  PlayMotion("chr807aa010101_01", "ba01", 10, true, 52)
  PlayMotion("chr807aa010101_01", "bn01", 10, true, 147)
  SetFace("chr807aa010101_01", "F09", 0, 2, FACE_BLENDTIME, 0)
  BlendEye("HERO_01", -20, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", -80, 20, 0, true, "SCURVE", 0, 0)
  BlendFaceDigi("chr178_01", -11, 0, 0, "SCURVE", 30, 0)
  SetCamera(-1.502, 2.047, 43.695, 0, 50, "LINEAR", 0, false, 0, false)
  SetCameraTarget(-0.814, 2.471, 44.542, "LINEAR", 0, false, 0, false)
  SetCamera(-0.731, 0.562, 29.859, 0, 55, "SCURVE", 100, true, 0, false)
  SetCameraTarget(4.303, 3.659, 36.053, "SCURVE", 100, true, 0, false)
  MessageTalkAuto("m390_090_030", -1, true)
  MESSAGE_WAIT()
  WaitFrame(10)
  CUT("6.0")
  SetEnv_All("c6.0", 0)
  SetPosition("chr178_01", 3.417, 0, 30.647, "LINEAR", 0, 0)
  SetRotation("chr178_01", 0, 0, 0, "LINEAR", 0, 0)
  SetPosition("HERO_01", 0.982, 0, 31.071, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 0, 0, "LINEAR", 0, 0)
  SetPosition("chr807aa010101_01", 2.126, 0, 41.376, "LINEAR", 0, 0)
  SetRotation("chr807aa010101_01", 0, 180, 0, "LINEAR", 0, 0)
  PlayMotion("chr807aa010101_01", "bn01", 0, true, 0)
  SetFace("chr807aa010101_01", "F09", 0, 2, FACE_BLENDTIME, 0)
  SetCamera(-0.708, 7.467, 42.877, -5, 50, "SCURVE", 0, false, 0)
  SetCameraTarget(1.146, 5.308, 40.648, "SCURVE", 0, false, 0)
  CameraOffsetMove(0, 0, 0.5, "LINEAR", true, true, 300, 0)
  WaitFrame(10)
  MessageTalk("m390_090_040")
  MessageClose()
  WaitFrame(10)
  CUT("7.0")
  SetEnv_All("c7.0", 0)
  BlendEye("HERO_01", -20, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", -80, 20, 0, true, "SCURVE", 0, 0)
  BlendFaceDigi("chr178_01", -11, 0, 0, "SCURVE", 0, 0)
  PlayMotion("HERO_01", "fn01_01", 0, false, 0)
  PlayMotion("HERO_01", "e018", 3, true, 0)
  PlayMotion("chr178_01", "bn01", 0, true, 0)
  SetFace("chr178_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  SetCamera(1.346, 4.982, 40.16, -5, 50, "LINEAR", 0, false, 0, false)
  SetCameraTarget(2.653, 5.155, 41.885, "LINEAR", 0, false, 0, false)
  SetCamera(-2.186, 1.287, 27.613, -5, 50, "SCURVE", 30, true, 60, false)
  SetCameraTarget(5.727, 2.337, 38.062, "SCURVE", 30, true, 60, false)
  Event_Quake_Start(3, 7, 30, 60)
  MessageTalkAuto("m390_090_050", -1, true)
  WaitFrame(88)
  Sound.PlaySE(300018, 100)
  StartEncountEffectNormal()
  WaitFrame(5)
  Vista.SetKeepBGM()
  EVENT_END()
end

function CUT(cut_no)
  CUT_START(cut_no)
end

function main()
  m390_090()
end

require("include")

function m340_050()
  Fade_OutNoLoadingWithWait(1, 0)
  EVENT_BEGIN()
  Talk.Load("m340")
  SetEventCutNo(8)
  if Debug.IsEventView() then
    SetTimeAxis("A2028_daft_340")
    LoadMap("t3002")
  end
  LoadModel("HERO_01", "Player")
  LoadModel("MIREI_01", "char_MIREI_CHILD")
  LoadSceneViewerResource("c1.0", "t3002f_pa")
  LoadSceneViewerResource("c2.0", "t3002f_pa")
  LoadSceneViewerResource("c3.0", "t3002f_pa")
  LoadSceneViewerResource("c4.0", "t3002f_pa")
  LoadSceneViewerResource("c5.0", "t3002f_pa")
  LoadSceneViewerResource("c6.0", "t3002f_pa")
  LoadSceneViewerResource("c7.0", "t3002f_pa")
  LoadSceneViewerResource("c8.0", "t3002f_pa")
  LoadEnvironmentFile("c1.0", "es_m340_050_c1.0")
  LoadEnvironmentFile("c2.0", "es_m340_050_c2.0")
  LoadEnvironmentFile("c3.0", "es_m340_050_c3.0")
  LoadEnvironmentFile("c4.0", "es_m340_050_c4.0")
  LoadEnvironmentFile("c5.0", "es_m340_050_c5.0")
  LoadEnvironmentFile("c6.0", "es_m340_050_c6.0")
  LoadEnvironmentFile("c7.0", "es_m340_050_c7.0")
  LoadEnvironmentFile("c8.0", "es_m340_050_c8.0")
  WaitVistaLoad()
  SetPosition("HERO_01", 0, 0, -4.321, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 0, 0, "LINEAR", 0, 0)
  SetScale("HERO_01", 1, 1, 1)
  SetPosition("MIREI_01", -3.907, 0, -4.427, "LINEAR", 0, 0)
  SetRotation("MIREI_01", 0, 0, 0, "LINEAR", 0, 0)
  SetScale("MIREI_01", 1, 1, 1)
  PlayMotion("HERO_01", "fn01_01", 0, true, 0)
  SetFace("HERO_01", "E01_M15", 2, 1, 0, 0)
  PlayMotion("MIREI_01", "fn01_01", 0, true, 0)
  SetFace("MIREI_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", 0, 0, 0, true, "SCURVE", 0, 0)
  BlendEye("MIREI_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("MIREI_01", 0, 0, 0, false, "SCURVE", 0, 0)
  SetCamera(-0.139, 1.22, -2.548, 0, 20, "LINEAR", 0, false, 0)
  SetCameraTarget(-0.042, 1.508, -4.28, "LINEAR", 0, false, 0)
  SetCamera(-0.117, 1.284, -2.933, 0, 20, "LINEAR", 120, true, 0)
  SetCameraTarget(-0.042, 1.508, -4.28, "LINEAR", 120, true, 0)
  Event_StopBGM(BGM_FADE_TIME, 0)
  FIELD_SET()
  EVENT_START()
  ObjectInvisible(FOR_ALL)
  CUT("1.0")
  WaitFrame(60)
  SetEnv_All("c1.0", 0)
  Fade_In(FADE_WHITE, 90)
  WaitFrame(90)
  SetFace("HERO_01", "F16", 0, 1, FACE_BLENDTIME, 0)
  WaitFrame(50)
  CUT("2.0")
  SetEnv_All("c2.0", 0)
  SetCamera(-1.337, 1.648, -3.49, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(-0.07, 1.478, -4.099, "LINEAR", 0, false, 0)
  WaitFrame(20)
  BlendFace("HERO_01", 0, 81, 0, true, "SCURVE", 30, 0)
  WaitFrame(60)
  CUT("3.0")
  SetEnv_All("c3.0", 0)
  BlendFace("HERO_01", 0, 0, 0, true, "SCURVE", 30, 0)
  SetCamera(-2.769, 2.721, -6.164, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(-0.231, 1.184, -4.163, "LINEAR", 0, false, 0)
  SetCamera(-5.512, 4.383, -8.326, 0, 30, "LINEAR", 240, true, 0)
  SetCameraTarget(-0.231, 1.184, -4.163, "LINEAR", 240, true, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", 0, -65, 0, true, "SCURVE", 30, 0)
  PlayMotion("HERO_01", "ft01_01", 0, false, 0)
  SetFace("HERO_01", "F15", 0, 1, FACE_BLENDTIME, 0)
  SetRotation("HERO_01", 0, -77.5, 0, "LINEAR", ROTATION90, 0)
  WaitFrame(110)
  CUT("4.0")
  SetEnv_All("c4.0", 0)
  PlayMotion("HERO_01", "fn01_01", 0, true, 0)
  SetFace("HERO_01", "E16_M10", 0, 1, FACE_BLENDTIME, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", 0, 0, 0, true, "SCURVE", 30, 0)
  SetCamera(-1.113, 1.37, -5.012, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(0.042, 1.465, -4.346, "LINEAR", 0, false, 0)
  WaitFrame(90)
  CUT("5.0")
  SetEnv_All("c5.0", 0)
  SetFace("HERO_01", "F15", 0, 1, FACE_BLENDTIME, 0)
  PlayMotion("MIREI_01", "fw01_01", 0, true, 0)
  SetFace("MIREI_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  SetPosition("MIREI_01", -3.109, 0, -4.381, "LINEAR", 0, 0)
  SetRotation("MIREI_01", 0, 90, 0, "LINEAR", 0, 0)
  BlendEye("MIREI_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("MIREI_01", -24, 0, 0, false, "SCURVE", 60, 0)
  BlendEye("HERO_01", 29, 0, "SCURVE", 30, 0)
  BlendFace("HERO_01", 20, 0, 0, true, "SCURVE", 30, 0)
  SetCamera(1.127, 1.782, -5.092, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(-0.648, 1.234, -4.369, "LINEAR", 0, false, 0)
  SetPosition("MIREI_01", -1.509, 0, -4.381, "DECEL", 60, 0)
  Event_PlaySE(210028, 100, false, 0, 0)
  Event_PlaySE(210028, 100, false, 0, 0.6)
  PlayMotion("MIREI_01", "fn01_01", 6, true, 57)
  if Vista.IsSkipping() then
    Event_StopBGM(BGM_FADE_TIME, 0)
  else
    Event_PlayBGM(114, 0, 0)
  end
  MessageTalk("m340_050_010")
  MessageClose()
  WaitFrame(10)
  MessageTalk("m340_050_020")
  MessageClose()
  WaitFrame(10)
  CUT("6.0")
  SetEnv_All("c6.0", 0)
  SetPosition("HERO_01", 0, 0, -4.321, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, -90, 0, "LINEAR", 0, 0)
  SetCamera(-0.711, 1.371, -4.524, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(-1.411, 1.168, -4.385, "LINEAR", 0, false, 0)
  PlayMotion("MIREI_01", "e002", 0, true, 0)
  SetFace("MIREI_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  MessageTalk("m340_050_030")
  MessageClose()
  WaitFrame(10)
  CUT("7.0")
  SetEnv_All("c7.0", 0)
  SetCamera(-2.57, 0.884, -5.172, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(-0.335, 1.217, -3.999, "LINEAR", 0, false, 0)
  SetFace("HERO_01", "E11_M10", 0, 1, FACE_BLENDTIME, 40)
  MessageTalk("m340_050_050")
  MessageClose()
  WaitFrame(10)
  CUT("8.0")
  SetEnv_All("c8.0", 0)
  SetCamera(-0.148, 1.424, -4.413, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(-1.425, 1.061, -4.373, "LINEAR", 0, false, 0)
  PlayMotion("MIREI_01", "e550", 0, true, 0)
  SetFace("MIREI_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  BlendEye("MIREI_01", 0, 17, "SCURVE", 30, 0)
  BlendFace("MIREI_01", -38, 0, 0, false, "SCURVE", 30, 0)
  MessageTalk("m340_050_060")
  MessageClose()
  WaitFrame(10)
  Fade_OutNoLoadingWithWait(FADE_WHITE, 60)
  Vista.SetKeepBGM()
  EVENT_END()
end

function CUT(cut_no)
  CUT_START(cut_no)
end

function main()
  m340_050()
end

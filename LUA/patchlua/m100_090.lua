require("include")

function m100_090()
  Fade_Out(0, 0)
  EVENT_BEGIN()
  Talk.Load("m100")
  SetEventCutNo(11)
  if Debug.IsEventView() then
    SetTimeZone("Evening")
    SetTimeAxis("A2020_dbef_100")
    LoadMap("e0004")
  end
  LoadModel("HERO_01", "Player")
  LoadModel("SIMONS_01", "char_SIMMONS")
  LoadObject("ATCdigivice00_01", "ATCdigivice00")
  LoadSceneViewerResource("c1.0", "e0004f_pa")
  LoadSceneViewerResource("c2.0", "e0004f_pa")
  LoadSceneViewerResource("c3.0", "e0004f_pa")
  LoadSceneViewerResource("c4.0", "e0004f_pa")
  LoadSceneViewerResource("c4.0_A1", "e0004f_pa")
  LoadSceneViewerResource("c4.0_B1", "e0004f_pa")
  LoadSceneViewerResource("c4.0_C1", "e0004f_pa")
  LoadSceneViewerResource("c5.0", "e0004f_pa")
  LoadSceneViewerResource("c6.0", "e0004f_pa")
  LoadSceneViewerResource("c7.0", "e0004f_pa")
  LoadSceneViewerResource("c8.0", "e0004f_pa")
  LoadEnvironmentFile("c1.0", "es_m100_090_c1.0")
  LoadEnvironmentFile("c2.0", "es_m100_090_c2.0")
  LoadEnvironmentFile("c3.0", "es_m100_090_c3.0")
  LoadEnvironmentFile("c4.0", "es_m100_090_c4.0")
  LoadEnvironmentFile("c4.0_A1", "es_m100_090_c4.0_A1")
  LoadEnvironmentFile("c4.0_B1", "es_m100_090_c4.0_B1")
  LoadEnvironmentFile("c4.0_C1", "es_m100_090_c4.0_C1")
  LoadEnvironmentFile("c5.0", "es_m100_090_c5.0")
  LoadEnvironmentFile("c6.0", "es_m100_090_c6.0")
  LoadEnvironmentFile("c7.0", "es_m100_090_c7.0")
  LoadEnvironmentFile("c8.0", "es_m100_090_c8.0")
  WaitVistaLoad()
  SetPosition("HERO_01", 0.337, 0, -0.245, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 221.5, 0, "LINEAR", 0, 0)
  AttachObject("HERO_01", "ATCdigivice00_01", "9")
  SetPosition("SIMONS_01", -0.13, 0, -0.88, "LINEAR", 0, 0)
  SetRotation("SIMONS_01", 0, 30, 0, "LINEAR", 0, 0)
  SetPosition("ATCdigivice00_01", 0.118, 1.238, -0.467, "LINEAR", 0, 0)
  SetRotation("ATCdigivice00_01", 0, 0, 0, "LINEAR", 0, 0)
  PlayMotion("HERO_01", "fn01_01", 0, true, 0)
  SetFace("HERO_01", "F01", 1, 1, FACE_BLENDTIME, 0)
  PlayMotion("SIMONS_01", "fn01_01", 0, true, 0)
  SetFace("SIMONS_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  PlayMotion("ATCdigivice00_01", "fan02", 0, true, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", -15, 0, 0, true, "SCURVE", 0, 0)
  BlendEye("SIMONS_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("SIMONS_01", 10, 0, 0, true, "SCURVE", 0, 0)
  ModelVisible("ATCdigivice00_01", false, 0, 0)
  SetEnv_All("c1.0", 0)
  SetCamera(-0.119, 1.612, 3.403, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(0.157, 1.21, -0.382, "LINEAR", 0, false, 0)
  FIELD_SET()
  EVENT_START()
  CUT("1.0")
  Sound.StopAmbientSE(0)
  Event_Stop_Play_BGM(405, 0, 0, 0, 0)
  PlaySE(220200, 100)
  SetCamera(-0.097, 1.581, 3.11, 0, 28, "LINEAR", 200, true, 0)
  SetCameraTarget(0.157, 1.26, -0.382, "LINEAR", 200, true, 0)
  Fade_In(0, 30)
  WaitFrame(25)
  PlayMotion("SIMONS_01", "e002", 5, true, 0)
  WaitFrame(15)
  MessageTalk("m100_090_005")
  MessageClose()
  WaitFrame(10)
  MessageTalk("m100_090_010")
  MessageClose()
  WaitFrame(10)
  PlayMotionBlend("SIMONS_01", "blend01", 3, false, 0)
  MessageTalk("m100_090_020")
  MessageClose()
  WaitFrame(10)
  PlayMotion("SIMONS_01", "e510", 6, true, 0)
  WaitFrame(20)
  CUT("2.0")
  SetEnv_All("c2.0", 0)
  SetCamera(-0.96, 1.546, -1.176, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(0.045, 1.557, -0.512, "LINEAR", 0, false, 0)
  SetPosition("HERO_01", 0.2, 0, 0.08, "LINEAR", 0, 0)
  SetRotation("HERO_01", 3, 204, 0, "LINEAR", 0, 0)
  SetPosition("SIMONS_01", -0.13, 0, -0.88, "LINEAR", 0, 0)
  SetRotation("SIMONS_01", 0, 31, 0, "LINEAR", 0, 0)
  SetRotation("SIMONS_01", 0, 6, 0, "LINEAR", 40, 78)
  PlayMotion("HERO_01", "e200", 4, true, 0)
  SetFace("HERO_01", "F15", 2, 1, 40, 8)
  SetFace("HERO_01", "F15", 1, 1, 30, 50)
  BlendEye("HERO_01", 30, 30, "SCURVE", 8, 0)
  BlendEye("HERO_01", 15, 0, "SCURVE", 10, 44)
  WaitFrame(65)
  BackFade_OutNoLoading(FADE_BLACK, 30)
  WaitFrame(100)
  CUT("3.0")
  SetEnv_All("c3.0", 0)
  SetCamera(0.013, 1.47, 1.055, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(0.217, 1.47, -0.274, "LINEAR", 0, false, 0)
  SetPosition("HERO_01", 0.48, 0, -0.054, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 215, 0, "LINEAR", 0, 0)
  SetRotation("SIMONS_01", 0, 30, 0, "LINEAR", 0, 0)
  ModelVisible("ATCdigivice00_01", true, 0, 0)
  PlayMotion("SIMONS_01", "fn01_01", 0, true, 0)
  BackFade_In(FADE_BLACK, 30)
  WaitFrame(30)
  PlayMotion("SIMONS_01", "e002", 4, true, 0)
  BlendEye("HERO_01", 10, 0, "SCURVE", 6, 10)
  BlendFace("HERO_01", 0, 0, 0, true, "SCURVE", 30, 0)
  MessageTalk("m100_090_030")
  MessageClose()
  WaitFrame(10)
  PlayMotion("SIMONS_01", "e012", 4, true, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", -30, 0, 0, true, "SCURVE", 30, 0)
  MessageTalk("m100_090_040")
  MessageClose()
  WaitFrame(10)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", -30, 0, 0, true, "SCURVE", 30, 0)
  WaitFrame(10)
  MessageTalk("m100_090_050")
  MessageClose()
  WaitFrame(10)
  EndMotion("SIMONS_01", 20)
  MessageTalk("m100_090_060")
  MessageClose()
  WaitFrame(10)
  EndMotion("HERO_01", 0)
  SetFace("HERO_01", "F01", 2, 1, 30, 15)
  SetFace("HERO_01", "F01", 1, 1, 30, 50)
  BlendEye("HERO_01", 44, 30, "SCURVE", 4, 10)
  BlendEye("HERO_01", 0, 0, "SCURVE", 10, 44)
  BlendFace("HERO_01", -10, 0, 0, true, "SCURVE", 20, 0)
  WaitFrame(20)
  CUT("4.0")
  SetEnv_All("c4.0", 0)
  SetCamera(-0.246, 1.51, -0.779, 0, 35, "LINEAR", 0, false, 0)
  SetCameraTarget(0.336, 1.51, -0.308, "LINEAR", 0, false, 0)
  SetPosition("HERO_01", 0.337, 0, -0.245, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 221.5, 0, "LINEAR", 0, 0)
  ModelVisible("SIMONS_01", false, 0, 0)
  ModelVisible("ATCdigivice00_01", false, 0, 0)
  ENDMOTION_WAIT("HERO_01", 0)
  WaitFrame(4)
  correct = false
  while not Vista.IsSkipping() and not correct do
    SetEnv_All("c4.0", 0)
    SetCamera(-0.246, 1.51, -0.779, 0, 35, "LINEAR", 0, false, 0)
    SetCameraTarget(0.336, 1.51, -0.308, "LINEAR", 0, false, 0)
    PlayMotion("HERO_01", "fn01_01", 0, true, 0)
    SetFace("HERO_01", "F01", 0, 1, 0, 0)
    MessageTalkSel(3, "m100_090_070")
    result = Talk.GetResultSelectedNum()
    if result == RESULT_TALK00 then
      PlayMotionBlend("HERO_01", "blend02", 0, false, 0)
      SetFace("HERO_01", "E03_M01", 1, 0, FACE_BLENDTIME, 0)
      SetFace("HERO_01", "E03_M01", 1, 1, FACE_BLENDTIME, 60)
      WaitFrame(65)
      CUT("4.0_A1")
      SetEnv_All("c4.0_A1", 0)
      Vista.SetCharCamera("SIMONS_01", "npc004a_cam_U.S_Left", "LINEAR", 0, false, 0)
      ModelVisible("SIMONS_01", true, 0, 0)
      WaitFrame(10)
      PlayMotionBlend("SIMONS_01", "blend01", 0, false, 15)
      MessageTalk("m100_090_080")
      MessageClose()
      WaitFrame(10)
      correct = true
    elseif result == RESULT_TALK01 then
      PlayMotion("HERO_01", "e020", 4, false, 0)
      SetFace("HERO_01", "F07", 1, 1, FACE_BLENDTIME, 0)
      WaitFrame(65)
      CUT("4.0_B1")
      SetEnv_All("c4.0_B1", 0)
      Vista.SetCharCamera("SIMONS_01", "npc004a_cam_U.S_Left", "LINEAR", 0, false, 0)
      ModelVisible("SIMONS_01", true, 0, 0)
      WaitFrame(10)
      PlayMotionBlend("SIMONS_01", "blend01", 0, false, 0)
      MessageTalk("m100_090_090")
      WaitFrame(10)
      MessageTalk("m100_090_095")
      MessageClose()
      WaitFrame(10)
      MessageTalk("m100_090_110")
      MessageClose()
      WaitFrame(10)
      correct = true
    elseif result == RESULT_TALK02 then
      PlayMotion("HERO_01", "e031", 4, true, 0)
      SetFace("HERO_01", "F02", 1, 0, FACE_BLENDTIME, 0)
      SetFace("HERO_01", "F02", 1, 1, FACE_BLENDTIME, 60)
      WaitFrame(65)
      CUT("4.0_C1")
      SetEnv_All("c4.0_C1", 0)
      Vista.SetCharCamera("SIMONS_01", "npc004a_cam_U.S_Left", "LINEAR", 0, false, 0)
      ModelVisible("SIMONS_01", true, 0, 0)
      WaitFrame(10)
      PlayMotionBlend("SIMONS_01", "blend02", 0, false, 0)
      SetFace("SIMONS_01", "E02_M01", 2, 1, FACE_BLENDTIME, 0)
      SetBlink("SIMONS_01", 0, 0.5, 30)
      MessageTalk("m100_090_120")
      MessageClose()
      WaitFrame(10)
      MessageTalk("m100_090_130")
      MessageClose()
      WaitFrame(10)
    end
  end
  CUT("5.0")
  SetEnv_All("c5.0", 0)
  SetCamera(-0.214, 1.493, 0.524, 0, 45, "LINEAR", 0, false, 0)
  SetCameraTarget(0.179, 1.463, -0.579, "LINEAR", 0, false, 0)
  CameraOffsetTurn(15, "LINEAR", false, true, 800, 0)
  PlayMotion("SIMONS_01", "e005", 4, true, 0)
  SetFace("SIMONS_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  SetFace("HERO_01", "F01", 0, 1, 0, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", -16, -7, 0, true, "SCURVE", 0, 0)
  MessageTalk("m100_090_140")
  MessageClose()
  WaitFrame(10)
  EndMotion("SIMONS_01", 0)
  ENDMOTION_WAIT("SIMONS_01", 0)
  WaitFrame(10)
  PlayMotionBlend("SIMONS_01", "blend01", 0, false, 20)
  MessageTalk("m100_090_150")
  MessageClose()
  WaitFrame(10)
  PlayMotion("SIMONS_01", "e014", 4, false, 0)
  SetFace("SIMONS_01", "F02", 0, 1, FACE_BLENDTIME, 0)
  SetFace("SIMONS_01", "E02_M01", 0, 1, FACE_BLENDTIME, 30)
  MessageTalk("m100_090_160")
  MessageClose()
  MOTION_WAIT("SIMONS_01", 0, 0)
  Event_PlaySE(400025, 100, false, 0, 0.8)
  PlayMotion("SIMONS_01", "e032", 4, true, 0)
  SetFace("SIMONS_01", "F02", 1, 1, FACE_BLENDTIME, 0)
  SetFace("SIMONS_01", "E02_M01", 0, 1, FACE_BLENDTIME, 30)
  CUT("6.0")
  SetEnv_All("c6.0", 0)
  SetCamera(-0.059, 1.517, 0.157, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(-0.094, 1.56, -0.849, "LINEAR", 0, false, 0)
  PlayMotionBlend("SIMONS_01", "blend03", 0, false, 0)
  SetFace("SIMONS_01", "F02", 0, 2, FACE_BLENDTIME, 0)
  EndMotion("SIMONS_01", 60)
  MessageTalk("m100_090_190")
  MessageClose()
  WaitFrame(10)
  PlayMotionBlend("SIMONS_01", "blend01", 0, false, 0)
  MessageTalk("m100_090_200")
  MessageClose()
  WaitFrame(10)
  CUT("7.0")
  SetEnv_All("c7.0", 0)
  SetCamera(-1.056, 1.698, -0.876, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(0.188, 1.481, -0.626, "LINEAR", 0, false, 0)
  SetPosition("HERO_01", 0.467, 0, -0.279, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 230, 0, "LINEAR", 0, 0)
  SetFace("HERO_01", "F15", 0, 1, 0, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", -20.5, 0, 0, true, "SCURVE", 0, 0)
  PlayMotion("HERO_01", "e033", 6, true, 0)
  SetFace("HERO_01", "E07_M10", 2, 1, 8, 0)
  WaitFrame(75)
  CUT("8.0")
  SetEnv_All("c8.0", 0)
  SetCamera(-0.53, 1.209, 1.581, 0, 40, "LINEAR", 0, false, 0)
  SetCameraTarget(0.25, 1.221, -0.49, "LINEAR", 0, false, 0)
  SetPosition("HERO_01", 0.45, 0, -0.02, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 215, 0, "LINEAR", 0, 0)
  PlayMotion("SIMONS_01", "e014", 0, false, 0)
  PlayMotion("SIMONS_01", "fn01_01", 4, true, 114)
  SetFace("SIMONS_01", "F02", 2, 1, FACE_BLENDTIME, 0)
  SetFace("SIMONS_01", "E02_M01", 0, 1, FACE_BLENDTIME, 60)
  SetBlink("SIMONS_01", 0, 0.5, 40)
  SetFace("HERO_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  EndMotion("HERO_01", 0)
  MessageTalk("m100_090_220")
  MessageClose()
  Event_StopBGM(1.4, 0)
  Event_StopAllSE(1.4, 0)
  WaitFrame(15)
  Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
  WaitFrame(30)
  if Debug.IsEventView() then
    Event_StopBGM(0, 0)
    Event_StopAllSE(0, 0)
  end
  Vista.SetKeepBGM()
  Vista.SetKeepBGMWithMapChange()
  EVENT_END()
end

function CUT(cut_no)
  CUT_START(cut_no)
end

function main()
  m100_090()
end

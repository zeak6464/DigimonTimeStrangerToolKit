require("include")

function m300_030()
  Fade_Out(0, 0)
  EVENT_BEGIN()
  Talk.Load("m300")
  SetEventCutNo(10)
  if Debug.IsEventView() then
    SetTimeZone("Noon")
    SetTimeAxis("P2028_daft_300")
    LoadMap("d0404")
  end
  LoadModel("HERO_01", "Player")
  LoadModel("AEGIOMON_01", "char_AEGIOMON")
  LoadModel("HEROINE_01", "char_HEROINE")
  LoadModel("chr179_01", "char_BACCHUSMON")
  LoadModel("chr376_01", "char_TONOSAMAGEKOMON")
  LoadModel("chr399_01", "char_GEKOMON")
  LoadModel("chr042_01", "char_FUNBEEMON")
  LoadModel("chr399_02", "char_GEKOMON")
  LoadModel("chr399_03", "char_GEKOMON")
  LoadModel("chr582_01", "char_OTAMAMON")
  LoadSceneViewerResource("c1.0", "d0404f_ta")
  LoadSceneViewerResource("c2.0", "d0404f_ta")
  LoadSceneViewerResource("c3.0", "d0404f_ta")
  LoadSceneViewerResource("c4.0", "d0404f_ta")
  LoadSceneViewerResource("c5.0", "d0404f_ta")
  LoadSceneViewerResource("c6.0", "d0404f_ta")
  LoadSceneViewerResource("c7.0", "d0404f_ta")
  LoadSceneViewerResource("c8.0", "d0404f_ta")
  LoadSceneViewerResource("c9.0", "d0404f_ta")
  LoadSceneViewerResource("c10.0", "d0404f_ta")
  LoadEnvironmentFile("c1.0", "es_m300_030_c1.0")
  LoadEnvironmentFile("c2.0", "es_m300_030_c2.0")
  LoadEnvironmentFile("c3.0", "es_m300_030_c3.0")
  LoadEnvironmentFile("c4.0", "es_m300_030_c4.0")
  LoadEnvironmentFile("c5.0", "es_m300_030_c5.0")
  LoadEnvironmentFile("c6.0", "es_m300_030_c6.0")
  LoadEnvironmentFile("c7.0", "es_m300_030_c7.0")
  LoadEnvironmentFile("c8.0", "es_m300_030_c8.0")
  LoadEnvironmentFile("c9.0", "es_m300_030_c9.0")
  LoadEnvironmentFile("c10.0", "es_m300_030_c10.0")
  WaitVistaLoad()
  SetPosition("HERO_01", 5.95, -0.221, -5.75, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 190, 0, "LINEAR", 0, 0)
  SetPosition("AEGIOMON_01", 6.65, -0.22, -5.75, "LINEAR", 0, 0)
  SetRotation("AEGIOMON_01", 0, 195, 0, "LINEAR", 0, 0)
  SetPosition("HEROINE_01", 5.32, -0.228, -5.615, "LINEAR", 0, 0)
  SetRotation("HEROINE_01", 0, 180, 0, "LINEAR", 0, 0)
  SetPosition("chr179_01", 1.97, -0.033, -20.1, "LINEAR", 0, 0)
  SetRotation("chr179_01", 0, 0, 0, "LINEAR", 0, 0)
  SetScale("chr179_01", 2, 2, 2)
  SetPosition("chr376_01", 21.24, 0.316, -13.354, "LINEAR", 0, 0)
  SetRotation("chr376_01", -50, -38.648, 0, "LINEAR", 0, 0)
  SetScale("chr376_01", 1.5, 1.5, 1.5)
  SetPosition("chr399_01", 18.743, -0.047, -11.59, "LINEAR", 0, 0)
  SetRotation("chr399_01", 0, -9.35, 0, "LINEAR", 0, 0)
  SetScale("chr399_01", 1, 1, 1)
  SetPosition("chr042_01", 16.541, 0.019, -7.393, "LINEAR", 0, 0)
  SetRotation("chr042_01", 0, 90, -22, "LINEAR", 0, 0)
  SetScale("chr042_01", 0.48, 0.48, 0.48)
  SetPosition("chr399_02", 21.9, -0.315, -8.482, "LINEAR", 0, 0)
  SetRotation("chr399_02", 0, -65.4, 0, "LINEAR", 0, 0)
  SetScale("chr399_02", 1, 1, 1)
  SetPosition("chr399_03", 19.676, -0.275, -5.291, "LINEAR", 0, 0)
  SetRotation("chr399_03", 0, 0, 0, "LINEAR", 0, 0)
  SetScale("chr399_03", 1, 1, 1)
  SetPosition("chr582_01", 19.878, -0.173, -9.496, "LINEAR", 0, 0)
  SetRotation("chr582_01", 0, -73.442, 0, "LINEAR", 0, 0)
  SetScale("chr582_01", 1, 1, 1)
  PlayMotion("HERO_01", "fn01_01", 0, true, 0)
  SetFace("HERO_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  PlayMotion("AEGIOMON_01", "fn01_01", 0, true, 0)
  SetFace("AEGIOMON_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  PlayMotion("HEROINE_01", "fn01_01", 0, true, 0)
  SetFace("HEROINE_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  PlayMotion("chr179_01", "e100", 0, true, 0)
  SetStartFrame("chr179_01", "e100", 0, 0)
  SetFace("chr179_01", "F01", 2, 1, 0, 0)
  PlayMotion("chr376_01", "bn02", 0, false, 0)
  SetFace("chr376_01", "F01", 2, 1, 0, 0)
  PlayMotion("chr399_01", "bd02", 0, false, 0)
  SetStartFrame("chr399_01", "bd02", 0, 0)
  SetLoopFrame("chr399_03", "bd02", 30, 30)
  SetFace("chr399_01", "F01", 2, 1, 0, 0)
  PlayMotion("chr042_01", "f000", 0, true, 0)
  SetFace("chr042_01", "F01", 2, 1, 0, 0)
  PlayMotion("chr399_02", "bd02", 0, false, 0)
  SetStartFrame("chr399_02", "bd02", 0, 0)
  SetLoopFrame("chr399_02", "bd02", 30, 30)
  SetFace("chr399_02", "F01", 2, 1, 0, 0)
  PlayMotion("chr399_03", "bd02", 0, true, 0)
  SetStartFrame("chr399_03", "bd02", 0, 0)
  SetLoopFrame("chr399_03", "bd02", 30, 30)
  SetFace("chr399_03", "F01", 2, 1, 0, 0)
  PlayMotion("chr582_01", "bn02", 0, true, 0)
  SetFace("chr582_01", "F01", 2, 1, 0, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", -45, 0, 0, true, "SCURVE", 0, 0)
  BlendEye("AEGIOMON_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("AEGIOMON_01", -55, 0, 0, true, "SCURVE", 0, 0)
  BlendEye("HEROINE_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HEROINE_01", -45, 0, 0, true, "SCURVE", 0, 0)
  BlendFaceDigi("chr179_01", 0, 0, 0, "SCURVE", 0, 0)
  BlendFaceDigi("chr376_01", 0, 0, 0, "SCURVE", 0, 0)
  BlendFaceDigi("chr399_01", 0, 0, 0, "SCURVE", 0, 0)
  BlendFaceDigi("chr042_01", 0, 0, 0, "SCURVE", 0, 0)
  BlendFaceDigi("chr399_02", 0, 0, 0, "SCURVE", 0, 0)
  BlendFaceDigi("chr399_03", 0, 0, 0, "SCURVE", 0, 0)
  BlendFaceDigi("chr582_01", 0, 0, 0, "SCURVE", 0, 0)
  SetEnv_All("c1.0", 0)
  SetCamera(7.968, 1.301, 0.803, 0, 60, "LINEAR", 0, false, 0)
  SetCameraTarget(5.968, 1.224, -5.886, "LINEAR", 0, false, 0)
  SetCamera(8.172, 1.309, 1.487, 0, 60, "LINEAR", 120, false, 0)
  SetCameraTarget(5.968, 1.224, -5.886, "LINEAR", 120, false, 0)
  FIELD_SET()
  NpcInvisible(FOR_ALL)
  Field_CancelInvisibleMob(FOR_ALL, INVISIBLE_KEY_EVENT, 0, true, false)
  EVENT_START()
  CUT("1.0")
  Fade_In(0, FADE_TIME)
  WaitFrame(90)
  CUT("2.0")
  SetEnv_All("c2.0", 0)
  SetCamera(15.837, 0.747, -4.668, 0, 60, "LINEAR", 0, false, 0)
  SetCameraTarget(20.657, 0.778, -10.117, "LINEAR", 0, false, 0)
  SetCamera(15.964, 0.747, -4.53, 0, 60, "LINEAR", 75, false, 0)
  SetCameraTarget(20.808, 0.778, -9.979, "LINEAR", 75, false, 0)
  WaitFrame(75)
  CUT("3.0")
  SetEnv_All("c3.0", 0)
  SetCamera(6.912, 0.8, -6.611, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(6.632, 0.8, -5.818, "LINEAR", 0, false, 0)
  PlayMotion("AEGIOMON_01", "e102", 0, false, 0)
  PlayMotion("AEGIOMON_01", "fn01_01", 12, true, 80)
  SetFace("AEGIOMON_01", "F04", 0, 1, 0, 0)
  BlendFace("AEGIOMON_01", -34, -77, 33, true, "SCURVE", 0, 0)
  BlendFace("AEGIOMON_01", -45, 0, 0, true, "SCURVE", 40, 80)
  MessageTalk("m300_030_010")
  MessageClose()
  WaitFrame(10)
  SetFace("AEGIOMON_01", "F06", 0, 1, FACE_BLENDTIME, 0)
  MessageTalk("m300_030_020")
  MessageClose()
  WaitFrame(15)
  MovePosition("AEGIOMON_01", 5.356, -0.22, -10.58, true, 2, 0)
  MoveRotation("AEGIOMON_01", 0, 195, 0, "LINEAR", 2, true, 0)
  WaitFrame(16)
  CUT("4.0")
  SetEnv_All("c4.0", 0)
  SetCamera(5.746, 9.559, -13.222, 0, 40, "LINEAR", 0, false, 0)
  SetCameraTarget(2.303, 6.802, -19.959, "LINEAR", 0, false, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", 8.5, 0, 0, true, "SCURVE", 0, 0)
  BlendEye("HEROINE_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HEROINE_01", 8, 4, 0, true, "SCURVE", 0, 0)
  WaitFrame(75)
  CUT("5.0")
  SetEnv_All("c5.0", 0)
  SetCamera(5.81, 1.19, -4.297, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(5.03, 1.16, -10.896, "LINEAR", 0, false, 0)
  SetPosition("AEGIOMON_01", 5.05, -0.03, -10.836, "LINEAR", 0, 0)
  SetRotation("AEGIOMON_01", 0, -158, 0, "LINEAR", 0, 0)
  PlayMotion("AEGIOMON_01", "e009", 0, false, 0)
  PlayMotion("AEGIOMON_01", "ft01_02", 10, false, 52)
  WaitFrame(52)
  SetPosition("AEGIOMON_01", 5.05, -0.03, -10.836, "LINEAR", 0, 0)
  SetRotation("AEGIOMON_01", 0, -68, 0, "LINEAR", 45, 0)
  PlayMotion("AEGIOMON_01", "ft01_02", 4, false, 0)
  PlayMotion("AEGIOMON_01", "fn01_01", 4, true, 45)
  BlendFace("AEGIOMON_01", 0, 100, 0, true, "SCURVE", 20, 0)
  WaitFrame(40)
  PlayMotionBlend("AEGIOMON_01", "blend02", 0, false, 0)
  MessageTalk("m300_030_030")
  MessageClose()
  WaitFrame(10)
  PlayMotion("HEROINE_01", "e502", 4, true, 0)
  CUT("6.0")
  SetEnv_All("c6.0", 20)
  SetCamera(5.92, 1.096, -6.573, 0, 30, "LINEAR", 0, false, 20)
  SetCameraTarget(5.326, 1.096, -5.659, "LINEAR", 0, false, 20)
  Event_StopBGM(3, 0)
  ModelVisible("HERO_01", false, 0, 20)
  SetFace("HEROINE_01", "E07_M16", 0, 1, 0, 0)
  WaitFrame(25)
  SetFace("HEROINE_01", "E07_M16", 2, 1, 6, 0)
  MessageTalk("m300_030_040")
  MessageClose()
  WaitFrame(10)
  CUT("7.0")
  SetEnv_All("c7.0", 0)
  SetCamera(5.633, 0.748, -9.026, 0, 50, "LINEAR", 0, false, 0)
  SetCameraTarget(5.1, 0.884, -9.667, "LINEAR", 0, false, 0)
  SetPosition("AEGIOMON_01", 5.05, -0.03, -9.816, "LINEAR", 0, 0)
  SetRotation("AEGIOMON_01", 0, 5, 0, "LINEAR", 0, 0)
  SetFace("AEGIOMON_01", "E16_M03", 0, 1, FACE_BLENDTIME, 0)
  BlendEye("AEGIOMON_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("AEGIOMON_01", -10, 0, 0, true, "SCURVE", 0, 0)
  MessageTalk("m300_030_050")
  MessageClose()
  WaitFrame(10)
  MovePosition("AEGIOMON_01", 5.355, -0.03, -6.329, true, 3, 0)
  MoveRotation("AEGIOMON_01", 0, 5, 0, "LINEAR", 3, true, 0)
  WaitFrame(15)
  CUT("8.0")
  SetEnv_All("c8.0", 0)
  SetCamera(7.397, 0.565, -7.003, 0, 50, "LINEAR", 0, false, 0)
  SetCameraTarget(6.018, 0.99, -5.628, "LINEAR", 0, false, 0)
  CameraOffsetTurn(5, "LINEAR", false, true, 500, 0)
  SetPosition("HERO_01", 6.662, -0.256, -5.376, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 128, 0, "LINEAR", 0, 0)
  SetPosition("AEGIOMON_01", 6.774, -0.192, -8.506, "LINEAR", 0, 0)
  SetRotation("AEGIOMON_01", 0, -15, 0, "LINEAR", 0, 0)
  SetPosition("HEROINE_01", 5.742, -0.253, -5.341, "LINEAR", 0, 0)
  SetRotation("HEROINE_01", 0, -187, 0, "LINEAR", 0, 0)
  ModelVisible("HERO_01", true, 0, 0)
  MovePosition("AEGIOMON_01", 6.256, -0.192, -6.574, true, 2, 0)
  MoveRotation("AEGIOMON_01", 0, -15, 0, "LINEAR", 2, true, 0)
  PlayMotion("HERO_01", "e502", 0, true, 0)
  SetFace("HERO_01", "F12", 2, 1, 0, 0)
  SetFace("AEGIOMON_01", "F10", 0, 1, 0, 0)
  BlendEye("HEROINE_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HEROINE_01", 0, 0, 0, true, "SCURVE", 0, 0)
  BlendEye("AEGIOMON_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("AEGIOMON_01", -30, 0, 0, true, "SCURVE", 0, 0)
  BlendEye("HEROINE_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HEROINE_01", 0, 0, 0, true, "SCURVE", 0, 0)
  Event_PlayBGM(704, 1, 0)
  WaitFrame(40)
  SetRotation("AEGIOMON_01", 0, 90, 0, "LINEAR", 45, 30)
  PlayMotion("AEGIOMON_01", "ft01_02", 12, false, 30)
  PlayMotion("AEGIOMON_01", "fn01_01", 4, true, 75)
  SetFace("AEGIOMON_01", "F10", 0, 1, FACE_BLENDTIME, 0)
  MessageTalk("m300_030_060", false)
  MessageClose()
  WaitFrame(10)
  MessageTalk("m300_030_070", false)
  MessageClose()
  WaitFrame(10)
  CUT("9.0")
  SetEnv_All("c9.0", 0)
  SetCamera(7.39, 0.53, -6.185, 0, 40, "LINEAR", 0, false, 0)
  SetCameraTarget(6.741, 0.727, -6.207, "LINEAR", 0, false, 0)
  SetPosition("AEGIOMON_01", 6.699, -0.27, -6.23, "LINEAR", 0, 0)
  SetRotation("AEGIOMON_01", 0, 55, 0, "LINEAR", 0, 0)
  PlayMotion("HERO_01", "fd01_02", 0, true, 0)
  SetFace("HERO_01", "F01", 2, 1, 0, 0)
  PlayMotion("AEGIOMON_01", "e019", 0, false, 0)
  PlayMotion("AEGIOMON_01", "fn01_01", 2, true, 130)
  SetFace("AEGIOMON_01", "E10_M04", 2, 1, 0, 0)
  SetFace("AEGIOMON_01", "E10_M04", 0, 1, 0, 80)
  PlayMotion("HEROINE_01", "fd01_02", 0, true, 0)
  SetFace("HEROINE_01", "F01", 0, 1, 0, 0)
  MessageTalk("m300_030_080", false)
  MessageClose()
  WaitFrame(10)
  MessageTalk("m300_030_090")
  MessageClose()
  WaitFrame(10)
  CUT("10.0")
  PlayMotion("AEGIOMON_01", "e516", 6, false, 0)
  PlayMotion("AEGIOMON_01", "fd01_01", 2, true, 60)
  SetFace("AEGIOMON_01", "F12", 1, 1, 8, 0)
  local slot_01 = Event_PlaySE(400007, 100, false, 0, 1.3)
  SetEnv_All("c10.0", 38)
  SetCamera(9, 4.47, -8.199, 0, 60, "LINEAR", 0, false, 38)
  SetCameraTarget(6.39, 0.066, -5.5, "LINEAR", 0, false, 38)
  SetCamera(9, 4.25, -8.2, 0, 60, "LINEAR", 150, false, 38)
  SetCameraTarget(6.39, -0.154, -5.5, "LINEAR", 150, false, 38)
  SetPosition("HERO_01", 6.712, -0.255, -5.286, "LINEAR", 0, 38)
  SetRotation("HERO_01", 0, -144.5, 0, "LINEAR", 0, 38)
  SetPosition("AEGIOMON_01", 6.929, -0.196, -6.51, "LINEAR", 0, 38)
  SetRotation("AEGIOMON_01", 0, 105, 0, "LINEAR", 0, 38)
  SetPosition("HEROINE_01", 6.012, -0.256, -4.901, "LINEAR", 0, 38)
  SetRotation("HEROINE_01", 0, -110, 0, "LINEAR", 0, 38)
  PlayMotion("HERO_01", "fd01_02", 0, true, 0)
  SetFace("HERO_01", "F01", 2, 1, 0, 0)
  PlayMotion("HEROINE_01", "fd01_02", 0, true, 0)
  SetFace("HEROINE_01", "F01", 0, 1, 0, 0)
  MessageTalkAuto("m300_030_100", -1, true)
  MESSAGE_WAIT()
  WaitFrame(60)
  Event_StopBGM(2, 0)
  Fade_OutNoLoadingWithWait(FADE_WHITE, 70)
  WaitFrame(60)
  Vista.SetKeepBGM()
  Vista.SetKeepBGMWithMapChange()
  if Debug.IsEventView() then
    Event_StopAllSE(0, 0)
  end
  EVENT_END(1)
end

function CUT(cut_no)
  CUT_START(cut_no)
end

function main()
  m300_030()
end

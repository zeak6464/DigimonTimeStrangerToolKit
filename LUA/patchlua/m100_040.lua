require("include")

function m100_040()
  EVENT_BEGIN()
  Talk.Load("m100")
  SetEventCutNo(10)
  if Debug.IsEventView() then
    SetTimeZone("Morning")
    SetTimeAxis("A2020_dbef_100")
    LoadMap("d1001")
    LoadObject("d10evobject00_01", "d10evobject00")
    LoadEffectScript("eff_01", "ef_f_mov_120_ga")
    PlayEffect("eff_01", false, 0)
  end
  LoadModel("HERO_01", "Player")
  LoadModel("AEGIOMON_B_01", "char_AEGIOMON_PLAIN_CLOTHES")
  LoadModel("DIGI_MINERVAMON_01", "char_MINERVAMON")
  LoadModel("npc015aa010101_02", "char_PUBLICSAFETY_MOB_B")
  LoadModel("npc015aa010101_01", "char_PUBLICSAFETY_MOB_B")
  LoadModel("SUMERAGI_01", "char_SUMERAGI")
  LoadModel("npc016aa010101_01", "char_PUBLICSAFETY_MOB_C")
  LoadSceneViewerResource("c1.0", "d1001f_ca")
  LoadSceneViewerResource("c2.0", "d1001f_ca")
  LoadSceneViewerResource("c3.0", "d1001f_ca")
  LoadSceneViewerResource("c3.0_A1", "d1001f_ca")
  LoadSceneViewerResource("c3.0_B1", "d1001f_ca")
  LoadSceneViewerResource("c4.0", "d1001f_ca")
  LoadSceneViewerResource("c5.0", "d1001f_ca")
  LoadSceneViewerResource("c5.0_A1", "d1001f_ca")
  LoadSceneViewerResource("c5.0_B1", "d1001f_ca")
  LoadSceneViewerResource("c6.0", "d1001f_ca")
  LoadEnvironmentFile("c1.0", "es_m100_040_c1.0")
  LoadEnvironmentFile("c2.0", "es_m100_040_c2.0")
  LoadEnvironmentFile("c3.0", "es_m100_040_c3.0")
  LoadEnvironmentFile("c3.0_A1", "es_m100_040_c3.0_A1")
  LoadEnvironmentFile("c3.0_B1", "es_m100_040_c3.0_B1")
  LoadEnvironmentFile("c4.0", "es_m100_040_c4.0")
  LoadEnvironmentFile("c5.0", "es_m100_040_c5.0")
  LoadEnvironmentFile("c5.0_A1", "es_m100_040_c5.0_A1")
  LoadEnvironmentFile("c5.0_B1", "es_m100_040_c5.0_B1")
  LoadEnvironmentFile("c6.0", "es_m100_040_c6.0")
  WaitVistaLoad()
  SetPosition("HERO_01", -51.849, -1.8, 7.63, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 150, 0, "LINEAR", 0, 0)
  SetScale("HERO_01", 1, 1, 1)
  SetPosition("AEGIOMON_B_01", -50.99, -1.8, 8.495, "LINEAR", 0, 0)
  SetRotation("AEGIOMON_B_01", 0, 155, 0, "LINEAR", 0, 0)
  SetScale("AEGIOMON_B_01", 1, 1, 1)
  SetPosition("DIGI_MINERVAMON_01", -52.61, -1.8, 7.357, "LINEAR", 0, 0)
  SetRotation("DIGI_MINERVAMON_01", 0, 150, 0, "LINEAR", 0, 0)
  SetScale("DIGI_MINERVAMON_01", 0.73, 0.73, 0.73)
  SetPosition("d10evobject00_01", -47.684, -1.8, 0.799, "LINEAR", 0, 0)
  SetRotation("d10evobject00_01", 0, -21, 0, "LINEAR", 0, 0)
  SetScale("d10evobject00_01", 1, 1, 1)
  SetPosition("npc015aa010101_02", -47.559, -1.801, 3.232, "LINEAR", 0, 0)
  SetRotation("npc015aa010101_02", -2, -47.355, 0, "LINEAR", 0, 0)
  SetScale("npc015aa010101_02", 1.077, 1.077, 1.077)
  SetPosition("npc015aa010101_01", -52.43, -1.8, 3.83, "LINEAR", 0, 0)
  SetRotation("npc015aa010101_01", 0, 21.5, 0, "LINEAR", 0, 0)
  SetScale("npc015aa010101_01", 1.218, 1.218, 1.218)
  SetPosition("SUMERAGI_01", -48.764, -1.801, 2.296, "LINEAR", 0, 0)
  SetRotation("SUMERAGI_01", 0, 9.038, 0, "LINEAR", 0, 0)
  SetScale("SUMERAGI_01", 1, 1, 1)
  SetPosition("eff_01", -42.49, 1.56, -20.804, "LINEAR", 0, 0)
  SetRotation("eff_01", 0, 0, 0, "LINEAR", 0, 0)
  SetScale("eff_01", 1, 1, 1)
  SetPosition("npc016aa010101_01", -46.707, -1.801, 4.455, "LINEAR", 0, 0)
  SetRotation("npc016aa010101_01", -2, 194.424, 0, "LINEAR", 0, 0)
  SetScale("npc016aa010101_01", 1, 1, 1)
  PlayMotion("HERO_01", "fn01_01", 0, true, 0)
  SetStartFrame("HERO_01", "fn01_01", 0, 0)
  SetFace("HERO_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  PlayMotion("AEGIOMON_B_01", "fn01_01", 0, true, 0)
  SetFace("AEGIOMON_B_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  SetPosition("DIGI_MINERVAMON_01", -52.51, -1.8, 7.184, "LINEAR", 0, 0)
  SetRotation("DIGI_MINERVAMON_01", 0, 150, 0, "LINEAR", 0, 0)
  SetScale("DIGI_MINERVAMON_01", 0.73, 0.73, 0.73)
  PlayMotion("d10evobject00_01", "", 0, false, 0)
  PlayMotion("npc015aa010101_02", "e501", 0, true, 0)
  SetStartFrame("npc015aa010101_02", "e501", 30, 0)
  SetFace("npc015aa010101_02", "F01", 0, 1, FACE_BLENDTIME, 0)
  PlayMotion("npc015aa010101_01", "fd01_01", 0, true, 0)
  SetFace("npc015aa010101_01", "F01", 0, 1, 0, 0)
  PlayMotion("SUMERAGI_01", "e015", 4, true, 0)
  SetFace("SUMERAGI_01", "F03", 0, 2, FACE_BLENDTIME, 0)
  PlayMotion("npc016aa010101_01", "fd01_01", 0, true, 0)
  SetFace("npc016aa010101_01", "F01", 0, 2, FACE_BLENDTIME, 0)
  MovePosition("HERO_01", -50.099, -1.8, 4.599, true, 1, 0)
  MoveRotation("HERO_01", 0, 150, 0, "LINEAR", 1, true, 0)
  MovePosition("AEGIOMON_B_01", -49.3, -1.8, 4.87, true, 1.1, 0)
  MoveRotation("AEGIOMON_B_01", 0, 155, 0, "LINEAR", 1.1, true, 0)
  MovePosition("DIGI_MINERVAMON_01", -50.61, -1.8, 3.893, true, 1, 0)
  MoveRotation("DIGI_MINERVAMON_01", 0, 150, 0, "LINEAR", 1, true, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", 0, 0, 0, true, "SCURVE", 0, 0)
  BlendEye("AEGIOMON_B_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("AEGIOMON_B_01", 0, 0, 0, true, "SCURVE", 0, 0)
  BlendFaceDigi("DIGI_MINERVAMON_01", 0, 0, 0, "SCURVE", 0, 0)
  BlendEye("npc015aa010101_02", 0, 0, "SCURVE", 0, 0)
  BlendFace("npc015aa010101_02", 0, 0, 0, true, "SCURVE", 0, 0)
  BlendEye("npc015aa010101_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("npc015aa010101_01", 0, 0, 0, true, "SCURVE", 0, 0)
  BlendEye("SUMERAGI_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("SUMERAGI_01", 0, 0, 0, true, "SCURVE", 0, 0)
  BlendEye("npc016aa010101_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("npc016aa010101_01", 0, 0, 0, true, "SCURVE", 0, 0)
  SetCamera(-51.176, -1.188, 7.461, 0, 40, "LINEAR", 0, false, 0)
  SetCameraTarget(-48.881, -0.97, 2.491, "LINEAR", 0, false, 0)
  SetEnv_All("c1.0", 0)
  Event_PlayBGM(405, 0, 0)
  FIELD_SET()
  EVENT_START()
  CUT("1.0")
  SetCamera(-51.621, -1.225, 8.425, 0, 40, "LINEAR", 90, false, 0)
  SetCameraTarget(-48.881, -0.97, 2.491, "LINEAR", 90, false, 0)
  Fade_In(0, FADE_TIME)
  WaitFrame(90)
  CUT("2.0")
  SetEnv_All("c2.0", 0)
  SetCamera(-49.879, 0.069, 5.767, 0, 40, "LINEAR", 0, false, 0)
  SetCameraTarget(-48.764, -0.931, 2.296, "LINEAR", 0, false, 0)
  SetPosition("HERO_01", -50.25, -1.8, 4.926, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 150, 0, "LINEAR", 0, 0)
  SetPosition("AEGIOMON_B_01", -49.589, -1.8, 4.868, "LINEAR", 0, 0)
  SetRotation("AEGIOMON_B_01", 0, 138, 0, "LINEAR", 0, 0)
  SetPosition("DIGI_MINERVAMON_01", -50.976, -1.8, 3.843, "LINEAR", 0, 0)
  SetRotation("DIGI_MINERVAMON_01", 0, 130, 0, "LINEAR", 0, 0)
  MovePosition("HERO_01", -49.6, -1.8, 3.8, true, 1.2, 0)
  MoveRotation("HERO_01", 0, 150, 0, "LINEAR", 1.2, true, 0)
  MovePosition("AEGIOMON_B_01", -48.92, -1.8, 4.125, true, 1, 0)
  MoveRotation("AEGIOMON_B_01", 0, 138, 0, "LINEAR", 1, true, 0)
  MovePosition("DIGI_MINERVAMON_01", -50.21, -1.8, 3.2, true, 0.8, 0)
  MoveRotation("DIGI_MINERVAMON_01", 0, 130, 0, "LINEAR", 0.8, true, 0)
  PlayMotion("MINERVAMON_01", "e012", 4, true, 44)
  SetFace("SUMERAGI_01", "E03_M01", 0, 2, 6, 20)
  EndMotion("SUMERAGI_01", 0)
  MessageTalk("m100_040_010")
  MessageClose()
  WaitFrame(10)
  MOVE_WAIT("HERO_01")
  CUT("3.0")
  correct = false
  while not Vista.IsSkipping() and not correct do
    SetEnv_All("c3.0", 0)
    SetCamera(-48.708, -0.294, 2.948, 0, 30, "LINEAR", 0, false, 0)
    SetCameraTarget(-49.558, -0.327, 3.793, "LINEAR", 0, false, 0)
    PlayMotion("HERO_01", "fn01_01", 0, true, 0)
    PlayMotion("SUMERAGI_01", "fn01_01", 0, true, 0)
    SetFace("SUMERAGI_01", "E01", 0, 1, 0, 0)
    MessageTalkSel(2, "m100_040_020")
    result = Talk.GetResultSelectedNum()
    if result == RESULT_TALK00 then
      PlayMotion("HERO_01", "e002", 4, true, 0)
      SetFace("HERO_01", "F01", 1, 0, FACE_BLENDTIME, 0)
      SetFace("HERO_01", "F01", 1, 1, FACE_BLENDTIME, 60)
      WaitFrame(65)
      CUT("3.0_A1")
      SetEnv_All("c3.0_A1", 0)
      SetCamera(-49.1, -0.286, 3.254, 0, 30, "LINEAR", 0, false, 0)
      SetCameraTarget(-48.764, -0.241, 2.465, "LINEAR", 0, false, 0)
      PlayMotion("SUMERAGI_01", "e007", 4, true, 0)
      SetFace("SUMERAGI_01", "E03_M12", 0, 1, 0, 0)
      BlendEye("SUMERAGI_01", 10, -10, "SCURVE", 6, 0)
      BlendFace("SUMERAGI_01", 0, -22, 0, true, "SCURVE", 0, 0)
      BlendFace("SUMERAGI_01", -28, -32, 0, true, "SCURVE", 24, 0)
      MessageTalk("m100_040_030")
      MessageClose()
      WaitFrame(10)
      SetFace("SUMERAGI_01", "E03_M01", 0, 1, FACE_BLENDTIME, 0)
      BlendEye("SUMERAGI_01", 0, -12, "SCURVE", 8, 0)
      BlendFace("SUMERAGI_01", 0, -40, 26, true, "SCURVE", 20, 0)
      PlayMotionBlend("SUMERAGI_01", "blend02", 0, false, 10)
      MessageTalk("m100_040_040")
      MessageClose()
      WaitFrame(10)
      correct = true
    elseif result == RESULT_TALK01 then
      PlayMotion("HERO_01", "e002", 4, true, 0)
      SetFace("HERO_01", "F01", 1, 0, FACE_BLENDTIME, 0)
      SetFace("HERO_01", "F01", 1, 1, FACE_BLENDTIME, 30)
      WaitFrame(60)
      CUT("3.0_B1")
      SetEnv_All("c3.0_B1", 0)
      SetCamera(-49.271, -0.432, 3.484, 0, 30, "LINEAR", 0, false, 0)
      SetCameraTarget(-48.908, -0.3, 2.389, "LINEAR", 0, false, 0)
      PlayMotion("SUMERAGI_01", "e006", 4, true, 0)
      SetFace("SUMERAGI_01", "F05", 0, 1, 6, 0)
      SetFace("SUMERAGI_01", "E03_M01", 0, 1, 6, 13)
      BlendEye("SUMERAGI_01", 15, 0, "SCURVE", 4, 0)
      BlendFace("SUMERAGI_01", 0, -40, 0, true, "SCURVE", 10, 0)
      WaitFrame(20)
      MessageTalk("m100_040_050")
      MessageClose()
      WaitFrame(10)
    end
  end
  CUT("4.0")
  SetEnv_All("c4.0", 0)
  SetCamera(-45.656, 1.9, -13.253, 0, 40, "LINEAR", 0, false, 0)
  SetCameraTarget(-42.49, 1.9, -20.804, "LINEAR", 0, false, 0)
  SetCamera(-44.727, 1.9, -15.469, 0, 40, "LINEAR", 600, false, 0)
  SetCameraTarget(-42.49, 1.9, -20.804, "LINEAR", 600, false, 0)
  WaitFrame(30)
  MessageTalk("m100_040_060")
  MessageClose()
  WaitFrame(30)
  CUT("5.0")
  correct = false
  while not Vista.IsSkipping() and not correct do
    SetEnv_All("c5.0", 0)
    SetCamera(-48.586, -0.564, 2.863, 0, 30, "LINEAR", 0, false, 0)
    SetCameraTarget(-49.551, -0.393, 3.802, "LINEAR", 0, false, 0)
    ModelVisible("DIGI_MINERVAMON_01", false, 0, 0)
    PlayMotion("HERO_01", "fn01_01", 0, true, 0)
    SetFace("HERO_01", "F01", 0, 1, FACE_BLENDTIME, 0)
    PlayMotion("SUMERAGI_01", "fn01_01", 0, true, 0)
    BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
    BlendFace("HERO_01", 0, 0, 0, false, "SCURVE", 0, 0)
    MessageTalkSel(2, "m100_040_070")
    result = Talk.GetResultSelectedNum()
    if result == RESULT_TALK00 then
      PlayMotion("HERO_01", "e004", 4, true, 0)
      SetFace("HERO_01", "E15_M02", 1, 0, FACE_BLENDTIME, 0)
      SetFace("HERO_01", "E15_M02", 1, 1, FACE_BLENDTIME, 40)
      WaitFrame(45)
      CUT("5.0_A1")
      SetEnv_All("c5.0_A1", 0)
      SetCamera(-49.117, -0.306, 3.15, 0, 30, "LINEAR", 0, false, 0)
      SetCameraTarget(-48.77, -0.22, 2.294, "LINEAR", 0, false, 0)
      PlayMotion("SUMERAGI_01", "e005", 0, true, 0)
      SetFace("SUMERAGI_01", "E03_M01", 0, 1, 0, 0)
      SetFace("SUMERAGI_01", "F04", 0, 1, 8, 70)
      BlendEye("SUMERAGI_01", 10, 0, "SCURVE", 0, 0)
      BlendFace("SUMERAGI_01", 0, 0, 0, true, "SCURVE", 0, 0)
      BlendEye("SUMERAGI_01", 0, -20, "SCURVE", 20, 70)
      BlendFace("SUMERAGI_01", -25, -40, 0, true, "SCURVE", 20, 70)
      MessageTalk("m100_040_080")
      MessageClose()
      WaitFrame(10)
      correct = true
    elseif result == RESULT_TALK01 then
      PlayMotion("HERO_01", "e012", 4, false, 0)
      PlayMotion("HERO_01", "fn01_01", 4, true, 206)
      SetFace("HERO_01", "F11", 1, 0, FACE_BLENDTIME, 0)
      SetFace("HERO_01", "F11", 1, 1, FACE_BLENDTIME, 40)
      WaitFrame(45)
      CUT("5.0_B1")
      SetEnv_All("c5.0_B1", 0)
      SetCamera(-49.106, -0.484, 3.481, 0, 30, "LINEAR", 0, false, 0)
      SetCameraTarget(-48.793, -0.28, 2.38, "LINEAR", 0, false, 0)
      PlayMotion("SUMERAGI_01", "fn01_01", 0, true, 0)
      PlayMotionBlend("SUMERAGI_01", "blend02", 0, false, 0)
      SetFace("SUMERAGI_01", "E03_M01", 2, 1, FACE_BLENDTIME, 0)
      SetFace("SUMERAGI_01", "E03_M01", 1, 1, FACE_BLENDTIME, 40)
      SetBlink("SUMERAGI_01", 0, 0.5, 40)
      BlendEye("SUMERAGI_01", 0, 0, "SCURVE", 0, 0)
      BlendFace("SUMERAGI_01", 0, -40, 0, true, "SCURVE", 0, 0)
      MessageTalk("m100_040_090")
      MessageClose()
      WaitFrame(10)
    end
  end
  CUT("6.0")
  SetEnv_All("c6.0", 0)
  SetCamera(-49.809, -0.388, 4.758, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(-49.94, -0.3, 3.616, "LINEAR", 0, false, 0)
  SetPosition("HERO_01", -49.96, -1.8, 3.566, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 140, 0, "LINEAR", 0, 0)
  SetPosition("DIGI_MINERVAMON_01", -50.631, -1.8, 2.532, "LINEAR", 0, 0)
  SetRotation("DIGI_MINERVAMON_01", 0, 120, 0, "LINEAR", 0, 0)
  PlayMotion("HERO_01", "fn01_01", 0, true, 0)
  PlayMotionBlend("HERO_01", "blend01", 0, false, 0)
  SetFace("HERO_01", "F01", 0, 1, 0, 0)
  PlayMotion("SUMERAGI_01", "e005", 0, true, 0)
  SetStartFrame("SUMERAGI_01", "e005", 24, 0)
  SetFace("SUMERAGI_01", "F01", 0, 1, 0, 0)
  BlendEye("SUMERAGI_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("SUMERAGI_01", 0, 0, 0, true, "SCURVE", 0, 0)
  ModelVisible("DIGI_MINERVAMON_01", true, 0, 0)
  Event_StopBGM(2, 0)
  WaitFrame(30)
  if Debug.IsEventView() then
    EVENT_END()
  else
    EVENT_END_SEAMLESS(60)
  end
end

function CUT(cut_no)
  CUT_START(cut_no)
end

function main()
  m100_040()
end

require("include")

function m160_040()
  Fade_Out(0, 0)
  EVENT_BEGIN()
  Talk.Load("m160")
  SetEventCutNo(7)
  if Debug.IsEventView() then
    SetTimeZone("Noon")
    SetTimeAxis("A2020_dbef_160")
    LoadMap("d0608")
  end
  LoadModel("chr315_01", "char_SERAPHIMON")
  LoadModel("chr421_01", "char_OPHANIMON")
  LoadModel("chr170_01", "char_JUNOMON")
  LoadModel("HERO_01", "Player")
  LoadModel("AEGIOMON_01", "char_AEGIOMON")
  LoadModel("HEROINE_01", "char_HEROINE")
  LoadModel("DIGI_MINERVAMON_01", "char_MINERVAMON")
  LoadSceneViewerResource("c1.0", "d0608f_sa")
  LoadSceneViewerResource("c2.0", "d0608f_sa")
  LoadSceneViewerResource("c3.0", "d0608f_sa")
  LoadSceneViewerResource("c4.0", "d0608f_sa")
  LoadSceneViewerResource("c5.0", "d0608f_sa")
  LoadSceneViewerResource("c6.0", "d0608f_sa")
  LoadSceneViewerResource("c7.0", "d0608f_sa")
  LoadEnvironmentFile("c1.0", "es_m160_040_c1.0")
  LoadEnvironmentFile("c2.0", "es_m160_040_c2.0")
  LoadEnvironmentFile("c3.0", "es_m160_040_c3.0")
  LoadEnvironmentFile("c4.0", "es_m160_040_c4.0")
  LoadEnvironmentFile("c5.0", "es_m160_040_c5.0")
  LoadEnvironmentFile("c6.0", "es_m160_040_c6.0")
  LoadEnvironmentFile("c7.0", "es_m160_040_c7.0")
  WaitVistaLoad()
  Event_PlayBGM(917, 0.3, 0)
  SetPosition("chr170_01", 0, 6.24, 1.5, "LINEAR", 0, 0)
  SetRotation("chr170_01", 0, 0, 0, "LINEAR", 0, 0)
  SetPosition("HERO_01", 1.044, 2.52, 11.61, "LINEAR", 0, 0)
  SetRotation("HERO_01", 0, 184, 0, "LINEAR", 0, 0)
  SetPosition("AEGIOMON_01", 0.39, 2.52, 11.604, "LINEAR", 0, 0)
  SetRotation("AEGIOMON_01", 0, 180, 0, "LINEAR", 0, 0)
  SetPosition("HEROINE_01", -0.322, 2.52, 11.604, "LINEAR", 0, 0)
  SetRotation("HEROINE_01", 0, 180, 0, "LINEAR", 0, 0)
  SetPosition("chr315_01", 8.2, 3, 2.657, "LINEAR", 0, 0)
  SetRotation("chr315_01", 0, -10, 0, "LINEAR", 0, 0)
  SetPosition("chr421_01", -8, 3.5, 2.657, "LINEAR", 0, 0)
  SetRotation("chr421_01", 0, 10, 0, "LINEAR", 0, 0)
  SetPosition("DIGI_MINERVAMON_01", -1.091, 2.52, 11.279, "LINEAR", 0, 0)
  SetRotation("DIGI_MINERVAMON_01", 0, 162, 0, "LINEAR", 0, 0)
  BlendFaceDigi("chr315_01", 0, 0, 0, "SCURVE", 0, 0)
  BlendFaceDigi("chr421_01", 0, 0, 0, "SCURVE", 0, 0)
  BlendFaceDigi("chr170_01", 0, 0, 0, "SCURVE", 0, 0)
  BlendEye("HERO_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HERO_01", -61, 23, 0, false, "SCURVE", 0, 0)
  BlendEye("AEGIOMON_01", -9, 0, "SCURVE", 0, 0)
  BlendFace("AEGIOMON_01", -53, 24, 0, true, "SCURVE", 0, 0)
  BlendEye("HEROINE_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HEROINE_01", -42, 3, 0, true, "SCURVE", 0, 0)
  BlendFaceDigi("DIGI_MINERVAMON_01", -4, 0, 0, "SCURVE", 0, 0)
  SetEyeUVOffsetDigi("chr170_01", 0, 0.007, "SCURVE", 0, 0)
  BlendFaceDigi("chr170_01", 0, 0, 0, "SCURVE", 0, 0)
  PlayMotion("chr170_01", "e100", 0, true, 0)
  ChangeDigimonFace("chr170_01", EYE_EXPRESSION_NORMAL, 0)
  SetMouth("chr170_01", 1, 0, 0)
  PlayMotion("HERO_01", "e013_01", 0, true, 0)
  SetFace("HERO_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  PlayMotion("AEGIOMON_01", "fn01_01", 0, true, 0)
  SetFace("AEGIOMON_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  PlayMotion("HEROINE_01", "fn01_01", 0, true, 0)
  SetFace("HEROINE_01", "F01", 0, 1, FACE_BLENDTIME, 0)
  PlayMotion("DIGI_MINERVAMON_01", "fn01_01", 0, true, 0)
  ChangeDigimonFace("DIGI_MINERVAMON_01", EYE_EXPRESSION_NORMAL, 0)
  SetMouth("DIGI_MINERVAMON_01", 1, 0, 0)
  PlayMotion("chr315_01", "bn01", 0, false, 0)
  ChangeDigimonFace("chr315_01", EYE_EXPRESSION_NORMAL, 0)
  SetMouth("chr315_01", 1, 0, 0)
  PlayMotion("chr421_01", "bn01", 0, false, 0)
  ChangeDigimonFace("chr421_01", EYE_EXPRESSION_NORMAL, 0)
  SetMouth("chr421_01", 1, 0, 0)
  SetCamera(0.44, 7.607, 3.546, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(0.024, 7.556, 0.855, "LINEAR", 0, false, 0)
  SetCamera(0.44, 7.847, 3.546, 0, 30, "LINEAR", 300, true, 0)
  SetCameraTarget(0.024, 7.796, 0.855, "LINEAR", 300, true, 0)
  SetEnv_All("c1.0", 0)
  FIELD_SET()
  EVENT_START()
  NpcInvisible(FOR_ALL)
  CUT("1.0")
  Fade_In(0, FADE_TIME)
  WaitFrame(FADE_TIME)
  WaitFrame(30)
  local slot_01 = Event_PlaySE(404037, 100, false, 0.3, 0)
  Story.OpenCharacterEntry("char_JUNOMON")
  WaitFrame(70)
  Story.IsClosedCharacterEntry()
  WaitFrame(85)
  PlayMotionBlend("chr170_01", "blend05", 5, false, 0)
  PlayMotionBlend("chr170_01", "blend01", 10, false, 120)
  MessageTalk("m160_040_010")
  MessageClose()
  WaitFrame(10)
  ResetBlend("chr170_01", "blend05", 5)
  CUT("2.0")
  SetEnv_All("c2.0", 0)
  SetCamera(3.572, 2.221, 17.281, 0, 40, "LINEAR", 0, false, 0)
  SetCameraTarget(-2.532, 7.349, 0.567, "LINEAR", 0, false, 0)
  CameraOffsetTurn(2, "LINEAR", true, true, 450, 0)
  PlayMotionBlend("chr170_01", "blend05", 5, false, 0)
  MessageTalk("m160_040_020")
  MessageClose()
  WaitFrame(10)
  PlayMotionBlend("chr170_01", "blend05", 5, false, 0)
  PlayMotionBlend("chr170_01", "blend01", 10, false, 110)
  MessageTalk("m160_040_030")
  MessageClose()
  WaitFrame(10)
  ResetBlend("chr170_01", "blend05", 5)
  CUT("3.0")
  SetEnv_All("c3.0", 0)
  SetCamera(0.737, 3.687, 10.891, 0, 29, "LINEAR", 0, false, 0)
  SetCameraTarget(0.401, 3.571, 11.543, "LINEAR", 0, false, 0)
  BlendEye("AEGIOMON_01", 0, 0, "SCURVE", 10, 0)
  BlendFace("AEGIOMON_01", -53, 0, 0, true, "SCURVE", 30, 0)
  PlayMotion("AEGIOMON_01", "e033", 3, true, 0)
  SetFace("AEGIOMON_01", "F11", 0, 1, FACE_BLENDTIME, 0)
  WaitFrame(10)
  MessageTalk("m160_040_040")
  MessageClose()
  WaitFrame(10)
  CUT("4.0")
  SetEnv_All("c4.0", 0)
  Vista.SetCharCamera("DIGI_MINERVAMON_01", "chr747_cam_B.S_Left", "LINEAR", 0, false, 0)
  PlayMotion("DIGI_MINERVAMON_01", "e002", 3, true, 0)
  SetFace("DIGI_MINERVAMON_01", "F02", 0, 1, FACE_BLENDTIME, 0)
  WaitFrame(10)
  MessageTalk("m160_040_050")
  MessageClose()
  WaitFrame(10)
  CUT("5.0")
  SetEnv_All("c5.0", 0)
  SetCamera(0.941, 3.496, 11.262, 0, 50, "LINEAR", 0, false, 0)
  SetCameraTarget(-0.617, 3.724, 11.705, "LINEAR", 0, false, 0)
  BlendFaceDigi("DIGI_MINERVAMON_01", -4, -56, 0, "SCURVE", 30, 0)
  BlendEye("AEGIOMON_01", -20, 25, "SCURVE", 10, 10)
  BlendFace("AEGIOMON_01", -35, 66, -34, true, "SCURVE", 30, 10)
  SetFace("DIGI_MINERVAMON_01", "F02", 0, 1, FACE_BLENDTIME, 0)
  EndMotion("AEGIOMON_01", 0)
  WaitFrame(10)
  MessageTalk("m160_040_060")
  MessageClose()
  WaitFrame(10)
  PlayMotion("DIGI_MINERVAMON_01", "e013", 5, true, 0)
  BlendEye("HEROINE_01", 37, -21, "SCURVE", 10, 0)
  BlendFace("HEROINE_01", 63, -83, 0, true, "SCURVE", 30, 0)
  MessageTalk("m160_040_070")
  MessageClose()
  WaitFrame(10)
  CUT("6.0")
  SetEnv_All("c6.0", 0)
  SetCamera(0.487, 7.778, 2.462, 0, 30, "LINEAR", 0, false, 0)
  SetCameraTarget(0.004, 7.968, 1.083, "LINEAR", 0, false, 0)
  CameraOffsetMove(0.05, 0, 0, "LINEAR", true, true, 300, 0)
  WaitFrame(10)
  PlayMotionBlend("chr170_01", "blend05", 5, false, 0)
  PlayMotionBlend("chr170_01", "blend01", 10, false, 80)
  MessageTalk("m160_040_080")
  MessageClose()
  WaitFrame(10)
  PlayMotionBlend("chr170_01", "blend05", 5, false, 0)
  PlayMotionBlend("chr170_01", "blend01", 10, false, 120)
  MessageTalk("m160_040_090")
  MessageClose()
  ResetBlend("chr170_01", "blend05", 7)
  ResetBlend("chr170_01", "blend01", 7)
  WaitFrame(10)
  CUT("7.0")
  SetEnv_All("c7.0", 0)
  SetCamera(3.572, 2.221, 17.281, 0, 40, "LINEAR", 0, false, 0)
  SetCameraTarget(-2.532, 7.349, 0.567, "LINEAR", 0, false, 0)
  CameraOffsetTurn(1.5, "LINEAR", true, true, 600, 0)
  BlendEye("AEGIOMON_01", -9, 0, "SCURVE", 0, 0)
  BlendFace("AEGIOMON_01", -53, 24, 0, true, "SCURVE", 0, 0)
  BlendEye("HEROINE_01", 0, 0, "SCURVE", 0, 0)
  BlendFace("HEROINE_01", -42, 3, 0, true, "SCURVE", 0, 0)
  BlendFaceDigi("DIGI_MINERVAMON_01", -4, 0, 0, "SCURVE", 0, 0)
  PlayMotionBlend("chr170_01", "blend05", 5, false, 0)
  WaitFrame(10)
  MessageTalk("m160_040_100")
  WaitFrame(10)
  PlayMotionBlend("chr170_01", "blend01", 5, false, 0)
  MessageTalk("m160_040_110")
  MessageClose()
  WaitFrame(10)
  PlayMotionBlend("chr170_01", "blend05", 5, false, 0)
  PlayMotionBlend("chr170_01", "blend01", 10, false, 120)
  MessageTalk("m160_040_120")
  MessageClose()
  WaitFrame(10)
  Fade_OutNoLoadingWithWait(FADE_BLACK, 60)
  ResetBlend("chr170_01", "blend05")
  Vista.SetKeepBGM()
  Vista.SetKeepBGMWithMapChange()
  EVENT_END()
end

function CUT(cut_no)
  CUT_START(cut_no)
end

function main()
  m160_040()
end

S080_060 = {
  ID = 60,
  STEP_001 = 1,
  STEP_005 = 5,
  STEP_010 = 10,
  STEP_015 = 15,
  STEP_255 = 255
}
local base = "s080_060_"
local text_file = "s080_060"
local tlk = Tlk:new(text_file, 1, true)

function S080_060:Event_000()
  Qst.Sub:Start(self.ID, self.STEP_001, true)
end

function S080_060:Event_010()
  if Qst.Sub:Check(self.ID, self.STEP_001, self.STEP_005) then
    HideMinimap(true)
    HideGuide(true)
    tlk:StartTalkAndCancelDigimonRide()
    local luna_index = GetIndex(NPC, "s080_060_002")
    Field.ObjectLoadMotion(NPC, luna_index, "bn01")
    Field.ObjectLoadMotion(NPC, luna_index, "e002")
    Field.ObjectLoadMotion(NPC, luna_index, "e004")
    Field.ObjectLoadMotion(NPC, luna_index, "e005")
    Field.ObjectLoadMotion(NPC, luna_index, "e006")
    Field.ObjectLoadMotion(NPC, luna_index, "e007")
    Field.ObjectLoadMotion(NPC, luna_index, "e008")
    Field.ObjectLoadMotion(NPC, luna_index, "br01")
    Field.ObjectLoadMotion(NPC, luna_index, "fe02")
    Field.ObjectLoadMotion(NPC, luna_index, "fq01")
    Field.ObjectLoadMotion(NPC, luna_index, "fq02")
    Field.ObjectLoadMotion(PLAYER, 1, "e002")
    Field.ObjectLoadMotion(PLAYER, 1, "e004")
    Field.ObjectLoadMotion(PLAYER, 1, "e004_01")
    Field.ObjectLoadMotion(PLAYER, 1, "e008")
    Field.ObjectLoadMotion(PLAYER, 1, "e010_01")
    Field.ObjectLoadMotion(PLAYER, 1, "e012")
    Field.ObjectLoadMotion(PLAYER, 1, "e013")
    Field.ObjectLoadMotion(PLAYER, 1, "e015")
    Field.ObjectLoadMotion(PLAYER, 1, "e018")
    Field.ObjectLoadMotion(PLAYER, 1, "e019")
    Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
    Cam.Inst:Set(7.72, 3.86, 51.51, -1.96, 2.98, 49.2, default, 0)
    Obj:new(PLAYER, ""):SetPos(4.67, 2.106, 48.57, true)
    Obj:new(PLAYER, ""):SetRotationY(130, 0)
    Field.ObjectLookAtTheObject(PLAYER, 1, NPC, luna_index, 0)
    FadeInWithWaitNotFlgCheck(FADE_BLACK, FADE_TIME)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, luna_index, "e002", 10, 10)
    tlk:Message(base .. "010")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, luna_index, "e004", 10, 10)
    tlk:Message(base .. "020")
    local result = tlk:Select(3, base .. "030")
    WaitFrame(15)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, luna_index, "e008", 10, 10)
    if result == RESULT_TALK00 then
      tlk:Message(base .. "040")
    end
    if result == RESULT_TALK01 then
      tlk:Message(base .. "050")
    end
    if result == RESULT_TALK02 then
      tlk:Message(base .. "060")
    end
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, luna_index, "e002", 10, 10)
    tlk:Message(base .. "070")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, luna_index, "e008", 10, 10)
    tlk:Message(base .. "080")
    tlk:Message(base .. "085")
    Field.ObjectResetAim(PLAYER, 1, 15)
    tlk:Message(base .. "090")
    tlk:Message(base .. "100")
    local correct = false
    while not correct do
      local result = tlk:Select(3, base .. "130")
      WaitFrame(15)
      if result == RESULT_TALK00 then
        correct = true
        tlk:Message(base .. "140")
        tlk:Message(base .. "150")
      end
      if result == RESULT_TALK01 then
        tlk:Message(base .. "160")
      end
      if result == RESULT_TALK02 then
        tlk:Message(base .. "170")
      end
    end
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, luna_index, "e008", 10, 10)
    tlk:Message(base .. "180")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, luna_index, "e002", 10, 10)
    tlk:Message(base .. "190")
    tlk:Message(base .. "200")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, luna_index, "e004", 10, 10)
    tlk:Message(base .. "210")
    tlk:EndTalk(true)
    Qst.Sub:Start(self.ID, 1, false)
    Flg.Set("FLAG_SUB_080_060_001")
    Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
    Field.ObjectResetAim(PLAYER, 1, 0)
    FieldObjectSync(FOR_ALL, false)
    FadeInWithWaitNotFlgCheck(FADE_BLACK, FADE_TIME)
    HideMinimap(false)
    HideGuide(false)
    Qst.Sub:Set(self.ID, self.STEP_005)
    Cam.Inst:Clear(30)
    Field_CancelInvisibleFollowerAllGuest(0, 15, false, false)
    Field_CancelInvisibleFollowerAllPartyMember(0, 15, false, false)
  end
end

function S080_060:Event_020()
  if Qst.Sub:Check(self.ID, self.STEP_005, self.STEP_010) then
    START_TALK_ACTION_AND_ZOOM("s080_060_001", true, true)
    tlk:StartTalkAndCancelDigimonRide()
    tlk:Message(base .. "220")
    tlk:Message(base .. "230")
    FadeOutWithWait(0, 15)
    Obj:new(NPC, "s080_060_001"):Invisible()
    FadeInWithWait(0, 15)
    Flg.Set("FLAG_SUB_080_060_009")
    tlk:EndTalk()
    END_TALK_ACTION_AND_ZOOM("s080_060_001", true, true)
  end
end

function S080_060:Event_030()
  if Qst.Sub:Check(self.ID, self.STEP_005, self.STEP_010) then
    START_TALK_ACTION_AND_ZOOM("s080_060_001", true, true)
    tlk:StartTalkAndCancelDigimonRide()
    tlk:Message(base .. "240")
    tlk:Message(base .. "250")
    FadeOutWithWait(0, 15)
    Obj:new(NPC, "s080_060_001"):Invisible()
    FadeInWithWait(0, 15)
    Flg.Set("FLAG_SUB_080_060_010")
    tlk:EndTalk()
    END_TALK_ACTION_AND_ZOOM("s080_060_001", true, true)
  end
end

function S080_060:Event_040()
  if Qst.Sub:Check(self.ID, self.STEP_005, self.STEP_010) then
    START_TALK_ACTION_AND_ZOOM("s080_060_001", true, true)
    tlk:StartTalkAndCancelDigimonRide()
    tlk:Message(base .. "260")
    tlk:Message(base .. "270")
    FadeOutWithWait(0, 15)
    Obj:new(NPC, "s080_060_001"):Invisible()
    FadeInWithWait(0, 15)
    Flg.Set("FLAG_SUB_080_060_011")
    tlk:EndTalk()
    END_TALK_ACTION_AND_ZOOM("s080_060_001", true, true)
  end
end

function S080_060:Event_050()
  if Qst.Sub:Check(self.ID, self.STEP_005, self.STEP_010) then
    START_TALK_ACTION_AND_ZOOM("s080_060_001", true, true)
    tlk:StartTalkAndCancelDigimonRide()
    tlk:Message(base .. "280")
    tlk:Message(base .. "290")
    FadeOutWithWait(0, 15)
    Obj:new(NPC, "s080_060_001"):Invisible()
    FadeInWithWait(0, 15)
    Flg.Set("FLAG_SUB_080_060_012")
    tlk:EndTalk()
    END_TALK_ACTION_AND_ZOOM("s080_060_001", true, true)
  end
end

function S080_060:Event_060()
  local beta_index = GetIndex(NPC, "s080_060_001")
  Field.ObjectLoadMotion(NPC, beta_index, "bn01")
  Field.ObjectLoadMotion(NPC, beta_index, "bn02")
  Field.ObjectLoadMotion(NPC, beta_index, "fq01")
  Field.ObjectLoadMotion(NPC, beta_index, "fq02")
  Field.ObjectLoadMotion(NPC, beta_index, "fe02")
  Field.ObjectLoadMotion(NPC, beta_index, "fe04")
  Field.ObjectLoadMotion(PLAYER, 1, "e002")
  Field.ObjectLoadMotion(PLAYER, 1, "e004")
  Field.ObjectLoadMotion(PLAYER, 1, "e004_01")
  Field.ObjectLoadMotion(PLAYER, 1, "e008")
  Field.ObjectLoadMotion(PLAYER, 1, "e010_01")
  Field.ObjectLoadMotion(PLAYER, 1, "e012")
  Field.ObjectLoadMotion(PLAYER, 1, "e013")
  Field.ObjectLoadMotion(PLAYER, 1, "e015")
  Field.ObjectLoadMotion(PLAYER, 1, "e018")
  if not Qst.Sub:Check(self.ID, self.STEP_010) then
    Cam.Inst:Set(-0.797, -0.05, -6.29, 0.54, 1.43, 3.51, default, 30)
    HideMinimap(true)
    HideGuide(true)
    tlk:StartTalkAndCancelDigimonRide()
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, beta_index, "fq02", 10, 10)
    tlk:Message(base .. "300")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, beta_index, "fq01", 10, 10)
    tlk:Message(base .. "310")
    local result = tlk:Select(3, base .. "320")
    WaitFrame(15)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, beta_index, "fq02", 10, 10)
    if result == RESULT_TALK00 then
      tlk:Message(base .. "330")
    end
    if result == RESULT_TALK01 then
      tlk:Message(base .. "340")
    end
    if result == RESULT_TALK02 then
      tlk:Message(base .. "350")
    end
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, beta_index, "fq01", 10, 10)
    tlk:Message(base .. "360")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, beta_index, "fe04", 10, 10)
    tlk:Message(base .. "370")
    local result = tlk:Select(3, base .. "380")
    WaitFrame(15)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, beta_index, "fq01", 10, 10)
    if result == RESULT_TALK00 then
      tlk:Message(base .. "390")
    end
    if result == RESULT_TALK01 then
      tlk:Message(base .. "400")
    end
    if result == RESULT_TALK02 then
      tlk:Message(base .. "410")
    end
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, beta_index, "fe04", 10, 10)
    tlk:Message(base .. "420")
    tlk:Message(base .. "430")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, beta_index, "fq01", 10, 10)
    tlk:Message(base .. "440")
    tlk:EndTalk()
    HideMinimap(false)
    HideGuide(false)
    Qst.Sub:Set(self.ID, self.STEP_010)
    Flg.Set("FLAG_SUB_080_060_002")
    Flg.Set("FLAG_SUB_080_060_009")
    Flg.Set("FLAG_SUB_080_060_010")
    Flg.Set("FLAG_SUB_080_060_011")
    Flg.Set("FLAG_SUB_080_060_012")
    Cam.Inst:Clear(30)
  elseif Qst.Sub:Check(self.ID, self.STEP_010, self.STEP_255) then
    Cam.Inst:Set(-0.797, -0.05, -6.29, 0.54, 1.43, 3.51, default, 30)
    tlk:StartTalkAndCancelDigimonRide()
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, beta_index, "fe04", 10, 10)
    tlk:Message(base .. "420")
    tlk:Message(base .. "430")
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, beta_index, "fq01", 10, 10)
    tlk:Message(base .. "440")
    Cam.Inst:Clear(30)
    tlk:EndTalk()
  end
end

function S080_060:Event_070()
  if Qst.Sub:Check(self.ID, self.STEP_010) then
    local gobri_index = GetIndex(NPC, "s080_060_002")
    local wendi_index = GetIndex(NPC, "s080_060_wendi")
    Field.ObjectLoadMotion(NPC, gobri_index, "bn01")
    Field.ObjectLoadMotion(NPC, gobri_index, "bn02")
    Field.ObjectLoadMotion(NPC, gobri_index, "fq01")
    Field.ObjectLoadMotion(NPC, gobri_index, "fq02")
    Field.ObjectLoadMotion(NPC, gobri_index, "fe02")
    Field.ObjectLoadMotion(NPC, gobri_index, "fe04")
    Field.ObjectLoadMotion(NPC, wendi_index, "bn01")
    Field.ObjectLoadMotion(NPC, wendi_index, "bn02")
    Field.ObjectLoadMotion(NPC, wendi_index, "fq01")
    Field.ObjectLoadMotion(NPC, wendi_index, "fq02")
    Field.ObjectLoadMotion(NPC, wendi_index, "fe02")
    Field.ObjectLoadMotion(NPC, wendi_index, "fe04")
    Field.ObjectLoadMotion(PLAYER, 1, "e002")
    Field.ObjectLoadMotion(PLAYER, 1, "e004")
    Field.ObjectLoadMotion(PLAYER, 1, "e004_01")
    Field.ObjectLoadMotion(PLAYER, 1, "e008")
    Field.ObjectLoadMotion(PLAYER, 1, "e010_01")
    Field.ObjectLoadMotion(PLAYER, 1, "e012")
    Field.ObjectLoadMotion(PLAYER, 1, "e013")
    Field.ObjectLoadMotion(PLAYER, 1, "e015")
    Field.ObjectLoadMotion(PLAYER, 1, "e018")
    tlk:StartTalkAndCancelDigimonRide()
    Obj:new(NPC, "npc_warp01"):Invisible(15)
    tlk:Message(base .. "700")
    local result = tlk:Select(2, base .. "660")
    WaitFrame(15)
    if result == RESULT_TALK00 then
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, gobri_index, "fq02", 10, 10)
      tlk:Message(base .. "710")
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, gobri_index, "fe04", 10, 10)
      tlk:Message(base .. "720")
      tlk:MessageClose()
    end
    if result == RESULT_TALK01 then
      tlk:EndTalk()
    else
      Flg.Set("FLAG_SUB_080_060_016")
      Field.SetMobTransparentFrontOfCamera(0, 10, 10, 10)
      Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
      END_TALK_ACTION_AND_ZOOM("s080_060_002", true, true)
      Cam.Inst:Set(25.4948, 1.05, -2.4032, 32.831, 1.551, 4.374, default, 0)
      Obj:new(PLAYER, ""):SetPos(30.24, 0, 2.0825, true)
      Obj:new(PLAYER, ""):SetRotationY(300, 0)
      Field_InvisibleFollowerAllGuest(0, 0, false)
      Field_InvisibleFollowerAllPartyMember(0, 0, false)
      FieldObjectSync(FOR_ALL, false)
      FadeInWithWaitNotFlgCheck(FADE_BLACK, FADE_TIME)
      Field.ObjectPlayMotion(PLAYER, 1, "e018", 15, true)
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, wendi_index, "fe02", 10, 10)
      tlk:Message(base .. "730")
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, gobri_index, "fq01", 10, 10)
      tlk:Message(base .. "740")
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, wendi_index, "fe04", 10, 10)
      tlk:Message(base .. "750")
      tlk:EndTalk(true)
      EncountFromField_WithNormalEffect(20800600, 10272, false)
    end
    Obj:new(NPC, "npc_warp01"):CancelInvisible(15)
  end
end

function S080_060:Event_075()
  if Flg.Check("FLAG_SUB_080_060_003") and not Flg.Check("FLAG_SUB_080_060_014") and not Flg.Check("FLAG_SUB_080_060_007") then
    local gob_bn02 = Motion.Object:new(NPC, "s080_060_002", "bn02")
    local wen_bn02 = Motion.Object:new(NPC, "s080_060_wendi", "bn02")
    local gob_bd02 = Motion.Object:new(NPC, "s080_060_002", "bd02")
    Field.ObjectLoadMotion(PLAYER, 1, "fn01_01")
    Field.ObjectLoadMotionBlend(PLAYER, 1, "blend01")
    Field.ObjectLoadMotion(PLAYER, 1, "e018")
    gob_bn02:Play(15, true)
    wen_bn02:Play(15, true)
    Obj:new(NPC, "npc_warp01"):Invisible(15)
    tlk:StartTalkAndCancelDigimonRide()
    tlk:Message(base .. "760")
    tlk:Message(base .. "770")
    Flg.Set("FLAG_SUB_080_060_014")
    tlk:MessageClose()
    Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
    Field.ObjectPlayMotion(PLAYER, 1, "fn01_01", 15, true)
    Cam.Inst:Clear(0)
    tlk:EndTalk()
    Field.ClearMobTransparentFrontOfCamera(0)
    Obj:new(NPC, "npc_warp01"):CancelInvisible(15)
    FieldObjectSync(FOR_ALL, false)
    FadeInWithWaitNotFlgCheck(FADE_BLACK, FADE_TIME)
  end
end

function S080_060:Event_080()
  if Qst.Sub:Check(self.ID, self.STEP_010) then
    local gobri_index = GetIndex(NPC, "s080_060_003")
    Field.ObjectLoadMotion(NPC, gobri_index, "bn01")
    Field.ObjectLoadMotion(NPC, gobri_index, "bn02")
    Field.ObjectLoadMotion(NPC, gobri_index, "fq01")
    Field.ObjectLoadMotion(NPC, gobri_index, "fq02")
    Field.ObjectLoadMotion(NPC, gobri_index, "fe02")
    Field.ObjectLoadMotion(NPC, gobri_index, "fe04")
    Field.ObjectLoadMotion(PLAYER, 1, "e002")
    Field.ObjectLoadMotion(PLAYER, 1, "e004")
    Field.ObjectLoadMotion(PLAYER, 1, "e004_01")
    Field.ObjectLoadMotion(PLAYER, 1, "e008")
    Field.ObjectLoadMotion(PLAYER, 1, "e010_01")
    Field.ObjectLoadMotion(PLAYER, 1, "e012")
    Field.ObjectLoadMotion(PLAYER, 1, "e013")
    Field.ObjectLoadMotion(PLAYER, 1, "e015")
    Field.ObjectLoadMotion(PLAYER, 1, "e018")
    tlk:StartTalkAndCancelDigimonRide()
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, gobri_index, "fe04", 10, 10)
    tlk:Message(base .. "650")
    local result = tlk:Select(2, base .. "660")
    WaitFrame(15)
    if result == RESULT_TALK00 then
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, gobri_index, "fe02", 10, 10)
      tlk:Message(base .. "670")
    end
    if result == RESULT_TALK01 then
      tlk:EndTalk()
    else
      tlk:EndTalk(true)
      EncountFromField_WithNormalEffect(20800601, 10272, false)
    end
  end
end

function S080_060:Event_085()
  if Flg.Check("FLAG_SUB_080_060_004") and not Flg.Check("FLAG_SUB_080_060_015") and not Flg.Check("FLAG_SUB_080_060_007") then
    local gobri_index = GetIndex(NPC, "s080_060_003")
    Field.ObjectLoadMotion(NPC, gobri_index, "bn01")
    Field.ObjectLoadMotion(NPC, gobri_index, "bn02")
    Field.ObjectLoadMotion(NPC, gobri_index, "fq01")
    Field.ObjectLoadMotion(NPC, gobri_index, "fq02")
    Field.ObjectLoadMotion(NPC, gobri_index, "fe02")
    Field.ObjectLoadMotion(NPC, gobri_index, "fe04")
    Field.ObjectLoadMotion(PLAYER, 1, "e002")
    Field.ObjectLoadMotion(PLAYER, 1, "e004")
    Field.ObjectLoadMotion(PLAYER, 1, "e004_01")
    Field.ObjectLoadMotion(PLAYER, 1, "e008")
    Field.ObjectLoadMotion(PLAYER, 1, "e010_01")
    Field.ObjectLoadMotion(PLAYER, 1, "e012")
    Field.ObjectLoadMotion(PLAYER, 1, "e013")
    Field.ObjectLoadMotion(PLAYER, 1, "e015")
    Field.ObjectLoadMotion(PLAYER, 1, "e018")
    local gob_bn02 = Motion.Object:new(NPC, "s080_060_003", "bn02")
    local gob_bd02 = Motion.Object:new(NPC, "s080_060_003", "bd02")
    Field.ObjectLoadMotion(PLAYER, 1, "fn01_01")
    Field.ObjectLoadMotionBlend(PLAYER, 1, "blend01")
    Field.ObjectLoadMotion(PLAYER, 1, "e018")
    local npc_index = GetIndex(NPC, "s080_060_003")
    local npc_pos = Field.ObjectGetPosition(NPC, npc_index)
    local npc_degree = Field.ObjectGetRotationY(NPC, npc_index)
    Field.LoadEffectScript("ef_b_van_100", 1)
    Field.ObjectPlayMotion(NPC, gobri_index, "bn02", 15, true)
    tlk:StartTalkAndCancelDigimonRide()
    START_TALK_ACTION_AND_ZOOM("s080_060_003", false, true)
    tlk:Message(base .. "680")
    tlk:Message(base .. "690")
    END_TALK_ACTION_AND_ZOOM("s080_060_002", false, true)
    Flg.Set("FLAG_SUB_080_060_015")
    tlk:EndTalk()
    Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
    FieldObjectSync(FOR_ALL, false)
    FadeInWithWaitNotFlgCheck(FADE_BLACK, FADE_TIME)
  end
end

function S080_060:Event_090()
  if Qst.Sub:Check(self.ID, self.STEP_010) then
    EncountFromField_WithNormalEffect(20800602, 10272, false)
  end
end

function S080_060:Event_100()
  if Qst.Sub:Check(self.ID, self.STEP_010) then
    EncountFromField_WithNormalEffect(20800603, 10272, false)
  end
end

function S080_060:Event_110()
  local gobri_index = GetIndex(NPC, "s080_060_001")
  local npc_index_2 = GetIndex(NPC, "s080_060_gob2")
  local npc_index_3 = GetIndex(NPC, "s080_060_gob3")
  local gob_br01_1 = Motion.Object:new(NPC, "s080_060_gob2", "br01")
  local gob_br01_2 = Motion.Object:new(NPC, "s080_060_gob3", "br01")
  local gob_bn01_1 = Motion.Object:new(NPC, "s080_060_gob2", "bn01")
  local gob_bn01_2 = Motion.Object:new(NPC, "s080_060_gob3", "bn01")
  Field.ObjectLoadMotion(NPC, gobri_index, "bn01")
  Field.ObjectLoadMotion(NPC, gobri_index, "bn02")
  Field.ObjectLoadMotion(NPC, gobri_index, "fq01")
  Field.ObjectLoadMotion(NPC, gobri_index, "fq02")
  Field.ObjectLoadMotion(NPC, gobri_index, "fe02")
  Field.ObjectLoadMotion(NPC, gobri_index, "fe04")
  Field.ObjectLoadMotion(NPC, npc_index_2, "bn01")
  Field.ObjectLoadMotion(NPC, npc_index_2, "fq01")
  Field.ObjectLoadMotion(NPC, npc_index_2, "fe02")
  Field.ObjectLoadMotion(NPC, npc_index_2, "fe04")
  Field.ObjectLoadMotion(NPC, npc_index_3, "bn01")
  Field.ObjectLoadMotion(NPC, npc_index_3, "fq01")
  Field.ObjectLoadMotion(NPC, npc_index_3, "fe02")
  Field.ObjectLoadMotion(NPC, npc_index_3, "fe04")
  Field.ObjectLoadMotion(PLAYER, 1, "e002")
  if Qst.Sub:Check(self.ID, self.STEP_010) then
    tlk:StartTalkAndCancelDigimonRide()
    WaitFrame(15)
    Field.ObjectPlayMotionWithStartMoveMotion(NPC, gobri_index, "fq01", 10, 10)
    tlk:Message(base .. "780")
    local result = tlk:Select(2, base .. "660")
    WaitFrame(15)
    if result == RESULT_TALK00 then
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, gobri_index, "fq02", 10, 10)
      tlk:Message(base .. "790")
    end
    if result == RESULT_TALK01 then
      tlk:EndTalk()
    else
      Obj:new(NPC, "s080_060_gob2"):SetRotationYToPlayer(15)
      Obj:new(NPC, "s080_060_gob3"):SetRotationYToPlayer(15)
      gob_br01_1:Play(10, false)
      gob_br01_2:Play(10, false)
      WaitFrame(15)
      gob_bn01_1:Play(10, false)
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, npc_index_2, "fq01", 10, 10)
      gob_bn01_2:Play(10, false)
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, npc_index_3, "fe04", 10, 10)
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, gobri_index, "fe02", 10, 10)
      tlk:Message(base .. "800")
      tlk:EndTalk(true)
      EncountFromField_WithNormalEffect(20800604, 10272, false)
    end
  end
end

function S080_060:Event_120()
  if Qst.Sub:Check(self.ID, self.STEP_010, self.STEP_015) then
    local gob_bn02 = Motion.Object:new(NPC, "s080_060_001", "bn02")
    local gob_bd02 = Motion.Object:new(NPC, "s080_060_001", "bd02")
    local gob_bd02_2 = Motion.Object:new(NPC, "s080_060_gob2", "bd02")
    local gob_bd02_3 = Motion.Object:new(NPC, "s080_060_gob3", "bd02")
    Field.ObjectLoadMotion(PLAYER, 1, "fn01_01")
    Field.ObjectLoadMotionBlend(PLAYER, 1, "blend01")
    Field.ObjectLoadMotion(PLAYER, 1, "e018")
    local npc_index = GetIndex(NPC, "s080_060_001")
    local npc_index_2 = GetIndex(NPC, "s080_060_gob2")
    local npc_index_3 = GetIndex(NPC, "s080_060_gob3")
    local npc_pos = Field.ObjectGetPosition(NPC, npc_index)
    local npc_pos_2 = Field.ObjectGetPosition(NPC, npc_index_2)
    local npc_pos_3 = Field.ObjectGetPosition(NPC, npc_index_3)
    local npc_degree = Field.ObjectGetRotationY(NPC, npc_index)
    Field.LoadEffectScript("ef_b_van_100", 1)
    HideMinimap(true)
    HideGuide(true)
    tlk:StartTalkAndCancelDigimonRide()
    Obj:new(NPC, "s080_060_001"):SetRotationYToPlayer(15)
    gob_bd02:Play(10, false)
    gob_bd02_2:Play(10, false)
    gob_bd02_3:Play(10, false)
    START_TALK_ACTION_AND_ZOOM("s080_060_001", false, true)
    tlk:Message(base .. "810")
    PlayEffectScript("ef_b_van_100", npc_pos.x, npc_pos.y, npc_pos.z, npc_degree, 0.5)
    Field.ObjectInvisible(NPC, npc_index, 1, 30, false)
    WaitFrame(5)
    PlayEffectScript("ef_b_van_100", npc_pos_2.x, npc_pos_2.y, npc_pos_2.z, npc_degree, 0.5)
    Field.ObjectInvisible(NPC, npc_index_2, 1, 30, false)
    WaitFrame(3)
    PlayEffectScript("ef_b_van_100", npc_pos_3.x, npc_pos_3.y, npc_pos_3.z, npc_degree, 0.5)
    Field.ObjectInvisible(NPC, npc_index_3, 1, 30, false)
    END_TALK_ACTION_AND_ZOOM("s080_060_001", false, true)
    Flg.Set("FLAG_SUB_080_060_015")
    Obj:new(NPC, "s080_060_001"):Invisible()
    Flg.Set("FLAG_SUB_080_060_007")
    Flg.Set("FLAG_SUB_080_060_003")
    Flg.Set("FLAG_SUB_080_060_004")
    Flg.Set("FLAG_SUB_080_060_005")
    Flg.Set("FLAG_SUB_080_060_006")
    Flg.Set("FLAG_SUB_080_060_008")
    FieldObjectSync(FOR_ALL, false)
    INFO_GET_ITEM(780, 1)
    tlk:EndTalk()
    HideMinimap(false)
    HideGuide(false)
    Qst.Sub:Set(self.ID, self.STEP_015)
  end
end

function S080_060:Event_130()
  local luna_index = GetIndex(NPC, "s080_060_003")
  Field.ObjectLoadMotion(NPC, luna_index, "bn01")
  Field.ObjectLoadMotion(NPC, luna_index, "e002")
  Field.ObjectLoadMotion(NPC, luna_index, "e004")
  Field.ObjectLoadMotion(NPC, luna_index, "e005")
  Field.ObjectLoadMotion(NPC, luna_index, "e006")
  Field.ObjectLoadMotion(NPC, luna_index, "e007")
  Field.ObjectLoadMotion(NPC, luna_index, "e008")
  Field.ObjectLoadMotion(NPC, luna_index, "br01")
  Field.ObjectLoadMotion(NPC, luna_index, "fe02")
  Field.ObjectLoadMotion(NPC, luna_index, "fq01")
  Field.ObjectLoadMotion(NPC, luna_index, "fq02")
  Field.ObjectLoadMotion(PLAYER, 1, "e002")
  Field.ObjectLoadMotion(PLAYER, 1, "e004")
  Field.ObjectLoadMotion(PLAYER, 1, "e004_01")
  Field.ObjectLoadMotion(PLAYER, 1, "e008")
  Field.ObjectLoadMotion(PLAYER, 1, "e010_01")
  Field.ObjectLoadMotion(PLAYER, 1, "e012")
  Field.ObjectLoadMotion(PLAYER, 1, "e013")
  Field.ObjectLoadMotion(PLAYER, 1, "e015")
  Field.ObjectLoadMotion(PLAYER, 1, "e018")
  Field.ObjectLoadMotion(PLAYER, 1, "e019")
  if Qst.Sub:Check(self.ID, self.STEP_015) then
    Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
    Cam.Inst:Set(7.72, 3.86, 51.51, -1.96, 2.98, 49.2, default, 0)
    Obj:new(PLAYER, ""):SetPos(4.67, 2.0567, 48.57, true)
    Obj:new(PLAYER, ""):SetRotationY(130, 0)
    FadeInWithWaitNotFlgCheck(FADE_BLACK, FADE_TIME)
    HideMinimap(true)
    HideGuide(true)
    tlk:StartTalkAndCancelDigimonRide()
    local result = tlk:Select(2, base .. "460")
    WaitFrame(15)
    if result == RESULT_TALK00 then
      tlk:Message(base .. "470")
      Flg.Set("FLAG_SUB_080_060_013")
      Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
      FieldObjectSync(NPC, false)
      FadeInWithWaitNotFlgCheck(FADE_BLACK, FADE_TIME)
      Field.ObjectLookAtTheObject(PLAYER, 1, NPC, luna_index, 15)
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, luna_index, "e005", 10, 10)
      tlk:Message(base .. "480")
      tlk:Message(base .. "490")
      Field.ObjectLookAtTheObject(NPC, luna_index, PLAYER, 1, 15)
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, luna_index, "e002", 10, 10)
      tlk:Message(base .. "500")
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, luna_index, "e008", 10, 10)
      tlk:Message(base .. "510")
      Field.ObjectResetAim(PLAYER, 1, 15)
      INFO_RELEASE_ITEM(780, 1)
      tlk:Message(base .. "520")
      tlk:Message(base .. "530")
      tlk:MessageClose()
      Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
      WaitFrame(30)
      PlaySE(200015, 100)
      WaitFrame(30)
      FadeInWithWaitNotFlgCheck(FADE_BLACK, FADE_TIME)
      tlk:Message(base .. "540")
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, luna_index, "e004", 10, 10)
      tlk:Message(base .. "550")
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, luna_index, "e002", 10, 10)
      tlk:Message(base .. "560")
      tlk:Message(base .. "570")
      Obj:new(NPC, "s080_060_002"):SetRotationY(-130, 15)
      Field.ObjectPlayMotion(NPC, luna_index, "br01", 15, true)
      Field.ObjectLookAtTheObject(PLAYER, 1, NPC, luna_index, 15)
      WaitFrame(15)
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, luna_index, "e004", 10, 10)
      tlk:Message(base .. "580")
      Field.ObjectPlayMotionWithStartMoveMotion(NPC, luna_index, "e002", 10, 10)
      tlk:Message(base .. "590")
      tlk:Message(base .. "600")
      tlk:MessageClose()
      Fade_OutNoLoadingWithWait(FADE_BLACK, FADE_TIME)
      Obj:new(NPC, "s080_060_001"):Invisible()
      Obj:new(NPC, "s080_060_003"):Invisible()
      Field.ObjectResetAim(PLAYER, 1, 0)
      local start_sound = Sound.PlaySE(403036, 100)
      WaitFrame(90)
      Sound.StopSE(start_sound, 2)
      WaitFrame(30)
      FadeInWithWaitNotFlgCheck(FADE_BLACK, FADE_TIME)
      tlk:EndTalk()
      HideMinimap(false)
      HideGuide(false)
      Qst.Sub:End(self.ID, self.STEP_255)
      Obj:new(OGIM, "s080_blimp_col_2"):Invisible()
    end
    if result == RESULT_TALK01 then
      tlk:EndTalk()
      HideMinimap(false)
      HideGuide(false)
    else
    end
  elseif Qst.Sub:Check(self.ID, self.STEP_005, self.STEP_015) then
    Cam.Inst:Set(7.72, 3.86, 51.51, -1.96, 2.98, 49.2, default, 30)
    tlk:StartTalkAndCancelDigimonRide()
    tlk:Message(base .. "200")
    tlk:EndTalk()
  end
  Cam.Inst:Clear(30)
end
